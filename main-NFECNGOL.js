import{$ as ko,$a as oe,$b as ge,A as Kc,Aa as rd,Ab as U,Ac as Ir,B as Zc,Ba as nn,Bb as T,C as U0,Ca as Pa,Cb as Bt,Cc as vn,D as Qc,Da as So,Db as Ke,Dc as Hs,E as gn,Ea as Mo,Eb as km,Ec as dr,F as Co,Fa as ey,Fb as Ai,Fc as My,G as Jc,Ga as ty,Gb as Le,Gc as Ay,H as ym,Ha as iy,Hb as Ee,I as j0,Ia as ny,Ib as Se,J as xm,Ja as ry,Jb as gy,K as ed,Ka as sy,Kb as _y,L as Ri,La as oy,Lb as Ut,M as ns,Ma as bn,Mb as F,N as ot,Na as sd,Nb as Te,O as G0,Oa as Ao,Ob as Ze,P as Ar,Pa as Vs,Pb as by,Q as mi,Qa as ay,Qb as Re,R as Mi,Ra as A,Rb as Oe,S as se,Sa as Ra,Sb as Fe,T as xe,Ta as ss,Tb as et,U as te,Ua as On,Ub as os,V as Je,Va as xi,Vb as od,W as C,Wa as we,Wb as vy,X as $0,Xa as ly,Xb as sn,Y as td,Ya as lr,Yb as yy,Z as Ia,Za as cy,Zb as $e,_ as q0,_a as Cm,_b as xy,a as J,aa as Y0,ab as Ce,ac as ti,b as Ue,ba as Et,bb as _e,bc as Tr,ca as H,cb as xt,cc as Kn,d as BD,da as W,db as dy,dc as ad,e as L0,ea as zi,eb as at,ec as ld,f as Ls,fa as id,fb as X,fc as To,g as q,ga as yi,gb as hy,gc as wy,h as N0,ha as ft,hb as zs,hc as Cy,i as ei,ia as ar,ib as ye,ic as Ve,j as Rn,ja as X0,jb as R,jc as ky,k as ne,ka as K0,kb as fi,kc as cd,l as is,la as fe,lb as ce,lc as Io,m as B0,ma as ke,mb as rn,mc as Lt,n as $c,na as Ns,nb as uy,nc as Vt,o as V0,oa as ve,ob as gt,oc as dd,p as qc,pa as wm,pb as py,pc as hd,q as Pi,qa as Bs,qb as my,qc as ud,r as Yc,ra as _n,rb as fy,rc as as,s as Ot,sa as nd,sb as w,sc as lt,t as z0,ta as Z0,tb as E,tc as Ey,u as H0,ua as Eo,ub as re,uc as Sy,v as wo,va as Q0,vb as wi,vc as Em,w as Xc,wa as rs,wb as Ci,wc as pd,x as W0,xa as Ft,xb as cr,y as tn,ya as Da,yb as ie,z as ai,za as J0,zb as Fn,zc as ls}from"./chunk-JTG6I7RV.js";var F_=BD((na,Ul)=>{"use strict";(function(){var r,t="4.17.21",e=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",n="Expected a function",s="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",l=500,d="__lodash_placeholder__",h=1,u=2,m=4,f=1,_=2,y=1,v=2,x=4,S=8,I=16,P=32,B=64,N=128,z=256,j=512,Q=30,ee="...",ae=800,he=16,ct=1,Ct=2,st=3,kt=1/0,ue=9007199254740991,Me=17976931348623157e292,vt=NaN,dt=4294967295,tr=dt-1,qt=dt>>>1,Pt=[["ary",N],["bind",y],["bindKey",v],["curry",S],["curryRight",I],["flip",j],["partial",P],["partialRight",B],["rearg",z]],ut="[object Arguments]",Xi="[object Array]",jn="[object AsyncFunction]",Ki="[object Boolean]",Tt="[object Date]",da="[object DOMException]",ir="[object Error]",nr="[object Function]",oo="[object GeneratorFunction]",Li="[object Map]",Gr="[object Number]",Qu="[object Null]",br="[object Object]",ob="[object Promise]",i1="[object Proxy]",ha="[object RegExp]",Gn="[object Set]",ua="[object String]",nc="[object Symbol]",n1="[object Undefined]",pa="[object WeakMap]",r1="[object WeakSet]",ma="[object ArrayBuffer]",ao="[object DataView]",Ju="[object Float32Array]",ep="[object Float64Array]",tp="[object Int8Array]",ip="[object Int16Array]",np="[object Int32Array]",rp="[object Uint8Array]",sp="[object Uint8ClampedArray]",op="[object Uint16Array]",ap="[object Uint32Array]",s1=/\b__p \+= '';/g,o1=/\b(__p \+=) '' \+/g,a1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ab=/&(?:amp|lt|gt|quot|#39);/g,lb=/[&<>"']/g,l1=RegExp(ab.source),c1=RegExp(lb.source),d1=/<%-([\s\S]+?)%>/g,h1=/<%([\s\S]+?)%>/g,cb=/<%=([\s\S]+?)%>/g,u1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,p1=/^\w*$/,m1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lp=/[\\^$.*+?()[\]{}|]/g,f1=RegExp(lp.source),cp=/^\s+/,g1=/\s/,_1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,b1=/\{\n\/\* \[wrapped with (.+)\] \*/,v1=/,? & /,y1=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,x1=/[()=,{}\[\]\/\s]/,w1=/\\(\\)?/g,C1=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,db=/\w*$/,k1=/^[-+]0x[0-9a-f]+$/i,E1=/^0b[01]+$/i,S1=/^\[object .+?Constructor\]$/,M1=/^0o[0-7]+$/i,A1=/^(?:0|[1-9]\d*)$/,T1=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rc=/($^)/,I1=/['\n\r\u2028\u2029\\]/g,sc="\\ud800-\\udfff",D1="\\u0300-\\u036f",P1="\\ufe20-\\ufe2f",R1="\\u20d0-\\u20ff",hb=D1+P1+R1,ub="\\u2700-\\u27bf",pb="a-z\\xdf-\\xf6\\xf8-\\xff",O1="\\xac\\xb1\\xd7\\xf7",F1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",L1="\\u2000-\\u206f",N1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mb="A-Z\\xc0-\\xd6\\xd8-\\xde",fb="\\ufe0e\\ufe0f",gb=O1+F1+L1+N1,dp="['\u2019]",B1="["+sc+"]",_b="["+gb+"]",oc="["+hb+"]",bb="\\d+",V1="["+ub+"]",vb="["+pb+"]",yb="[^"+sc+gb+bb+ub+pb+mb+"]",hp="\\ud83c[\\udffb-\\udfff]",z1="(?:"+oc+"|"+hp+")",xb="[^"+sc+"]",up="(?:\\ud83c[\\udde6-\\uddff]){2}",pp="[\\ud800-\\udbff][\\udc00-\\udfff]",lo="["+mb+"]",wb="\\u200d",Cb="(?:"+vb+"|"+yb+")",H1="(?:"+lo+"|"+yb+")",kb="(?:"+dp+"(?:d|ll|m|re|s|t|ve))?",Eb="(?:"+dp+"(?:D|LL|M|RE|S|T|VE))?",Sb=z1+"?",Mb="["+fb+"]?",W1="(?:"+wb+"(?:"+[xb,up,pp].join("|")+")"+Mb+Sb+")*",U1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",j1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ab=Mb+Sb+W1,G1="(?:"+[V1,up,pp].join("|")+")"+Ab,$1="(?:"+[xb+oc+"?",oc,up,pp,B1].join("|")+")",q1=RegExp(dp,"g"),Y1=RegExp(oc,"g"),mp=RegExp(hp+"(?="+hp+")|"+$1+Ab,"g"),X1=RegExp([lo+"?"+vb+"+"+kb+"(?="+[_b,lo,"$"].join("|")+")",H1+"+"+Eb+"(?="+[_b,lo+Cb,"$"].join("|")+")",lo+"?"+Cb+"+"+kb,lo+"+"+Eb,j1,U1,bb,G1].join("|"),"g"),K1=RegExp("["+wb+sc+hb+fb+"]"),Z1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Q1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],J1=-1,Rt={};Rt[Ju]=Rt[ep]=Rt[tp]=Rt[ip]=Rt[np]=Rt[rp]=Rt[sp]=Rt[op]=Rt[ap]=!0,Rt[ut]=Rt[Xi]=Rt[ma]=Rt[Ki]=Rt[ao]=Rt[Tt]=Rt[ir]=Rt[nr]=Rt[Li]=Rt[Gr]=Rt[br]=Rt[ha]=Rt[Gn]=Rt[ua]=Rt[pa]=!1;var It={};It[ut]=It[Xi]=It[ma]=It[ao]=It[Ki]=It[Tt]=It[Ju]=It[ep]=It[tp]=It[ip]=It[np]=It[Li]=It[Gr]=It[br]=It[ha]=It[Gn]=It[ua]=It[nc]=It[rp]=It[sp]=It[op]=It[ap]=!0,It[ir]=It[nr]=It[pa]=!1;var eE={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},tE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},iE={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nE={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},rE=parseFloat,sE=parseInt,Tb=typeof global=="object"&&global&&global.Object===Object&&global,oE=typeof self=="object"&&self&&self.Object===Object&&self,bi=Tb||oE||Function("return this")(),fp=typeof na=="object"&&na&&!na.nodeType&&na,Ms=fp&&typeof Ul=="object"&&Ul&&!Ul.nodeType&&Ul,Ib=Ms&&Ms.exports===fp,gp=Ib&&Tb.process,En=function(){try{var L=Ms&&Ms.require&&Ms.require("util").types;return L||gp&&gp.binding&&gp.binding("util")}catch{}}(),Db=En&&En.isArrayBuffer,Pb=En&&En.isDate,Rb=En&&En.isMap,Ob=En&&En.isRegExp,Fb=En&&En.isSet,Lb=En&&En.isTypedArray;function dn(L,$,G){switch(G.length){case 0:return L.call($);case 1:return L.call($,G[0]);case 2:return L.call($,G[0],G[1]);case 3:return L.call($,G[0],G[1],G[2])}return L.apply($,G)}function aE(L,$,G,pe){for(var Be=-1,pt=L==null?0:L.length;++Be<pt;){var ui=L[Be];$(pe,ui,G(ui),L)}return pe}function Sn(L,$){for(var G=-1,pe=L==null?0:L.length;++G<pe&&$(L[G],G,L)!==!1;);return L}function lE(L,$){for(var G=L==null?0:L.length;G--&&$(L[G],G,L)!==!1;);return L}function Nb(L,$){for(var G=-1,pe=L==null?0:L.length;++G<pe;)if(!$(L[G],G,L))return!1;return!0}function $r(L,$){for(var G=-1,pe=L==null?0:L.length,Be=0,pt=[];++G<pe;){var ui=L[G];$(ui,G,L)&&(pt[Be++]=ui)}return pt}function ac(L,$){var G=L==null?0:L.length;return!!G&&co(L,$,0)>-1}function _p(L,$,G){for(var pe=-1,Be=L==null?0:L.length;++pe<Be;)if(G($,L[pe]))return!0;return!1}function Nt(L,$){for(var G=-1,pe=L==null?0:L.length,Be=Array(pe);++G<pe;)Be[G]=$(L[G],G,L);return Be}function qr(L,$){for(var G=-1,pe=$.length,Be=L.length;++G<pe;)L[Be+G]=$[G];return L}function bp(L,$,G,pe){var Be=-1,pt=L==null?0:L.length;for(pe&&pt&&(G=L[++Be]);++Be<pt;)G=$(G,L[Be],Be,L);return G}function cE(L,$,G,pe){var Be=L==null?0:L.length;for(pe&&Be&&(G=L[--Be]);Be--;)G=$(G,L[Be],Be,L);return G}function vp(L,$){for(var G=-1,pe=L==null?0:L.length;++G<pe;)if($(L[G],G,L))return!0;return!1}var dE=yp("length");function hE(L){return L.split("")}function uE(L){return L.match(y1)||[]}function Bb(L,$,G){var pe;return G(L,function(Be,pt,ui){if($(Be,pt,ui))return pe=pt,!1}),pe}function lc(L,$,G,pe){for(var Be=L.length,pt=G+(pe?1:-1);pe?pt--:++pt<Be;)if($(L[pt],pt,L))return pt;return-1}function co(L,$,G){return $===$?kE(L,$,G):lc(L,Vb,G)}function pE(L,$,G,pe){for(var Be=G-1,pt=L.length;++Be<pt;)if(pe(L[Be],$))return Be;return-1}function Vb(L){return L!==L}function zb(L,$){var G=L==null?0:L.length;return G?wp(L,$)/G:vt}function yp(L){return function($){return $==null?r:$[L]}}function xp(L){return function($){return L==null?r:L[$]}}function Hb(L,$,G,pe,Be){return Be(L,function(pt,ui,Mt){G=pe?(pe=!1,pt):$(G,pt,ui,Mt)}),G}function mE(L,$){var G=L.length;for(L.sort($);G--;)L[G]=L[G].value;return L}function wp(L,$){for(var G,pe=-1,Be=L.length;++pe<Be;){var pt=$(L[pe]);pt!==r&&(G=G===r?pt:G+pt)}return G}function Cp(L,$){for(var G=-1,pe=Array(L);++G<L;)pe[G]=$(G);return pe}function fE(L,$){return Nt($,function(G){return[G,L[G]]})}function Wb(L){return L&&L.slice(0,$b(L)+1).replace(cp,"")}function hn(L){return function($){return L($)}}function kp(L,$){return Nt($,function(G){return L[G]})}function fa(L,$){return L.has($)}function Ub(L,$){for(var G=-1,pe=L.length;++G<pe&&co($,L[G],0)>-1;);return G}function jb(L,$){for(var G=L.length;G--&&co($,L[G],0)>-1;);return G}function gE(L,$){for(var G=L.length,pe=0;G--;)L[G]===$&&++pe;return pe}var _E=xp(eE),bE=xp(tE);function vE(L){return"\\"+nE[L]}function yE(L,$){return L==null?r:L[$]}function ho(L){return K1.test(L)}function xE(L){return Z1.test(L)}function wE(L){for(var $,G=[];!($=L.next()).done;)G.push($.value);return G}function Ep(L){var $=-1,G=Array(L.size);return L.forEach(function(pe,Be){G[++$]=[Be,pe]}),G}function Gb(L,$){return function(G){return L($(G))}}function Yr(L,$){for(var G=-1,pe=L.length,Be=0,pt=[];++G<pe;){var ui=L[G];(ui===$||ui===d)&&(L[G]=d,pt[Be++]=G)}return pt}function cc(L){var $=-1,G=Array(L.size);return L.forEach(function(pe){G[++$]=pe}),G}function CE(L){var $=-1,G=Array(L.size);return L.forEach(function(pe){G[++$]=[pe,pe]}),G}function kE(L,$,G){for(var pe=G-1,Be=L.length;++pe<Be;)if(L[pe]===$)return pe;return-1}function EE(L,$,G){for(var pe=G+1;pe--;)if(L[pe]===$)return pe;return pe}function uo(L){return ho(L)?ME(L):dE(L)}function $n(L){return ho(L)?AE(L):hE(L)}function $b(L){for(var $=L.length;$--&&g1.test(L.charAt($)););return $}var SE=xp(iE);function ME(L){for(var $=mp.lastIndex=0;mp.test(L);)++$;return $}function AE(L){return L.match(mp)||[]}function TE(L){return L.match(X1)||[]}var IE=function L($){$=$==null?bi:Xr.defaults(bi.Object(),$,Xr.pick(bi,Q1));var G=$.Array,pe=$.Date,Be=$.Error,pt=$.Function,ui=$.Math,Mt=$.Object,Sp=$.RegExp,DE=$.String,Mn=$.TypeError,dc=G.prototype,PE=pt.prototype,po=Mt.prototype,hc=$["__core-js_shared__"],uc=PE.toString,yt=po.hasOwnProperty,RE=0,qb=function(){var a=/[^.]+$/.exec(hc&&hc.keys&&hc.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),pc=po.toString,OE=uc.call(Mt),FE=bi._,LE=Sp("^"+uc.call(yt).replace(lp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mc=Ib?$.Buffer:r,Kr=$.Symbol,fc=$.Uint8Array,Yb=mc?mc.allocUnsafe:r,gc=Gb(Mt.getPrototypeOf,Mt),Xb=Mt.create,Kb=po.propertyIsEnumerable,_c=dc.splice,Zb=Kr?Kr.isConcatSpreadable:r,ga=Kr?Kr.iterator:r,As=Kr?Kr.toStringTag:r,bc=function(){try{var a=Rs(Mt,"defineProperty");return a({},"",{}),a}catch{}}(),NE=$.clearTimeout!==bi.clearTimeout&&$.clearTimeout,BE=pe&&pe.now!==bi.Date.now&&pe.now,VE=$.setTimeout!==bi.setTimeout&&$.setTimeout,vc=ui.ceil,yc=ui.floor,Mp=Mt.getOwnPropertySymbols,zE=mc?mc.isBuffer:r,Qb=$.isFinite,HE=dc.join,WE=Gb(Mt.keys,Mt),pi=ui.max,Ii=ui.min,UE=pe.now,jE=$.parseInt,Jb=ui.random,GE=dc.reverse,Ap=Rs($,"DataView"),_a=Rs($,"Map"),Tp=Rs($,"Promise"),mo=Rs($,"Set"),ba=Rs($,"WeakMap"),va=Rs(Mt,"create"),xc=ba&&new ba,fo={},$E=Os(Ap),qE=Os(_a),YE=Os(Tp),XE=Os(mo),KE=Os(ba),wc=Kr?Kr.prototype:r,ya=wc?wc.valueOf:r,ev=wc?wc.toString:r;function k(a){if(Yt(a)&&!We(a)&&!(a instanceof tt)){if(a instanceof An)return a;if(yt.call(a,"__wrapped__"))return t0(a)}return new An(a)}var go=function(){function a(){}return function(c){if(!Wt(c))return{};if(Xb)return Xb(c);a.prototype=c;var p=new a;return a.prototype=r,p}}();function Cc(){}function An(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=r}k.templateSettings={escape:d1,evaluate:h1,interpolate:cb,variable:"",imports:{_:k}},k.prototype=Cc.prototype,k.prototype.constructor=k,An.prototype=go(Cc.prototype),An.prototype.constructor=An;function tt(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=dt,this.__views__=[]}function ZE(){var a=new tt(this.__wrapped__);return a.__actions__=Zi(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Zi(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Zi(this.__views__),a}function QE(){if(this.__filtered__){var a=new tt(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function JE(){var a=this.__wrapped__.value(),c=this.__dir__,p=We(a),g=c<0,b=p?a.length:0,M=hM(0,b,this.__views__),D=M.start,O=M.end,V=O-D,Y=g?O:D-1,K=this.__iteratees__,Z=K.length,le=0,be=Ii(V,this.__takeCount__);if(!p||!g&&b==V&&be==V)return kv(a,this.__actions__);var De=[];e:for(;V--&&le<be;){Y+=c;for(var qe=-1,Pe=a[Y];++qe<Z;){var Qe=K[qe],it=Qe.iteratee,mn=Qe.type,Vi=it(Pe);if(mn==Ct)Pe=Vi;else if(!Vi){if(mn==ct)continue e;break e}}De[le++]=Pe}return De}tt.prototype=go(Cc.prototype),tt.prototype.constructor=tt;function Ts(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var g=a[c];this.set(g[0],g[1])}}function eS(){this.__data__=va?va(null):{},this.size=0}function tS(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function iS(a){var c=this.__data__;if(va){var p=c[a];return p===o?r:p}return yt.call(c,a)?c[a]:r}function nS(a){var c=this.__data__;return va?c[a]!==r:yt.call(c,a)}function rS(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=va&&c===r?o:c,this}Ts.prototype.clear=eS,Ts.prototype.delete=tS,Ts.prototype.get=iS,Ts.prototype.has=nS,Ts.prototype.set=rS;function vr(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var g=a[c];this.set(g[0],g[1])}}function sS(){this.__data__=[],this.size=0}function oS(a){var c=this.__data__,p=kc(c,a);if(p<0)return!1;var g=c.length-1;return p==g?c.pop():_c.call(c,p,1),--this.size,!0}function aS(a){var c=this.__data__,p=kc(c,a);return p<0?r:c[p][1]}function lS(a){return kc(this.__data__,a)>-1}function cS(a,c){var p=this.__data__,g=kc(p,a);return g<0?(++this.size,p.push([a,c])):p[g][1]=c,this}vr.prototype.clear=sS,vr.prototype.delete=oS,vr.prototype.get=aS,vr.prototype.has=lS,vr.prototype.set=cS;function yr(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var g=a[c];this.set(g[0],g[1])}}function dS(){this.size=0,this.__data__={hash:new Ts,map:new(_a||vr),string:new Ts}}function hS(a){var c=Lc(this,a).delete(a);return this.size-=c?1:0,c}function uS(a){return Lc(this,a).get(a)}function pS(a){return Lc(this,a).has(a)}function mS(a,c){var p=Lc(this,a),g=p.size;return p.set(a,c),this.size+=p.size==g?0:1,this}yr.prototype.clear=dS,yr.prototype.delete=hS,yr.prototype.get=uS,yr.prototype.has=pS,yr.prototype.set=mS;function Is(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new yr;++c<p;)this.add(a[c])}function fS(a){return this.__data__.set(a,o),this}function gS(a){return this.__data__.has(a)}Is.prototype.add=Is.prototype.push=fS,Is.prototype.has=gS;function qn(a){var c=this.__data__=new vr(a);this.size=c.size}function _S(){this.__data__=new vr,this.size=0}function bS(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function vS(a){return this.__data__.get(a)}function yS(a){return this.__data__.has(a)}function xS(a,c){var p=this.__data__;if(p instanceof vr){var g=p.__data__;if(!_a||g.length<e-1)return g.push([a,c]),this.size=++p.size,this;p=this.__data__=new yr(g)}return p.set(a,c),this.size=p.size,this}qn.prototype.clear=_S,qn.prototype.delete=bS,qn.prototype.get=vS,qn.prototype.has=yS,qn.prototype.set=xS;function tv(a,c){var p=We(a),g=!p&&Fs(a),b=!p&&!g&&ts(a),M=!p&&!g&&!b&&yo(a),D=p||g||b||M,O=D?Cp(a.length,DE):[],V=O.length;for(var Y in a)(c||yt.call(a,Y))&&!(D&&(Y=="length"||b&&(Y=="offset"||Y=="parent")||M&&(Y=="buffer"||Y=="byteLength"||Y=="byteOffset")||kr(Y,V)))&&O.push(Y);return O}function iv(a){var c=a.length;return c?a[zp(0,c-1)]:r}function wS(a,c){return Nc(Zi(a),Ds(c,0,a.length))}function CS(a){return Nc(Zi(a))}function Ip(a,c,p){(p!==r&&!Yn(a[c],p)||p===r&&!(c in a))&&xr(a,c,p)}function xa(a,c,p){var g=a[c];(!(yt.call(a,c)&&Yn(g,p))||p===r&&!(c in a))&&xr(a,c,p)}function kc(a,c){for(var p=a.length;p--;)if(Yn(a[p][0],c))return p;return-1}function kS(a,c,p,g){return Zr(a,function(b,M,D){c(g,b,p(b),D)}),g}function nv(a,c){return a&&sr(c,vi(c),a)}function ES(a,c){return a&&sr(c,Ji(c),a)}function xr(a,c,p){c=="__proto__"&&bc?bc(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function Dp(a,c){for(var p=-1,g=c.length,b=G(g),M=a==null;++p<g;)b[p]=M?r:hm(a,c[p]);return b}function Ds(a,c,p){return a===a&&(p!==r&&(a=a<=p?a:p),c!==r&&(a=a>=c?a:c)),a}function Tn(a,c,p,g,b,M){var D,O=c&h,V=c&u,Y=c&m;if(p&&(D=b?p(a,g,b,M):p(a)),D!==r)return D;if(!Wt(a))return a;var K=We(a);if(K){if(D=pM(a),!O)return Zi(a,D)}else{var Z=Di(a),le=Z==nr||Z==oo;if(ts(a))return Mv(a,O);if(Z==br||Z==ut||le&&!b){if(D=V||le?{}:$v(a),!O)return V?iM(a,ES(D,a)):tM(a,nv(D,a))}else{if(!It[Z])return b?a:{};D=mM(a,Z,O)}}M||(M=new qn);var be=M.get(a);if(be)return be;M.set(a,D),x0(a)?a.forEach(function(Pe){D.add(Tn(Pe,c,p,Pe,a,M))}):v0(a)&&a.forEach(function(Pe,Qe){D.set(Qe,Tn(Pe,c,p,Qe,a,M))});var De=Y?V?Zp:Kp:V?Ji:vi,qe=K?r:De(a);return Sn(qe||a,function(Pe,Qe){qe&&(Qe=Pe,Pe=a[Qe]),xa(D,Qe,Tn(Pe,c,p,Qe,a,M))}),D}function SS(a){var c=vi(a);return function(p){return rv(p,a,c)}}function rv(a,c,p){var g=p.length;if(a==null)return!g;for(a=Mt(a);g--;){var b=p[g],M=c[b],D=a[b];if(D===r&&!(b in a)||!M(D))return!1}return!0}function sv(a,c,p){if(typeof a!="function")throw new Mn(n);return Aa(function(){a.apply(r,p)},c)}function wa(a,c,p,g){var b=-1,M=ac,D=!0,O=a.length,V=[],Y=c.length;if(!O)return V;p&&(c=Nt(c,hn(p))),g?(M=_p,D=!1):c.length>=e&&(M=fa,D=!1,c=new Is(c));e:for(;++b<O;){var K=a[b],Z=p==null?K:p(K);if(K=g||K!==0?K:0,D&&Z===Z){for(var le=Y;le--;)if(c[le]===Z)continue e;V.push(K)}else M(c,Z,g)||V.push(K)}return V}var Zr=Pv(rr),ov=Pv(Rp,!0);function MS(a,c){var p=!0;return Zr(a,function(g,b,M){return p=!!c(g,b,M),p}),p}function Ec(a,c,p){for(var g=-1,b=a.length;++g<b;){var M=a[g],D=c(M);if(D!=null&&(O===r?D===D&&!pn(D):p(D,O)))var O=D,V=M}return V}function AS(a,c,p,g){var b=a.length;for(p=Ge(p),p<0&&(p=-p>b?0:b+p),g=g===r||g>b?b:Ge(g),g<0&&(g+=b),g=p>g?0:C0(g);p<g;)a[p++]=c;return a}function av(a,c){var p=[];return Zr(a,function(g,b,M){c(g,b,M)&&p.push(g)}),p}function Si(a,c,p,g,b){var M=-1,D=a.length;for(p||(p=gM),b||(b=[]);++M<D;){var O=a[M];c>0&&p(O)?c>1?Si(O,c-1,p,g,b):qr(b,O):g||(b[b.length]=O)}return b}var Pp=Rv(),lv=Rv(!0);function rr(a,c){return a&&Pp(a,c,vi)}function Rp(a,c){return a&&lv(a,c,vi)}function Sc(a,c){return $r(c,function(p){return Er(a[p])})}function Ps(a,c){c=Jr(c,a);for(var p=0,g=c.length;a!=null&&p<g;)a=a[or(c[p++])];return p&&p==g?a:r}function cv(a,c,p){var g=c(a);return We(a)?g:qr(g,p(a))}function Ni(a){return a==null?a===r?n1:Qu:As&&As in Mt(a)?dM(a):CM(a)}function Op(a,c){return a>c}function TS(a,c){return a!=null&&yt.call(a,c)}function IS(a,c){return a!=null&&c in Mt(a)}function DS(a,c,p){return a>=Ii(c,p)&&a<pi(c,p)}function Fp(a,c,p){for(var g=p?_p:ac,b=a[0].length,M=a.length,D=M,O=G(M),V=1/0,Y=[];D--;){var K=a[D];D&&c&&(K=Nt(K,hn(c))),V=Ii(K.length,V),O[D]=!p&&(c||b>=120&&K.length>=120)?new Is(D&&K):r}K=a[0];var Z=-1,le=O[0];e:for(;++Z<b&&Y.length<V;){var be=K[Z],De=c?c(be):be;if(be=p||be!==0?be:0,!(le?fa(le,De):g(Y,De,p))){for(D=M;--D;){var qe=O[D];if(!(qe?fa(qe,De):g(a[D],De,p)))continue e}le&&le.push(De),Y.push(be)}}return Y}function PS(a,c,p,g){return rr(a,function(b,M,D){c(g,p(b),M,D)}),g}function Ca(a,c,p){c=Jr(c,a),a=Kv(a,c);var g=a==null?a:a[or(Dn(c))];return g==null?r:dn(g,a,p)}function dv(a){return Yt(a)&&Ni(a)==ut}function RS(a){return Yt(a)&&Ni(a)==ma}function OS(a){return Yt(a)&&Ni(a)==Tt}function ka(a,c,p,g,b){return a===c?!0:a==null||c==null||!Yt(a)&&!Yt(c)?a!==a&&c!==c:FS(a,c,p,g,ka,b)}function FS(a,c,p,g,b,M){var D=We(a),O=We(c),V=D?Xi:Di(a),Y=O?Xi:Di(c);V=V==ut?br:V,Y=Y==ut?br:Y;var K=V==br,Z=Y==br,le=V==Y;if(le&&ts(a)){if(!ts(c))return!1;D=!0,K=!1}if(le&&!K)return M||(M=new qn),D||yo(a)?Uv(a,c,p,g,b,M):lM(a,c,V,p,g,b,M);if(!(p&f)){var be=K&&yt.call(a,"__wrapped__"),De=Z&&yt.call(c,"__wrapped__");if(be||De){var qe=be?a.value():a,Pe=De?c.value():c;return M||(M=new qn),b(qe,Pe,p,g,M)}}return le?(M||(M=new qn),cM(a,c,p,g,b,M)):!1}function LS(a){return Yt(a)&&Di(a)==Li}function Lp(a,c,p,g){var b=p.length,M=b,D=!g;if(a==null)return!M;for(a=Mt(a);b--;){var O=p[b];if(D&&O[2]?O[1]!==a[O[0]]:!(O[0]in a))return!1}for(;++b<M;){O=p[b];var V=O[0],Y=a[V],K=O[1];if(D&&O[2]){if(Y===r&&!(V in a))return!1}else{var Z=new qn;if(g)var le=g(Y,K,V,a,c,Z);if(!(le===r?ka(K,Y,f|_,g,Z):le))return!1}}return!0}function hv(a){if(!Wt(a)||bM(a))return!1;var c=Er(a)?LE:S1;return c.test(Os(a))}function NS(a){return Yt(a)&&Ni(a)==ha}function BS(a){return Yt(a)&&Di(a)==Gn}function VS(a){return Yt(a)&&Uc(a.length)&&!!Rt[Ni(a)]}function uv(a){return typeof a=="function"?a:a==null?en:typeof a=="object"?We(a)?fv(a[0],a[1]):mv(a):O0(a)}function Np(a){if(!Ma(a))return WE(a);var c=[];for(var p in Mt(a))yt.call(a,p)&&p!="constructor"&&c.push(p);return c}function zS(a){if(!Wt(a))return wM(a);var c=Ma(a),p=[];for(var g in a)g=="constructor"&&(c||!yt.call(a,g))||p.push(g);return p}function Bp(a,c){return a<c}function pv(a,c){var p=-1,g=Qi(a)?G(a.length):[];return Zr(a,function(b,M,D){g[++p]=c(b,M,D)}),g}function mv(a){var c=Jp(a);return c.length==1&&c[0][2]?Yv(c[0][0],c[0][1]):function(p){return p===a||Lp(p,a,c)}}function fv(a,c){return tm(a)&&qv(c)?Yv(or(a),c):function(p){var g=hm(p,a);return g===r&&g===c?um(p,a):ka(c,g,f|_)}}function Mc(a,c,p,g,b){a!==c&&Pp(c,function(M,D){if(b||(b=new qn),Wt(M))HS(a,c,D,p,Mc,g,b);else{var O=g?g(nm(a,D),M,D+"",a,c,b):r;O===r&&(O=M),Ip(a,D,O)}},Ji)}function HS(a,c,p,g,b,M,D){var O=nm(a,p),V=nm(c,p),Y=D.get(V);if(Y){Ip(a,p,Y);return}var K=M?M(O,V,p+"",a,c,D):r,Z=K===r;if(Z){var le=We(V),be=!le&&ts(V),De=!le&&!be&&yo(V);K=V,le||be||De?We(O)?K=O:Qt(O)?K=Zi(O):be?(Z=!1,K=Mv(V,!0)):De?(Z=!1,K=Av(V,!0)):K=[]:Ta(V)||Fs(V)?(K=O,Fs(O)?K=k0(O):(!Wt(O)||Er(O))&&(K=$v(V))):Z=!1}Z&&(D.set(V,K),b(K,V,g,M,D),D.delete(V)),Ip(a,p,K)}function gv(a,c){var p=a.length;if(p)return c+=c<0?p:0,kr(c,p)?a[c]:r}function _v(a,c,p){c.length?c=Nt(c,function(M){return We(M)?function(D){return Ps(D,M.length===1?M[0]:M)}:M}):c=[en];var g=-1;c=Nt(c,hn(Ie()));var b=pv(a,function(M,D,O){var V=Nt(c,function(Y){return Y(M)});return{criteria:V,index:++g,value:M}});return mE(b,function(M,D){return eM(M,D,p)})}function WS(a,c){return bv(a,c,function(p,g){return um(a,g)})}function bv(a,c,p){for(var g=-1,b=c.length,M={};++g<b;){var D=c[g],O=Ps(a,D);p(O,D)&&Ea(M,Jr(D,a),O)}return M}function US(a){return function(c){return Ps(c,a)}}function Vp(a,c,p,g){var b=g?pE:co,M=-1,D=c.length,O=a;for(a===c&&(c=Zi(c)),p&&(O=Nt(a,hn(p)));++M<D;)for(var V=0,Y=c[M],K=p?p(Y):Y;(V=b(O,K,V,g))>-1;)O!==a&&_c.call(O,V,1),_c.call(a,V,1);return a}function vv(a,c){for(var p=a?c.length:0,g=p-1;p--;){var b=c[p];if(p==g||b!==M){var M=b;kr(b)?_c.call(a,b,1):Up(a,b)}}return a}function zp(a,c){return a+yc(Jb()*(c-a+1))}function jS(a,c,p,g){for(var b=-1,M=pi(vc((c-a)/(p||1)),0),D=G(M);M--;)D[g?M:++b]=a,a+=p;return D}function Hp(a,c){var p="";if(!a||c<1||c>ue)return p;do c%2&&(p+=a),c=yc(c/2),c&&(a+=a);while(c);return p}function Xe(a,c){return rm(Xv(a,c,en),a+"")}function GS(a){return iv(xo(a))}function $S(a,c){var p=xo(a);return Nc(p,Ds(c,0,p.length))}function Ea(a,c,p,g){if(!Wt(a))return a;c=Jr(c,a);for(var b=-1,M=c.length,D=M-1,O=a;O!=null&&++b<M;){var V=or(c[b]),Y=p;if(V==="__proto__"||V==="constructor"||V==="prototype")return a;if(b!=D){var K=O[V];Y=g?g(K,V,O):r,Y===r&&(Y=Wt(K)?K:kr(c[b+1])?[]:{})}xa(O,V,Y),O=O[V]}return a}var yv=xc?function(a,c){return xc.set(a,c),a}:en,qS=bc?function(a,c){return bc(a,"toString",{configurable:!0,enumerable:!1,value:mm(c),writable:!0})}:en;function YS(a){return Nc(xo(a))}function In(a,c,p){var g=-1,b=a.length;c<0&&(c=-c>b?0:b+c),p=p>b?b:p,p<0&&(p+=b),b=c>p?0:p-c>>>0,c>>>=0;for(var M=G(b);++g<b;)M[g]=a[g+c];return M}function XS(a,c){var p;return Zr(a,function(g,b,M){return p=c(g,b,M),!p}),!!p}function Ac(a,c,p){var g=0,b=a==null?g:a.length;if(typeof c=="number"&&c===c&&b<=qt){for(;g<b;){var M=g+b>>>1,D=a[M];D!==null&&!pn(D)&&(p?D<=c:D<c)?g=M+1:b=M}return b}return Wp(a,c,en,p)}function Wp(a,c,p,g){var b=0,M=a==null?0:a.length;if(M===0)return 0;c=p(c);for(var D=c!==c,O=c===null,V=pn(c),Y=c===r;b<M;){var K=yc((b+M)/2),Z=p(a[K]),le=Z!==r,be=Z===null,De=Z===Z,qe=pn(Z);if(D)var Pe=g||De;else Y?Pe=De&&(g||le):O?Pe=De&&le&&(g||!be):V?Pe=De&&le&&!be&&(g||!qe):be||qe?Pe=!1:Pe=g?Z<=c:Z<c;Pe?b=K+1:M=K}return Ii(M,tr)}function xv(a,c){for(var p=-1,g=a.length,b=0,M=[];++p<g;){var D=a[p],O=c?c(D):D;if(!p||!Yn(O,V)){var V=O;M[b++]=D===0?0:D}}return M}function wv(a){return typeof a=="number"?a:pn(a)?vt:+a}function un(a){if(typeof a=="string")return a;if(We(a))return Nt(a,un)+"";if(pn(a))return ev?ev.call(a):"";var c=a+"";return c=="0"&&1/a==-kt?"-0":c}function Qr(a,c,p){var g=-1,b=ac,M=a.length,D=!0,O=[],V=O;if(p)D=!1,b=_p;else if(M>=e){var Y=c?null:oM(a);if(Y)return cc(Y);D=!1,b=fa,V=new Is}else V=c?[]:O;e:for(;++g<M;){var K=a[g],Z=c?c(K):K;if(K=p||K!==0?K:0,D&&Z===Z){for(var le=V.length;le--;)if(V[le]===Z)continue e;c&&V.push(Z),O.push(K)}else b(V,Z,p)||(V!==O&&V.push(Z),O.push(K))}return O}function Up(a,c){return c=Jr(c,a),a=Kv(a,c),a==null||delete a[or(Dn(c))]}function Cv(a,c,p,g){return Ea(a,c,p(Ps(a,c)),g)}function Tc(a,c,p,g){for(var b=a.length,M=g?b:-1;(g?M--:++M<b)&&c(a[M],M,a););return p?In(a,g?0:M,g?M+1:b):In(a,g?M+1:0,g?b:M)}function kv(a,c){var p=a;return p instanceof tt&&(p=p.value()),bp(c,function(g,b){return b.func.apply(b.thisArg,qr([g],b.args))},p)}function jp(a,c,p){var g=a.length;if(g<2)return g?Qr(a[0]):[];for(var b=-1,M=G(g);++b<g;)for(var D=a[b],O=-1;++O<g;)O!=b&&(M[b]=wa(M[b]||D,a[O],c,p));return Qr(Si(M,1),c,p)}function Ev(a,c,p){for(var g=-1,b=a.length,M=c.length,D={};++g<b;){var O=g<M?c[g]:r;p(D,a[g],O)}return D}function Gp(a){return Qt(a)?a:[]}function $p(a){return typeof a=="function"?a:en}function Jr(a,c){return We(a)?a:tm(a,c)?[a]:e0(mt(a))}var KS=Xe;function es(a,c,p){var g=a.length;return p=p===r?g:p,!c&&p>=g?a:In(a,c,p)}var Sv=NE||function(a){return bi.clearTimeout(a)};function Mv(a,c){if(c)return a.slice();var p=a.length,g=Yb?Yb(p):new a.constructor(p);return a.copy(g),g}function qp(a){var c=new a.constructor(a.byteLength);return new fc(c).set(new fc(a)),c}function ZS(a,c){var p=c?qp(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function QS(a){var c=new a.constructor(a.source,db.exec(a));return c.lastIndex=a.lastIndex,c}function JS(a){return ya?Mt(ya.call(a)):{}}function Av(a,c){var p=c?qp(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function Tv(a,c){if(a!==c){var p=a!==r,g=a===null,b=a===a,M=pn(a),D=c!==r,O=c===null,V=c===c,Y=pn(c);if(!O&&!Y&&!M&&a>c||M&&D&&V&&!O&&!Y||g&&D&&V||!p&&V||!b)return 1;if(!g&&!M&&!Y&&a<c||Y&&p&&b&&!g&&!M||O&&p&&b||!D&&b||!V)return-1}return 0}function eM(a,c,p){for(var g=-1,b=a.criteria,M=c.criteria,D=b.length,O=p.length;++g<D;){var V=Tv(b[g],M[g]);if(V){if(g>=O)return V;var Y=p[g];return V*(Y=="desc"?-1:1)}}return a.index-c.index}function Iv(a,c,p,g){for(var b=-1,M=a.length,D=p.length,O=-1,V=c.length,Y=pi(M-D,0),K=G(V+Y),Z=!g;++O<V;)K[O]=c[O];for(;++b<D;)(Z||b<M)&&(K[p[b]]=a[b]);for(;Y--;)K[O++]=a[b++];return K}function Dv(a,c,p,g){for(var b=-1,M=a.length,D=-1,O=p.length,V=-1,Y=c.length,K=pi(M-O,0),Z=G(K+Y),le=!g;++b<K;)Z[b]=a[b];for(var be=b;++V<Y;)Z[be+V]=c[V];for(;++D<O;)(le||b<M)&&(Z[be+p[D]]=a[b++]);return Z}function Zi(a,c){var p=-1,g=a.length;for(c||(c=G(g));++p<g;)c[p]=a[p];return c}function sr(a,c,p,g){var b=!p;p||(p={});for(var M=-1,D=c.length;++M<D;){var O=c[M],V=g?g(p[O],a[O],O,p,a):r;V===r&&(V=a[O]),b?xr(p,O,V):xa(p,O,V)}return p}function tM(a,c){return sr(a,em(a),c)}function iM(a,c){return sr(a,jv(a),c)}function Ic(a,c){return function(p,g){var b=We(p)?aE:kS,M=c?c():{};return b(p,a,Ie(g,2),M)}}function _o(a){return Xe(function(c,p){var g=-1,b=p.length,M=b>1?p[b-1]:r,D=b>2?p[2]:r;for(M=a.length>3&&typeof M=="function"?(b--,M):r,D&&Bi(p[0],p[1],D)&&(M=b<3?r:M,b=1),c=Mt(c);++g<b;){var O=p[g];O&&a(c,O,g,M)}return c})}function Pv(a,c){return function(p,g){if(p==null)return p;if(!Qi(p))return a(p,g);for(var b=p.length,M=c?b:-1,D=Mt(p);(c?M--:++M<b)&&g(D[M],M,D)!==!1;);return p}}function Rv(a){return function(c,p,g){for(var b=-1,M=Mt(c),D=g(c),O=D.length;O--;){var V=D[a?O:++b];if(p(M[V],V,M)===!1)break}return c}}function nM(a,c,p){var g=c&y,b=Sa(a);function M(){var D=this&&this!==bi&&this instanceof M?b:a;return D.apply(g?p:this,arguments)}return M}function Ov(a){return function(c){c=mt(c);var p=ho(c)?$n(c):r,g=p?p[0]:c.charAt(0),b=p?es(p,1).join(""):c.slice(1);return g[a]()+b}}function bo(a){return function(c){return bp(P0(D0(c).replace(q1,"")),a,"")}}function Sa(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=go(a.prototype),g=a.apply(p,c);return Wt(g)?g:p}}function rM(a,c,p){var g=Sa(a);function b(){for(var M=arguments.length,D=G(M),O=M,V=vo(b);O--;)D[O]=arguments[O];var Y=M<3&&D[0]!==V&&D[M-1]!==V?[]:Yr(D,V);if(M-=Y.length,M<p)return Vv(a,c,Dc,b.placeholder,r,D,Y,r,r,p-M);var K=this&&this!==bi&&this instanceof b?g:a;return dn(K,this,D)}return b}function Fv(a){return function(c,p,g){var b=Mt(c);if(!Qi(c)){var M=Ie(p,3);c=vi(c),p=function(O){return M(b[O],O,b)}}var D=a(c,p,g);return D>-1?b[M?c[D]:D]:r}}function Lv(a){return Cr(function(c){var p=c.length,g=p,b=An.prototype.thru;for(a&&c.reverse();g--;){var M=c[g];if(typeof M!="function")throw new Mn(n);if(b&&!D&&Fc(M)=="wrapper")var D=new An([],!0)}for(g=D?g:p;++g<p;){M=c[g];var O=Fc(M),V=O=="wrapper"?Qp(M):r;V&&im(V[0])&&V[1]==(N|S|P|z)&&!V[4].length&&V[9]==1?D=D[Fc(V[0])].apply(D,V[3]):D=M.length==1&&im(M)?D[O]():D.thru(M)}return function(){var Y=arguments,K=Y[0];if(D&&Y.length==1&&We(K))return D.plant(K).value();for(var Z=0,le=p?c[Z].apply(this,Y):K;++Z<p;)le=c[Z].call(this,le);return le}})}function Dc(a,c,p,g,b,M,D,O,V,Y){var K=c&N,Z=c&y,le=c&v,be=c&(S|I),De=c&j,qe=le?r:Sa(a);function Pe(){for(var Qe=arguments.length,it=G(Qe),mn=Qe;mn--;)it[mn]=arguments[mn];if(be)var Vi=vo(Pe),fn=gE(it,Vi);if(g&&(it=Iv(it,g,b,be)),M&&(it=Dv(it,M,D,be)),Qe-=fn,be&&Qe<Y){var Jt=Yr(it,Vi);return Vv(a,c,Dc,Pe.placeholder,p,it,Jt,O,V,Y-Qe)}var Xn=Z?p:this,Mr=le?Xn[a]:a;return Qe=it.length,O?it=kM(it,O):De&&Qe>1&&it.reverse(),K&&V<Qe&&(it.length=V),this&&this!==bi&&this instanceof Pe&&(Mr=qe||Sa(Mr)),Mr.apply(Xn,it)}return Pe}function Nv(a,c){return function(p,g){return PS(p,a,c(g),{})}}function Pc(a,c){return function(p,g){var b;if(p===r&&g===r)return c;if(p!==r&&(b=p),g!==r){if(b===r)return g;typeof p=="string"||typeof g=="string"?(p=un(p),g=un(g)):(p=wv(p),g=wv(g)),b=a(p,g)}return b}}function Yp(a){return Cr(function(c){return c=Nt(c,hn(Ie())),Xe(function(p){var g=this;return a(c,function(b){return dn(b,g,p)})})})}function Rc(a,c){c=c===r?" ":un(c);var p=c.length;if(p<2)return p?Hp(c,a):c;var g=Hp(c,vc(a/uo(c)));return ho(c)?es($n(g),0,a).join(""):g.slice(0,a)}function sM(a,c,p,g){var b=c&y,M=Sa(a);function D(){for(var O=-1,V=arguments.length,Y=-1,K=g.length,Z=G(K+V),le=this&&this!==bi&&this instanceof D?M:a;++Y<K;)Z[Y]=g[Y];for(;V--;)Z[Y++]=arguments[++O];return dn(le,b?p:this,Z)}return D}function Bv(a){return function(c,p,g){return g&&typeof g!="number"&&Bi(c,p,g)&&(p=g=r),c=Sr(c),p===r?(p=c,c=0):p=Sr(p),g=g===r?c<p?1:-1:Sr(g),jS(c,p,g,a)}}function Oc(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=Pn(c),p=Pn(p)),a(c,p)}}function Vv(a,c,p,g,b,M,D,O,V,Y){var K=c&S,Z=K?D:r,le=K?r:D,be=K?M:r,De=K?r:M;c|=K?P:B,c&=~(K?B:P),c&x||(c&=~(y|v));var qe=[a,c,b,be,Z,De,le,O,V,Y],Pe=p.apply(r,qe);return im(a)&&Zv(Pe,qe),Pe.placeholder=g,Qv(Pe,a,c)}function Xp(a){var c=ui[a];return function(p,g){if(p=Pn(p),g=g==null?0:Ii(Ge(g),292),g&&Qb(p)){var b=(mt(p)+"e").split("e"),M=c(b[0]+"e"+(+b[1]+g));return b=(mt(M)+"e").split("e"),+(b[0]+"e"+(+b[1]-g))}return c(p)}}var oM=mo&&1/cc(new mo([,-0]))[1]==kt?function(a){return new mo(a)}:_m;function zv(a){return function(c){var p=Di(c);return p==Li?Ep(c):p==Gn?CE(c):fE(c,a(c))}}function wr(a,c,p,g,b,M,D,O){var V=c&v;if(!V&&typeof a!="function")throw new Mn(n);var Y=g?g.length:0;if(Y||(c&=~(P|B),g=b=r),D=D===r?D:pi(Ge(D),0),O=O===r?O:Ge(O),Y-=b?b.length:0,c&B){var K=g,Z=b;g=b=r}var le=V?r:Qp(a),be=[a,c,p,g,b,K,Z,M,D,O];if(le&&xM(be,le),a=be[0],c=be[1],p=be[2],g=be[3],b=be[4],O=be[9]=be[9]===r?V?0:a.length:pi(be[9]-Y,0),!O&&c&(S|I)&&(c&=~(S|I)),!c||c==y)var De=nM(a,c,p);else c==S||c==I?De=rM(a,c,O):(c==P||c==(y|P))&&!b.length?De=sM(a,c,p,g):De=Dc.apply(r,be);var qe=le?yv:Zv;return Qv(qe(De,be),a,c)}function Hv(a,c,p,g){return a===r||Yn(a,po[p])&&!yt.call(g,p)?c:a}function Wv(a,c,p,g,b,M){return Wt(a)&&Wt(c)&&(M.set(c,a),Mc(a,c,r,Wv,M),M.delete(c)),a}function aM(a){return Ta(a)?r:a}function Uv(a,c,p,g,b,M){var D=p&f,O=a.length,V=c.length;if(O!=V&&!(D&&V>O))return!1;var Y=M.get(a),K=M.get(c);if(Y&&K)return Y==c&&K==a;var Z=-1,le=!0,be=p&_?new Is:r;for(M.set(a,c),M.set(c,a);++Z<O;){var De=a[Z],qe=c[Z];if(g)var Pe=D?g(qe,De,Z,c,a,M):g(De,qe,Z,a,c,M);if(Pe!==r){if(Pe)continue;le=!1;break}if(be){if(!vp(c,function(Qe,it){if(!fa(be,it)&&(De===Qe||b(De,Qe,p,g,M)))return be.push(it)})){le=!1;break}}else if(!(De===qe||b(De,qe,p,g,M))){le=!1;break}}return M.delete(a),M.delete(c),le}function lM(a,c,p,g,b,M,D){switch(p){case ao:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case ma:return!(a.byteLength!=c.byteLength||!M(new fc(a),new fc(c)));case Ki:case Tt:case Gr:return Yn(+a,+c);case ir:return a.name==c.name&&a.message==c.message;case ha:case ua:return a==c+"";case Li:var O=Ep;case Gn:var V=g&f;if(O||(O=cc),a.size!=c.size&&!V)return!1;var Y=D.get(a);if(Y)return Y==c;g|=_,D.set(a,c);var K=Uv(O(a),O(c),g,b,M,D);return D.delete(a),K;case nc:if(ya)return ya.call(a)==ya.call(c)}return!1}function cM(a,c,p,g,b,M){var D=p&f,O=Kp(a),V=O.length,Y=Kp(c),K=Y.length;if(V!=K&&!D)return!1;for(var Z=V;Z--;){var le=O[Z];if(!(D?le in c:yt.call(c,le)))return!1}var be=M.get(a),De=M.get(c);if(be&&De)return be==c&&De==a;var qe=!0;M.set(a,c),M.set(c,a);for(var Pe=D;++Z<V;){le=O[Z];var Qe=a[le],it=c[le];if(g)var mn=D?g(it,Qe,le,c,a,M):g(Qe,it,le,a,c,M);if(!(mn===r?Qe===it||b(Qe,it,p,g,M):mn)){qe=!1;break}Pe||(Pe=le=="constructor")}if(qe&&!Pe){var Vi=a.constructor,fn=c.constructor;Vi!=fn&&"constructor"in a&&"constructor"in c&&!(typeof Vi=="function"&&Vi instanceof Vi&&typeof fn=="function"&&fn instanceof fn)&&(qe=!1)}return M.delete(a),M.delete(c),qe}function Cr(a){return rm(Xv(a,r,r0),a+"")}function Kp(a){return cv(a,vi,em)}function Zp(a){return cv(a,Ji,jv)}var Qp=xc?function(a){return xc.get(a)}:_m;function Fc(a){for(var c=a.name+"",p=fo[c],g=yt.call(fo,c)?p.length:0;g--;){var b=p[g],M=b.func;if(M==null||M==a)return b.name}return c}function vo(a){var c=yt.call(k,"placeholder")?k:a;return c.placeholder}function Ie(){var a=k.iteratee||fm;return a=a===fm?uv:a,arguments.length?a(arguments[0],arguments[1]):a}function Lc(a,c){var p=a.__data__;return _M(c)?p[typeof c=="string"?"string":"hash"]:p.map}function Jp(a){for(var c=vi(a),p=c.length;p--;){var g=c[p],b=a[g];c[p]=[g,b,qv(b)]}return c}function Rs(a,c){var p=yE(a,c);return hv(p)?p:r}function dM(a){var c=yt.call(a,As),p=a[As];try{a[As]=r;var g=!0}catch{}var b=pc.call(a);return g&&(c?a[As]=p:delete a[As]),b}var em=Mp?function(a){return a==null?[]:(a=Mt(a),$r(Mp(a),function(c){return Kb.call(a,c)}))}:bm,jv=Mp?function(a){for(var c=[];a;)qr(c,em(a)),a=gc(a);return c}:bm,Di=Ni;(Ap&&Di(new Ap(new ArrayBuffer(1)))!=ao||_a&&Di(new _a)!=Li||Tp&&Di(Tp.resolve())!=ob||mo&&Di(new mo)!=Gn||ba&&Di(new ba)!=pa)&&(Di=function(a){var c=Ni(a),p=c==br?a.constructor:r,g=p?Os(p):"";if(g)switch(g){case $E:return ao;case qE:return Li;case YE:return ob;case XE:return Gn;case KE:return pa}return c});function hM(a,c,p){for(var g=-1,b=p.length;++g<b;){var M=p[g],D=M.size;switch(M.type){case"drop":a+=D;break;case"dropRight":c-=D;break;case"take":c=Ii(c,a+D);break;case"takeRight":a=pi(a,c-D);break}}return{start:a,end:c}}function uM(a){var c=a.match(b1);return c?c[1].split(v1):[]}function Gv(a,c,p){c=Jr(c,a);for(var g=-1,b=c.length,M=!1;++g<b;){var D=or(c[g]);if(!(M=a!=null&&p(a,D)))break;a=a[D]}return M||++g!=b?M:(b=a==null?0:a.length,!!b&&Uc(b)&&kr(D,b)&&(We(a)||Fs(a)))}function pM(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&yt.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function $v(a){return typeof a.constructor=="function"&&!Ma(a)?go(gc(a)):{}}function mM(a,c,p){var g=a.constructor;switch(c){case ma:return qp(a);case Ki:case Tt:return new g(+a);case ao:return ZS(a,p);case Ju:case ep:case tp:case ip:case np:case rp:case sp:case op:case ap:return Av(a,p);case Li:return new g;case Gr:case ua:return new g(a);case ha:return QS(a);case Gn:return new g;case nc:return JS(a)}}function fM(a,c){var p=c.length;if(!p)return a;var g=p-1;return c[g]=(p>1?"& ":"")+c[g],c=c.join(p>2?", ":" "),a.replace(_1,`{
/* [wrapped with `+c+`] */
`)}function gM(a){return We(a)||Fs(a)||!!(Zb&&a&&a[Zb])}function kr(a,c){var p=typeof a;return c=c??ue,!!c&&(p=="number"||p!="symbol"&&A1.test(a))&&a>-1&&a%1==0&&a<c}function Bi(a,c,p){if(!Wt(p))return!1;var g=typeof c;return(g=="number"?Qi(p)&&kr(c,p.length):g=="string"&&c in p)?Yn(p[c],a):!1}function tm(a,c){if(We(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||pn(a)?!0:p1.test(a)||!u1.test(a)||c!=null&&a in Mt(c)}function _M(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function im(a){var c=Fc(a),p=k[c];if(typeof p!="function"||!(c in tt.prototype))return!1;if(a===p)return!0;var g=Qp(p);return!!g&&a===g[0]}function bM(a){return!!qb&&qb in a}var vM=hc?Er:vm;function Ma(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||po;return a===p}function qv(a){return a===a&&!Wt(a)}function Yv(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==r||a in Mt(p))}}function yM(a){var c=Hc(a,function(g){return p.size===l&&p.clear(),g}),p=c.cache;return c}function xM(a,c){var p=a[1],g=c[1],b=p|g,M=b<(y|v|N),D=g==N&&p==S||g==N&&p==z&&a[7].length<=c[8]||g==(N|z)&&c[7].length<=c[8]&&p==S;if(!(M||D))return a;g&y&&(a[2]=c[2],b|=p&y?0:x);var O=c[3];if(O){var V=a[3];a[3]=V?Iv(V,O,c[4]):O,a[4]=V?Yr(a[3],d):c[4]}return O=c[5],O&&(V=a[5],a[5]=V?Dv(V,O,c[6]):O,a[6]=V?Yr(a[5],d):c[6]),O=c[7],O&&(a[7]=O),g&N&&(a[8]=a[8]==null?c[8]:Ii(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=b,a}function wM(a){var c=[];if(a!=null)for(var p in Mt(a))c.push(p);return c}function CM(a){return pc.call(a)}function Xv(a,c,p){return c=pi(c===r?a.length-1:c,0),function(){for(var g=arguments,b=-1,M=pi(g.length-c,0),D=G(M);++b<M;)D[b]=g[c+b];b=-1;for(var O=G(c+1);++b<c;)O[b]=g[b];return O[c]=p(D),dn(a,this,O)}}function Kv(a,c){return c.length<2?a:Ps(a,In(c,0,-1))}function kM(a,c){for(var p=a.length,g=Ii(c.length,p),b=Zi(a);g--;){var M=c[g];a[g]=kr(M,p)?b[M]:r}return a}function nm(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var Zv=Jv(yv),Aa=VE||function(a,c){return bi.setTimeout(a,c)},rm=Jv(qS);function Qv(a,c,p){var g=c+"";return rm(a,fM(g,EM(uM(g),p)))}function Jv(a){var c=0,p=0;return function(){var g=UE(),b=he-(g-p);if(p=g,b>0){if(++c>=ae)return arguments[0]}else c=0;return a.apply(r,arguments)}}function Nc(a,c){var p=-1,g=a.length,b=g-1;for(c=c===r?g:c;++p<c;){var M=zp(p,b),D=a[M];a[M]=a[p],a[p]=D}return a.length=c,a}var e0=yM(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(m1,function(p,g,b,M){c.push(b?M.replace(w1,"$1"):g||p)}),c});function or(a){if(typeof a=="string"||pn(a))return a;var c=a+"";return c=="0"&&1/a==-kt?"-0":c}function Os(a){if(a!=null){try{return uc.call(a)}catch{}try{return a+""}catch{}}return""}function EM(a,c){return Sn(Pt,function(p){var g="_."+p[0];c&p[1]&&!ac(a,g)&&a.push(g)}),a.sort()}function t0(a){if(a instanceof tt)return a.clone();var c=new An(a.__wrapped__,a.__chain__);return c.__actions__=Zi(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function SM(a,c,p){(p?Bi(a,c,p):c===r)?c=1:c=pi(Ge(c),0);var g=a==null?0:a.length;if(!g||c<1)return[];for(var b=0,M=0,D=G(vc(g/c));b<g;)D[M++]=In(a,b,b+=c);return D}function MM(a){for(var c=-1,p=a==null?0:a.length,g=0,b=[];++c<p;){var M=a[c];M&&(b[g++]=M)}return b}function AM(){var a=arguments.length;if(!a)return[];for(var c=G(a-1),p=arguments[0],g=a;g--;)c[g-1]=arguments[g];return qr(We(p)?Zi(p):[p],Si(c,1))}var TM=Xe(function(a,c){return Qt(a)?wa(a,Si(c,1,Qt,!0)):[]}),IM=Xe(function(a,c){var p=Dn(c);return Qt(p)&&(p=r),Qt(a)?wa(a,Si(c,1,Qt,!0),Ie(p,2)):[]}),DM=Xe(function(a,c){var p=Dn(c);return Qt(p)&&(p=r),Qt(a)?wa(a,Si(c,1,Qt,!0),r,p):[]});function PM(a,c,p){var g=a==null?0:a.length;return g?(c=p||c===r?1:Ge(c),In(a,c<0?0:c,g)):[]}function RM(a,c,p){var g=a==null?0:a.length;return g?(c=p||c===r?1:Ge(c),c=g-c,In(a,0,c<0?0:c)):[]}function OM(a,c){return a&&a.length?Tc(a,Ie(c,3),!0,!0):[]}function FM(a,c){return a&&a.length?Tc(a,Ie(c,3),!0):[]}function LM(a,c,p,g){var b=a==null?0:a.length;return b?(p&&typeof p!="number"&&Bi(a,c,p)&&(p=0,g=b),AS(a,c,p,g)):[]}function i0(a,c,p){var g=a==null?0:a.length;if(!g)return-1;var b=p==null?0:Ge(p);return b<0&&(b=pi(g+b,0)),lc(a,Ie(c,3),b)}function n0(a,c,p){var g=a==null?0:a.length;if(!g)return-1;var b=g-1;return p!==r&&(b=Ge(p),b=p<0?pi(g+b,0):Ii(b,g-1)),lc(a,Ie(c,3),b,!0)}function r0(a){var c=a==null?0:a.length;return c?Si(a,1):[]}function NM(a){var c=a==null?0:a.length;return c?Si(a,kt):[]}function BM(a,c){var p=a==null?0:a.length;return p?(c=c===r?1:Ge(c),Si(a,c)):[]}function VM(a){for(var c=-1,p=a==null?0:a.length,g={};++c<p;){var b=a[c];g[b[0]]=b[1]}return g}function s0(a){return a&&a.length?a[0]:r}function zM(a,c,p){var g=a==null?0:a.length;if(!g)return-1;var b=p==null?0:Ge(p);return b<0&&(b=pi(g+b,0)),co(a,c,b)}function HM(a){var c=a==null?0:a.length;return c?In(a,0,-1):[]}var WM=Xe(function(a){var c=Nt(a,Gp);return c.length&&c[0]===a[0]?Fp(c):[]}),UM=Xe(function(a){var c=Dn(a),p=Nt(a,Gp);return c===Dn(p)?c=r:p.pop(),p.length&&p[0]===a[0]?Fp(p,Ie(c,2)):[]}),jM=Xe(function(a){var c=Dn(a),p=Nt(a,Gp);return c=typeof c=="function"?c:r,c&&p.pop(),p.length&&p[0]===a[0]?Fp(p,r,c):[]});function GM(a,c){return a==null?"":HE.call(a,c)}function Dn(a){var c=a==null?0:a.length;return c?a[c-1]:r}function $M(a,c,p){var g=a==null?0:a.length;if(!g)return-1;var b=g;return p!==r&&(b=Ge(p),b=b<0?pi(g+b,0):Ii(b,g-1)),c===c?EE(a,c,b):lc(a,Vb,b,!0)}function qM(a,c){return a&&a.length?gv(a,Ge(c)):r}var YM=Xe(o0);function o0(a,c){return a&&a.length&&c&&c.length?Vp(a,c):a}function XM(a,c,p){return a&&a.length&&c&&c.length?Vp(a,c,Ie(p,2)):a}function KM(a,c,p){return a&&a.length&&c&&c.length?Vp(a,c,r,p):a}var ZM=Cr(function(a,c){var p=a==null?0:a.length,g=Dp(a,c);return vv(a,Nt(c,function(b){return kr(b,p)?+b:b}).sort(Tv)),g});function QM(a,c){var p=[];if(!(a&&a.length))return p;var g=-1,b=[],M=a.length;for(c=Ie(c,3);++g<M;){var D=a[g];c(D,g,a)&&(p.push(D),b.push(g))}return vv(a,b),p}function sm(a){return a==null?a:GE.call(a)}function JM(a,c,p){var g=a==null?0:a.length;return g?(p&&typeof p!="number"&&Bi(a,c,p)?(c=0,p=g):(c=c==null?0:Ge(c),p=p===r?g:Ge(p)),In(a,c,p)):[]}function eA(a,c){return Ac(a,c)}function tA(a,c,p){return Wp(a,c,Ie(p,2))}function iA(a,c){var p=a==null?0:a.length;if(p){var g=Ac(a,c);if(g<p&&Yn(a[g],c))return g}return-1}function nA(a,c){return Ac(a,c,!0)}function rA(a,c,p){return Wp(a,c,Ie(p,2),!0)}function sA(a,c){var p=a==null?0:a.length;if(p){var g=Ac(a,c,!0)-1;if(Yn(a[g],c))return g}return-1}function oA(a){return a&&a.length?xv(a):[]}function aA(a,c){return a&&a.length?xv(a,Ie(c,2)):[]}function lA(a){var c=a==null?0:a.length;return c?In(a,1,c):[]}function cA(a,c,p){return a&&a.length?(c=p||c===r?1:Ge(c),In(a,0,c<0?0:c)):[]}function dA(a,c,p){var g=a==null?0:a.length;return g?(c=p||c===r?1:Ge(c),c=g-c,In(a,c<0?0:c,g)):[]}function hA(a,c){return a&&a.length?Tc(a,Ie(c,3),!1,!0):[]}function uA(a,c){return a&&a.length?Tc(a,Ie(c,3)):[]}var pA=Xe(function(a){return Qr(Si(a,1,Qt,!0))}),mA=Xe(function(a){var c=Dn(a);return Qt(c)&&(c=r),Qr(Si(a,1,Qt,!0),Ie(c,2))}),fA=Xe(function(a){var c=Dn(a);return c=typeof c=="function"?c:r,Qr(Si(a,1,Qt,!0),r,c)});function gA(a){return a&&a.length?Qr(a):[]}function _A(a,c){return a&&a.length?Qr(a,Ie(c,2)):[]}function bA(a,c){return c=typeof c=="function"?c:r,a&&a.length?Qr(a,r,c):[]}function om(a){if(!(a&&a.length))return[];var c=0;return a=$r(a,function(p){if(Qt(p))return c=pi(p.length,c),!0}),Cp(c,function(p){return Nt(a,yp(p))})}function a0(a,c){if(!(a&&a.length))return[];var p=om(a);return c==null?p:Nt(p,function(g){return dn(c,r,g)})}var vA=Xe(function(a,c){return Qt(a)?wa(a,c):[]}),yA=Xe(function(a){return jp($r(a,Qt))}),xA=Xe(function(a){var c=Dn(a);return Qt(c)&&(c=r),jp($r(a,Qt),Ie(c,2))}),wA=Xe(function(a){var c=Dn(a);return c=typeof c=="function"?c:r,jp($r(a,Qt),r,c)}),CA=Xe(om);function kA(a,c){return Ev(a||[],c||[],xa)}function EA(a,c){return Ev(a||[],c||[],Ea)}var SA=Xe(function(a){var c=a.length,p=c>1?a[c-1]:r;return p=typeof p=="function"?(a.pop(),p):r,a0(a,p)});function l0(a){var c=k(a);return c.__chain__=!0,c}function MA(a,c){return c(a),a}function Bc(a,c){return c(a)}var AA=Cr(function(a){var c=a.length,p=c?a[0]:0,g=this.__wrapped__,b=function(M){return Dp(M,a)};return c>1||this.__actions__.length||!(g instanceof tt)||!kr(p)?this.thru(b):(g=g.slice(p,+p+(c?1:0)),g.__actions__.push({func:Bc,args:[b],thisArg:r}),new An(g,this.__chain__).thru(function(M){return c&&!M.length&&M.push(r),M}))});function TA(){return l0(this)}function IA(){return new An(this.value(),this.__chain__)}function DA(){this.__values__===r&&(this.__values__=w0(this.value()));var a=this.__index__>=this.__values__.length,c=a?r:this.__values__[this.__index__++];return{done:a,value:c}}function PA(){return this}function RA(a){for(var c,p=this;p instanceof Cc;){var g=t0(p);g.__index__=0,g.__values__=r,c?b.__wrapped__=g:c=g;var b=g;p=p.__wrapped__}return b.__wrapped__=a,c}function OA(){var a=this.__wrapped__;if(a instanceof tt){var c=a;return this.__actions__.length&&(c=new tt(this)),c=c.reverse(),c.__actions__.push({func:Bc,args:[sm],thisArg:r}),new An(c,this.__chain__)}return this.thru(sm)}function FA(){return kv(this.__wrapped__,this.__actions__)}var LA=Ic(function(a,c,p){yt.call(a,p)?++a[p]:xr(a,p,1)});function NA(a,c,p){var g=We(a)?Nb:MS;return p&&Bi(a,c,p)&&(c=r),g(a,Ie(c,3))}function BA(a,c){var p=We(a)?$r:av;return p(a,Ie(c,3))}var VA=Fv(i0),zA=Fv(n0);function HA(a,c){return Si(Vc(a,c),1)}function WA(a,c){return Si(Vc(a,c),kt)}function UA(a,c,p){return p=p===r?1:Ge(p),Si(Vc(a,c),p)}function c0(a,c){var p=We(a)?Sn:Zr;return p(a,Ie(c,3))}function d0(a,c){var p=We(a)?lE:ov;return p(a,Ie(c,3))}var jA=Ic(function(a,c,p){yt.call(a,p)?a[p].push(c):xr(a,p,[c])});function GA(a,c,p,g){a=Qi(a)?a:xo(a),p=p&&!g?Ge(p):0;var b=a.length;return p<0&&(p=pi(b+p,0)),jc(a)?p<=b&&a.indexOf(c,p)>-1:!!b&&co(a,c,p)>-1}var $A=Xe(function(a,c,p){var g=-1,b=typeof c=="function",M=Qi(a)?G(a.length):[];return Zr(a,function(D){M[++g]=b?dn(c,D,p):Ca(D,c,p)}),M}),qA=Ic(function(a,c,p){xr(a,p,c)});function Vc(a,c){var p=We(a)?Nt:pv;return p(a,Ie(c,3))}function YA(a,c,p,g){return a==null?[]:(We(c)||(c=c==null?[]:[c]),p=g?r:p,We(p)||(p=p==null?[]:[p]),_v(a,c,p))}var XA=Ic(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function KA(a,c,p){var g=We(a)?bp:Hb,b=arguments.length<3;return g(a,Ie(c,4),p,b,Zr)}function ZA(a,c,p){var g=We(a)?cE:Hb,b=arguments.length<3;return g(a,Ie(c,4),p,b,ov)}function QA(a,c){var p=We(a)?$r:av;return p(a,Wc(Ie(c,3)))}function JA(a){var c=We(a)?iv:GS;return c(a)}function eT(a,c,p){(p?Bi(a,c,p):c===r)?c=1:c=Ge(c);var g=We(a)?wS:$S;return g(a,c)}function tT(a){var c=We(a)?CS:YS;return c(a)}function iT(a){if(a==null)return 0;if(Qi(a))return jc(a)?uo(a):a.length;var c=Di(a);return c==Li||c==Gn?a.size:Np(a).length}function nT(a,c,p){var g=We(a)?vp:XS;return p&&Bi(a,c,p)&&(c=r),g(a,Ie(c,3))}var rT=Xe(function(a,c){if(a==null)return[];var p=c.length;return p>1&&Bi(a,c[0],c[1])?c=[]:p>2&&Bi(c[0],c[1],c[2])&&(c=[c[0]]),_v(a,Si(c,1),[])}),zc=BE||function(){return bi.Date.now()};function sT(a,c){if(typeof c!="function")throw new Mn(n);return a=Ge(a),function(){if(--a<1)return c.apply(this,arguments)}}function h0(a,c,p){return c=p?r:c,c=a&&c==null?a.length:c,wr(a,N,r,r,r,r,c)}function u0(a,c){var p;if(typeof c!="function")throw new Mn(n);return a=Ge(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=r),p}}var am=Xe(function(a,c,p){var g=y;if(p.length){var b=Yr(p,vo(am));g|=P}return wr(a,g,c,p,b)}),p0=Xe(function(a,c,p){var g=y|v;if(p.length){var b=Yr(p,vo(p0));g|=P}return wr(c,g,a,p,b)});function m0(a,c,p){c=p?r:c;var g=wr(a,S,r,r,r,r,r,c);return g.placeholder=m0.placeholder,g}function f0(a,c,p){c=p?r:c;var g=wr(a,I,r,r,r,r,r,c);return g.placeholder=f0.placeholder,g}function g0(a,c,p){var g,b,M,D,O,V,Y=0,K=!1,Z=!1,le=!0;if(typeof a!="function")throw new Mn(n);c=Pn(c)||0,Wt(p)&&(K=!!p.leading,Z="maxWait"in p,M=Z?pi(Pn(p.maxWait)||0,c):M,le="trailing"in p?!!p.trailing:le);function be(Jt){var Xn=g,Mr=b;return g=b=r,Y=Jt,D=a.apply(Mr,Xn),D}function De(Jt){return Y=Jt,O=Aa(Qe,c),K?be(Jt):D}function qe(Jt){var Xn=Jt-V,Mr=Jt-Y,F0=c-Xn;return Z?Ii(F0,M-Mr):F0}function Pe(Jt){var Xn=Jt-V,Mr=Jt-Y;return V===r||Xn>=c||Xn<0||Z&&Mr>=M}function Qe(){var Jt=zc();if(Pe(Jt))return it(Jt);O=Aa(Qe,qe(Jt))}function it(Jt){return O=r,le&&g?be(Jt):(g=b=r,D)}function mn(){O!==r&&Sv(O),Y=0,g=V=b=O=r}function Vi(){return O===r?D:it(zc())}function fn(){var Jt=zc(),Xn=Pe(Jt);if(g=arguments,b=this,V=Jt,Xn){if(O===r)return De(V);if(Z)return Sv(O),O=Aa(Qe,c),be(V)}return O===r&&(O=Aa(Qe,c)),D}return fn.cancel=mn,fn.flush=Vi,fn}var oT=Xe(function(a,c){return sv(a,1,c)}),aT=Xe(function(a,c,p){return sv(a,Pn(c)||0,p)});function lT(a){return wr(a,j)}function Hc(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Mn(n);var p=function(){var g=arguments,b=c?c.apply(this,g):g[0],M=p.cache;if(M.has(b))return M.get(b);var D=a.apply(this,g);return p.cache=M.set(b,D)||M,D};return p.cache=new(Hc.Cache||yr),p}Hc.Cache=yr;function Wc(a){if(typeof a!="function")throw new Mn(n);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function cT(a){return u0(2,a)}var dT=KS(function(a,c){c=c.length==1&&We(c[0])?Nt(c[0],hn(Ie())):Nt(Si(c,1),hn(Ie()));var p=c.length;return Xe(function(g){for(var b=-1,M=Ii(g.length,p);++b<M;)g[b]=c[b].call(this,g[b]);return dn(a,this,g)})}),lm=Xe(function(a,c){var p=Yr(c,vo(lm));return wr(a,P,r,c,p)}),_0=Xe(function(a,c){var p=Yr(c,vo(_0));return wr(a,B,r,c,p)}),hT=Cr(function(a,c){return wr(a,z,r,r,r,c)});function uT(a,c){if(typeof a!="function")throw new Mn(n);return c=c===r?c:Ge(c),Xe(a,c)}function pT(a,c){if(typeof a!="function")throw new Mn(n);return c=c==null?0:pi(Ge(c),0),Xe(function(p){var g=p[c],b=es(p,0,c);return g&&qr(b,g),dn(a,this,b)})}function mT(a,c,p){var g=!0,b=!0;if(typeof a!="function")throw new Mn(n);return Wt(p)&&(g="leading"in p?!!p.leading:g,b="trailing"in p?!!p.trailing:b),g0(a,c,{leading:g,maxWait:c,trailing:b})}function fT(a){return h0(a,1)}function gT(a,c){return lm($p(c),a)}function _T(){if(!arguments.length)return[];var a=arguments[0];return We(a)?a:[a]}function bT(a){return Tn(a,m)}function vT(a,c){return c=typeof c=="function"?c:r,Tn(a,m,c)}function yT(a){return Tn(a,h|m)}function xT(a,c){return c=typeof c=="function"?c:r,Tn(a,h|m,c)}function wT(a,c){return c==null||rv(a,c,vi(c))}function Yn(a,c){return a===c||a!==a&&c!==c}var CT=Oc(Op),kT=Oc(function(a,c){return a>=c}),Fs=dv(function(){return arguments}())?dv:function(a){return Yt(a)&&yt.call(a,"callee")&&!Kb.call(a,"callee")},We=G.isArray,ET=Db?hn(Db):RS;function Qi(a){return a!=null&&Uc(a.length)&&!Er(a)}function Qt(a){return Yt(a)&&Qi(a)}function ST(a){return a===!0||a===!1||Yt(a)&&Ni(a)==Ki}var ts=zE||vm,MT=Pb?hn(Pb):OS;function AT(a){return Yt(a)&&a.nodeType===1&&!Ta(a)}function TT(a){if(a==null)return!0;if(Qi(a)&&(We(a)||typeof a=="string"||typeof a.splice=="function"||ts(a)||yo(a)||Fs(a)))return!a.length;var c=Di(a);if(c==Li||c==Gn)return!a.size;if(Ma(a))return!Np(a).length;for(var p in a)if(yt.call(a,p))return!1;return!0}function IT(a,c){return ka(a,c)}function DT(a,c,p){p=typeof p=="function"?p:r;var g=p?p(a,c):r;return g===r?ka(a,c,r,p):!!g}function cm(a){if(!Yt(a))return!1;var c=Ni(a);return c==ir||c==da||typeof a.message=="string"&&typeof a.name=="string"&&!Ta(a)}function PT(a){return typeof a=="number"&&Qb(a)}function Er(a){if(!Wt(a))return!1;var c=Ni(a);return c==nr||c==oo||c==jn||c==i1}function b0(a){return typeof a=="number"&&a==Ge(a)}function Uc(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=ue}function Wt(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function Yt(a){return a!=null&&typeof a=="object"}var v0=Rb?hn(Rb):LS;function RT(a,c){return a===c||Lp(a,c,Jp(c))}function OT(a,c,p){return p=typeof p=="function"?p:r,Lp(a,c,Jp(c),p)}function FT(a){return y0(a)&&a!=+a}function LT(a){if(vM(a))throw new Be(i);return hv(a)}function NT(a){return a===null}function BT(a){return a==null}function y0(a){return typeof a=="number"||Yt(a)&&Ni(a)==Gr}function Ta(a){if(!Yt(a)||Ni(a)!=br)return!1;var c=gc(a);if(c===null)return!0;var p=yt.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&uc.call(p)==OE}var dm=Ob?hn(Ob):NS;function VT(a){return b0(a)&&a>=-ue&&a<=ue}var x0=Fb?hn(Fb):BS;function jc(a){return typeof a=="string"||!We(a)&&Yt(a)&&Ni(a)==ua}function pn(a){return typeof a=="symbol"||Yt(a)&&Ni(a)==nc}var yo=Lb?hn(Lb):VS;function zT(a){return a===r}function HT(a){return Yt(a)&&Di(a)==pa}function WT(a){return Yt(a)&&Ni(a)==r1}var UT=Oc(Bp),jT=Oc(function(a,c){return a<=c});function w0(a){if(!a)return[];if(Qi(a))return jc(a)?$n(a):Zi(a);if(ga&&a[ga])return wE(a[ga]());var c=Di(a),p=c==Li?Ep:c==Gn?cc:xo;return p(a)}function Sr(a){if(!a)return a===0?a:0;if(a=Pn(a),a===kt||a===-kt){var c=a<0?-1:1;return c*Me}return a===a?a:0}function Ge(a){var c=Sr(a),p=c%1;return c===c?p?c-p:c:0}function C0(a){return a?Ds(Ge(a),0,dt):0}function Pn(a){if(typeof a=="number")return a;if(pn(a))return vt;if(Wt(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=Wt(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=Wb(a);var p=E1.test(a);return p||M1.test(a)?sE(a.slice(2),p?2:8):k1.test(a)?vt:+a}function k0(a){return sr(a,Ji(a))}function GT(a){return a?Ds(Ge(a),-ue,ue):a===0?a:0}function mt(a){return a==null?"":un(a)}var $T=_o(function(a,c){if(Ma(c)||Qi(c)){sr(c,vi(c),a);return}for(var p in c)yt.call(c,p)&&xa(a,p,c[p])}),E0=_o(function(a,c){sr(c,Ji(c),a)}),Gc=_o(function(a,c,p,g){sr(c,Ji(c),a,g)}),qT=_o(function(a,c,p,g){sr(c,vi(c),a,g)}),YT=Cr(Dp);function XT(a,c){var p=go(a);return c==null?p:nv(p,c)}var KT=Xe(function(a,c){a=Mt(a);var p=-1,g=c.length,b=g>2?c[2]:r;for(b&&Bi(c[0],c[1],b)&&(g=1);++p<g;)for(var M=c[p],D=Ji(M),O=-1,V=D.length;++O<V;){var Y=D[O],K=a[Y];(K===r||Yn(K,po[Y])&&!yt.call(a,Y))&&(a[Y]=M[Y])}return a}),ZT=Xe(function(a){return a.push(r,Wv),dn(S0,r,a)});function QT(a,c){return Bb(a,Ie(c,3),rr)}function JT(a,c){return Bb(a,Ie(c,3),Rp)}function eI(a,c){return a==null?a:Pp(a,Ie(c,3),Ji)}function tI(a,c){return a==null?a:lv(a,Ie(c,3),Ji)}function iI(a,c){return a&&rr(a,Ie(c,3))}function nI(a,c){return a&&Rp(a,Ie(c,3))}function rI(a){return a==null?[]:Sc(a,vi(a))}function sI(a){return a==null?[]:Sc(a,Ji(a))}function hm(a,c,p){var g=a==null?r:Ps(a,c);return g===r?p:g}function oI(a,c){return a!=null&&Gv(a,c,TS)}function um(a,c){return a!=null&&Gv(a,c,IS)}var aI=Nv(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=pc.call(c)),a[c]=p},mm(en)),lI=Nv(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=pc.call(c)),yt.call(a,c)?a[c].push(p):a[c]=[p]},Ie),cI=Xe(Ca);function vi(a){return Qi(a)?tv(a):Np(a)}function Ji(a){return Qi(a)?tv(a,!0):zS(a)}function dI(a,c){var p={};return c=Ie(c,3),rr(a,function(g,b,M){xr(p,c(g,b,M),g)}),p}function hI(a,c){var p={};return c=Ie(c,3),rr(a,function(g,b,M){xr(p,b,c(g,b,M))}),p}var uI=_o(function(a,c,p){Mc(a,c,p)}),S0=_o(function(a,c,p,g){Mc(a,c,p,g)}),pI=Cr(function(a,c){var p={};if(a==null)return p;var g=!1;c=Nt(c,function(M){return M=Jr(M,a),g||(g=M.length>1),M}),sr(a,Zp(a),p),g&&(p=Tn(p,h|u|m,aM));for(var b=c.length;b--;)Up(p,c[b]);return p});function mI(a,c){return M0(a,Wc(Ie(c)))}var fI=Cr(function(a,c){return a==null?{}:WS(a,c)});function M0(a,c){if(a==null)return{};var p=Nt(Zp(a),function(g){return[g]});return c=Ie(c),bv(a,p,function(g,b){return c(g,b[0])})}function gI(a,c,p){c=Jr(c,a);var g=-1,b=c.length;for(b||(b=1,a=r);++g<b;){var M=a==null?r:a[or(c[g])];M===r&&(g=b,M=p),a=Er(M)?M.call(a):M}return a}function _I(a,c,p){return a==null?a:Ea(a,c,p)}function bI(a,c,p,g){return g=typeof g=="function"?g:r,a==null?a:Ea(a,c,p,g)}var A0=zv(vi),T0=zv(Ji);function vI(a,c,p){var g=We(a),b=g||ts(a)||yo(a);if(c=Ie(c,4),p==null){var M=a&&a.constructor;b?p=g?new M:[]:Wt(a)?p=Er(M)?go(gc(a)):{}:p={}}return(b?Sn:rr)(a,function(D,O,V){return c(p,D,O,V)}),p}function yI(a,c){return a==null?!0:Up(a,c)}function xI(a,c,p){return a==null?a:Cv(a,c,$p(p))}function wI(a,c,p,g){return g=typeof g=="function"?g:r,a==null?a:Cv(a,c,$p(p),g)}function xo(a){return a==null?[]:kp(a,vi(a))}function CI(a){return a==null?[]:kp(a,Ji(a))}function kI(a,c,p){return p===r&&(p=c,c=r),p!==r&&(p=Pn(p),p=p===p?p:0),c!==r&&(c=Pn(c),c=c===c?c:0),Ds(Pn(a),c,p)}function EI(a,c,p){return c=Sr(c),p===r?(p=c,c=0):p=Sr(p),a=Pn(a),DS(a,c,p)}function SI(a,c,p){if(p&&typeof p!="boolean"&&Bi(a,c,p)&&(c=p=r),p===r&&(typeof c=="boolean"?(p=c,c=r):typeof a=="boolean"&&(p=a,a=r)),a===r&&c===r?(a=0,c=1):(a=Sr(a),c===r?(c=a,a=0):c=Sr(c)),a>c){var g=a;a=c,c=g}if(p||a%1||c%1){var b=Jb();return Ii(a+b*(c-a+rE("1e-"+((b+"").length-1))),c)}return zp(a,c)}var MI=bo(function(a,c,p){return c=c.toLowerCase(),a+(p?I0(c):c)});function I0(a){return pm(mt(a).toLowerCase())}function D0(a){return a=mt(a),a&&a.replace(T1,_E).replace(Y1,"")}function AI(a,c,p){a=mt(a),c=un(c);var g=a.length;p=p===r?g:Ds(Ge(p),0,g);var b=p;return p-=c.length,p>=0&&a.slice(p,b)==c}function TI(a){return a=mt(a),a&&c1.test(a)?a.replace(lb,bE):a}function II(a){return a=mt(a),a&&f1.test(a)?a.replace(lp,"\\$&"):a}var DI=bo(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),PI=bo(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),RI=Ov("toLowerCase");function OI(a,c,p){a=mt(a),c=Ge(c);var g=c?uo(a):0;if(!c||g>=c)return a;var b=(c-g)/2;return Rc(yc(b),p)+a+Rc(vc(b),p)}function FI(a,c,p){a=mt(a),c=Ge(c);var g=c?uo(a):0;return c&&g<c?a+Rc(c-g,p):a}function LI(a,c,p){a=mt(a),c=Ge(c);var g=c?uo(a):0;return c&&g<c?Rc(c-g,p)+a:a}function NI(a,c,p){return p||c==null?c=0:c&&(c=+c),jE(mt(a).replace(cp,""),c||0)}function BI(a,c,p){return(p?Bi(a,c,p):c===r)?c=1:c=Ge(c),Hp(mt(a),c)}function VI(){var a=arguments,c=mt(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var zI=bo(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function HI(a,c,p){return p&&typeof p!="number"&&Bi(a,c,p)&&(c=p=r),p=p===r?dt:p>>>0,p?(a=mt(a),a&&(typeof c=="string"||c!=null&&!dm(c))&&(c=un(c),!c&&ho(a))?es($n(a),0,p):a.split(c,p)):[]}var WI=bo(function(a,c,p){return a+(p?" ":"")+pm(c)});function UI(a,c,p){return a=mt(a),p=p==null?0:Ds(Ge(p),0,a.length),c=un(c),a.slice(p,p+c.length)==c}function jI(a,c,p){var g=k.templateSettings;p&&Bi(a,c,p)&&(c=r),a=mt(a),c=Gc({},c,g,Hv);var b=Gc({},c.imports,g.imports,Hv),M=vi(b),D=kp(b,M),O,V,Y=0,K=c.interpolate||rc,Z="__p += '",le=Sp((c.escape||rc).source+"|"+K.source+"|"+(K===cb?C1:rc).source+"|"+(c.evaluate||rc).source+"|$","g"),be="//# sourceURL="+(yt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++J1+"]")+`
`;a.replace(le,function(Pe,Qe,it,mn,Vi,fn){return it||(it=mn),Z+=a.slice(Y,fn).replace(I1,vE),Qe&&(O=!0,Z+=`' +
__e(`+Qe+`) +
'`),Vi&&(V=!0,Z+=`';
`+Vi+`;
__p += '`),it&&(Z+=`' +
((__t = (`+it+`)) == null ? '' : __t) +
'`),Y=fn+Pe.length,Pe}),Z+=`';
`;var De=yt.call(c,"variable")&&c.variable;if(!De)Z=`with (obj) {
`+Z+`
}
`;else if(x1.test(De))throw new Be(s);Z=(V?Z.replace(s1,""):Z).replace(o1,"$1").replace(a1,"$1;"),Z="function("+(De||"obj")+`) {
`+(De?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(O?", __e = _.escape":"")+(V?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Z+`return __p
}`;var qe=R0(function(){return pt(M,be+"return "+Z).apply(r,D)});if(qe.source=Z,cm(qe))throw qe;return qe}function GI(a){return mt(a).toLowerCase()}function $I(a){return mt(a).toUpperCase()}function qI(a,c,p){if(a=mt(a),a&&(p||c===r))return Wb(a);if(!a||!(c=un(c)))return a;var g=$n(a),b=$n(c),M=Ub(g,b),D=jb(g,b)+1;return es(g,M,D).join("")}function YI(a,c,p){if(a=mt(a),a&&(p||c===r))return a.slice(0,$b(a)+1);if(!a||!(c=un(c)))return a;var g=$n(a),b=jb(g,$n(c))+1;return es(g,0,b).join("")}function XI(a,c,p){if(a=mt(a),a&&(p||c===r))return a.replace(cp,"");if(!a||!(c=un(c)))return a;var g=$n(a),b=Ub(g,$n(c));return es(g,b).join("")}function KI(a,c){var p=Q,g=ee;if(Wt(c)){var b="separator"in c?c.separator:b;p="length"in c?Ge(c.length):p,g="omission"in c?un(c.omission):g}a=mt(a);var M=a.length;if(ho(a)){var D=$n(a);M=D.length}if(p>=M)return a;var O=p-uo(g);if(O<1)return g;var V=D?es(D,0,O).join(""):a.slice(0,O);if(b===r)return V+g;if(D&&(O+=V.length-O),dm(b)){if(a.slice(O).search(b)){var Y,K=V;for(b.global||(b=Sp(b.source,mt(db.exec(b))+"g")),b.lastIndex=0;Y=b.exec(K);)var Z=Y.index;V=V.slice(0,Z===r?O:Z)}}else if(a.indexOf(un(b),O)!=O){var le=V.lastIndexOf(b);le>-1&&(V=V.slice(0,le))}return V+g}function ZI(a){return a=mt(a),a&&l1.test(a)?a.replace(ab,SE):a}var QI=bo(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),pm=Ov("toUpperCase");function P0(a,c,p){return a=mt(a),c=p?r:c,c===r?xE(a)?TE(a):uE(a):a.match(c)||[]}var R0=Xe(function(a,c){try{return dn(a,r,c)}catch(p){return cm(p)?p:new Be(p)}}),JI=Cr(function(a,c){return Sn(c,function(p){p=or(p),xr(a,p,am(a[p],a))}),a});function eD(a){var c=a==null?0:a.length,p=Ie();return a=c?Nt(a,function(g){if(typeof g[1]!="function")throw new Mn(n);return[p(g[0]),g[1]]}):[],Xe(function(g){for(var b=-1;++b<c;){var M=a[b];if(dn(M[0],this,g))return dn(M[1],this,g)}})}function tD(a){return SS(Tn(a,h))}function mm(a){return function(){return a}}function iD(a,c){return a==null||a!==a?c:a}var nD=Lv(),rD=Lv(!0);function en(a){return a}function fm(a){return uv(typeof a=="function"?a:Tn(a,h))}function sD(a){return mv(Tn(a,h))}function oD(a,c){return fv(a,Tn(c,h))}var aD=Xe(function(a,c){return function(p){return Ca(p,a,c)}}),lD=Xe(function(a,c){return function(p){return Ca(a,p,c)}});function gm(a,c,p){var g=vi(c),b=Sc(c,g);p==null&&!(Wt(c)&&(b.length||!g.length))&&(p=c,c=a,a=this,b=Sc(c,vi(c)));var M=!(Wt(p)&&"chain"in p)||!!p.chain,D=Er(a);return Sn(b,function(O){var V=c[O];a[O]=V,D&&(a.prototype[O]=function(){var Y=this.__chain__;if(M||Y){var K=a(this.__wrapped__),Z=K.__actions__=Zi(this.__actions__);return Z.push({func:V,args:arguments,thisArg:a}),K.__chain__=Y,K}return V.apply(a,qr([this.value()],arguments))})}),a}function cD(){return bi._===this&&(bi._=FE),this}function _m(){}function dD(a){return a=Ge(a),Xe(function(c){return gv(c,a)})}var hD=Yp(Nt),uD=Yp(Nb),pD=Yp(vp);function O0(a){return tm(a)?yp(or(a)):US(a)}function mD(a){return function(c){return a==null?r:Ps(a,c)}}var fD=Bv(),gD=Bv(!0);function bm(){return[]}function vm(){return!1}function _D(){return{}}function bD(){return""}function vD(){return!0}function yD(a,c){if(a=Ge(a),a<1||a>ue)return[];var p=dt,g=Ii(a,dt);c=Ie(c),a-=dt;for(var b=Cp(g,c);++p<a;)c(p);return b}function xD(a){return We(a)?Nt(a,or):pn(a)?[a]:Zi(e0(mt(a)))}function wD(a){var c=++RE;return mt(a)+c}var CD=Pc(function(a,c){return a+c},0),kD=Xp("ceil"),ED=Pc(function(a,c){return a/c},1),SD=Xp("floor");function MD(a){return a&&a.length?Ec(a,en,Op):r}function AD(a,c){return a&&a.length?Ec(a,Ie(c,2),Op):r}function TD(a){return zb(a,en)}function ID(a,c){return zb(a,Ie(c,2))}function DD(a){return a&&a.length?Ec(a,en,Bp):r}function PD(a,c){return a&&a.length?Ec(a,Ie(c,2),Bp):r}var RD=Pc(function(a,c){return a*c},1),OD=Xp("round"),FD=Pc(function(a,c){return a-c},0);function LD(a){return a&&a.length?wp(a,en):0}function ND(a,c){return a&&a.length?wp(a,Ie(c,2)):0}return k.after=sT,k.ary=h0,k.assign=$T,k.assignIn=E0,k.assignInWith=Gc,k.assignWith=qT,k.at=YT,k.before=u0,k.bind=am,k.bindAll=JI,k.bindKey=p0,k.castArray=_T,k.chain=l0,k.chunk=SM,k.compact=MM,k.concat=AM,k.cond=eD,k.conforms=tD,k.constant=mm,k.countBy=LA,k.create=XT,k.curry=m0,k.curryRight=f0,k.debounce=g0,k.defaults=KT,k.defaultsDeep=ZT,k.defer=oT,k.delay=aT,k.difference=TM,k.differenceBy=IM,k.differenceWith=DM,k.drop=PM,k.dropRight=RM,k.dropRightWhile=OM,k.dropWhile=FM,k.fill=LM,k.filter=BA,k.flatMap=HA,k.flatMapDeep=WA,k.flatMapDepth=UA,k.flatten=r0,k.flattenDeep=NM,k.flattenDepth=BM,k.flip=lT,k.flow=nD,k.flowRight=rD,k.fromPairs=VM,k.functions=rI,k.functionsIn=sI,k.groupBy=jA,k.initial=HM,k.intersection=WM,k.intersectionBy=UM,k.intersectionWith=jM,k.invert=aI,k.invertBy=lI,k.invokeMap=$A,k.iteratee=fm,k.keyBy=qA,k.keys=vi,k.keysIn=Ji,k.map=Vc,k.mapKeys=dI,k.mapValues=hI,k.matches=sD,k.matchesProperty=oD,k.memoize=Hc,k.merge=uI,k.mergeWith=S0,k.method=aD,k.methodOf=lD,k.mixin=gm,k.negate=Wc,k.nthArg=dD,k.omit=pI,k.omitBy=mI,k.once=cT,k.orderBy=YA,k.over=hD,k.overArgs=dT,k.overEvery=uD,k.overSome=pD,k.partial=lm,k.partialRight=_0,k.partition=XA,k.pick=fI,k.pickBy=M0,k.property=O0,k.propertyOf=mD,k.pull=YM,k.pullAll=o0,k.pullAllBy=XM,k.pullAllWith=KM,k.pullAt=ZM,k.range=fD,k.rangeRight=gD,k.rearg=hT,k.reject=QA,k.remove=QM,k.rest=uT,k.reverse=sm,k.sampleSize=eT,k.set=_I,k.setWith=bI,k.shuffle=tT,k.slice=JM,k.sortBy=rT,k.sortedUniq=oA,k.sortedUniqBy=aA,k.split=HI,k.spread=pT,k.tail=lA,k.take=cA,k.takeRight=dA,k.takeRightWhile=hA,k.takeWhile=uA,k.tap=MA,k.throttle=mT,k.thru=Bc,k.toArray=w0,k.toPairs=A0,k.toPairsIn=T0,k.toPath=xD,k.toPlainObject=k0,k.transform=vI,k.unary=fT,k.union=pA,k.unionBy=mA,k.unionWith=fA,k.uniq=gA,k.uniqBy=_A,k.uniqWith=bA,k.unset=yI,k.unzip=om,k.unzipWith=a0,k.update=xI,k.updateWith=wI,k.values=xo,k.valuesIn=CI,k.without=vA,k.words=P0,k.wrap=gT,k.xor=yA,k.xorBy=xA,k.xorWith=wA,k.zip=CA,k.zipObject=kA,k.zipObjectDeep=EA,k.zipWith=SA,k.entries=A0,k.entriesIn=T0,k.extend=E0,k.extendWith=Gc,gm(k,k),k.add=CD,k.attempt=R0,k.camelCase=MI,k.capitalize=I0,k.ceil=kD,k.clamp=kI,k.clone=bT,k.cloneDeep=yT,k.cloneDeepWith=xT,k.cloneWith=vT,k.conformsTo=wT,k.deburr=D0,k.defaultTo=iD,k.divide=ED,k.endsWith=AI,k.eq=Yn,k.escape=TI,k.escapeRegExp=II,k.every=NA,k.find=VA,k.findIndex=i0,k.findKey=QT,k.findLast=zA,k.findLastIndex=n0,k.findLastKey=JT,k.floor=SD,k.forEach=c0,k.forEachRight=d0,k.forIn=eI,k.forInRight=tI,k.forOwn=iI,k.forOwnRight=nI,k.get=hm,k.gt=CT,k.gte=kT,k.has=oI,k.hasIn=um,k.head=s0,k.identity=en,k.includes=GA,k.indexOf=zM,k.inRange=EI,k.invoke=cI,k.isArguments=Fs,k.isArray=We,k.isArrayBuffer=ET,k.isArrayLike=Qi,k.isArrayLikeObject=Qt,k.isBoolean=ST,k.isBuffer=ts,k.isDate=MT,k.isElement=AT,k.isEmpty=TT,k.isEqual=IT,k.isEqualWith=DT,k.isError=cm,k.isFinite=PT,k.isFunction=Er,k.isInteger=b0,k.isLength=Uc,k.isMap=v0,k.isMatch=RT,k.isMatchWith=OT,k.isNaN=FT,k.isNative=LT,k.isNil=BT,k.isNull=NT,k.isNumber=y0,k.isObject=Wt,k.isObjectLike=Yt,k.isPlainObject=Ta,k.isRegExp=dm,k.isSafeInteger=VT,k.isSet=x0,k.isString=jc,k.isSymbol=pn,k.isTypedArray=yo,k.isUndefined=zT,k.isWeakMap=HT,k.isWeakSet=WT,k.join=GM,k.kebabCase=DI,k.last=Dn,k.lastIndexOf=$M,k.lowerCase=PI,k.lowerFirst=RI,k.lt=UT,k.lte=jT,k.max=MD,k.maxBy=AD,k.mean=TD,k.meanBy=ID,k.min=DD,k.minBy=PD,k.stubArray=bm,k.stubFalse=vm,k.stubObject=_D,k.stubString=bD,k.stubTrue=vD,k.multiply=RD,k.nth=qM,k.noConflict=cD,k.noop=_m,k.now=zc,k.pad=OI,k.padEnd=FI,k.padStart=LI,k.parseInt=NI,k.random=SI,k.reduce=KA,k.reduceRight=ZA,k.repeat=BI,k.replace=VI,k.result=gI,k.round=OD,k.runInContext=L,k.sample=JA,k.size=iT,k.snakeCase=zI,k.some=nT,k.sortedIndex=eA,k.sortedIndexBy=tA,k.sortedIndexOf=iA,k.sortedLastIndex=nA,k.sortedLastIndexBy=rA,k.sortedLastIndexOf=sA,k.startCase=WI,k.startsWith=UI,k.subtract=FD,k.sum=LD,k.sumBy=ND,k.template=jI,k.times=yD,k.toFinite=Sr,k.toInteger=Ge,k.toLength=C0,k.toLower=GI,k.toNumber=Pn,k.toSafeInteger=GT,k.toString=mt,k.toUpper=$I,k.trim=qI,k.trimEnd=YI,k.trimStart=XI,k.truncate=KI,k.unescape=ZI,k.uniqueId=wD,k.upperCase=QI,k.upperFirst=pm,k.each=c0,k.eachRight=d0,k.first=s0,gm(k,function(){var a={};return rr(k,function(c,p){yt.call(k.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),k.VERSION=t,Sn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){k[a].placeholder=k}),Sn(["drop","take"],function(a,c){tt.prototype[a]=function(p){p=p===r?1:pi(Ge(p),0);var g=this.__filtered__&&!c?new tt(this):this.clone();return g.__filtered__?g.__takeCount__=Ii(p,g.__takeCount__):g.__views__.push({size:Ii(p,dt),type:a+(g.__dir__<0?"Right":"")}),g},tt.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),Sn(["filter","map","takeWhile"],function(a,c){var p=c+1,g=p==ct||p==st;tt.prototype[a]=function(b){var M=this.clone();return M.__iteratees__.push({iteratee:Ie(b,3),type:p}),M.__filtered__=M.__filtered__||g,M}}),Sn(["head","last"],function(a,c){var p="take"+(c?"Right":"");tt.prototype[a]=function(){return this[p](1).value()[0]}}),Sn(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");tt.prototype[a]=function(){return this.__filtered__?new tt(this):this[p](1)}}),tt.prototype.compact=function(){return this.filter(en)},tt.prototype.find=function(a){return this.filter(a).head()},tt.prototype.findLast=function(a){return this.reverse().find(a)},tt.prototype.invokeMap=Xe(function(a,c){return typeof a=="function"?new tt(this):this.map(function(p){return Ca(p,a,c)})}),tt.prototype.reject=function(a){return this.filter(Wc(Ie(a)))},tt.prototype.slice=function(a,c){a=Ge(a);var p=this;return p.__filtered__&&(a>0||c<0)?new tt(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==r&&(c=Ge(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},tt.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},tt.prototype.toArray=function(){return this.take(dt)},rr(tt.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),g=/^(?:head|last)$/.test(c),b=k[g?"take"+(c=="last"?"Right":""):c],M=g||/^find/.test(c);b&&(k.prototype[c]=function(){var D=this.__wrapped__,O=g?[1]:arguments,V=D instanceof tt,Y=O[0],K=V||We(D),Z=function(Qe){var it=b.apply(k,qr([Qe],O));return g&&le?it[0]:it};K&&p&&typeof Y=="function"&&Y.length!=1&&(V=K=!1);var le=this.__chain__,be=!!this.__actions__.length,De=M&&!le,qe=V&&!be;if(!M&&K){D=qe?D:new tt(this);var Pe=a.apply(D,O);return Pe.__actions__.push({func:Bc,args:[Z],thisArg:r}),new An(Pe,le)}return De&&qe?a.apply(this,O):(Pe=this.thru(Z),De?g?Pe.value()[0]:Pe.value():Pe)})}),Sn(["pop","push","shift","sort","splice","unshift"],function(a){var c=dc[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",g=/^(?:pop|shift)$/.test(a);k.prototype[a]=function(){var b=arguments;if(g&&!this.__chain__){var M=this.value();return c.apply(We(M)?M:[],b)}return this[p](function(D){return c.apply(We(D)?D:[],b)})}}),rr(tt.prototype,function(a,c){var p=k[c];if(p){var g=p.name+"";yt.call(fo,g)||(fo[g]=[]),fo[g].push({name:c,func:p})}}),fo[Dc(r,v).name]=[{name:"wrapper",func:r}],tt.prototype.clone=ZE,tt.prototype.reverse=QE,tt.prototype.value=JE,k.prototype.at=AA,k.prototype.chain=TA,k.prototype.commit=IA,k.prototype.next=DA,k.prototype.plant=RA,k.prototype.reverse=OA,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=FA,k.prototype.first=k.prototype.head,ga&&(k.prototype[ga]=PA),k},Xr=IE();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(bi._=Xr,define(function(){return Xr})):Ms?((Ms.exports=Xr)._=Xr,fp._=Xr):bi._=Xr}).call(na)});var Fa=class{},fd=class{},Dr=class r{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let n=e.slice(0,i),s=e.slice(i+1).trim();this.addHeaderEntry(n,s)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.addHeaderEntry(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new r;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let n=(t.op==="a"?this.headers.get(e):void 0)||[];n.push(...i),this.headers.set(e,n);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(l=>s.indexOf(l)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}addHeaderEntry(t,e){let i=t.toLowerCase();this.maybeSetNormalizedName(t,i),this.headers.has(i)?this.headers.get(i).push(e):this.headers.set(i,[e])}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),n=t.toLowerCase();this.headers.set(n,i),this.maybeSetNormalizedName(t,n)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Mm=class{encodeKey(t){return Ty(t)}encodeValue(t){return Ty(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function zD(r,t){let e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(n=>{let s=n.indexOf("="),[o,l]=s==-1?[t.decodeKey(n),""]:[t.decodeKey(n.slice(0,s)),t.decodeValue(n.slice(s+1))],d=e.get(o)||[];d.push(l),e.set(o,d)}),e}var HD=/%(\d[a-f0-9])/gi,WD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ty(r){return encodeURIComponent(r).replace(HD,(t,e)=>WD[e]??t)}function md(r){return`${r}`}var cs=class r{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new Mm,t.fromString){if(t.fromObject)throw new mi(2805,!1);this.map=zD(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],n=Array.isArray(i)?i.map(md):[md(i)];this.map.set(e,n)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let n=t[i];Array.isArray(n)?n.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:n,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new r({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(md(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],n=i.indexOf(md(t.value));n!==-1&&i.splice(n,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Am=class{map=new Map;set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function UD(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Iy(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function Dy(r){return typeof Blob<"u"&&r instanceof Blob}function Py(r){return typeof FormData<"u"&&r instanceof FormData}function jD(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var Ry="Content-Type",Oy="Accept",Ny="X-Request-URL",By="text/plain",Vy="application/json",GD=`${Vy}, ${By}, */*`,Oa=class r{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(t,e,i,n){this.url=e,this.method=t.toUpperCase();let s;if(UD(this.method)||n?(this.body=i!==void 0?i:null,s=n):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Dr,this.context??=new Am,!this.params)this.params=new cs,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let l=e.indexOf("?"),d=l===-1?"?":l<e.length-1?"&":"";this.urlWithParams=e+d+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Iy(this.body)||Dy(this.body)||Py(this.body)||jD(this.body)?this.body:this.body instanceof cs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Py(this.body)?null:Dy(this.body)?this.body.type||null:Iy(this.body)?null:typeof this.body=="string"?By:this.body instanceof cs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Vy:null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,n=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,l=t.withCredentials??this.withCredentials,d=t.reportProgress??this.reportProgress,h=t.headers||this.headers,u=t.params||this.params,m=t.context??this.context;return t.setHeaders!==void 0&&(h=Object.keys(t.setHeaders).reduce((f,_)=>f.set(_,t.setHeaders[_]),h)),t.setParams&&(u=Object.keys(t.setParams).reduce((f,_)=>f.set(_,t.setParams[_]),u)),new r(e,i,o,{params:u,headers:h,context:m,reportProgress:d,responseType:n,withCredentials:l,transferCache:s})}},Do=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(Do||{}),La=class{headers;status;statusText;url;ok;type;constructor(t,e=200,i="OK"){this.headers=t.headers||new Dr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Tm=class r extends La{constructor(t={}){super(t)}type=Do.ResponseHeader;clone(t={}){return new r({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},gd=class r extends La{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Do.Response;clone(t={}){return new r({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},_d=class extends La{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},$D=200,qD=204;function Sm(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var Na=(()=>{class r{handler;constructor(e){this.handler=e}request(e,i,n={}){let s;if(e instanceof Oa)s=e;else{let d;n.headers instanceof Dr?d=n.headers:d=new Dr(n.headers);let h;n.params&&(n.params instanceof cs?h=n.params:h=new cs({fromObject:n.params})),s=new Oa(e,i,n.body!==void 0?n.body:null,{headers:d,context:n.context,params:h,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials,transferCache:n.transferCache})}let o=Pi(s).pipe(U0(d=>this.handler.handle(d)));if(e instanceof Oa||n.observe==="events")return o;let l=o.pipe(ai(d=>d instanceof gd));switch(n.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(Ot(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new mi(2806,!1);return d.body}));case"blob":return l.pipe(Ot(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new mi(2807,!1);return d.body}));case"text":return l.pipe(Ot(d=>{if(d.body!==null&&typeof d.body!="string")throw new mi(2808,!1);return d.body}));case"json":default:return l.pipe(Ot(d=>d.body))}case"response":return l;default:throw new mi(2809,!1)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:new cs().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,n={}){return this.request("PATCH",e,Sm(n,i))}post(e,i,n={}){return this.request("POST",e,Sm(n,i))}put(e,i,n={}){return this.request("PUT",e,Sm(n,i))}static \u0275fac=function(i){return new(i||r)(Je(Fa))};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})();var YD=new te("");function XD(r,t){return t(r)}function KD(r,t,e){return(i,n)=>Y0(e,()=>t(i,s=>r(s,n)))}var zy=new te(""),ZD=new te(""),QD=new te("",{providedIn:"root",factory:()=>!0});var Fy=(()=>{class r extends Fa{backend;injector;chain=null;pendingTasks=C(K0);contributeToStability=C(QD);constructor(e,i){super(),this.backend=e,this.injector=i}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(zy),...this.injector.get(ZD,[])]));this.chain=i.reduceRight((n,s)=>KD(n,s,this.injector),XD)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(e,n=>this.backend.handle(n)).pipe(Jc(()=>this.pendingTasks.remove(i)))}else return this.chain(e,i=>this.backend.handle(i))}static \u0275fac=function(i){return new(i||r)(Je(fd),Je(ko))};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})();var JD=/^\)\]\}',?\n/,eP=RegExp(`^${Ny}:`,"m");function tP(r){return"responseURL"in r&&r.responseURL?r.responseURL:eP.test(r.getAllResponseHeaders())?r.getResponseHeader(Ny):null}var Ly=(()=>{class r{xhrFactory;constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new mi(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?qc(i.\u0275loadImpl()):Pi(null)).pipe(ns(()=>new Rn(s=>{let o=i.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((v,x)=>o.setRequestHeader(v,x.join(","))),e.headers.has(Oy)||o.setRequestHeader(Oy,GD),!e.headers.has(Ry)){let v=e.detectContentTypeHeader();v!==null&&o.setRequestHeader(Ry,v)}if(e.responseType){let v=e.responseType.toLowerCase();o.responseType=v!=="json"?v:"text"}let l=e.serializeBody(),d=null,h=()=>{if(d!==null)return d;let v=o.statusText||"OK",x=new Dr(o.getAllResponseHeaders()),S=tP(o)||e.url;return d=new Tm({headers:x,status:o.status,statusText:v,url:S}),d},u=()=>{let{headers:v,status:x,statusText:S,url:I}=h(),P=null;x!==qD&&(P=typeof o.response>"u"?o.responseText:o.response),x===0&&(x=P?$D:0);let B=x>=200&&x<300;if(e.responseType==="json"&&typeof P=="string"){let N=P;P=P.replace(JD,"");try{P=P!==""?JSON.parse(P):null}catch(z){P=N,B&&(B=!1,P={error:z,text:P})}}B?(s.next(new gd({body:P,headers:v,status:x,statusText:S,url:I||void 0})),s.complete()):s.error(new _d({error:P,headers:v,status:x,statusText:S,url:I||void 0}))},m=v=>{let{url:x}=h(),S=new _d({error:v,status:o.status||0,statusText:o.statusText||"Unknown Error",url:x||void 0});s.error(S)},f=!1,_=v=>{f||(s.next(h()),f=!0);let x={type:Do.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(x.total=v.total),e.responseType==="text"&&o.responseText&&(x.partialText=o.responseText),s.next(x)},y=v=>{let x={type:Do.UploadProgress,loaded:v.loaded};v.lengthComputable&&(x.total=v.total),s.next(x)};return o.addEventListener("load",u),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),e.reportProgress&&(o.addEventListener("progress",_),l!==null&&o.upload&&o.upload.addEventListener("progress",y)),o.send(l),s.next({type:Do.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",u),o.removeEventListener("timeout",m),e.reportProgress&&(o.removeEventListener("progress",_),l!==null&&o.upload&&o.upload.removeEventListener("progress",y)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(i){return new(i||r)(Je(pd))};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})(),Hy=new te(""),iP="XSRF-TOKEN",nP=new te("",{providedIn:"root",factory:()=>iP}),rP="X-XSRF-TOKEN",sP=new te("",{providedIn:"root",factory:()=>rP}),bd=class{},oP=(()=>{class r{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(e,i,n){this.doc=e,this.platform=i,this.cookieName=n}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=cd(e,this.cookieName),this.lastCookieString=e),this.lastToken}static \u0275fac=function(i){return new(i||r)(Je(Ve),Je(rs),Je(nP))};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})();function aP(r,t){let e=r.url.toLowerCase();if(!C(Hy)||r.method==="GET"||r.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(r);let i=C(bd).getToken(),n=C(sP);return i!=null&&!r.headers.has(n)&&(r=r.clone({headers:r.headers.set(n,i)})),t(r)}function Wy(...r){let t=[Na,Ly,Fy,{provide:Fa,useExisting:Fy},{provide:fd,useFactory:()=>C(YD,{optional:!0})??C(Ly)},{provide:zy,useValue:aP,multi:!0},{provide:Hy,useValue:!0},{provide:bd,useClass:oP}];for(let e of r)t.push(...e.\u0275providers);return Ia(t)}var Dm=class extends Cy{supportsDOMEvents=!0},Pm=class r extends Dm{static makeCurrent(){wy(new r)}onAndCancel(t,e,i,n){return t.addEventListener(e,i,n),()=>{t.removeEventListener(e,i,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=lP();return e==null?null:cP(e)}resetBaseElement(){Ba=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return cd(document.cookie,t)}},Ba=null;function lP(){return Ba=Ba||document.querySelector("base"),Ba?Ba.getAttribute("href"):null}function cP(r){return new URL(r,document.baseURI).pathname}var dP=(()=>{class r{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})(),Rm=new te(""),Xy=(()=>{class r{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,i){this._zone=i,e.forEach(n=>{n.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,i,n,s){return this._findPluginFor(i).addEventListener(e,i,n,s)}getZone(){return this._zone}_findPluginFor(e){let i=this._eventNameToPlugin.get(e);if(i)return i;if(i=this._plugins.find(s=>s.supports(e)),!i)throw new mi(5101,!1);return this._eventNameToPlugin.set(e,i),i}static \u0275fac=function(i){return new(i||r)(Je(Rm),Je(ke))};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})(),yd=class{_doc;constructor(t){this._doc=t}manager},vd="ng-app-id";function jy(r){for(let t of r)t.remove()}function Gy(r,t){let e=t.createElement("style");return e.textContent=r,e}function hP(r,t,e,i){let n=r.head?.querySelectorAll(`style[${vd}="${t}"],link[${vd}="${t}"]`);if(n)for(let s of n)s.removeAttribute(vd),s instanceof HTMLLinkElement?i.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function Om(r,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",r),e}var Ky=(()=>{class r{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(e,i,n,s={}){this.doc=e,this.appId=i,this.nonce=n,this.isServer=Em(s),hP(e,i,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,i){for(let n of e)this.addUsage(n,this.inline,Gy);i?.forEach(n=>this.addUsage(n,this.external,Om))}removeStyles(e,i){for(let n of e)this.removeUsage(n,this.inline);i?.forEach(n=>this.removeUsage(n,this.external))}addUsage(e,i,n){let s=i.get(e);s?s.usage++:i.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,n(e,this.doc)))})}removeUsage(e,i){let n=i.get(e);n&&(n.usage--,n.usage<=0&&(jy(n.elements),i.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])jy(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[i,{elements:n}]of this.inline)n.push(this.addElement(e,Gy(i,this.doc)));for(let[i,{elements:n}]of this.external)n.push(this.addElement(e,Om(i,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,i){return this.nonce&&i.setAttribute("nonce",this.nonce),this.isServer&&i.setAttribute(vd,this.appId),e.appendChild(i)}static \u0275fac=function(i){return new(i||r)(Je(Ve),Je(Eo),Je(Da,8),Je(rs))};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})(),Im={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Lm=/%COMP%/g;var Zy="%COMP%",uP=`_nghost-${Zy}`,pP=`_ngcontent-${Zy}`,mP=!0,fP=new te("",{providedIn:"root",factory:()=>mP});function gP(r){return pP.replace(Lm,r)}function _P(r){return uP.replace(Lm,r)}function Qy(r,t){return t.map(e=>e.replace(Lm,r))}var xd=(()=>{class r{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(e,i,n,s,o,l,d,h=null,u=null){this.eventManager=e,this.sharedStylesHost=i,this.appId=n,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=l,this.ngZone=d,this.nonce=h,this.tracingService=u,this.platformIsServer=Em(l),this.defaultRenderer=new Va(e,o,d,this.platformIsServer,this.tracingService)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Pa.ShadowDom&&(i=Ue(J({},i),{encapsulation:Pa.Emulated}));let n=this.getOrCreateRenderer(e,i);return n instanceof wd?n.applyToHost(e):n instanceof za&&n.applyStyles(),n}getOrCreateRenderer(e,i){let n=this.rendererByCompId,s=n.get(i.id);if(!s){let o=this.doc,l=this.ngZone,d=this.eventManager,h=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,m=this.platformIsServer,f=this.tracingService;switch(i.encapsulation){case Pa.Emulated:s=new wd(d,h,i,this.appId,u,o,l,m,f);break;case Pa.ShadowDom:return new Fm(d,h,e,i,o,l,this.nonce,m,f);default:s=new za(d,h,i,u,o,l,m,f);break}n.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(i){return new(i||r)(Je(Xy),Je(Ky),Je(Eo),Je(fP),Je(Ve),Je(rs),Je(ke),Je(Da),Je(J0,8))};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})(),Va=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,i,n,s){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=n,this.tracingService=s}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(Im[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){($y(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&($y(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){e.remove()}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new mi(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,n){if(n){e=n+":"+e;let s=Im[n];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let n=Im[i];n?t.removeAttributeNS(n,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,n){n&(Ra.DashCase|Ra.Important)?t.style.setProperty(e,i,n&Ra.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Ra.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i,n){if(typeof t=="string"&&(t=To().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);let s=this.decoratePreventDefault(i);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,n)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function $y(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var Fm=class extends Va{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,i,n,s,o,l,d,h){super(t,s,o,d,h),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=n.styles;u=Qy(n.id,u);for(let f of u){let _=document.createElement("style");l&&_.setAttribute("nonce",l),_.textContent=f,this.shadowRoot.appendChild(_)}let m=n.getExternalStyles?.();if(m)for(let f of m){let _=Om(f,s);l&&_.setAttribute("nonce",l),this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},za=class extends Va{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,e,i,n,s,o,l,d,h){super(t,s,o,l,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=n;let u=i.styles;this.styles=h?Qy(h,u):u,this.styleUrls=i.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},wd=class extends za{contentAttr;hostAttr;constructor(t,e,i,n,s,o,l,d,h){let u=n+"-"+i.id;super(t,e,i,s,o,l,d,h,u),this.contentAttr=gP(u),this.hostAttr=_P(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},bP=(()=>{class r extends yd{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,n,s){return e.addEventListener(i,n,s),()=>this.removeEventListener(e,i,n,s)}removeEventListener(e,i,n,s){return e.removeEventListener(i,n,s)}static \u0275fac=function(i){return new(i||r)(Je(Ve))};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})(),qy=["alt","control","meta","shift"],vP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yP={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},xP=(()=>{class r extends yd{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,i,n,s){let o=r.parseEventName(i),l=r.eventCallback(o.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>To().onAndCancel(e,o.domEventName,l,s))}static parseEventName(e){let i=e.toLowerCase().split("."),n=i.shift();if(i.length===0||!(n==="keydown"||n==="keyup"))return null;let s=r._normalizeKey(i.pop()),o="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),o="code."),qy.forEach(h=>{let u=i.indexOf(h);u>-1&&(i.splice(u,1),o+=h+".")}),o+=s,i.length!=0||s.length===0)return null;let d={};return d.domEventName=n,d.fullKey=o,d}static matchEventFullKeyCode(e,i){let n=vP[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(n=e.code,s="code."),n==null||!n?!1:(n=n.toLowerCase(),n===" "?n="space":n==="."&&(n="dot"),qy.forEach(o=>{if(o!==n){let l=yP[o];l(e)&&(s+=o+".")}}),s+=n,s===i)}static eventCallback(e,i,n){return s=>{r.matchEventFullKeyCode(s,e)&&n.runGuarded(()=>i(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(i){return new(i||r)(Je(Ve))};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})();function Jy(r,t){return xy(J({rootComponent:r},wP(t)))}function wP(r){return{appProviders:[...MP,...r?.providers??[]],platformProviders:SP}}function CP(){Pm.makeCurrent()}function kP(){return new Ns}function EP(){return Z0(document),document}var SP=[{provide:rs,useValue:Ey},{provide:Q0,useValue:CP,multi:!0},{provide:Ve,useFactory:EP,deps:[]}];var MP=[{provide:q0,useValue:"root"},{provide:Ns,useFactory:kP,deps:[]},{provide:Rm,useClass:bP,multi:!0,deps:[Ve]},{provide:Rm,useClass:xP,multi:!0,deps:[Ve]},xd,Ky,Xy,{provide:On,useExisting:xd},{provide:pd,useClass:dP,deps:[]},[]];var Ws=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:function(i){let n=null;return i?n=new(i||r):n=Je(AP),n},providedIn:"root"})}return r})(),AP=(()=>{class r extends Ws{_doc;constructor(e){super(),this._doc=e}sanitize(e,i){if(i==null)return null;switch(e){case bn.NONE:return i;case bn.HTML:return Mo(i,"HTML")?So(i):oy(this._doc,String(i)).toString();case bn.STYLE:return Mo(i,"Style")?So(i):i;case bn.SCRIPT:if(Mo(i,"Script"))return So(i);throw new mi(5200,!1);case bn.URL:return Mo(i,"URL")?So(i):sy(String(i));case bn.RESOURCE_URL:if(Mo(i,"ResourceURL"))return So(i);throw new mi(5201,!1);default:throw new mi(5202,!1)}}bypassSecurityTrustHtml(e){return ey(e)}bypassSecurityTrustStyle(e){return ty(e)}bypassSecurityTrustScript(e){return iy(e)}bypassSecurityTrustUrl(e){return ny(e)}bypassSecurityTrustResourceUrl(e){return ry(e)}static \u0275fac=function(i){return new(i||r)(Je(Ve))};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Vm;try{Vm=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Vm=!1}var ht=(()=>{class r{_platformId=C(rs);isBrowser=this._platformId?Sy(this._platformId):typeof document=="object"&&!!document;EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent);TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent);BLINK=this.isBrowser&&!!(window.chrome||Vm)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT;WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT;IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window);FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent);ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT;SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT;constructor(){}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Po,ex=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function zm(){if(Po)return Po;if(typeof document!="object"||!document)return Po=new Set(ex),Po;let r=document.createElement("input");return Po=new Set(ex.filter(t=>(r.setAttribute("type",t),r.type===t))),Po}var Ha;function TP(){if(Ha==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ha=!0}))}finally{Ha=Ha||!1}return Ha}function Hi(r){return TP()?r:!!r.capture}var Zn=function(r){return r[r.NORMAL=0]="NORMAL",r[r.NEGATED=1]="NEGATED",r[r.INVERTED=2]="INVERTED",r}(Zn||{}),Cd,Us;function kd(){if(Us==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Us=!1,Us;if("scrollBehavior"in document.documentElement.style)Us=!0;else{let r=Element.prototype.scrollTo;r?Us=!/\{\s*\[native code\]\s*\}/.test(r.toString()):Us=!1}}return Us}function Ro(){if(typeof document!="object"||!document)return Zn.NORMAL;if(Cd==null){let r=document.createElement("div"),t=r.style;r.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",r.appendChild(e),document.body.appendChild(r),Cd=Zn.NORMAL,r.scrollLeft===0&&(r.scrollLeft=1,Cd=r.scrollLeft===0?Zn.NEGATED:Zn.INVERTED),r.remove()}return Cd}var Bm;function IP(){if(Bm==null){let r=typeof document<"u"?document.head:null;Bm=!!(r&&(r.createShadowRoot||r.attachShadow))}return Bm}function Oo(r){if(IP()){let t=r.getRootNode?r.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Wa(){let r=typeof document<"u"&&document?document.activeElement:null;for(;r&&r.shadowRoot;){let t=r.shadowRoot.activeElement;if(t===r)break;r=t}return r}function ki(r){return r.composedPath?r.composedPath()[0]:r.target}function Hm(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Ed=new WeakMap,ii=(()=>{class r{_appRef;_injector=C(ft);_environmentInjector=C(ko);load(e){let i=this._appRef=this._appRef||this._injector.get(zs),n=Ed.get(i);n||(n={loaders:new Set,refs:[]},Ed.set(i,n),i.onDestroy(()=>{Ed.get(i)?.refs.forEach(s=>s.destroy()),Ed.delete(i)})),n.loaders.has(e)||(n.loaders.add(e),n.refs.push(ld(e,{environmentInjector:this._environmentInjector})))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ua=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["ng-component"]],exportAs:["cdkVisuallyHidden"],decls:0,vars:0,template:function(i,n){},styles:[".cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap;outline:0;-webkit-appearance:none;-moz-appearance:none;left:0}[dir=rtl] .cdk-visually-hidden{left:auto;right:0}"],encapsulation:2,changeDetection:0})}return r})();function Wi(r,...t){return t.length?t.some(e=>r[e]):r.altKey||r.shiftKey||r.ctrlKey||r.metaKey}function Pr(r){return r!=null&&`${r}`!="false"}function an(r,t=0){return DP(r)?Number(r):arguments.length===2?t:0}function DP(r){return!isNaN(parseFloat(r))&&!isNaN(Number(r))}function ds(r){return Array.isArray(r)?r:[r]}function ni(r){return r==null?"":typeof r=="string"?r:`${r}px`}function li(r){return r instanceof ve?r.nativeElement:r}var PP=(()=>{class r{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Sd=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({providers:[PP]})}return r})();var tx=new Set,js,RP=(()=>{class r{_platform=C(ht);_nonce=C(Da,{optional:!0});_matchMedia;constructor(){this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):FP}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&OP(e,this._nonce),this._matchMedia(e)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function OP(r,t){if(!tx.has(r))try{js||(js=document.createElement("style"),t&&js.setAttribute("nonce",t),js.setAttribute("type","text/css"),document.head.appendChild(js)),js.sheet&&(js.sheet.insertRule(`@media ${r} {body{ }}`,0),tx.add(r))}catch(e){console.error(e)}}function FP(r){return{matches:r==="all"||r==="",media:r,addListener:()=>{},removeListener:()=>{}}}var nx=(()=>{class r{_mediaMatcher=C(RP);_zone=C(ke);_queries=new Map;_destroySubject=new ne;constructor(){}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return ix(ds(e)).some(n=>this._registerQuery(n).mql.matches)}observe(e){let n=ix(ds(e)).map(o=>this._registerQuery(o).observable),s=z0(n);return s=H0(s.pipe(gn(1)),s.pipe(ed(1),Qc(0))),s.pipe(Ot(o=>{let l={matches:!1,breakpoints:{}};return o.forEach(({matches:d,query:h})=>{l.matches=l.matches||d,l.breakpoints[h]=d}),l}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let i=this._mediaMatcher.matchMedia(e),s={observable:new Rn(o=>{let l=d=>this._zone.run(()=>o.next(d));return i.addListener(l),()=>{i.removeListener(l)}}).pipe(Ri(i),Ot(({matches:o})=>({query:e,matches:o})),ot(this._destroySubject)),mql:i};return this._queries.set(e,s),s}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ix(r){return r.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var cx=" ";function Km(r,t,e){let i=Id(r,t);e=e.trim(),!i.some(n=>n.trim()===e)&&(i.push(e),r.setAttribute(t,i.join(cx)))}function Od(r,t,e){let i=Id(r,t);e=e.trim();let n=i.filter(s=>s!==e);n.length?r.setAttribute(t,n.join(cx)):r.removeAttribute(t)}function Id(r,t){return r.getAttribute(t)?.match(/\S+/g)??[]}var dx="cdk-describedby-message",Md="cdk-describedby-host",Gm=0,hx=(()=>{class r{_platform=C(ht);_document=C(Ve);_messageRegistry=new Map;_messagesContainer=null;_id=`${Gm++}`;constructor(){C(ii).load(Ua),this._id=C(Eo)+"-"+Gm++}describe(e,i,n){if(!this._canBeDescribed(e,i))return;let s=Wm(i,n);typeof i!="string"?(rx(i,this._id),this._messageRegistry.set(s,{messageElement:i,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(i,n),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,i,n){if(!i||!this._isElementNode(e))return;let s=Wm(i,n);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),typeof i=="string"){let o=this._messageRegistry.get(s);o&&o.referenceCount===0&&this._deleteMessageElement(s)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${Md}="${this._id}"]`);for(let i=0;i<e.length;i++)this._removeCdkDescribedByReferenceIds(e[i]),e[i].removeAttribute(Md);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,i){let n=this._document.createElement("div");rx(n,this._id),n.textContent=e,i&&n.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(n),this._messageRegistry.set(Wm(e,i),{messageElement:n,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<i.length;s++)i[s].remove();let n=this._document.createElement("div");n.style.visibility="hidden",n.classList.add(e),n.classList.add("cdk-visually-hidden"),this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._messagesContainer=n}_removeCdkDescribedByReferenceIds(e){let i=Id(e,"aria-describedby").filter(n=>n.indexOf(dx)!=0);e.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(e,i){let n=this._messageRegistry.get(i);Km(e,"aria-describedby",n.messageElement.id),e.setAttribute(Md,this._id),n.referenceCount++}_removeMessageReference(e,i){let n=this._messageRegistry.get(i);n.referenceCount--,Od(e,"aria-describedby",n.messageElement.id),e.removeAttribute(Md)}_isElementDescribedByMessage(e,i){let n=Id(e,"aria-describedby"),s=this._messageRegistry.get(i),o=s&&s.messageElement.id;return!!o&&n.indexOf(o)!=-1}_canBeDescribed(e,i){if(!this._isElementNode(e))return!1;if(i&&typeof i=="object")return!0;let n=i==null?"":`${i}`.trim(),s=e.getAttribute("aria-label");return n?!s||s.trim()!==n:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Wm(r,t){return typeof r=="string"?`${t||""}/${r}`:r}function rx(r,t){r.id||(r.id=`${dx}-${t}-${Gm++}`)}var XP=200,$m=class{_letterKeyStream=new ne;_items=[];_selectedItemIndex=-1;_pressedLetters=[];_skipPredicateFn;_selectedItem=new ne;selectedItem=this._selectedItem;constructor(t,e){let i=typeof e?.debounceInterval=="number"?e.debounceInterval:XP;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(i)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(Ar(e=>this._pressedLetters.push(e)),Qc(t),ai(()=>this._pressedLetters.length>0),Ot(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let i=1;i<this._items.length+1;i++){let n=(this._selectedItemIndex+i)%this._items.length,s=this._items[n];if(!this._skipPredicateFn?.(s)&&s.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(s);break}}this._pressedLetters=[]})}},qm=class{_items;_activeItemIndex=-1;_activeItem=_n(null);_wrap=!1;_typeaheadSubscription=ei.EMPTY;_itemChangesSubscription;_vertical=!0;_horizontal;_allowedModifierKeys=[];_homeAndEnd=!1;_pageUpAndDown={enabled:!1,delta:10};_effectRef;_typeahead;_skipPredicateFn=t=>t.disabled;constructor(t,e){this._items=t,t instanceof nd?this._itemChangesSubscription=t.changes.subscribe(i=>this._itemsChanged(i.toArray())):Bs(t)&&(this._effectRef=ad(()=>this._itemsChanged(t()),{injector:e}))}tabOut=new ne;change=new ne;skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new $m(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:i=>this._skipPredicateFn(i)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(i=>{this.setActiveItem(i)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem();this.updateActiveItem(t),this._activeItem()!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&n){this.setNextItemActive();break}else return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&n){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&n){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&n){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&n){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(n||Wi(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem()}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),i=typeof t=="number"?t:e.indexOf(t),n=e[i];this._activeItem.set(n??null),this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let i=1;i<=e.length;i++){let n=(this._activeItemIndex+t*i+e.length)%e.length,s=e[n];if(!this._skipPredicateFn(s)){this.setActiveItem(n);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(t+=e,!i[t])return;this.setActiveItem(t)}}_getItemsArray(){return Bs(this._items)?this._items():this._items instanceof nd?this._items.toArray():this._items}_itemsChanged(t){this._typeahead?.setItems(t);let e=this._activeItem();if(e){let i=t.indexOf(e);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i,this._typeahead?.setCurrentSelectedItemIndex(i))}}},Dd=class extends qm{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}};var Zm=(()=>{class r{_platform=C(ht);constructor(){}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return ZP(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let i=KP(sR(e));if(i&&(sx(i)===-1||!this.isVisible(i)))return!1;let n=e.nodeName.toLowerCase(),s=sx(e);return e.hasAttribute("contenteditable")?s!==-1:n==="iframe"||n==="object"||this._platform.WEBKIT&&this._platform.IOS&&!nR(e)?!1:n==="audio"?e.hasAttribute("controls")?s!==-1:!1:n==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,i){return rR(e)&&!this.isDisabled(e)&&(i?.ignoreVisibility||this.isVisible(e))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function KP(r){try{return r.frameElement}catch{return null}}function ZP(r){return!!(r.offsetWidth||r.offsetHeight||typeof r.getClientRects=="function"&&r.getClientRects().length)}function QP(r){let t=r.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function JP(r){return tR(r)&&r.type=="hidden"}function eR(r){return iR(r)&&r.hasAttribute("href")}function tR(r){return r.nodeName.toLowerCase()=="input"}function iR(r){return r.nodeName.toLowerCase()=="a"}function ux(r){if(!r.hasAttribute("tabindex")||r.tabIndex===void 0)return!1;let t=r.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function sx(r){if(!ux(r))return null;let t=parseInt(r.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function nR(r){let t=r.nodeName.toLowerCase(),e=t==="input"&&r.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function rR(r){return JP(r)?!1:QP(r)||eR(r)||r.hasAttribute("contenteditable")||ux(r)}function sR(r){return r.ownerDocument&&r.ownerDocument.defaultView||window}var Ym=class{_element;_checker;_ngZone;_document;_injector;_startAnchor;_endAnchor;_hasAttached=!1;startAnchorListener=()=>this.focusLastTabbableElement();endAnchorListener=()=>this.focusFirstTabbableElement();get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_enabled=!0;constructor(t,e,i,n,s=!1,o){this._element=t,this._checker=e,this._ngZone=i,this._document=n,this._injector=o,s||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let n=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(n)return n}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let n=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(n)return n}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?nn(t,{injector:this._injector}):setTimeout(t)}},px=(()=>{class r{_checker=C(Zm);_ngZone=C(ke);_document=C(Ve);_injector=C(ft);constructor(){C(ii).load(Ua)}create(e,i=!1){return new Ym(e,this._checker,this._ngZone,this._document,i,this._injector)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function $a(r){return r.buttons===0||r.detail===0}function qa(r){let t=r.touches&&r.touches[0]||r.changedTouches&&r.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var oR=new te("cdk-input-modality-detector-options"),aR={ignoreKeys:[18,17,224,91,16]},mx=650,Fo=Hi({passive:!0,capture:!0}),lR=(()=>{class r{_platform=C(ht);modalityDetected;modalityChanged;get mostRecentModality(){return this._modality.value}_mostRecentTarget=null;_modality=new is(null);_options;_lastTouchMs=0;_onKeydown=e=>{this._options?.ignoreKeys?.some(i=>i===e.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ki(e))};_onMousedown=e=>{Date.now()-this._lastTouchMs<mx||(this._modality.next($a(e)?"keyboard":"mouse"),this._mostRecentTarget=ki(e))};_onTouchstart=e=>{if(qa(e)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ki(e)};constructor(){let e=C(ke),i=C(Ve),n=C(oR,{optional:!0});this._options=J(J({},aR),n),this.modalityDetected=this._modality.pipe(ed(1)),this.modalityChanged=this.modalityDetected.pipe(Co()),this._platform.isBrowser&&e.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Fo),i.addEventListener("mousedown",this._onMousedown,Fo),i.addEventListener("touchstart",this._onTouchstart,Fo)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Fo),document.removeEventListener("mousedown",this._onMousedown,Fo),document.removeEventListener("touchstart",this._onTouchstart,Fo))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),cR=new te("liveAnnouncerElement",{providedIn:"root",factory:dR});function dR(){return null}var hR=new te("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),uR=0,fx=(()=>{class r{_ngZone=C(ke);_defaultOptions=C(hR,{optional:!0});_liveElement;_document=C(Ve);_previousTimeout;_currentPromise;_currentResolve;constructor(){let e=C(cR,{optional:!0});this._liveElement=e||this._createLiveElement()}announce(e,...i){let n=this._defaultOptions,s,o;return i.length===1&&typeof i[0]=="number"?o=i[0]:[s,o]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=n&&n.politeness?n.politeness:"polite"),o==null&&n&&(o=n.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(l=>this._currentResolve=l)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof o=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),n=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return n.classList.add(e),n.classList.add("cdk-visually-hidden"),n.setAttribute("aria-atomic","true"),n.setAttribute("aria-live","polite"),n.id=`cdk-live-announcer-${uR++}`,this._document.body.appendChild(n),n}_exposeAnnouncerToModals(e){let i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let n=0;n<i.length;n++){let s=i[n],o=s.getAttribute("aria-owns");o?o.indexOf(e)===-1&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Td=function(r){return r[r.IMMEDIATE=0]="IMMEDIATE",r[r.EVENTUAL=1]="EVENTUAL",r}(Td||{}),pR=new te("cdk-focus-monitor-default-options"),Ad=Hi({passive:!0,capture:!0}),hs=(()=>{class r{_ngZone=C(ke);_platform=C(ht);_inputModalityDetector=C(lR);_origin=null;_lastFocusOrigin;_windowFocused=!1;_windowFocusTimeoutId;_originTimeoutId;_originFromTouchInteraction=!1;_elementInfo=new Map;_monitoredElementCount=0;_rootNodeFocusListenerCount=new Map;_detectionMode;_windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)};_document=C(Ve,{optional:!0});_stopInputModalityDetector=new ne;constructor(){let e=C(pR,{optional:!0});this._detectionMode=e?.detectionMode||Td.IMMEDIATE}_rootNodeFocusAndBlurListener=e=>{let i=ki(e);for(let n=i;n;n=n.parentElement)e.type==="focus"?this._onFocus(e,n):this._onBlur(e,n)};monitor(e,i=!1){let n=li(e);if(!this._platform.isBrowser||n.nodeType!==1)return Pi();let s=Oo(n)||this._getDocument(),o=this._elementInfo.get(n);if(o)return i&&(o.checkChildren=!0),o.subject;let l={checkChildren:i,subject:new ne,rootNode:s};return this._elementInfo.set(n,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(e){let i=li(e),n=this._elementInfo.get(i);n&&(n.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(n))}focusVia(e,i,n){let s=li(e),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([l,d])=>this._originChanged(l,i,d)):(this._setOrigin(i),typeof s.focus=="function"&&s.focus(n))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===Td.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused",i==="touch"),e.classList.toggle("cdk-keyboard-focused",i==="keyboard"),e.classList.toggle("cdk-mouse-focused",i==="mouse"),e.classList.toggle("cdk-program-focused",i==="program")}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&i,this._detectionMode===Td.IMMEDIATE){clearTimeout(this._originTimeoutId);let n=this._originFromTouchInteraction?mx:1;this._originTimeoutId=setTimeout(()=>this._origin=null,n)}})}_onFocus(e,i){let n=this._elementInfo.get(i),s=ki(e);!n||!n.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),n)}_onBlur(e,i){let n=this._elementInfo.get(i);!n||n.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(n,null))}_emitOrigin(e,i){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let i=e.rootNode,n=this._rootNodeFocusListenerCount.get(i)||0;n||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Ad),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Ad)}),this._rootNodeFocusListenerCount.set(i,n+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ot(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){let n=this._rootNodeFocusListenerCount.get(i);n>1?this._rootNodeFocusListenerCount.set(i,n-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Ad),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Ad),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,n){this._setClasses(e,i),this._emitOrigin(n,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){let i=[];return this._elementInfo.forEach((n,s)=>{(s===e||n.checkChildren&&s.contains(e))&&i.push([s,n])}),i}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:i,mostRecentModality:n}=this._inputModalityDetector;if(n!=="mouse"||!i||i===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0}return!1}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Gs=function(r){return r[r.NONE=0]="NONE",r[r.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",r[r.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",r}(Gs||{}),ox="cdk-high-contrast-black-on-white",ax="cdk-high-contrast-white-on-black",Um="cdk-high-contrast-active",Qm=(()=>{class r{_platform=C(ht);_hasCheckedHighContrastMode;_document=C(Ve);_breakpointSubscription;constructor(){this._breakpointSubscription=C(nx).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Gs.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let i=this._document.defaultView||window,n=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(n&&n.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Gs.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Gs.BLACK_ON_WHITE}return Gs.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(Um,ox,ax),this._hasCheckedHighContrastMode=!0;let i=this.getHighContrastMode();i===Gs.BLACK_ON_WHITE?e.add(Um,ox):i===Gs.WHITE_ON_BLACK&&e.add(Um,ax)}}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Fd=(()=>{class r{constructor(){C(Qm)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Sd]})}return r})(),jm={},zt=(()=>{class r{_appId=C(Eo);getId(e){return this._appId!=="ng"&&(e+=this._appId),jm.hasOwnProperty(e)||(jm[e]=0),`${e}${jm[e]++}`}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var mR=new te("cdk-dir-doc",{providedIn:"root",factory:fR});function fR(){return C(Ve)}var gR=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function _R(r){let t=r?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?gR.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var ri=(()=>{class r{value="ltr";change=new fe;constructor(){let e=C(mR,{optional:!0});if(e){let i=e.body?e.body.dir:null,n=e.documentElement?e.documentElement.dir:null;this.value=_R(i||n||"ltr")}}ngOnDestroy(){this.change.complete()}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var us=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({})}return r})();var bR=["text"],vR=[[["mat-icon"]],"*"],yR=["mat-icon","*"];function xR(r,t){if(r&1&&re(0,"mat-pseudo-checkbox",1),r&2){let e=T();R("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function wR(r,t){if(r&1&&re(0,"mat-pseudo-checkbox",3),r&2){let e=T();R("disabled",e.disabled)}}function CR(r,t){if(r&1&&(w(0,"span",4),F(1),E()),r&2){let e=T();A(),Ze("(",e.group.label,")")}}var kR=["mat-internal-form-field",""],ER=["*"];var Ye=(()=>{class r{constructor(){C(Qm)._applyBodyHighContrastModeCssClasses()}static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[us,us]})}return r})(),Lo=class{_defaultMatcher;ngControl;_parentFormGroup;_parentForm;_stateChanges;errorState=!1;matcher;constructor(t,e,i,n,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=i,this._parentForm=n,this._stateChanges=s}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,n=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(n,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var Vd=(()=>{class r{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Qn=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["structural-styles"]],decls:0,vars:0,template:function(i,n){},styles:['.mat-focus-indicator{position:relative}.mat-focus-indicator::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;display:var(--mat-focus-indicator-display, none);border-width:var(--mat-focus-indicator-border-width, 3px);border-style:var(--mat-focus-indicator-border-style, solid);border-color:var(--mat-focus-indicator-border-color, transparent);border-radius:var(--mat-focus-indicator-border-radius, 4px)}.mat-focus-indicator:focus::before{content:""}@media(forced-colors: active){html{--mat-focus-indicator-display: block}}'],encapsulation:2,changeDetection:0})}return r})();var Ui=function(r){return r[r.FADING_IN=0]="FADING_IN",r[r.VISIBLE=1]="VISIBLE",r[r.FADING_OUT=2]="FADING_OUT",r[r.HIDDEN=3]="HIDDEN",r}(Ui||{}),tf=class{_renderer;element;config;_animationForciblyDisabledThroughCss;state=Ui.HIDDEN;constructor(t,e,i,n=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=n}fadeOut(){this._renderer.fadeOutRipple(this)}},gx=Hi({passive:!0,capture:!0}),nf=class{_events=new Map;addHandler(t,e,i,n){let s=this._events.get(e);if(s){let o=s.get(i);o?o.add(n):s.set(i,new Set([n]))}else this._events.set(e,new Map([[i,new Set([n])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,gx)})}removeHandler(t,e,i){let n=this._events.get(t);if(!n)return;let s=n.get(e);s&&(s.delete(i),s.size===0&&n.delete(e),n.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,gx)))}_delegateEventHandler=t=>{let e=ki(t);e&&this._events.get(t.type)?.forEach((i,n)=>{(n===e||n.contains(e))&&i.forEach(s=>s.handleEvent(t))})}},Nd={enterDuration:225,exitDuration:150},SR=800,_x=Hi({passive:!0,capture:!0}),bx=["mousedown","touchstart"],vx=["mouseup","mouseleave","touchend","touchcancel"],MR=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["ng-component"]],hostAttrs:["mat-ripple-style-loader",""],decls:0,vars:0,template:function(i,n){},styles:[".mat-ripple{overflow:hidden;position:relative}.mat-ripple:not(:empty){transform:translateZ(0)}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;transition:opacity,transform 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale3d(0, 0, 0);background-color:var(--mat-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface) 10%, transparent))}@media(forced-colors: active){.mat-ripple-element{display:none}}.cdk-drag-preview .mat-ripple-element,.cdk-drag-placeholder .mat-ripple-element{display:none}"],encapsulation:2,changeDetection:0})}return r})(),Bd=class r{_target;_ngZone;_platform;_containerElement;_triggerElement;_isPointerDown=!1;_activeRipples=new Map;_mostRecentTransientRipple;_lastTouchStartEvent;_pointerUpEventsRegistered=!1;_containerRect;static _eventManager=new nf;constructor(t,e,i,n,s){this._target=t,this._ngZone=e,this._platform=n,n.isBrowser&&(this._containerElement=li(i)),s&&s.get(ii).load(MR)}fadeInRipple(t,e,i={}){let n=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=J(J({},Nd),i.animation);i.centered&&(t=n.left+n.width/2,e=n.top+n.height/2);let o=i.radius||AR(t,e,n),l=t-n.left,d=e-n.top,h=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${l-o}px`,u.style.top=`${d-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${h}ms`,this._containerElement.appendChild(u);let m=window.getComputedStyle(u),f=m.transitionProperty,_=m.transitionDuration,y=f==="none"||_==="0s"||_==="0s, 0s"||n.width===0&&n.height===0,v=new tf(this,u,i,y);u.style.transform="scale3d(1, 1, 1)",v.state=Ui.FADING_IN,i.persistent||(this._mostRecentTransientRipple=v);let x=null;return!y&&(h||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let S=()=>{x&&(x.fallbackTimer=null),clearTimeout(P),this._finishRippleTransition(v)},I=()=>this._destroyRipple(v),P=setTimeout(I,h+100);u.addEventListener("transitionend",S),u.addEventListener("transitioncancel",I),x={onTransitionEnd:S,onTransitionCancel:I,fallbackTimer:P}}),this._activeRipples.set(v,x),(y||!h)&&this._finishRippleTransition(v),v}fadeOutRipple(t){if(t.state===Ui.FADING_OUT||t.state===Ui.HIDDEN)return;let e=t.element,i=J(J({},Nd),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=Ui.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=li(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,bx.forEach(i=>{r._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{vx.forEach(e=>{this._triggerElement.addEventListener(e,this,_x)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Ui.FADING_IN?this._startFadeOutTransition(t):t.state===Ui.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Ui.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Ui.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel),e.fallbackTimer!==null&&clearTimeout(e.fallbackTimer)),t.element.remove()}_onMousedown(t){let e=$a(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+SR;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!qa(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Ui.VISIBLE||t.config.terminateOnPointerUp&&t.state===Ui.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(bx.forEach(e=>r._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(vx.forEach(e=>t.removeEventListener(e,this,_x)),this._pointerUpEventsRegistered=!1))}};function AR(r,t,e){let i=Math.max(Math.abs(r-e.left),Math.abs(r-e.right)),n=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+n*n)}var zd=new te("mat-ripple-global-options"),Rr=(()=>{class r{_elementRef=C(ve);_animationMode=C(Ft,{optional:!0});color;unbounded;centered;radius=0;animation;get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}_disabled=!1;get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}_trigger;_rippleRenderer;_globalOptions;_isInitialized=!1;constructor(){let e=C(ke),i=C(ht),n=C(zd,{optional:!0}),s=C(ft);this._globalOptions=n||{},this._rippleRenderer=new Bd(this,e,this._elementRef,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:J(J(J({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,n){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,i,J(J({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,J(J({},this.rippleConfig),e))}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,n){i&2&&ce("mat-ripple-unbounded",n.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"]})}return r})(),Or=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye,Ye]})}return r})(),sf=(()=>{class r{_animationMode=C(Ft,{optional:!0});state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,n){i&2&&ce("mat-pseudo-checkbox-indeterminate",n.state==="indeterminate")("mat-pseudo-checkbox-checked",n.state==="checked")("mat-pseudo-checkbox-disabled",n.disabled)("mat-pseudo-checkbox-minimal",n.appearance==="minimal")("mat-pseudo-checkbox-full",n.appearance==="full")("_mat-animation-noopable",n._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(i,n){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return r})(),TR=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye]})}return r})(),of=new te("MAT_OPTION_PARENT_COMPONENT"),af=new te("MatOptgroup");var rf=class{source;isUserInput;constructor(t,e=!1){this.source=t,this.isUserInput=e}},No=(()=>{class r{_element=C(ve);_changeDetectorRef=C($e);_parent=C(of,{optional:!0});group=C(af,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_disabled=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=C(zt).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new fe;_text;_stateChanges=new ne;constructor(){let e=C(ii);e.load(Qn),e.load(Ua),this._signalDisableRipple=!!this._parent&&Bs(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,i){let n=this._getHostElement();typeof n.focus=="function"&&n.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!Wi(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new rf(this,e))}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-option"]],viewQuery:function(i,n){if(i&1&&Le(bR,7),i&2){let s;Ee(s=Se())&&(n._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,n){i&1&&U("click",function(){return n._selectViaInteraction()})("keydown",function(o){return n._handleKeydown(o)}),i&2&&(Fn("id",n.id),ye("aria-selected",n.selected)("aria-disabled",n.disabled.toString()),ce("mdc-list-item--selected",n.selected)("mat-mdc-option-multiple",n.multiple)("mat-mdc-option-active",n.active)("mdc-list-item--disabled",n.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",ge]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],features:[at],ngContentSelectors:yR,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,n){i&1&&(Bt(vR),X(0,xR,1,2,"mat-pseudo-checkbox",1),Ke(1),w(2,"span",2,0),Ke(4,1),E(),X(5,wR,1,1,"mat-pseudo-checkbox",3)(6,CR,2,1,"span",4),re(7,"div",5)),i&2&&(gt(n.multiple?0:-1),A(5),gt(!n.multiple&&n.selected&&!n.hideSingleSelectionIndicator?5:-1),A(),gt(n.group&&n.group._inert?6:-1),A(),R("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[sf,Rr],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return r})();function Cx(r,t,e){if(e.length){let i=t.toArray(),n=e.toArray(),s=0;for(let o=0;o<r+1;o++)i[o].group&&i[o].group===n[s]&&s++;return s}return 0}function kx(r,t,e,i){return r<e?r:r+t>e+i?Math.max(0,r-i+t):e}var lf=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Or,Ye,TR]})}return r})(),yx={capture:!0},xx=["focus","mousedown","mouseenter","touchstart"],Jm="mat-ripple-loader-uninitialized",ef="mat-ripple-loader-class-name",wx="mat-ripple-loader-centered",Ld="mat-ripple-loader-disabled",Ex=(()=>{class r{_document=C(Ve,{optional:!0});_animationMode=C(Ft,{optional:!0});_globalRippleOptions=C(zd,{optional:!0});_platform=C(ht);_ngZone=C(ke);_injector=C(ft);_hosts=new Map;constructor(){this._ngZone.runOutsideAngular(()=>{for(let e of xx)this._document?.addEventListener(e,this._onInteraction,yx)})}ngOnDestroy(){let e=this._hosts.keys();for(let i of e)this.destroyRipple(i);for(let i of xx)this._document?.removeEventListener(i,this._onInteraction,yx)}configureRipple(e,i){e.setAttribute(Jm,this._globalRippleOptions?.namespace??""),(i.className||!e.hasAttribute(ef))&&e.setAttribute(ef,i.className||""),i.centered&&e.setAttribute(wx,""),i.disabled&&e.setAttribute(Ld,"")}setDisabled(e,i){let n=this._hosts.get(e);n?(n.target.rippleDisabled=i,!i&&!n.hasSetUpEvents&&(n.hasSetUpEvents=!0,n.renderer.setupTriggerEvents(e))):i?e.setAttribute(Ld,""):e.removeAttribute(Ld)}_onInteraction=e=>{let i=ki(e);if(i instanceof HTMLElement){let n=i.closest(`[${Jm}="${this._globalRippleOptions?.namespace??""}"]`);n&&this._createRipple(n)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let i=this._document.createElement("span");i.classList.add("mat-ripple",e.getAttribute(ef)),e.append(i);let n=this._animationMode==="NoopAnimations",s=this._globalRippleOptions,o=n?0:s?.animation?.enterDuration??Nd.enterDuration,l=n?0:s?.animation?.exitDuration??Nd.exitDuration,d={rippleDisabled:n||s?.disabled||e.hasAttribute(Ld),rippleConfig:{centered:e.hasAttribute(wx),terminateOnPointerUp:s?.terminateOnPointerUp,animation:{enterDuration:o,exitDuration:l}}},h=new Bd(d,this._ngZone,i,this._platform,this._injector),u=!d.rippleDisabled;u&&h.setupTriggerEvents(e),this._hosts.set(e,{target:d,renderer:h,hasSetUpEvents:u}),e.removeAttribute(Jm)}destroyRipple(e){let i=this._hosts.get(e);i&&(i.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Sx=(()=>{class r{labelPosition;static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,n){i&2&&ce("mdc-form-field--align-end",n.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:kR,ngContentSelectors:ER,decls:1,vars:0,template:function(i,n){i&1&&(Bt(),Ke(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}return r})();var IR=["mat-button",""],Tx=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Ix=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var DR="@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}";var PR=["mat-mini-fab",""],RR='.mat-mdc-fab-base{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1);flex-shrink:0;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-fab-base .mat-mdc-button-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple,.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab-base .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab-base .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-fab-base .mdc-button__label,.mat-mdc-fab-base .mat-icon{z-index:1;position:relative}.mat-mdc-fab-base .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab-base:focus>.mat-focus-indicator::before{content:""}.mat-mdc-fab-base._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab-base::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-fab-base[hidden]{display:none}.mat-mdc-fab-base::-moz-focus-inner{padding:0;border:0}.mat-mdc-fab-base:active,.mat-mdc-fab-base:focus{outline:none}.mat-mdc-fab-base:hover{cursor:pointer}.mat-mdc-fab-base>svg{width:100%}.mat-mdc-fab-base .mat-icon,.mat-mdc-fab-base .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab-base .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-fab-base[disabled],.mat-mdc-fab-base[disabled]:focus,.mat-mdc-fab-base.mat-mdc-button-disabled,.mat-mdc-fab-base.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-fab-base.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab{background-color:var(--mdc-fab-container-color, var(--mat-sys-primary-container));border-radius:var(--mdc-fab-container-shape, var(--mat-sys-corner-large));color:var(--mat-fab-foreground-color, var(--mat-sys-on-primary-container, inherit));box-shadow:var(--mdc-fab-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab:hover{box-shadow:var(--mdc-fab-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-fab:focus{box-shadow:var(--mdc-fab-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab:active,.mat-mdc-fab:focus:active{box-shadow:var(--mdc-fab-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-disabled-state-foreground-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-fab-disabled-state-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-touch-target-display, block)}.mat-mdc-fab .mat-ripple-element{background-color:var(--mat-fab-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-state-layer-color, var(--mat-sys-on-primary-container))}.mat-mdc-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-disabled-state-layer-color)}.mat-mdc-fab:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-fab.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-fab:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-mini-fab{width:40px;height:40px;background-color:var(--mdc-fab-small-container-color, var(--mat-sys-primary-container));border-radius:var(--mdc-fab-small-container-shape, var(--mat-sys-corner-medium));color:var(--mat-fab-small-foreground-color, var(--mat-sys-on-primary-container, inherit));box-shadow:var(--mdc-fab-small-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab:hover{box-shadow:var(--mdc-fab-small-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-mini-fab:focus{box-shadow:var(--mdc-fab-small-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:var(--mdc-fab-small-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-small-disabled-state-foreground-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-fab-small-disabled-state-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-small-touch-target-display)}.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-fab-small-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-state-layer-color, var(--mat-sys-on-primary-container))}.mat-mdc-mini-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-disabled-state-layer-color)}.mat-mdc-mini-fab:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-mini-fab.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-mini-fab:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-extended-fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;line-height:normal;height:var(--mdc-extended-fab-container-height, 56px);border-radius:var(--mdc-extended-fab-container-shape, var(--mat-sys-corner-large));font-family:var(--mdc-extended-fab-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-extended-fab-label-text-size, var(--mat-sys-label-large-size));font-weight:var(--mdc-extended-fab-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mdc-extended-fab-label-text-tracking, var(--mat-sys-label-large-tracking));box-shadow:var(--mdc-extended-fab-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab:hover{box-shadow:var(--mdc-extended-fab-hover-container-elevation-shadow, var(--mat-sys-level4))}.mat-mdc-extended-fab:focus{box-shadow:var(--mdc-extended-fab-focus-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab:active,.mat-mdc-extended-fab:focus:active{box-shadow:var(--mdc-extended-fab-pressed-container-elevation-shadow, var(--mat-sys-level3))}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab[disabled]:focus,.mat-mdc-extended-fab.mat-mdc-button-disabled,.mat-mdc-extended-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-extended-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:-8px;margin-right:12px}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons,[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons{margin-left:12px;margin-right:-8px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}',OR=["mat-icon-button",""],FR=["*"];var LR=new te("MAT_BUTTON_CONFIG");var NR=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],cf=(()=>{class r{_elementRef=C(ve);_ngZone=C(ke);_animationMode=C(Ft,{optional:!0});_focusMonitor=C(hs);_rippleLoader=C(Ex);_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;constructor(){C(ii).load(Qn);let e=C(LR,{optional:!0}),i=this._elementRef.nativeElement,n=i.classList;this.disabledInteractive=e?.disabledInteractive??!1,this.color=e?.color??null,this._rippleLoader?.configureRipple(i,{className:"mat-mdc-button-ripple"});for(let{attribute:s,mdcClasses:o}of NR)i.hasAttribute(s)&&n.add(...o)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",i){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,i):this._elementRef.nativeElement.focus(i)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",ge],disabled:[2,"disabled","disabled",ge],ariaDisabled:[2,"aria-disabled","ariaDisabled",ge],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ge]},features:[at]})}return r})();var gi=(()=>{class r extends cf{static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275cmp=oe({type:r,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(i,n){i&2&&(ye("disabled",n._getDisabledAttribute())("aria-disabled",n._getAriaDisabled()),rn(n.color?"mat-"+n.color:""),ce("mat-mdc-button-disabled",n.disabled)("mat-mdc-button-disabled-interactive",n.disabledInteractive)("_mat-animation-noopable",n._animationMode==="NoopAnimations")("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[xt],attrs:IR,ngContentSelectors:Ix,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,n){i&1&&(Bt(Tx),re(0,"span",0),Ke(1),w(2,"span",1),Ke(3,1),E(),Ke(4,2),re(5,"span",2)(6,"span",3)),i&2&&ce("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 12px);height:var(--mdc-text-button-container-height, 40px);font-family:var(--mdc-text-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, -4px);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display, block)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-filled-button-container-height, 40px);font-family:var(--mdc-filled-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-filled-button-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -8px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display, block)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-sys-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-filled-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-sys-level1));height:var(--mdc-protected-button-container-height, 40px);font-family:var(--mdc-protected-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-protected-button-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -8px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display, block)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-sys-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-sys-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-sys-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mdc-protected-button-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mdc-outlined-button-container-height, 40px);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-sys-corner-full));border-width:var(--mdc-outlined-button-outline-width, 1px);padding:0 var(--mat-outlined-button-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -8px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display, block)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-sys-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mdc-outlined-button-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width, 1px);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}',"@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-icon-button.mat-mdc-icon-button{outline:solid 1px}}"],encapsulation:2,changeDetection:0})}return r})();var BR=new te("mat-mdc-fab-default-options",{providedIn:"root",factory:Dx});function Dx(){return{color:"accent"}}var Ax=Dx();var Px=(()=>{class r extends cf{_options=C(BR,{optional:!0});_isFab=!0;constructor(){super(),this._options=this._options||Ax,this.color=this._options.color||Ax.color}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["button","mat-mini-fab",""]],hostVars:14,hostBindings:function(i,n){i&2&&(ye("disabled",n._getDisabledAttribute())("aria-disabled",n._getAriaDisabled()),rn(n.color?"mat-"+n.color:""),ce("mat-mdc-button-disabled",n.disabled)("mat-mdc-button-disabled-interactive",n.disabledInteractive)("_mat-animation-noopable",n._animationMode==="NoopAnimations")("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[xt],attrs:PR,ngContentSelectors:Ix,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,n){i&1&&(Bt(Tx),re(0,"span",0),Ke(1),w(2,"span",1),Ke(3,1),E(),Ke(4,2),re(5,"span",2)(6,"span",3)),i&2&&ce("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab)},styles:[RR],encapsulation:2,changeDetection:0})}return r})();var Ei=(()=>{class r extends cf{constructor(){super(),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(i,n){i&2&&(ye("disabled",n._getDisabledAttribute())("aria-disabled",n._getAriaDisabled()),rn(n.color?"mat-"+n.color:""),ce("mat-mdc-button-disabled",n.disabled)("mat-mdc-button-disabled-interactive",n.disabledInteractive)("_mat-animation-noopable",n._animationMode==="NoopAnimations")("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[xt],attrs:OR,ngContentSelectors:FR,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(i,n){i&1&&(Bt(),re(0,"span",0),Ke(1),re(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 40px);height:var(--mdc-icon-button-state-layer-size, 40px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 40px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size, 24px);color:var(--mdc-icon-button-icon-color, var(--mat-sys-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus>.mat-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color, color-mix(in srgb, var(--mat-sys-on-surface-variant) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-icon-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display, block)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',DR],encapsulation:2,changeDetection:0})}return r})();var wt=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye,Or,Ye]})}return r})();var Bo=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new ne;constructor(t=!1,e,i=!0,n){this._multiple=t,this._emitChanges=i,this.compareWith=n,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,i=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!i.has(this._getConcreteValue(s,i))).forEach(s=>this._unmarkSelected(s));let n=this._hasQueuedChanges();return this._emitChangeEvent(),n}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(t,i))return i;return t}else return t}};var VR=["contentWrapper"],zR=["*"],Ox=new te("VIRTUAL_SCROLL_STRATEGY"),df=class{_scrolledIndexChange=new ne;scrolledIndexChange=this._scrolledIndexChange.pipe(Co());_viewport=null;_itemSize;_minBufferPx;_maxBufferPx;constructor(t,e,i){this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i}attach(t){this._viewport=t,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(t,e,i){i<e,this._itemSize=t,this._minBufferPx=e,this._maxBufferPx=i,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(t,e){this._viewport&&this._viewport.scrollToOffset(t*this._itemSize,e)}_updateTotalContentSize(){this._viewport&&this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;let t=this._viewport.getRenderedRange(),e={start:t.start,end:t.end},i=this._viewport.getViewportSize(),n=this._viewport.getDataLength(),s=this._viewport.measureScrollOffset(),o=this._itemSize>0?s/this._itemSize:0;if(e.end>n){let d=Math.ceil(i/this._itemSize),h=Math.max(0,Math.min(o,n-d));o!=h&&(o=h,s=h*this._itemSize,e.start=Math.floor(o)),e.end=Math.max(0,Math.min(n,e.start+d))}let l=s-e.start*this._itemSize;if(l<this._minBufferPx&&e.start!=0){let d=Math.ceil((this._maxBufferPx-l)/this._itemSize);e.start=Math.max(0,e.start-d),e.end=Math.min(n,Math.ceil(o+(i+this._minBufferPx)/this._itemSize))}else{let d=e.end*this._itemSize-(s+i);if(d<this._minBufferPx&&e.end!=n){let h=Math.ceil((this._maxBufferPx-d)/this._itemSize);h>0&&(e.end=Math.min(n,e.end+h),e.start=Math.max(0,Math.floor(o-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(e),this._viewport.setRenderedContentOffset(this._itemSize*e.start),this._scrolledIndexChange.next(Math.floor(o))}};function HR(r){return r._scrollStrategy}var Fx=(()=>{class r{get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=an(e)}_itemSize=20;get minBufferPx(){return this._minBufferPx}set minBufferPx(e){this._minBufferPx=an(e)}_minBufferPx=100;get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(e){this._maxBufferPx=an(e)}_maxBufferPx=200;_scrollStrategy=new df(this.itemSize,this.minBufferPx,this.maxBufferPx);ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[et([{provide:Ox,useFactory:HR,deps:[Mi(()=>r)]}]),Et]})}return r})(),WR=20,ps=(()=>{class r{_ngZone=C(ke);_platform=C(ht);_renderer=C(On).createRenderer(null,null);_cleanupGlobalListener;constructor(){}_scrolled=new ne;_scrolledCount=0;scrollContainers=new Map;register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=WR){return this._platform.isBrowser?new Rn(i=>{this._cleanupGlobalListener||(this._cleanupGlobalListener=this._ngZone.runOutsideAngular(()=>this._renderer.listen("document","scroll",()=>this._scrolled.next())));let n=e>0?this._scrolled.pipe(Kc(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||(this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0)}}):Pi()}ngOnDestroy(){this._cleanupGlobalListener?.(),this._cleanupGlobalListener=void 0,this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){let n=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(ai(s=>!s||n.indexOf(s)>-1))}getAncestorScrollContainers(e){let i=[];return this.scrollContainers.forEach((n,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_scrollableContainsElement(e,i){let n=li(i),s=e.getElementRef().nativeElement;do if(n==s)return!0;while(n=n.parentElement);return!1}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ka=(()=>{class r{elementRef=C(ve);scrollDispatcher=C(ps);ngZone=C(ke);dir=C(ri,{optional:!0});_scrollElement=this.elementRef.nativeElement;_destroyed=new ne;_renderer=C(xi);_cleanupScroll;_elementScrolled=new ne;constructor(){}ngOnInit(){this._cleanupScroll=this.ngZone.runOutsideAngular(()=>this._renderer.listen(this._scrollElement,"scroll",e=>this._elementScrolled.next(e))),this.scrollDispatcher.register(this)}ngOnDestroy(){this._cleanupScroll?.(),this._elementScrolled.complete(),this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let i=this.elementRef.nativeElement,n=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=n?e.end:e.start),e.right==null&&(e.right=n?e.start:e.end),e.bottom!=null&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),n&&Ro()!=Zn.NORMAL?(e.left!=null&&(e.right=i.scrollWidth-i.clientWidth-e.left),Ro()==Zn.INVERTED?e.left=e.right:Ro()==Zn.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let i=this.elementRef.nativeElement;kd()?i.scrollTo(e):(e.top!=null&&(i.scrollTop=e.top),e.left!=null&&(i.scrollLeft=e.left))}measureScrollOffset(e){let i="left",n="right",s=this.elementRef.nativeElement;if(e=="top")return s.scrollTop;if(e=="bottom")return s.scrollHeight-s.clientHeight-s.scrollTop;let o=this.dir&&this.dir.value=="rtl";return e=="start"?e=o?n:i:e=="end"&&(e=o?i:n),o&&Ro()==Zn.INVERTED?e==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Ro()==Zn.NEGATED?e==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]})}return r})(),UR=20,Fr=(()=>{class r{_platform=C(ht);_listeners;_viewportSize;_change=new ne;_document=C(Ve,{optional:!0});constructor(){let e=C(ke),i=C(On).createRenderer(null,null);e.runOutsideAngular(()=>{if(this._platform.isBrowser){let n=s=>this._change.next(s);this._listeners=[i.listen("window","resize",n),i.listen("window","orientationchange",n)]}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){this._listeners?.forEach(e=>e()),this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:i,height:n}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+n,right:e.left+i,height:n,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,i=this._getWindow(),n=e.documentElement,s=n.getBoundingClientRect(),o=-s.top||e.body.scrollTop||i.scrollY||n.scrollTop||0,l=-s.left||e.body.scrollLeft||i.scrollX||n.scrollLeft||0;return{top:o,left:l}}change(e=UR){return e>0?this._change.pipe(Kc(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Rx=new te("VIRTUAL_SCROLLABLE"),jR=(()=>{class r extends Ka{constructor(){super()}measureViewportSize(e){let i=this.elementRef.nativeElement;return e==="horizontal"?i.clientWidth:i.clientHeight}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,features:[xt]})}return r})();function GR(r,t){return r.start==t.start&&r.end==t.end}var $R=typeof requestAnimationFrame<"u"?$c:B0,Lx=(()=>{class r extends jR{elementRef=C(ve);_changeDetectorRef=C($e);_scrollStrategy=C(Ox,{optional:!0});scrollable=C(Rx,{optional:!0});_platform=C(ht);_detachedSubject=new ne;_renderedRangeSubject=new ne;get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}_orientation="vertical";appendOnly=!1;scrolledIndexChange=new Rn(e=>this._scrollStrategy.scrolledIndexChange.subscribe(i=>Promise.resolve().then(()=>this.ngZone.run(()=>e.next(i)))));_contentWrapper;renderedRangeStream=this._renderedRangeSubject;_totalContentSize=0;_totalContentWidth="";_totalContentHeight="";_renderedContentTransform;_renderedRange={start:0,end:0};_dataLength=0;_viewportSize=0;_forOf;_renderedContentOffset=0;_renderedContentOffsetNeedsRewrite=!1;_isChangeDetectionPending=!1;_runAfterChangeDetection=[];_viewportChanges=ei.EMPTY;_injector=C(ft);_isDestroyed=!1;constructor(){super();let e=C(Fr);this._scrollStrategy,this._viewportChanges=e.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Ri(null),Kc(0,$R),ot(this._destroyed)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),this._isDestroyed=!0,super.ngOnDestroy()}attach(e){this._forOf,this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(ot(this._detachedSubject)).subscribe(i=>{let n=i.length;n!==this._dataLength&&(this._dataLength=n,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){GR(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,i="to-start"){e=this.appendOnly&&i==="to-start"?0:e;let n=this.dir&&this.dir.value=="rtl",s=this.orientation=="horizontal",o=s?"X":"Y",d=`translate${o}(${Number((s&&n?-1:1)*e)}px)`;this._renderedContentOffset=e,i==="to-end"&&(d+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=d&&(this._renderedContentTransform=d,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,i="auto"){let n={behavior:i};this.orientation==="horizontal"?n.start=e:n.top=e,this.scrollable.scrollTo(n)}scrollToIndex(e,i="auto"){this._scrollStrategy.scrollToIndex(e,i)}measureScrollOffset(e){let i;return this.scrollable==this?i=n=>super.measureScrollOffset(n):i=n=>this.scrollable.measureScrollOffset(n),Math.max(0,i(e??(this.orientation==="horizontal"?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let i,n="left",s="right",o=this.dir?.value=="rtl";e=="start"?i=o?s:n:e=="end"?i=o?n:s:e?i=e:i=this.orientation==="horizontal"?"left":"top";let l=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-l}measureRenderedContentSize(){let e=this._contentWrapper.nativeElement;return this.orientation==="horizontal"?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isDestroyed||this.ngZone.run(()=>{this._changeDetectorRef.markForCheck(),this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,nn(()=>{this._isChangeDetectionPending=!1;let e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(let i of e)i()},{injector:this._injector})})}_calculateSpacerSize(){this._totalContentHeight=this.orientation==="horizontal"?"":`${this._totalContentSize}px`,this._totalContentWidth=this.orientation==="horizontal"?`${this._totalContentSize}px`:""}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(i,n){if(i&1&&Le(VR,7),i&2){let s;Ee(s=Se())&&(n._contentWrapper=s.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(i,n){i&2&&ce("cdk-virtual-scroll-orientation-horizontal",n.orientation==="horizontal")("cdk-virtual-scroll-orientation-vertical",n.orientation!=="horizontal")},inputs:{orientation:"orientation",appendOnly:[2,"appendOnly","appendOnly",ge]},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[et([{provide:Ka,useFactory:(e,i)=>e||i,deps:[[new td,new $0(Rx)],r]}]),at,xt],ngContentSelectors:zR,decls:4,vars:4,consts:[["contentWrapper",""],[1,"cdk-virtual-scroll-content-wrapper"],[1,"cdk-virtual-scroll-spacer"]],template:function(i,n){i&1&&(Bt(),w(0,"div",1,0),Ke(2),E(),re(3,"div",2)),i&2&&(A(3),fi("width",n._totalContentWidth)("height",n._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0})}return r})();var hr=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({})}return r})(),Za=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[us,hr,us,hr]})}return r})();var Qa=class{_attachedHost;attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},ms=class extends Qa{component;viewContainerRef;injector;componentFactoryResolver;projectableNodes;constructor(t,e,i,n,s){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.projectableNodes=s}},fs=class extends Qa{templateRef;viewContainerRef;context;injector;constructor(t,e,i,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},hf=class extends Qa{element;constructor(t){super(),this.element=t instanceof ve?t.nativeElement:t}},Vo=class{_attachedPortal;_disposeFn;_isDisposed=!1;hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof ms)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof fs)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof hf)return this._attachedPortal=t,this.attachDomPortal(t)}attachDomPortal=null;detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Hd=class extends Vo{outletElement;_appRef;_defaultInjector;_document;constructor(t,e,i,n,s){super(),this.outletElement=t,this._appRef=i,this._defaultInjector=n,this._document=s}attachComponentPortal(t){let e;if(t.viewContainerRef){let i=t.injector||t.viewContainerRef.injector,n=i.get(Cm,null,{optional:!0})||void 0;e=t.viewContainerRef.createComponent(t.component,{index:t.viewContainerRef.length,injector:i,ngModuleRef:n,projectableNodes:t.projectableNodes||void 0}),this.setDisposeFn(()=>e.destroy())}else e=ld(t.component,{elementInjector:t.injector||this._defaultInjector||ft.NULL,environmentInjector:this._appRef.injector,projectableNodes:t.projectableNodes||void 0}),this._appRef.attachView(e.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(e.hostView),e.destroy()});return this.outletElement.appendChild(this._getComponentRootNode(e)),this._attachedPortal=t,e}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(n=>this.outletElement.appendChild(n)),i.detectChanges(),this.setDisposeFn(()=>{let n=e.indexOf(i);n!==-1&&e.remove(n)}),this._attachedPortal=t,i}attachDomPortal=t=>{let e=t.element;e.parentNode;let i=this._document.createComment("dom-portal");e.parentNode.insertBefore(i,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{i.parentNode&&i.parentNode.replaceChild(e,i)})};dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var zo=(()=>{class r extends Vo{_moduleRef=C(Cm,{optional:!0});_document=C(Ve);_viewContainerRef=C(lr);_isInitialized=!1;_attachedRef;constructor(){super()}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}attached=new fe;get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let i=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,n=i.createComponent(e.component,{index:i.length,injector:e.injector||i.injector,projectableNodes:e.projectableNodes||void 0,ngModuleRef:this._moduleRef||void 0});return i!==this._viewContainerRef&&this._getRootNode().appendChild(n.hostView.rootNodes[0]),super.setDisposeFn(()=>n.destroy()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}attachTemplatePortal(e){e.setAttachedHost(this);let i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}attachDomPortal=e=>{let i=e.element;i.parentNode;let n=this._document.createComment("dom-portal");e.setAttachedHost(this),i.parentNode.insertBefore(n,i),this._getRootNode().appendChild(i),this._attachedPortal=e,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(i,n)})};_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[xt]})}return r})();var Lr=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({})}return r})();var Bx=kd(),uf=class{_viewportRuler;_previousHTMLStyles={top:"",left:""};_previousScrollPosition;_isEnabled=!1;_document;constructor(t,e){this._viewportRuler=t,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ni(-this._previousScrollPosition.left),t.style.top=ni(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,n=e.style,s=i.scrollBehavior||"",o=n.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Bx&&(i.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Bx&&(i.scrollBehavior=s,n.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var pf=class{_scrollDispatcher;_ngZone;_viewportRuler;_config;_scrollSubscription=null;_overlayRef;_initialScrollPosition;constructor(t,e,i,n){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=n}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(ai(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}_detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}},Wd=class{enable(){}disable(){}attach(){}};function mf(r,t){return t.some(e=>{let i=r.bottom<e.top,n=r.top>e.bottom,s=r.right<e.left,o=r.left>e.right;return i||n||s||o})}function Vx(r,t){return t.some(e=>{let i=r.top<e.top,n=r.bottom>e.bottom,s=r.left<e.left,o=r.right>e.right;return i||n||s||o})}var ff=class{_scrollDispatcher;_viewportRuler;_ngZone;_config;_scrollSubscription=null;_overlayRef;constructor(t,e,i,n){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=n}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:n}=this._viewportRuler.getViewportSize();mf(e,[{width:i,height:n,bottom:n,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},qR=(()=>{class r{_scrollDispatcher=C(ps);_viewportRuler=C(Fr);_ngZone=C(ke);_document=C(Ve);constructor(){}noop=()=>new Wd;close=e=>new pf(this._scrollDispatcher,this._ngZone,this._viewportRuler,e);block=()=>new uf(this._viewportRuler,this._document);reposition=e=>new ff(this._scrollDispatcher,this._viewportRuler,this._ngZone,e);static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),qs=class{positionStrategy;scrollStrategy=new Wd;panelClass="";hasBackdrop=!1;backdropClass="cdk-overlay-dark-backdrop";width;height;minWidth;minHeight;maxWidth;maxHeight;direction;disposeOnNavigation=!1;constructor(t){if(t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var gf=class{connectionPair;scrollableViewProperties;constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var Gx=(()=>{class r{_attachedOverlays=[];_document=C(Ve);_isAttached;constructor(){}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),this._attachedOverlays.length===0&&this.detach()}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),YR=(()=>{class r extends Gx{_ngZone=C(ke);_renderer=C(On).createRenderer(null,null);_cleanupKeydown;add(e){super.add(e),this._isAttached||(this._ngZone.runOutsideAngular(()=>{this._cleanupKeydown=this._renderer.listen("body","keydown",this._keydownListener)}),this._isAttached=!0)}detach(){this._isAttached&&(this._cleanupKeydown?.(),this._isAttached=!1)}_keydownListener=e=>{let i=this._attachedOverlays;for(let n=i.length-1;n>-1;n--)if(i[n]._keydownEvents.observers.length>0){this._ngZone.run(()=>i[n]._keydownEvents.next(e));break}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),XR=(()=>{class r extends Gx{_platform=C(ht);_ngZone=C(ke,{optional:!0});_cursorOriginalValue;_cursorStyleIsSet=!1;_pointerDownEventTarget;add(e){if(super.add(e),!this._isAttached){let i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}_pointerDownListener=e=>{this._pointerDownEventTarget=ki(e)};_clickListener=e=>{let i=ki(e),n=e.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:i;this._pointerDownEventTarget=null;let s=this._attachedOverlays.slice();for(let o=s.length-1;o>-1;o--){let l=s[o];if(l._outsidePointerEvents.observers.length<1||!l.hasAttached())continue;if(zx(l.overlayElement,i)||zx(l.overlayElement,n))break;let d=l._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(e)):d.next(e)}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function zx(r,t){let e=typeof ShadowRoot<"u"&&ShadowRoot,i=t;for(;i;){if(i===r)return!0;i=e&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var $x=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-overlay-style-loader",""],decls:0,vars:0,template:function(i,n){},styles:[".cdk-overlay-container,.cdk-global-overlay-wrapper{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed}@layer cdk-overlay{.cdk-overlay-container{z-index:1000}}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:flex;position:absolute}@layer cdk-overlay{.cdk-global-overlay-wrapper{z-index:1000}}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;display:flex;max-width:100%;max-height:100%}@layer cdk-overlay{.cdk-overlay-pane{z-index:1000}}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:auto;-webkit-tap-highlight-color:rgba(0,0,0,0);opacity:0}@layer cdk-overlay{.cdk-overlay-backdrop{z-index:1000;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}}.cdk-overlay-backdrop-showing{opacity:1}@media(forced-colors: active){.cdk-overlay-backdrop-showing{opacity:.6}}@layer cdk-overlay{.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}}.cdk-overlay-transparent-backdrop{transition:visibility 1ms linear,opacity 1ms linear;visibility:hidden;opacity:1}.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing,.cdk-high-contrast-active .cdk-overlay-transparent-backdrop{opacity:0;visibility:visible}.cdk-overlay-backdrop-noop-animation{transition:none}.cdk-overlay-connected-position-bounding-box{position:absolute;display:flex;flex-direction:column;min-width:1px;min-height:1px}@layer cdk-overlay{.cdk-overlay-connected-position-bounding-box{z-index:1000}}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}"],encapsulation:2,changeDetection:0})}return r})(),Ud=(()=>{class r{_platform=C(ht);_containerElement;_document=C(Ve);_styleLoader=C(ii);constructor(){}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._loadStyles(),this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Hm()){let n=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<n.length;s++)n[s].remove()}let i=this._document.createElement("div");i.classList.add(e),Hm()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}_loadStyles(){this._styleLoader.load($x)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),_f=class{_renderer;_ngZone;element;_cleanupClick;_cleanupTransitionEnd;_fallbackTimeout;constructor(t,e,i,n){this._renderer=e,this._ngZone=i,this.element=t.createElement("div"),this.element.classList.add("cdk-overlay-backdrop"),this._cleanupClick=e.listen(this.element,"click",n)}detach(){this._ngZone.runOutsideAngular(()=>{let t=this.element;clearTimeout(this._fallbackTimeout),this._cleanupTransitionEnd?.(),this._cleanupTransitionEnd=this._renderer.listen(t,"transitionend",this.dispose),this._fallbackTimeout=setTimeout(this.dispose,500),t.style.pointerEvents="none",t.classList.remove("cdk-overlay-backdrop-showing")})}dispose=()=>{clearTimeout(this._fallbackTimeout),this._cleanupClick?.(),this._cleanupTransitionEnd?.(),this._cleanupClick=this._cleanupTransitionEnd=this._fallbackTimeout=void 0,this.element.remove()}},Ho=class{_portalOutlet;_host;_pane;_config;_ngZone;_keyboardDispatcher;_document;_location;_outsideClickDispatcher;_animationsDisabled;_injector;_renderer;_backdropClick=new ne;_attachments=new ne;_detachments=new ne;_positionStrategy;_scrollStrategy;_locationChanges=ei.EMPTY;_backdropRef=null;_previousHostParent;_keydownEvents=new ne;_outsidePointerEvents=new ne;_renders=new ne;_afterRenderRef;_afterNextRenderRef;constructor(t,e,i,n,s,o,l,d,h,u=!1,m,f){this._portalOutlet=t,this._host=e,this._pane=i,this._config=n,this._ngZone=s,this._keyboardDispatcher=o,this._document=l,this._location=d,this._outsideClickDispatcher=h,this._animationsDisabled=u,this._injector=m,this._renderer=f,n.scrollStrategy&&(this._scrollStrategy=n.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=n.positionStrategy,this._afterRenderRef=Kn(()=>rd(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropRef?.element||null}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._afterNextRenderRef?.destroy(),this._afterNextRenderRef=nn(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._backdropRef?.dispose(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._afterNextRenderRef?.destroy(),this._previousHostParent=this._pane=this._host=this._backdropRef=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=J(J({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Ue(J({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=ni(this._config.width),t.height=ni(this._config.height),t.minWidth=ni(this._config.minWidth),t.minHeight=ni(this._config.minHeight),t.maxWidth=ni(this._config.maxWidth),t.maxHeight=ni(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropRef?.dispose(),this._backdropRef=new _f(this._document,this._renderer,this._ngZone,e=>{this._backdropClick.next(e)}),this._animationsDisabled&&this._backdropRef.element.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropRef.element,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropRef.element,this._host),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this._backdropRef?.element.classList.add(t))}):this._backdropRef.element.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){this._animationsDisabled?(this._backdropRef?.dispose(),this._backdropRef=null):this._backdropRef?.detach()}_toggleClasses(t,e,i){let n=ds(e||[]).filter(s=>!!s);n.length&&(i?t.classList.add(...n):t.classList.remove(...n))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(ot(tn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t?.disable(),t?.detach?.()}},Hx="cdk-overlay-connected-position-bounding-box",KR=/([A-Za-z%]+)$/,bf=class{_viewportRuler;_document;_platform;_overlayContainer;_overlayRef;_isInitialRender;_lastBoundingBoxSize={width:0,height:0};_isPushed=!1;_canPush=!0;_growAfterOpen=!1;_hasFlexibleDimensions=!0;_positionLocked=!1;_originRect;_overlayRect;_viewportRect;_containerRect;_viewportMargin=0;_scrollables=[];_preferredPositions=[];_origin;_pane;_isDisposed;_boundingBox;_lastPosition;_lastScrollVisibility;_positionChanges=new ne;_resizeSubscription=ei.EMPTY;_offsetX=0;_offsetY=0;_transformOriginSelector;_appliedPanelClasses=[];_previousPushAmount;positionChanges=this._positionChanges;get positions(){return this._preferredPositions}constructor(t,e,i,n,s){this._viewportRuler=e,this._document=i,this._platform=n,this._overlayContainer=s,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(Hx),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,n=this._containerRect,s=[],o;for(let l of this._preferredPositions){let d=this._getOriginPoint(t,n,l),h=this._getOverlayPoint(d,e,l),u=this._getOverlayFit(h,e,i,l);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(l,d);return}if(this._canFitWithFlexibleDimensions(u,h,i)){s.push({position:l,origin:d,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(d,l)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:h,originPoint:d,position:l,overlayRect:e})}if(s.length){let l=null,d=-1;for(let h of s){let u=h.boundingBoxRect.width*h.boundingBoxRect.height*(h.position.weight||1);u>d&&(d=u,l=h)}this._isPushed=!1,this._applyPosition(l.position,l.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&$s(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Hx),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let n;if(i.originX=="center")n=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,l=this._isRtl()?t.left:t.right;n=i.originX=="start"?o:l}e.left<0&&(n-=e.left);let s;return i.originY=="center"?s=t.top+t.height/2:s=i.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:n,y:s}}_getOverlayPoint(t,e,i){let n;i.overlayX=="center"?n=-e.width/2:i.overlayX==="start"?n=this._isRtl()?-e.width:0:n=this._isRtl()?0:-e.width;let s;return i.overlayY=="center"?s=-e.height/2:s=i.overlayY=="top"?0:-e.height,{x:t.x+n,y:t.y+s}}_getOverlayFit(t,e,i,n){let s=Ux(e),{x:o,y:l}=t,d=this._getOffset(n,"x"),h=this._getOffset(n,"y");d&&(o+=d),h&&(l+=h);let u=0-o,m=o+s.width-i.width,f=0-l,_=l+s.height-i.height,y=this._subtractOverflows(s.width,u,m),v=this._subtractOverflows(s.height,f,_),x=y*v;return{visibleArea:x,isCompletelyWithinViewport:s.width*s.height===x,fitsInViewportVertically:v===s.height,fitsInViewportHorizontally:y==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let n=i.bottom-e.y,s=i.right-e.x,o=Wx(this._overlayRef.getConfig().minHeight),l=Wx(this._overlayRef.getConfig().minWidth),d=t.fitsInViewportVertically||o!=null&&o<=n,h=t.fitsInViewportHorizontally||l!=null&&l<=s;return d&&h}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let n=Ux(e),s=this._viewportRect,o=Math.max(t.x+n.width-s.width,0),l=Math.max(t.y+n.height-s.height,0),d=Math.max(s.top-i.top-t.y,0),h=Math.max(s.left-i.left-t.x,0),u=0,m=0;return n.width<=s.width?u=h||-o:u=t.x<this._viewportMargin?s.left-i.left-t.x:0,n.height<=s.height?m=d||-l:m=t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:u,y:m},{x:t.x+u,y:t.y+m}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!ZR(this._lastScrollVisibility,i)){let n=new gf(t,i);this._positionChanges.next(n)}this._lastScrollVisibility=i}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,n=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${n}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,n=this._isRtl(),s,o,l;if(e.overlayY==="top")o=t.y,s=i.height-o+this._viewportMargin;else if(e.overlayY==="bottom")l=i.height-t.y+this._viewportMargin*2,s=i.height-l+this._viewportMargin;else{let _=Math.min(i.bottom-t.y+i.top,t.y),y=this._lastBoundingBoxSize.height;s=_*2,o=t.y-_,s>y&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-y/2)}let d=e.overlayX==="start"&&!n||e.overlayX==="end"&&n,h=e.overlayX==="end"&&!n||e.overlayX==="start"&&n,u,m,f;if(h)f=i.width-t.x+this._viewportMargin*2,u=t.x-this._viewportMargin;else if(d)m=t.x,u=i.right-t.x;else{let _=Math.min(i.right-t.x+i.left,t.x),y=this._lastBoundingBoxSize.width;u=_*2,m=t.x-_,u>y&&!this._isInitialRender&&!this._growAfterOpen&&(m=t.x-y/2)}return{top:o,left:m,bottom:l,right:f,width:u,height:s}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let n={};if(this._hasExactPosition())n.top=n.left="0",n.bottom=n.right=n.maxHeight=n.maxWidth="",n.width=n.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;n.height=ni(i.height),n.top=ni(i.top),n.bottom=ni(i.bottom),n.width=ni(i.width),n.left=ni(i.left),n.right=ni(i.right),e.overlayX==="center"?n.alignItems="center":n.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?n.justifyContent="center":n.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(n.maxHeight=ni(s)),o&&(n.maxWidth=ni(o))}this._lastBoundingBoxSize=i,$s(this._boundingBox.style,n)}_resetBoundingBoxStyles(){$s(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){$s(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},n=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(n){let u=this._viewportRuler.getViewportScrollPosition();$s(i,this._getExactOverlayY(e,t,u)),$s(i,this._getExactOverlayX(e,t,u))}else i.position="static";let l="",d=this._getOffset(e,"x"),h=this._getOffset(e,"y");d&&(l+=`translateX(${d}px) `),h&&(l+=`translateY(${h}px)`),i.transform=l.trim(),o.maxHeight&&(n?i.maxHeight=ni(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(n?i.maxWidth=ni(o.maxWidth):s&&(i.maxWidth="")),$s(this._pane.style,i)}_getExactOverlayY(t,e,i){let n={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;n.bottom=`${o-(s.y+this._overlayRect.height)}px`}else n.top=ni(s.y);return n}_getExactOverlayX(t,e,i){let n={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let l=this._document.documentElement.clientWidth;n.right=`${l-(s.x+this._overlayRect.width)}px`}else n.left=ni(s.x);return n}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(n=>n.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Vx(t,i),isOriginOutsideView:mf(t,i),isOverlayClipped:Vx(e,i),isOverlayOutsideView:mf(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,n)=>i-Math.max(n,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&ds(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof ve)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function $s(r,t){for(let e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}function Wx(r){if(typeof r!="number"&&r!=null){let[t,e]=r.split(KR);return!e||e==="px"?parseFloat(t):null}return r||null}function Ux(r){return{top:Math.floor(r.top),right:Math.floor(r.right),bottom:Math.floor(r.bottom),left:Math.floor(r.left),width:Math.floor(r.width),height:Math.floor(r.height)}}function ZR(r,t){return r===t?!0:r.isOriginClipped===t.isOriginClipped&&r.isOriginOutsideView===t.isOriginOutsideView&&r.isOverlayClipped===t.isOverlayClipped&&r.isOverlayOutsideView===t.isOverlayOutsideView}var jx="cdk-global-overlay-wrapper",vf=class{_overlayRef;_cssPosition="static";_topOffset="";_bottomOffset="";_alignItems="";_xPosition="";_xOffset="";_width="";_height="";_isDisposed=!1;attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(jx),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:n,height:s,maxWidth:o,maxHeight:l}=i,d=(n==="100%"||n==="100vw")&&(!o||o==="100%"||o==="100vw"),h=(s==="100%"||s==="100vh")&&(!l||l==="100%"||l==="100vh"),u=this._xPosition,m=this._xOffset,f=this._overlayRef.getConfig().direction==="rtl",_="",y="",v="";d?v="flex-start":u==="center"?(v="center",f?y=m:_=m):f?u==="left"||u==="end"?(v="flex-end",_=m):(u==="right"||u==="start")&&(v="flex-start",y=m):u==="left"||u==="start"?(v="flex-start",_=m):(u==="right"||u==="end")&&(v="flex-end",y=m),t.position=this._cssPosition,t.marginLeft=d?"0":_,t.marginTop=h?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=d?"0":y,e.justifyContent=v,e.alignItems=h?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(jx),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},QR=(()=>{class r{_viewportRuler=C(Fr);_document=C(Ve);_platform=C(ht);_overlayContainer=C(Ud);constructor(){}global(){return new vf}flexibleConnectedTo(e){return new bf(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),ci=(()=>{class r{scrollStrategies=C(qR);_overlayContainer=C(Ud);_positionBuilder=C(QR);_keyboardDispatcher=C(YR);_injector=C(ft);_ngZone=C(ke);_document=C(Ve);_directionality=C(ri);_location=C(ky);_outsideClickDispatcher=C(XR);_animationsModuleType=C(Ft,{optional:!0});_idGenerator=C(zt);_renderer=C(On).createRenderer(null,null);_appRef;_styleLoader=C(ii);constructor(){}create(e){this._styleLoader.load($x);let i=this._createHostElement(),n=this._createPaneElement(i),s=this._createPortalOutlet(n),o=new qs(e);return o.direction=o.direction||this._directionality.value,new Ho(s,i,n,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(ko),this._renderer)}position(){return this._positionBuilder}_createPaneElement(e){let i=this._document.createElement("div");return i.id=this._idGenerator.getId("cdk-overlay-"),i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(zs)),new Hd(e,null,this._appRef,this._injector,this._document)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),JR=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],qx=new te("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let r=C(ci);return()=>r.scrollStrategies.reposition()}}),Ja=(()=>{class r{elementRef=C(ve);constructor(){}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]})}return r})(),yf=(()=>{class r{_overlay=C(ci);_dir=C(ri,{optional:!0});_overlayRef;_templatePortal;_backdropSubscription=ei.EMPTY;_attachSubscription=ei.EMPTY;_detachSubscription=ei.EMPTY;_positionSubscription=ei.EMPTY;_offsetX;_offsetY;_position;_scrollStrategyFactory=C(qx);_disposeOnNavigation=!1;_ngZone=C(ke);origin;positions;positionStrategy;get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}width;height;minWidth;minHeight;backdropClass;panelClass;viewportMargin=0;scrollStrategy;open=!1;disableClose=!1;transformOriginSelector;hasBackdrop=!1;lockPosition=!1;flexibleDimensions=!1;growAfterOpen=!1;push=!1;get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}backdropClick=new fe;positionChange=new fe;attach=new fe;detach=new fe;overlayKeydown=new fe;overlayOutsideClick=new fe;constructor(){let e=C(ss),i=C(lr);this._templatePortal=new fs(e,i),this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=JR);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),i.keyCode===27&&!this.disableClose&&!Wi(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{let n=this._getOriginElement(),s=ki(i);(!n||n!==s&&!n.contains(s))&&this.overlayOutsideClick.next(i)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),i=new qs({direction:this._dir||"ltr",positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(i.width=this.width),(this.height||this.height===0)&&(i.height=this.height),(this.minWidth||this.minWidth===0)&&(i.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(e){let i=this.positions.map(n=>({originX:n.originX,originY:n.originY,overlayX:n.overlayX,overlayY:n.overlayY,offsetX:n.offsetX||this.offsetX,offsetY:n.offsetY||this.offsetY,panelClass:n.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof Ja?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Ja?this.origin.elementRef.nativeElement:this.origin instanceof ve?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(G0(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",ge],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",ge],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",ge],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",ge],push:[2,"cdkConnectedOverlayPush","push",ge],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",ge]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[at,Et]})}return r})();function eO(r){return()=>r.scrollStrategies.reposition()}var tO={provide:qx,deps:[ci],useFactory:eO},ur=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({providers:[ci,tO],imports:[us,Lr,Za,Za]})}return r})();function iO(r,t){}var gs=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;positionStrategy;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;closeOnNavigation=!0;closeOnDestroy=!0;closeOnOverlayDetachments=!0;componentFactoryResolver;providers;container;templateContext};var wf=(()=>{class r extends Vo{_elementRef=C(ve);_focusTrapFactory=C(px);_config;_interactivityChecker=C(Zm);_ngZone=C(ke);_overlayRef=C(Ho);_focusMonitor=C(hs);_renderer=C(xi);_platform=C(ht);_document=C(Ve,{optional:!0});_portalOutlet;_focusTrap=null;_elementFocusedBeforeDialogWasOpened=null;_closeInteractionType=null;_ariaLabelledByQueue=[];_changeDetectorRef=C($e);_injector=C(ft);_isDestroyed=!1;constructor(){super(),this._config=C(gs,{optional:!0})||new gs,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let i=this._ariaLabelledByQueue.indexOf(e);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),i}attachTemplatePortal(e){this._portalOutlet.hasAttached();let i=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),i}attachDomPortal=e=>{this._portalOutlet.hasAttached();let i=this._portalOutlet.attachDomPortal(e);return this._contentAttached(),i};_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let n=()=>{s(),o(),e.removeAttribute("tabindex")},s=this._renderer.listen(e,"blur",n),o=this._renderer.listen(e,"mousedown",n)})),e.focus(i)}_focusByCssSelector(e,i){let n=this._elementRef.nativeElement.querySelector(e);n&&this._forceFocus(n,i)}_trapFocus(){this._isDestroyed||nn(()=>{let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let e=this._config.restoreFocus,i=null;if(typeof e=="string"?i=this._document.querySelector(e):typeof e=="boolean"?i=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(i=e),this._config.restoreFocus&&i&&typeof i.focus=="function"){let n=Wa(),s=this._elementRef.nativeElement;(!n||n===this._document.body||n===s||s.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,i=Wa();return e===i||e.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Wa()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["cdk-dialog-container"]],viewQuery:function(i,n){if(i&1&&Le(zo,7),i&2){let s;Ee(s=Se())&&(n._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,n){i&2&&ye("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[xt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,n){i&1&&X(0,iO,0,0,"ng-template",0)},dependencies:[zo],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return r})(),el=class{overlayRef;config;componentInstance;componentRef;containerInstance;disableClose;closed=new ne;backdropClick;keydownEvents;outsidePointerEvents;id;_detachSubscription;constructor(t,e){this.overlayRef=t,this.config=e,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Wi(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(t),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},nO=new te("DialogScrollStrategy",{providedIn:"root",factory:()=>{let r=C(ci);return()=>r.scrollStrategies.block()}}),rO=new te("DialogData"),sO=new te("DefaultDialogConfig");var Cf=(()=>{class r{_overlay=C(ci);_injector=C(ft);_defaultOptions=C(sO,{optional:!0});_parentDialog=C(r,{optional:!0,skipSelf:!0});_overlayContainer=C(Ud);_idGenerator=C(zt);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ne;_afterOpenedAtThisLevel=new ne;_ariaHiddenElements=new Map;_scrollStrategy=C(nO);get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}afterAllClosed=wo(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ri(void 0)));constructor(){}open(e,i){let n=this._defaultOptions||new gs;i=J(J({},n),i),i.id=i.id||this._idGenerator.getId("cdk-dialog-"),i.id&&this.getDialogById(i.id);let s=this._getOverlayConfig(i),o=this._overlay.create(s),l=new el(o,i),d=this._attachContainer(o,l,i);return l.containerInstance=d,this._attachDialogContent(e,l,d,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){xf(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){xf(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),xf(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let i=new qs({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachContainer(e,i,n){let s=n.injector||n.viewContainerRef?.injector,o=[{provide:gs,useValue:n},{provide:el,useValue:i},{provide:Ho,useValue:e}],l;n.container?typeof n.container=="function"?l=n.container:(l=n.container.type,o.push(...n.container.providers(n))):l=wf;let d=new ms(l,n.viewContainerRef,ft.create({parent:s||this._injector,providers:o}));return e.attach(d).instance}_attachDialogContent(e,i,n,s){if(e instanceof ss){let o=this._createInjector(s,i,n,void 0),l={$implicit:s.data,dialogRef:i};s.templateContext&&(l=J(J({},l),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),n.attachTemplatePortal(new fs(e,null,l,o))}else{let o=this._createInjector(s,i,n,this._injector),l=n.attachComponentPortal(new ms(e,s.viewContainerRef,o));i.componentRef=l,i.componentInstance=l.instance}}_createInjector(e,i,n,s){let o=e.injector||e.viewContainerRef?.injector,l=[{provide:rO,useValue:e.data},{provide:el,useValue:i}];return e.providers&&(typeof e.providers=="function"?l.push(...e.providers(i,e,n)):l.push(...e.providers)),e.direction&&(!o||!o.get(ri,null,{optional:!0}))&&l.push({provide:ri,useValue:{value:e.direction,change:Pi()}}),ft.create({parent:o||s,providers:l})}_removeOpenDialog(e,i){let n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let i=e.parentElement.children;for(let n=i.length-1;n>-1;n--){let s=i[n];s!==e&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function xf(r,t){let e=r.length;for(;e--;)t(r[e])}var Yx=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({providers:[Cf],imports:[ur,Lr,Fd,Lr]})}return r})();function oO(r,t){}var Gd=class{viewContainerRef;injector;id;role="dialog";panelClass="";hasBackdrop=!0;backdropClass="";disableClose=!1;width="";height="";minWidth;minHeight;maxWidth;maxHeight;position;data=null;direction;ariaDescribedBy=null;ariaLabelledBy=null;ariaLabel=null;ariaModal=!1;autoFocus="first-tabbable";restoreFocus=!0;delayFocusTrap=!0;scrollStrategy;closeOnNavigation=!0;componentFactoryResolver;enterAnimationDuration;exitAnimationDuration},kf="mdc-dialog--open",Xx="mdc-dialog--opening",Kx="mdc-dialog--closing",aO=150,lO=75,cO=(()=>{class r extends wf{_animationMode=C(Ft,{optional:!0});_animationStateChanged=new fe;_animationsEnabled=this._animationMode!=="NoopAnimations";_actionSectionCount=0;_hostElement=this._elementRef.nativeElement;_enterAnimationDuration=this._animationsEnabled?Qx(this._config.enterAnimationDuration)??aO:0;_exitAnimationDuration=this._animationsEnabled?Qx(this._config.exitAnimationDuration)??lO:0;_animationTimer=null;_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Zx,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Xx,kf)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(kf),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(kf),this._animationsEnabled?(this._hostElement.style.setProperty(Zx,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(Kx)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)};_finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})};_clearAnimationClasses(){this._hostElement.classList.remove(Xx,Kx)}_waitForAnimationToComplete(e,i){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let i=super.attachComponentPortal(e);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275cmp=oe({type:r,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,n){i&2&&(Fn("id",n._config.id),ye("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledByQueue[0])("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),ce("_mat-animation-noopable",!n._animationsEnabled)("mat-mdc-dialog-container-with-actions",n._actionSectionCount>0))},features:[xt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,n){i&1&&(w(0,"div",0)(1,"div",1),X(2,oO,0,0,"ng-template",2),E()())},dependencies:[zo],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 560px);min-width:var(--mat-dialog-container-min-width, 280px)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, calc(100vw - 32px))}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, none);border-radius:var(--mdc-dialog-container-shape, var(--mat-sys-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-sys-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 6px 24px 13px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-sys-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-sys-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-sys-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-sys-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-sys-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-sys-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-sys-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-sys-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-sys-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-sys-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-sys-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-sys-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px 0)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 16px 24px);justify-content:var(--mat-dialog-actions-alignment, flex-end)}@media(forced-colors: active){.mat-mdc-dialog-actions{border-top-color:CanvasText}}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return r})(),Zx="--mat-dialog-transition-duration";function Qx(r){return r==null?null:typeof r=="number"?r:r.endsWith("ms")?an(r.substring(0,r.length-2)):r.endsWith("s")?an(r.substring(0,r.length-1))*1e3:r==="0"?0:null}var jd=function(r){return r[r.OPEN=0]="OPEN",r[r.CLOSING=1]="CLOSING",r[r.CLOSED=2]="CLOSED",r}(jd||{}),Nn=class{_ref;_containerInstance;componentInstance;componentRef;disableClose;id;_afterOpened=new ne;_beforeClosed=new ne;_result;_closeFallbackTimeout;_state=jd.OPEN;_closeInteractionType;constructor(t,e,i){this._ref=t,this._containerInstance=i,this.disableClose=e.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(ai(n=>n.state==="opened"),gn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(ai(n=>n.state==="closed"),gn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),tn(this.backdropClick(),this.keydownEvents().pipe(ai(n=>n.keyCode===27&&!this.disableClose&&!Wi(n)))).subscribe(n=>{this.disableClose||(n.preventDefault(),dO(this,n.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(ai(e=>e.state==="closing"),gn(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=jd.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=jd.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function dO(r,t,e){return r._closeInteractionType=t,r.close(e)}var Xs=new te("MatMdcDialogData"),hO=new te("mat-mdc-dialog-default-options"),uO=new te("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let r=C(ci);return()=>r.scrollStrategies.block()}});var _s=(()=>{class r{_overlay=C(ci);_defaultOptions=C(hO,{optional:!0});_scrollStrategy=C(uO);_parentDialog=C(r,{optional:!0,skipSelf:!0});_idGenerator=C(zt);_dialog=C(Cf);_openDialogsAtThisLevel=[];_afterAllClosedAtThisLevel=new ne;_afterOpenedAtThisLevel=new ne;dialogConfigClass=Gd;_dialogRefConstructor;_dialogContainerType;_dialogDataToken;get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}afterAllClosed=wo(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ri(void 0)));constructor(){this._dialogRefConstructor=Nn,this._dialogContainerType=cO,this._dialogDataToken=Xs}open(e,i){let n;i=J(J({},this._defaultOptions||new Gd),i),i.id=i.id||this._idGenerator.getId("mat-mdc-dialog-"),i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(e,Ue(J({},i),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:gs,useValue:i}]},templateContext:()=>({dialogRef:n}),providers:(o,l,d)=>(n=new this._dialogRefConstructor(o,i,d),n.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:d},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:n}])}));return n.componentRef=s.componentRef,n.componentInstance=s.componentInstance,this.openDialogs.push(n),this.afterOpened.next(n),n.afterClosed().subscribe(()=>{let o=this.openDialogs.indexOf(n);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),n}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Jx=(()=>{class r{_dialogRef=C(Nn,{optional:!0});_elementRef=C(ve);_dialog=C(_s);constructor(){}ngOnInit(){this._dialogRef||(this._dialogRef=pO(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r})}return r})(),bs=(()=>{class r extends Jx{id=C(zt).getId("mat-mdc-dialog-title-");_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275dir=_e({type:r,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,n){i&2&&Fn("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],features:[xt]})}return r})(),vs=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],features:[dy([Ka])]})}return r})(),Wo=(()=>{class r extends Jx{align;_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275dir=_e({type:r,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(i,n){i&2&&ce("mat-mdc-dialog-actions-align-start",n.align==="start")("mat-mdc-dialog-actions-align-center",n.align==="center")("mat-mdc-dialog-actions-align-end",n.align==="end")},inputs:{align:"align"},features:[xt]})}return r})();function pO(r,t){let e=r.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(i=>i.id===e.id):null}var yn=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({providers:[_s],imports:[Yx,ur,Lr,Ye,Ye]})}return r})();var mO=["*"],$d;function fO(){if($d===void 0&&($d=null,typeof window<"u")){let r=window;r.trustedTypes!==void 0&&($d=r.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return $d}function tl(r){return fO()?.createHTML(r)||r}function ew(r){return Error(`Unable to find icon with the name "${r}"`)}function gO(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function tw(r){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${r}".`)}function iw(r){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${r}".`)}var Nr=class{url;svgText;options;svgElement;constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}},_O=(()=>{class r{_httpClient;_sanitizer;_errorHandler;_document;_svgIconConfigs=new Map;_iconSetConfigs=new Map;_cachedIconsByUrl=new Map;_inProgressUrlFetches=new Map;_fontCssClassesByAlias=new Map;_resolvers=[];_defaultFontSetClass=["material-icons","mat-ligature-font"];constructor(e,i,n,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._document=n}addSvgIcon(e,i,n){return this.addSvgIconInNamespace("",e,i,n)}addSvgIconLiteral(e,i,n){return this.addSvgIconLiteralInNamespace("",e,i,n)}addSvgIconInNamespace(e,i,n,s){return this._addSvgIconConfig(e,i,new Nr(n,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,n,s){let o=this._sanitizer.sanitize(bn.HTML,n);if(!o)throw iw(n);let l=tl(o);return this._addSvgIconConfig(e,i,new Nr("",l,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,n){return this._addSvgIconSetConfig(e,new Nr(i,null,n))}addSvgIconSetLiteralInNamespace(e,i,n){let s=this._sanitizer.sanitize(bn.HTML,i);if(!s)throw iw(i);let o=tl(s);return this._addSvgIconSetConfig(e,new Nr("",o,n))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let i=this._sanitizer.sanitize(bn.RESOURCE_URL,e);if(!i)throw tw(e);let n=this._cachedIconsByUrl.get(i);return n?Pi(qd(n)):this._loadSvgIconFromConfig(new Nr(e,null)).pipe(Ar(s=>this._cachedIconsByUrl.set(i,s)),Ot(s=>qd(s)))}getNamedSvgIcon(e,i=""){let n=nw(i,e),s=this._svgIconConfigs.get(n);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(n,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(e,o):Yc(ew(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Pi(qd(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Ot(i=>qd(i)))}_getSvgFromIconSetConfigs(e,i){let n=this._extractIconWithNameFromAnySet(e,i);if(n)return Pi(n);let s=i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Zc(l=>{let h=`Loading icon set URL: ${this._sanitizer.sanitize(bn.RESOURCE_URL,o.url)} failed: ${l.message}`;return this._errorHandler.handleError(new Error(h)),Pi(null)})));return Xc(s).pipe(Ot(()=>{let o=this._extractIconWithNameFromAnySet(e,i);if(!o)throw ew(e);return o}))}_extractIconWithNameFromAnySet(e,i){for(let n=i.length-1;n>=0;n--){let s=i[n];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){let o=this._svgElementFromConfig(s),l=this._extractSvgIconFromSet(o,e,s.options);if(l)return l}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ar(i=>e.svgText=i),Ot(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Pi(null):this._fetchIcon(e).pipe(Ar(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,n){let s=e.querySelector(`[id="${i}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,n);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),n);let l=this._svgElementFromString(tl("<svg></svg>"));return l.appendChild(o),this._setSvgAttributes(l,n)}_svgElementFromString(e){let i=this._document.createElement("DIV");i.innerHTML=e;let n=i.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){let i=this._svgElementFromString(tl("<svg></svg>")),n=e.attributes;for(let s=0;s<n.length;s++){let{name:o,value:l}=n[s];o!=="id"&&i.setAttribute(o,l)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){let{url:i,options:n}=e,s=n?.withCredentials??!1;if(!this._httpClient)throw gO();if(i==null)throw Error(`Cannot fetch icon from URL "${i}".`);let o=this._sanitizer.sanitize(bn.RESOURCE_URL,i);if(!o)throw tw(i);let l=this._inProgressUrlFetches.get(o);if(l)return l;let d=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Ot(h=>tl(h)),Jc(()=>this._inProgressUrlFetches.delete(o)),j0());return this._inProgressUrlFetches.set(o,d),d}_addSvgIconConfig(e,i,n){return this._svgIconConfigs.set(nw(e,i),n),this}_addSvgIconSetConfig(e,i){let n=this._iconSetConfigs.get(e);return n?n.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){let i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let n=0;n<this._resolvers.length;n++){let s=this._resolvers[n](i,e);if(s)return bO(s)?new Nr(s.url,null,s.options):new Nr(s,null)}}static \u0275fac=function(i){return new(i||r)(Je(Na,8),Je(Ws),Je(Ve,8),Je(Ns))};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function qd(r){return r.cloneNode(!0)}function nw(r,t){return r+":"+t}function bO(r){return!!(r.url&&r.options)}var vO=new te("MAT_ICON_DEFAULT_OPTIONS"),yO=new te("mat-icon-location",{providedIn:"root",factory:xO});function xO(){let r=C(Ve),t=r?r.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var rw=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],wO=rw.map(r=>`[${r}]`).join(", "),CO=/^url\(['"]?#(.*?)['"]?\)$/,Ht=(()=>{class r{_elementRef=C(ve);_iconRegistry=C(_O);_location=C(yO);_errorHandler=C(Ns);_defaultColor;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(e){let i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(e){let i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=ei.EMPTY;constructor(){let e=C(new ar("aria-hidden"),{optional:!0}),i=C(vO,{optional:!0});i&&(i.color&&(this.color=this._defaultColor=i.color),i.fontSet&&(this.fontSet=i.fontSet)),e||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){let n=e.childNodes[i];(n.nodeType!==1||n.nodeName.toLowerCase()==="svg")&&n.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(n=>n.length>0);this._previousFontSetClass.forEach(n=>e.classList.remove(n)),i.forEach(n=>e.classList.add(n)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let i=this._elementsWithExternalReferences;i&&i.forEach((n,s)=>{n.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){let i=e.querySelectorAll(wO),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)rw.forEach(o=>{let l=i[s],d=l.getAttribute(o),h=d?d.match(CO):null;if(h){let u=n.get(l);u||(u=[],n.set(l,u)),u.push({name:o,value:h[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[i,n]=this._splitIconName(e);i&&(this._svgNamespace=i),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,i).pipe(gn(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${i}:${n}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,n){i&2&&(ye("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),rn(n.color?"mat-"+n.color:""),ce("mat-icon-inline",n.inline)("mat-icon-no-color",n.color!=="primary"&&n.color!=="accent"&&n.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",ge],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[at],ngContentSelectors:mO,decls:1,vars:0,template:function(i,n){i&1&&(Bt(),Ke(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return r})(),St=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye,Ye]})}return r})();function kO(r,t){if(r&1){let e=ie();w(0,"div",8),U("click",function(){let n=H(e).$implicit,s=T();return W(s.select(n.type))}),w(1,"div",9),re(2,"img",10),E(),w(3,"div",11)(4,"span",12),F(5),E(),w(6,"span",13),F(7),E()()()}if(r&2){let e=t.$implicit;ye("aria-label",e.label),A(2),R("src","/dm-tool/images/"+e.icon,Ao)("alt",e.label),A(3),Te(e.label),A(2),Te(e.description)}}var Yd=class r{constructor(t){this.dialogRef=t}widgetTypes=[{type:"IMAGE_PDF",label:"Image/PDF Viewer",icon:"image.png",description:"View images & PDFs"},{type:"NOTEPAD",label:"Notepad",icon:"notepad.png",description:"Text notes"},{type:"RANDOM_GENERATOR",label:"Random Generator",icon:"random_generator.png",description:"Random tables"},{type:"DICE_TOOL",label:"Dice Tool",icon:"dice.png",description:"Roll dice"},{type:"MUSIC_WIDGET",label:"Music Widget",icon:"note.png",description:"Play tracks"},{type:"WIKI_WIDGET",label:"Wiki",icon:"wiki.png",description:"Knowledge base"},{type:"COMBAT_TRACKER",label:"Combat Tracker",icon:"combat.png",description:"Battle manager"},{type:"DAYTIME_TRACKER",label:"Daytime Tracker",icon:"moon.png",description:"Time of day"},{type:"LLM_CHAT",label:"LLM Chat",icon:"llm.png",description:"AI assistant"},{type:"HEX_MAP",label:"Hex Map",icon:"hex.svg",description:"Hex grid map"}];select(t){this.dialogRef.close({action:"add",type:t})}reset(){confirm("Are you sure you want to reset the workspace? All widgets will be closed.")&&this.dialogRef.close({action:"reset"})}static \u0275fac=function(e){return new(e||r)(we(Nn))};static \u0275cmp=oe({type:r,selectors:[["app-widget-selector-dialog"]],decls:12,vars:1,consts:[[1,"dialog-header"],["mat-dialog-title",""],[1,"dialog-content"],[1,"widget-grid"],["class","widget-card",3,"click",4,"ngFor","ngForOf"],[1,"divider"],[1,"reset-section"],["mat-stroked-button","","color","warn",1,"reset-button",3,"click"],[1,"widget-card",3,"click"],[1,"widget-icon"],[3,"src","alt"],[1,"widget-info"],[1,"widget-label"],[1,"widget-description"]],template:function(e,i){e&1&&(w(0,"div",0)(1,"h2",1),F(2,"Add a Widget"),E()(),w(3,"mat-dialog-content",2)(4,"div",3),X(5,kO,8,5,"div",4),E(),re(6,"div",5),w(7,"div",6)(8,"button",7),U("click",function(){return i.reset()}),w(9,"mat-icon"),F(10,"refresh"),E(),F(11," Reset Workspace "),E()()()),e&2&&(A(5),R("ngForOf",i.widgetTypes))},dependencies:[lt,Lt,yn,bs,vs,wt,gi,St,Ht],styles:[".dialog-header[_ngcontent-%COMP%]{padding:24px 24px 0}h2[_ngcontent-%COMP%]{margin:0;font-size:22px;font-weight:500;color:var(--text-primary);letter-spacing:-.5px}.dialog-content[_ngcontent-%COMP%]{padding:16px 24px 24px;min-width:640px;width:100%;box-sizing:border-box}.widget-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-bottom:20px}.widget-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px 16px;border-radius:16px;background:linear-gradient(135deg,#ffffff0d,#ffffff05);border:1px solid rgba(255,255,255,.08);cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);text-align:center}.widget-card[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#40c4ff26,#40c4ff0d);border-color:#40c4ff66;transform:translateY(-4px);box-shadow:0 8px 24px #0006,0 0 0 1px #40c4ff33}.widget-card[_ngcontent-%COMP%]:active{transform:translateY(-2px)}.widget-icon[_ngcontent-%COMP%]{width:56px;height:56px;display:flex;align-items:center;justify-content:center;border-radius:14px;background:#ffffff14;margin-bottom:12px;transition:all .3s ease}.widget-card[_ngcontent-%COMP%]:hover   .widget-icon[_ngcontent-%COMP%]{background:#40c4ff33;transform:scale(1.08)}.widget-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;object-fit:contain;filter:drop-shadow(0 2px 8px rgba(0,0,0,.3))}.widget-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.widget-label[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:var(--text-primary);line-height:1.3}.widget-description[_ngcontent-%COMP%]{font-size:11px;color:var(--text-muted);line-height:1.4}.divider[_ngcontent-%COMP%]{height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.15),transparent);margin:16px 0 20px}.reset-section[_ngcontent-%COMP%]{display:flex;justify-content:center}.reset-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 24px;border-color:#ff525266!important;color:var(--danger-color)!important;background:#ff525214!important;transition:all .2s ease}.reset-button[_ngcontent-%COMP%]:hover{background:#ff525226!important;border-color:#ff525299!important;box-shadow:0 4px 12px #ff525233}.dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#ffffff0d;border-radius:4px}.dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px}.dialog-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#ffffff4d}@media (max-width: 600px){.widget-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:10px}.widget-card[_ngcontent-%COMP%]{padding:16px 12px}.widget-icon[_ngcontent-%COMP%]{width:48px;height:48px}.widget-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:32px}.widget-label[_ngcontent-%COMP%]{font-size:12px}.widget-description[_ngcontent-%COMP%]{font-size:10px}}@media (max-width: 400px){.widget-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var EO=r=>({"background-image":r});function SO(r,t){if(r&1){let e=ie();w(0,"div",5),U("click",function(){let n=H(e).index,s=T();return W(s.selectBackground(n))}),re(1,"div",6),w(2,"span",7),F(3),E()()}if(r&2){let e=t.$implicit,i=t.index,n=T();ce("selected",n.selectedIndex===i),A(),R("ngStyle",os(4,EO,"url("+e.path+")")),A(2),Te(e.name)}}var Xd=class r{constructor(t){this.dialogRef=t;let e=C(Xs);e!=null&&(this.selectedIndex=e)}backgrounds=[{name:"Glass",path:"/dm-tool/backgrounds/glass.png"},{name:"Glass Dragon",path:"/dm-tool/backgrounds/glass_dragon.png"},{name:"Glass Zombie",path:"/dm-tool/backgrounds/glass_zombie.png"}];selectedIndex=0;selectBackground(t){this.dialogRef.close(t)}close(){this.dialogRef.close()}static \u0275fac=function(e){return new(e||r)(we(Nn))};static \u0275cmp=oe({type:r,selectors:[["app-background-selector-dialog"]],decls:8,vars:1,consts:[["mat-dialog-title",""],[1,"backgrounds-grid"],["class","background-option",3,"selected","click",4,"ngFor","ngForOf"],["align","end"],["mat-button","",3,"click"],[1,"background-option",3,"click"],[1,"thumbnail",3,"ngStyle"],[1,"label"]],template:function(e,i){e&1&&(w(0,"h2",0),F(1,"Choose Background"),E(),w(2,"mat-dialog-content")(3,"div",1),X(4,SO,4,6,"div",2),E()(),w(5,"mat-dialog-actions",3)(6,"button",4),U("click",function(){return i.close()}),F(7,"Cancel"),E()()),e&2&&(A(4),R("ngForOf",i.backgrounds))},dependencies:[lt,Lt,ud,yn,bs,Wo,vs,wt,gi],styles:["h2[_ngcontent-%COMP%]{margin:0 0 16px;font-size:20px;color:var(--text-primary)}.backgrounds-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:16px;padding:8px}.background-option[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;cursor:pointer;border-radius:12px;padding:12px;transition:all .2s ease;border:2px solid transparent;background:#ffffff08}.background-option[_ngcontent-%COMP%]:hover{background:#ffffff1a;transform:translateY(-2px)}.background-option.selected[_ngcontent-%COMP%]{border-color:var(--accent-color);background:#40c4ff26}.thumbnail[_ngcontent-%COMP%]{width:100%;aspect-ratio:16/9;background-size:cover;background-position:center;border-radius:8px;box-shadow:0 4px 12px #0006;border:1px solid rgba(255,255,255,.1)}.label[_ngcontent-%COMP%]{margin-top:8px;font-size:13px;color:var(--text-primary);text-align:center;font-weight:500}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px}"]})};var MO=["tooltip"],aw=20;var lw=new te("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let r=C(ci);return()=>r.scrollStrategies.reposition({scrollThrottle:aw})}});function AO(r){return()=>r.scrollStrategies.reposition({scrollThrottle:aw})}var TO={provide:lw,deps:[ci],useFactory:AO};function IO(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var DO=new te("mat-tooltip-default-options",{providedIn:"root",factory:IO});var sw="tooltip-panel",ow=Hi({passive:!0}),PO=8,RO=8,OO=24,FO=200,Kd=(()=>{class r{_elementRef=C(ve);_ngZone=C(ke);_platform=C(ht);_ariaDescriber=C(hx);_focusMonitor=C(hs);_dir=C(ri);_injector=C(ft);_defaultOptions=C(DO,{optional:!0});_overlayRef;_tooltipInstance;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=LO;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=Pr(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){let i=Pr(e);this._disabled!==i&&(this._disabled=i,i?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=an(e)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=an(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(e){let i=this._message;this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(i)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new ne;_isDestroyed=!1;constructor(){let e=this._defaultOptions;e&&(this._showDelay=e.showDelay,this._hideDelay=e.hideDelay,e.position&&(this.position=e.position),e.positionAtOrigin&&(this.positionAtOrigin=e.positionAtOrigin),e.touchGestures&&(this.touchGestures=e.touchGestures),e.tooltipClass&&(this.tooltipClass=e.tooltipClass)),this._viewportMargin=PO}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(ot(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,n])=>{e.removeEventListener(i,n,ow)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let n=this._createOverlay(i);this._detach(),this._portal=this._portal||new ms(this._tooltipComponent,this._injector.get(lr));let s=this._tooltipInstance=n.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(ot(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(e)}hide(e=this.hideDelay){let i=this._tooltipInstance;i&&(i.isVisible()?i.hide(e):(i._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let o=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&o._origin instanceof ve)return this._overlayRef;this._detach()}let i=this._injector.get(ps).getAncestorScrollContainers(this._elementRef),n=this._injector.get(ci),s=n.position().flexibleConnectedTo(this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return s.positionChanges.pipe(ot(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=n.create({direction:this._dir,positionStrategy:s,panelClass:`${this._cssClassPrefix}-${sw}`,scrollStrategy:this._injector.get(lw)()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(ot(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(ot(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(ot(this._destroyed)).subscribe(o=>{this._isTooltipVisible()&&o.keyCode===27&&!Wi(o)&&(o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(ot(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let i=e.getConfig().positionStrategy,n=this._getOrigin(),s=this._getOverlayPosition();i.withPositions([this._addOffset(J(J({},n.main),s.main)),this._addOffset(J(J({},n.fallback),s.fallback))])}_addOffset(e){let i=RO,n=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-i:e.originY==="bottom"?e.offsetY=i:e.originX==="start"?e.offsetX=n?-i:i:e.originX==="end"&&(e.offsetX=n?i:-i),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",i=this.position,n;i=="above"||i=="below"?n={originX:"center",originY:i=="above"?"top":"bottom"}:i=="before"||i=="left"&&e||i=="right"&&!e?n={originX:"start",originY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(n={originX:"end",originY:"center"});let{x:s,y:o}=this._invertPosition(n.originX,n.originY);return{main:n,fallback:{originX:s,originY:o}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",i=this.position,n;i=="above"?n={overlayX:"center",overlayY:"bottom"}:i=="below"?n={overlayX:"center",overlayY:"top"}:i=="before"||i=="left"&&e||i=="right"&&!e?n={overlayX:"end",overlayY:"center"}:(i=="after"||i=="right"&&e||i=="left"&&!e)&&(n={overlayX:"start",overlayY:"center"});let{x:s,y:o}=this._invertPosition(n.overlayX,n.overlayY);return{main:n,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),nn(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,i){return this.position==="above"||this.position==="below"?i==="top"?i="bottom":i==="bottom"&&(i="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:i}}_updateCurrentPositionClass(e){let{overlayY:i,originX:n,originY:s}=e,o;if(i==="center"?this._dir&&this._dir.value==="rtl"?o=n==="end"?"left":"right":o=n==="start"?"left":"right":o=i==="bottom"&&s==="top"?"above":"below",o!==this._currentPosition){let l=this._overlayRef;if(l){let d=`${this._cssClassPrefix}-${sw}-`;l.removePanelClass(d+this._currentPosition),l.addPanelClass(d+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let i;e.x!==void 0&&e.y!==void 0&&(i=e),this.show(void 0,i)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let i=e.targetTouches?.[0],n=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let s=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,n)},this._defaultOptions?.touchLongPressShowDelay??s)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",i=>{let n=i.relatedTarget;(!n||!this._overlayRef?.overlayElement.contains(n))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let i=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};e.push(["touchend",i],["touchcancel",i])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([i,n])=>{this._elementRef.nativeElement.addEventListener(i,n,ow)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let i=this._injector.get(Ve).elementFromPoint(e.clientX,e.clientY),n=this._elementRef.nativeElement;i!==n&&!n.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let i=this._elementRef.nativeElement,n=i.style;(e==="on"||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA")&&(n.userSelect=n.msUserSelect=n.webkitUserSelect=n.MozUserSelect="none"),(e==="on"||!i.draggable)&&(n.webkitUserDrag="none"),n.touchAction="none",n.webkitTapHighlightColor="transparent"}}_syncAriaDescription(e){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,e,"tooltip"),this._isDestroyed||nn({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(i,n){i&2&&ce("mat-mdc-tooltip-disabled",n.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return r})(),LO=(()=>{class r{_changeDetectorRef=C($e);_elementRef=C(ve);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled;_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new ne;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){let e=C(Ft,{optional:!0});this._animationsDisabled=e==="NoopAnimations"}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>OO&&e.width>=FO}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let i=this._tooltip.nativeElement,n=this._showAnimation,s=this._hideAnimation;if(i.classList.remove(e?s:n),i.classList.add(e?n:s),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let o=getComputedStyle(i);(o.getPropertyValue("animation-duration")==="0s"||o.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-tooltip-component"]],viewQuery:function(i,n){if(i&1&&Le(MO,7),i&2){let s;Ee(s=Se())&&(n._tooltip=s.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(i,n){i&1&&U("mouseleave",function(o){return n._handleMouseLeave(o)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(i,n){if(i&1){let s=ie();w(0,"div",1,0),U("animationend",function(l){return H(s),W(n._handleAnimationEnd(l))}),w(2,"div",2),F(3),E()()}i&2&&(ce("mdc-tooltip--multiline",n._isMultiline),R("ngClass",n.tooltipClass),A(3),Te(n.message))},dependencies:[Io],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}return r})();var Zd=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({providers:[TO],imports:[Fd,ur,Ye,Ye,hr]})}return r})();var _w=(()=>{class r{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,i){this._renderer=e,this._elementRef=i}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(i){return new(i||r)(we(xi),we(ve))};static \u0275dir=_e({type:r})}return r})(),bw=(()=>{class r extends _w{static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275dir=_e({type:r,features:[xt]})}return r})(),Vr=new te("");var NO={provide:Vr,useExisting:Mi(()=>Xt),multi:!0};function BO(){let r=To()?To().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var VO=new te(""),Xt=(()=>{class r extends _w{_compositionMode;_composing=!1;constructor(e,i,n){super(e,i),this._compositionMode=n,this._compositionMode==null&&(this._compositionMode=!BO())}writeValue(e){let i=e??"";this.setProperty("value",i)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(i){return new(i||r)(we(xi),we(ve),we(VO,8))};static \u0275dir=_e({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,n){i&1&&U("input",function(o){return n._handleInput(o.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(o){return n._compositionEnd(o.target.value)})},standalone:!1,features:[et([NO]),xt]})}return r})();function ys(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function vw(r){return r!=null&&typeof r.length=="number"}var ws=new te(""),Tf=new te(""),zO=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,$o=class{static min(t){return yw(t)}static max(t){return xw(t)}static required(t){return ww(t)}static requiredTrue(t){return HO(t)}static email(t){return WO(t)}static minLength(t){return UO(t)}static maxLength(t){return jO(t)}static pattern(t){return GO(t)}static nullValidator(t){return Jd(t)}static compose(t){return Aw(t)}static composeAsync(t){return Tw(t)}};function yw(r){return t=>{if(ys(t.value)||ys(r))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}function xw(r){return t=>{if(ys(t.value)||ys(r))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}function ww(r){return ys(r.value)?{required:!0}:null}function HO(r){return r.value===!0?null:{required:!0}}function WO(r){return ys(r.value)||zO.test(r.value)?null:{email:!0}}function UO(r){return t=>ys(t.value)||!vw(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}function jO(r){return t=>vw(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}function GO(r){if(!r)return Jd;let t,e;return typeof r=="string"?(e="",r.charAt(0)!=="^"&&(e+="^"),e+=r,r.charAt(r.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),i=>{if(ys(i.value))return null;let n=i.value;return t.test(n)?null:{pattern:{requiredPattern:e,actualValue:n}}}}function Jd(r){return null}function Cw(r){return r!=null}function kw(r){return hy(r)?qc(r):r}function Ew(r){let t={};return r.forEach(e=>{t=e!=null?J(J({},t),e):t}),Object.keys(t).length===0?null:t}function Sw(r,t){return t.map(e=>e(r))}function $O(r){return!r.validate}function Mw(r){return r.map(t=>$O(t)?t:e=>t.validate(e))}function Aw(r){if(!r)return null;let t=r.filter(Cw);return t.length==0?null:function(e){return Ew(Sw(e,t))}}function If(r){return r!=null?Aw(Mw(r)):null}function Tw(r){if(!r)return null;let t=r.filter(Cw);return t.length==0?null:function(e){let i=Sw(e,t).map(kw);return Xc(i).pipe(Ot(Ew))}}function Df(r){return r!=null?Tw(Mw(r)):null}function dw(r,t){return r===null?[t]:Array.isArray(r)?[...r,t]:[r,t]}function Iw(r){return r._rawValidators}function Dw(r){return r._rawAsyncValidators}function Ef(r){return r?Array.isArray(r)?r:[r]:[]}function eh(r,t){return Array.isArray(r)?r.includes(t):r===t}function hw(r,t){let e=Ef(t);return Ef(r).forEach(n=>{eh(e,n)||e.push(n)}),e}function uw(r,t){return Ef(t).filter(e=>!eh(r,e))}var th=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=If(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Df(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Ks=class extends th{name;get formDirective(){return null}get path(){return null}},Br=class extends th{_parent=null;name=null;valueAccessor=null},Sf=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},qO={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vU=Ue(J({},qO),{"[class.ng-submitted]":"isSubmitted"}),si=(()=>{class r extends Sf{constructor(e){super(e)}static \u0275fac=function(i){return new(i||r)(we(Br,2))};static \u0275dir=_e({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,n){i&2&&ce("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},standalone:!1,features:[xt]})}return r})();var il="VALID",Qd="INVALID",jo="PENDING",nl="DISABLED",xs=class{},ih=class extends xs{value;source;constructor(t,e){super(),this.value=t,this.source=e}},sl=class extends xs{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},ol=class extends xs{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},Go=class extends xs{status;source;constructor(t,e){super(),this.status=t,this.source=e}},Mf=class extends xs{source;constructor(t){super(),this.source=t}},Af=class extends xs{source;constructor(t){super(),this.source=t}};function Pw(r){return(lh(r)?r.validators:r)||null}function YO(r){return Array.isArray(r)?If(r):r||null}function Rw(r,t){return(lh(t)?t.asyncValidators:r)||null}function XO(r){return Array.isArray(r)?Df(r):r||null}function lh(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function KO(r,t,e){let i=r.controls;if(!(t?Object.keys(i):i).length)throw new mi(1e3,"");if(!i[e])throw new mi(1001,"")}function ZO(r,t,e){r._forEachChild((i,n)=>{if(e[n]===void 0)throw new mi(1002,"")})}var nh=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Kn(this.statusReactive)}set status(t){Kn(()=>this.statusReactive.set(t))}_status=Tr(()=>this.statusReactive());statusReactive=_n(void 0);get valid(){return this.status===il}get invalid(){return this.status===Qd}get pending(){return this.status==jo}get disabled(){return this.status===nl}get enabled(){return this.status!==nl}errors;get pristine(){return Kn(this.pristineReactive)}set pristine(t){Kn(()=>this.pristineReactive.set(t))}_pristine=Tr(()=>this.pristineReactive());pristineReactive=_n(!0);get dirty(){return!this.pristine}get touched(){return Kn(this.touchedReactive)}set touched(t){Kn(()=>this.touchedReactive.set(t))}_touched=Tr(()=>this.touchedReactive());touchedReactive=_n(!1);get untouched(){return!this.touched}_events=new ne;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(hw(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(hw(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(uw(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(uw(t,this._rawAsyncValidators))}hasValidator(t){return eh(this._rawValidators,t)}hasAsyncValidator(t){return eh(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Ue(J({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new ol(!0,i))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=t.sourceControl??this;this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:i})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,i),e&&t.emitEvent!==!1&&this._events.next(new ol(!1,i))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let i=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Ue(J({},t),{sourceControl:i})),e&&t.emitEvent!==!1&&this._events.next(new sl(!1,i))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=t.sourceControl??this;this._forEachChild(n=>{n.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,i),e&&t.emitEvent!==!1&&this._events.next(new sl(!0,i))}markAsPending(t={}){this.status=jo;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Go(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Ue(J({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=nl,this.errors=null,this._forEachChild(n=>{n.disable(Ue(J({},t),{onlySelf:!0}))}),this._updateValue();let i=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ih(this.value,i)),this._events.next(new Go(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ue(J({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=il,this._forEachChild(i=>{i.enable(Ue(J({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Ue(J({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===il||this.status===jo)&&this._runAsyncValidator(i,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ih(this.value,e)),this._events.next(new Go(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Ue(J({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nl:il}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=jo,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let i=kw(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(n=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(n,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,n)=>i&&i._find(n),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,i){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||i)&&this._events.next(new Go(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,i)}_initObservables(){this.valueChanges=new fe,this.statusChanges=new fe}_calculateStatus(){return this._allControlsDisabled()?nl:this.errors?Qd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jo)?jo:this._anyControlsHaveStatus(Qd)?Qd:il}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let i=!this._anyControlsDirty(),n=this.pristine!==i;this.pristine=i,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),n&&this._events.next(new sl(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new ol(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){lh(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=YO(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=XO(this._rawAsyncValidators)}},rh=class extends nh{constructor(t,e,i){super(Pw(e),Rw(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){ZO(this,!0,t),Object.keys(t).forEach(i=>{KO(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let n=this.controls[i];n&&n.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,n)=>{i.reset(t?t[n]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,n)=>((i.enabled||this.disabled)&&(e[n]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((n,s)=>{i=e(i,n,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var ch=new te("",{providedIn:"root",factory:()=>Pf}),Pf="always";function QO(r,t){return[...t.path,r]}function sh(r,t,e=Pf){Rf(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(r.disabled),e2(r,t),i2(r,t),t2(r,t),JO(r,t)}function pw(r,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),ah(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function oh(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function JO(r,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}function Rf(r,t){let e=Iw(r);t.validator!==null?r.setValidators(dw(e,t.validator)):typeof e=="function"&&r.setValidators([e]);let i=Dw(r);t.asyncValidator!==null?r.setAsyncValidators(dw(i,t.asyncValidator)):typeof i=="function"&&r.setAsyncValidators([i]);let n=()=>r.updateValueAndValidity();oh(t._rawValidators,n),oh(t._rawAsyncValidators,n)}function ah(r,t){let e=!1;if(r!==null){if(t.validator!==null){let n=Iw(r);if(Array.isArray(n)&&n.length>0){let s=n.filter(o=>o!==t.validator);s.length!==n.length&&(e=!0,r.setValidators(s))}}if(t.asyncValidator!==null){let n=Dw(r);if(Array.isArray(n)&&n.length>0){let s=n.filter(o=>o!==t.asyncValidator);s.length!==n.length&&(e=!0,r.setAsyncValidators(s))}}}let i=()=>{};return oh(t._rawValidators,i),oh(t._rawAsyncValidators,i),e}function e2(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&Ow(r,t)})}function t2(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&Ow(r,t),r.updateOn!=="submit"&&r.markAsTouched()})}function Ow(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function i2(r,t){let e=(i,n)=>{t.valueAccessor.writeValue(i),n&&t.viewToModelUpdate(i)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}function Fw(r,t){r==null,Rf(r,t)}function n2(r,t){return ah(r,t)}function r2(r,t){if(!r.hasOwnProperty("model"))return!1;let e=r.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function s2(r){return Object.getPrototypeOf(r.constructor)===bw}function Lw(r,t){r._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function o2(r,t){if(!t)return null;Array.isArray(t);let e,i,n;return t.forEach(s=>{s.constructor===Xt?e=s:s2(s)?i=s:n=s}),n||i||e||null}function a2(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}var l2={provide:Ks,useExisting:Mi(()=>al)},rl=Promise.resolve(),al=(()=>{class r extends Ks{callSetDisabledState;get submitted(){return Kn(this.submittedReactive)}_submitted=Tr(()=>this.submittedReactive());submittedReactive=_n(!1);_directives=new Set;form;ngSubmit=new fe;options;constructor(e,i,n){super(),this.callSetDisabledState=n,this.form=new rh({},If(e),Df(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){rl.then(()=>{let i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),sh(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){rl.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){rl.then(()=>{let i=this._findContainer(e.path),n=new rh({});Fw(n,e),i.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){rl.then(()=>{let i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){rl.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submittedReactive.set(!0),Lw(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static \u0275fac=function(i){return new(i||r)(we(ws,10),we(Tf,10),we(ch,8))};static \u0275dir=_e({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,n){i&1&&U("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[et([l2]),xt]})}return r})();function mw(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}function fw(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var Nw=class extends nh{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,i){super(Pw(e),Rw(i,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lh(e)&&(e.nonNullable||e.initialValueIsDefault)&&(fw(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){mw(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){mw(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){fw(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var c2=r=>r instanceof Nw;var d2={provide:Br,useExisting:Mi(()=>Kt)},gw=Promise.resolve(),Kt=(()=>{class r extends Br{_changeDetectorRef;callSetDisabledState;control=new Nw;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new fe;constructor(e,i,n,s,o,l){super(),this._changeDetectorRef=o,this.callSetDisabledState=l,this._parent=e,this._setValidators(i),this._setAsyncValidators(n),this.valueAccessor=o2(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),r2(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){sh(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){gw.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let i=e.isDisabled.currentValue,n=i!==0&&ge(i);gw.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?QO(e,this._parent):[e]}static \u0275fac=function(i){return new(i||r)(we(Ks,9),we(ws,10),we(Tf,10),we(Vr,10),we($e,8),we(ch,8))};static \u0275dir=_e({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[et([d2]),xt,Et]})}return r})();var h2={provide:Vr,useExisting:Mi(()=>Zs),multi:!0},Zs=(()=>{class r extends bw{writeValue(e){let i=e??"";this.setProperty("value",i)}registerOnChange(e){this.onChange=i=>{e(i==""?null:parseFloat(i))}}static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275dir=_e({type:r,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,n){i&1&&U("input",function(o){return n.onChange(o.target.value)})("blur",function(){return n.onTouched()})},standalone:!1,features:[et([h2]),xt]})}return r})();var u2={provide:Ks,useExisting:Mi(()=>ll)},ll=(()=>{class r extends Ks{callSetDisabledState;get submitted(){return Kn(this._submittedReactive)}set submitted(e){this._submittedReactive.set(e)}_submitted=Tr(()=>this._submittedReactive());_submittedReactive=_n(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new fe;constructor(e,i,n){super(),this.callSetDisabledState=n,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ah(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let i=this.form.get(e.path);return sh(i,e,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){pw(e.control||null,e,!1),a2(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this._submittedReactive.set(!0),Lw(this.form,this.directives),this.ngSubmit.emit(e),this.form._events.next(new Mf(this.control)),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this._submittedReactive.set(!1),this.form._events.next(new Af(this.form))}_updateDomValue(){this.directives.forEach(e=>{let i=e.control,n=this.form.get(e.path);i!==n&&(pw(i||null,e),c2(n)&&(sh(n,e,this.callSetDisabledState),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let i=this.form.get(e.path);Fw(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let i=this.form.get(e.path);i&&n2(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Rf(this.form,this),this._oldForm&&ah(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(i){return new(i||r)(we(ws,10),we(Tf,10),we(ch,8))};static \u0275dir=_e({type:r,selectors:[["","formGroup",""]],hostBindings:function(i,n){i&1&&U("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[et([u2]),xt,Et]})}return r})();function Bw(r){return typeof r=="number"?r:parseFloat(r)}var Of=(()=>{class r{_validator=Jd;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Jd,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,features:[Et]})}return r})(),p2={provide:ws,useExisting:Mi(()=>cl),multi:!0},cl=(()=>{class r extends Of{max;inputName="max";normalizeInput=e=>Bw(e);createValidator=e=>xw(e);static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275dir=_e({type:r,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(i,n){i&2&&ye("max",n._enabled?n.max:null)},inputs:{max:"max"},standalone:!1,features:[et([p2]),xt]})}return r})(),m2={provide:ws,useExisting:Mi(()=>dl),multi:!0},dl=(()=>{class r extends Of{min;inputName="min";normalizeInput=e=>Bw(e);createValidator=e=>yw(e);static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275dir=_e({type:r,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(i,n){i&2&&ye("min",n._enabled?n.min:null)},inputs:{min:"min"},standalone:!1,features:[et([m2]),xt]})}return r})(),f2={provide:ws,useExisting:Mi(()=>Ff),multi:!0};var Ff=(()=>{class r extends Of{required;inputName="required";normalizeInput=ge;createValidator=e=>ww;enabled(e){return e}static \u0275fac=(()=>{let e;return function(n){return(e||(e=yi(r)))(n||r)}})();static \u0275dir=_e({type:r,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,n){i&2&&ye("required",n._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[et([f2]),xt]})}return r})();var g2=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({})}return r})();var jt=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:ch,useValue:e.callSetDisabledState??Pf}]}}static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[g2]})}return r})();function tC(r){let t=r.cloneNode(!0),e=t.querySelectorAll("[id]"),i=r.nodeName.toLowerCase();t.removeAttribute("id");for(let n=0;n<e.length;n++)e[n].removeAttribute("id");return i==="canvas"?Hw(r,t):(i==="input"||i==="select"||i==="textarea")&&zw(r,t),Vw("canvas",r,t,Hw),Vw("input, textarea, select",r,t,zw),t}function Vw(r,t,e,i){let n=t.querySelectorAll(r);if(n.length){let s=e.querySelectorAll(r);for(let o=0;o<n.length;o++)i(n[o],s[o])}}var _2=0;function zw(r,t){t.type!=="file"&&(t.value=r.value),t.type==="radio"&&t.name&&(t.name=`mat-clone-${t.name}-${_2++}`)}function Hw(r,t){let e=t.getContext("2d");if(e)try{e.drawImage(r,0,0)}catch{}}function Uf(r){let t=r.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function Nf(r,t,e){let{top:i,bottom:n,left:s,right:o}=r;return e>=i&&e<=n&&t>=s&&t<=o}function ul(r,t,e){r.top+=t,r.bottom=r.top+r.height,r.left+=e,r.right=r.left+r.width}function Ww(r,t,e,i){let{top:n,right:s,bottom:o,left:l,width:d,height:h}=r,u=d*t,m=h*t;return i>n-m&&i<o+m&&e>l-u&&e<s+u}var uh=class{_document;positions=new Map;constructor(t){this._document=t}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:Uf(e)})})}handleScroll(t){let e=ki(t),i=this.positions.get(e);if(!i)return null;let n=i.scrollPosition,s,o;if(e===this._document){let h=this.getViewportScrollPosition();s=h.top,o=h.left}else s=e.scrollTop,o=e.scrollLeft;let l=n.top-s,d=n.left-o;return this.positions.forEach((h,u)=>{h.clientRect&&e!==u&&e.contains(u)&&ul(h.clientRect,l,d)}),n.top=s,n.left=o,{top:l,left:d}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}};function iC(r,t){let e=r.rootNodes;if(e.length===1&&e[0].nodeType===t.ELEMENT_NODE)return e[0];let i=t.createElement("div");return e.forEach(n=>i.appendChild(n)),i}function jf(r,t,e){for(let i in t)if(t.hasOwnProperty(i)){let n=t[i];n?r.setProperty(i,n,e?.has(i)?"important":""):r.removeProperty(i)}return r}function qo(r,t){let e=t?"":"none";jf(r.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Uw(r,t,e){jf(r.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function ph(r,t){return t&&t!="none"?r+" "+t:r}function jw(r,t){r.style.width=`${t.width}px`,r.style.height=`${t.height}px`,r.style.transform=mh(t.left,t.top)}function mh(r,t){return`translate3d(${Math.round(r)}px, ${Math.round(t)}px, 0)`}function Gw(r){let t=r.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(r)*t}function b2(r){let t=getComputedStyle(r),e=Lf(t,"transition-property"),i=e.find(l=>l==="transform"||l==="all");if(!i)return 0;let n=e.indexOf(i),s=Lf(t,"transition-duration"),o=Lf(t,"transition-delay");return Gw(s[n])+Gw(o[n])}function Lf(r,t){return r.getPropertyValue(t).split(",").map(i=>i.trim())}var v2=new Set(["position"]),Bf=class{_document;_rootElement;_direction;_initialDomRect;_previewTemplate;_previewClass;_pickupPositionOnPage;_initialTransform;_zIndex;_renderer;_previewEmbeddedView;_preview;get element(){return this._preview}constructor(t,e,i,n,s,o,l,d,h,u){this._document=t,this._rootElement=e,this._direction=i,this._initialDomRect=n,this._previewTemplate=s,this._previewClass=o,this._pickupPositionOnPage=l,this._initialTransform=d,this._zIndex=h,this._renderer=u}attach(t){this._preview=this._createPreview(),t.appendChild(this._preview),$w(this._preview)&&this._preview.showPopover()}destroy(){this._preview.remove(),this._previewEmbeddedView?.destroy(),this._preview=this._previewEmbeddedView=null}setTransform(t){this._preview.style.transform=t}getBoundingClientRect(){return this._preview.getBoundingClientRect()}addClass(t){this._preview.classList.add(t)}getTransitionDuration(){return b2(this._preview)}addEventListener(t,e){return this._renderer.listen(this._preview,t,e)}_createPreview(){let t=this._previewTemplate,e=this._previewClass,i=t?t.template:null,n;if(i&&t){let s=t.matchSize?this._initialDomRect:null,o=t.viewContainer.createEmbeddedView(i,t.context);o.detectChanges(),n=iC(o,this._document),this._previewEmbeddedView=o,t.matchSize?jw(n,s):n.style.transform=mh(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else n=tC(this._rootElement),jw(n,this._initialDomRect),this._initialTransform&&(n.style.transform=this._initialTransform);return jf(n.style,{"pointer-events":"none",margin:$w(n)?"0 auto 0 0":"0",position:"fixed",top:"0",left:"0","z-index":this._zIndex+""},v2),qo(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("popover","manual"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(s=>n.classList.add(s)):n.classList.add(e)),n}};function $w(r){return"showPopover"in r}var qw=Hi({passive:!0}),dh=Hi({passive:!1}),Yw=Hi({passive:!1,capture:!0}),y2=800,Xw=new Set(["position"]),Vf=class{_config;_document;_ngZone;_viewportRuler;_dragDropRegistry;_renderer;_preview;_previewContainer;_placeholderRef;_placeholder;_pickupPositionInElement;_pickupPositionOnPage;_anchor;_passiveTransform={x:0,y:0};_activeTransform={x:0,y:0};_initialTransform;_hasStartedDragging=_n(!1);_hasMoved;_initialContainer;_initialIndex;_parentPositions;_moveEvents=new ne;_pointerDirectionDelta;_pointerPositionAtLastDirectionChange;_lastKnownPointerPosition;_rootElement;_ownerSVGElement;_rootElementTapHighlight;_pointerMoveSubscription=ei.EMPTY;_pointerUpSubscription=ei.EMPTY;_scrollSubscription=ei.EMPTY;_resizeSubscription=ei.EMPTY;_lastTouchEventTime;_dragStartTime;_boundaryElement=null;_nativeInteractionsEnabled=!0;_initialDomRect;_previewRect;_boundaryRect;_previewTemplate;_placeholderTemplate;_handles=[];_disabledHandles=new Set;_dropContainer;_direction="ltr";_parentDragRef;_cachedShadowRoot;lockAxis;dragStartDelay=0;previewClass;scale=1;get disabled(){return this._disabled||!!(this._dropContainer&&this._dropContainer.disabled)}set disabled(t){t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(e=>qo(e,t)))}_disabled=!1;beforeStarted=new ne;started=new ne;released=new ne;ended=new ne;entered=new ne;exited=new ne;dropped=new ne;moved=this._moveEvents;data;constrainPosition;constructor(t,e,i,n,s,o,l){this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=s,this._dragDropRegistry=o,this._renderer=l,this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new uh(i),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(i=>li(i)),this._handles.forEach(i=>qo(i,this.disabled)),this._toggleNativeDragInteractions();let e=new Set;return this._disabledHandles.forEach(i=>{this._handles.indexOf(i)>-1&&e.add(i)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){let e=li(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,dh),e.addEventListener("touchstart",this._pointerDown,qw),e.addEventListener("dragstart",this._nativeDragStart,dh)}),this._initialTransform=void 0,this._rootElement=e),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?li(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeListeners(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging()&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),qo(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),qo(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){let t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){let t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeListeners(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe(),this._getShadowRoot()?.removeEventListener("selectstart",Zw,Yw)}_destroyPreview(){this._preview?.destroy(),this._preview=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)};_pointerMove=t=>{let e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging()){let n=Math.abs(e.x-this._pickupPositionOnPage.x),s=Math.abs(e.y-this._pickupPositionOnPage.y);if(n+s>=this._config.dragStartThreshold){let l=Date.now()>=this._dragStartTime+this._getDragStartDelay(t),d=this._dropContainer;if(!l){this._endDragSequence(t);return}(!d||!d.isDragging()&&!d.isReceiving())&&(t.cancelable&&t.preventDefault(),this._hasStartedDragging.set(!0),this._ngZone.run(()=>this._startDragSequence(t)))}return}t.cancelable&&t.preventDefault();let i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._lastKnownPointerPosition=e,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i,e);else{let n=this.constrainPosition?this._initialDomRect:this._pickupPositionOnPage,s=this._activeTransform;s.x=i.x-n.x+this._passiveTransform.x,s.y=i.y-n.y+this._passiveTransform.y,this._applyRootElementTransform(s.x,s.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})};_pointerUp=t=>{this._endDragSequence(t)};_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeListeners(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),!!this._hasStartedDragging()))if(this.released.next({source:this,event:t}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;let e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e,event:t})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){hl(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();let e=this._getShadowRoot(),i=this._dropContainer;if(e&&this._ngZone.runOutsideAngular(()=>{e.addEventListener("selectstart",Zw,Yw)}),i){let n=this._rootElement,s=n.parentNode,o=this._placeholder=this._createPlaceholderElement(),l=this._anchor=this._anchor||this._document.createComment("");s.insertBefore(l,n),this._initialTransform=n.style.transform||"",this._preview=new Bf(this._document,this._rootElement,this._direction,this._initialDomRect,this._previewTemplate||null,this.previewClass||null,this._pickupPositionOnPage,this._initialTransform,this._config.zIndex||1e3,this._renderer),this._preview.attach(this._getPreviewInsertionPoint(s,e)),Uw(n,!1,Xw),this._document.body.appendChild(s.replaceChild(o,n)),this.started.next({source:this,event:t}),i.start(),this._initialContainer=i,this._initialIndex=i.getItemIndex(this)}else this.started.next({source:this,event:t}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(i?i.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();let i=this.isDragging(),n=hl(e),s=!n&&e.button!==0,o=this._rootElement,l=ki(e),d=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+y2>Date.now(),h=n?qa(e):$a(e);if(l&&l.draggable&&e.type==="mousedown"&&e.preventDefault(),i||s||d||h)return;if(this._handles.length){let f=o.style;this._rootElementTapHighlight=f.webkitTapHighlightColor||"",f.webkitTapHighlightColor="transparent"}this._hasMoved=!1,this._hasStartedDragging.set(this._hasMoved),this._removeListeners(),this._initialDomRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(f=>this._updateOnScroll(f)),this._boundaryElement&&(this._boundaryRect=Uf(this._boundaryElement));let u=this._previewTemplate;this._pickupPositionInElement=u&&u.template&&!u.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialDomRect,t,e);let m=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:m.x,y:m.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Uw(this._rootElement,!0,Xw),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialDomRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{let e=this._dropContainer,i=e.getItemIndex(this),n=this._getPointerPositionOnPage(t),s=this._getDragDistance(n),o=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:s,dropPoint:n,event:t}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:n,event:t}),e.drop(this,i,this._initialIndex,this._initialContainer,o,s,n,t),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:i,y:n}){let s=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,t,e,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(i,n),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(t,e):this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();let t=this._placeholder.getBoundingClientRect();this._preview.addClass("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);let e=this._preview.getTransitionDuration();return e===0?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(i=>{let n=l=>{(!l||this._preview&&ki(l)===this._preview.element&&l.propertyName==="transform")&&(o(),i(),clearTimeout(s))},s=setTimeout(n,e*1.5),o=this._preview.addEventListener("transitionend",n)}))}_createPlaceholderElement(){let t=this._placeholderTemplate,e=t?t.template:null,i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=iC(this._placeholderRef,this._document)):i=tC(this._rootElement),i.style.pointerEvents="none",i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e,i){let n=e===this._rootElement?null:e,s=n?n.getBoundingClientRect():t,o=hl(i)?i.targetTouches[0]:i,l=this._getViewportScrollPosition(),d=o.pageX-s.left-l.left,h=o.pageY-s.top-l.top;return{x:s.left-t.left+d,y:s.top-t.top+h}}_getPointerPositionOnPage(t){let e=this._getViewportScrollPosition(),i=hl(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,n=i.pageX-e.left,s=i.pageY-e.top;if(this._ownerSVGElement){let o=this._ownerSVGElement.getScreenCTM();if(o){let l=this._ownerSVGElement.createSVGPoint();return l.x=n,l.y=s,l.matrixTransform(o.inverse())}}return{x:n,y:s}}_getConstrainedPointerPosition(t){let e=this._dropContainer?this._dropContainer.lockAxis:null,{x:i,y:n}=this.constrainPosition?this.constrainPosition(t,this,this._initialDomRect,this._pickupPositionInElement):t;if(this.lockAxis==="x"||e==="x"?n=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):(this.lockAxis==="y"||e==="y")&&(i=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){let{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,l=this._boundaryRect,{width:d,height:h}=this._getPreviewRect(),u=l.top+o,m=l.bottom-(h-o),f=l.left+s,_=l.right-(d-s);i=Kw(i,f,_),n=Kw(n,u,m)}return{x:i,y:n}}_updatePointerDirectionDelta(t){let{x:e,y:i}=t,n=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(e-s.x),l=Math.abs(i-s.y);return o>this._config.pointerDirectionChangeThreshold&&(n.x=e>s.x?1:-1,s.x=e),l>this._config.pointerDirectionChangeThreshold&&(n.y=i>s.y?1:-1,s.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;let t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,qo(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,dh),t.removeEventListener("touchstart",this._pointerDown,qw),t.removeEventListener("dragstart",this._nativeDragStart,dh)}_applyRootElementTransform(t,e){let i=1/this.scale,n=mh(t*i,e*i),s=this._rootElement.style;this._initialTransform==null&&(this._initialTransform=s.transform&&s.transform!="none"?s.transform:""),s.transform=ph(n,this._initialTransform)}_applyPreviewTransform(t,e){let i=this._previewTemplate?.template?void 0:this._initialTransform,n=mh(t,e);this._preview.setTransform(ph(n,i))}_getDragDistance(t){let e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(t===0&&e===0||this.isDragging()||!this._boundaryElement)return;let i=this._rootElement.getBoundingClientRect(),n=this._boundaryElement.getBoundingClientRect();if(n.width===0&&n.height===0||i.width===0&&i.height===0)return;let s=n.left-i.left,o=i.right-n.right,l=n.top-i.top,d=i.bottom-n.bottom;n.width>i.width?(s>0&&(t+=s),o>0&&(t-=o)):t=0,n.height>i.height?(l>0&&(e+=l),d>0&&(e-=d)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){let e=this.dragStartDelay;return typeof e=="number"?e:hl(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){let e=this._parentPositions.handleScroll(t);if(e){let i=ki(t);this._boundaryRect&&i!==this._boundaryElement&&i.contains(this._boundaryElement)&&ul(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return this._cachedShadowRoot===void 0&&(this._cachedShadowRoot=Oo(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){let i=this._previewContainer||"global";if(i==="parent")return t;if(i==="global"){let n=this._document;return e||n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement||n.body}return li(i)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialDomRect),this._previewRect}_nativeDragStart=t=>{if(this._handles.length){let e=this._getTargetHandle(t);e&&!this._disabledHandles.has(e)&&!this.disabled&&t.preventDefault()}else this.disabled||t.preventDefault()};_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}};function Kw(r,t,e){return Math.max(t,Math.min(e,r))}function hl(r){return r.type[0]==="t"}function Zw(r){r.preventDefault()}function gh(r,t,e){let i=Qw(t,r.length-1),n=Qw(e,r.length-1);if(i===n)return;let s=r[i],o=n<i?-1:1;for(let l=i;l!==n;l+=o)r[l]=r[l+o];r[n]=s}function Qw(r,t){return Math.max(0,Math.min(t,r))}var fh=class{_dragDropRegistry;_element;_sortPredicate;_itemPositions=[];_activeDraggables;orientation="vertical";direction;constructor(t){this._dragDropRegistry=t}_previousSwap={drag:null,delta:0,overlaps:!1};start(t){this.withItems(t)}sort(t,e,i,n){let s=this._itemPositions,o=this._getItemIndexFromPointerPosition(t,e,i,n);if(o===-1&&s.length>0)return null;let l=this.orientation==="horizontal",d=s.findIndex(x=>x.drag===t),h=s[o],u=s[d].clientRect,m=h.clientRect,f=d>o?1:-1,_=this._getItemOffsetPx(u,m,f),y=this._getSiblingOffsetPx(d,s,f),v=s.slice();return gh(s,d,o),s.forEach((x,S)=>{if(v[S]===x)return;let I=x.drag===t,P=I?_:y,B=I?t.getPlaceholderElement():x.drag.getRootElement();x.offset+=P;let N=Math.round(x.offset*(1/x.drag.scale));l?(B.style.transform=ph(`translate3d(${N}px, 0, 0)`,x.initialTransform),ul(x.clientRect,0,P)):(B.style.transform=ph(`translate3d(0, ${N}px, 0)`,x.initialTransform),ul(x.clientRect,P,0))}),this._previousSwap.overlaps=Nf(m,e,i),this._previousSwap.drag=h.drag,this._previousSwap.delta=l?n.x:n.y,{previousIndex:d,currentIndex:o}}enter(t,e,i,n){let s=n==null||n<0?this._getItemIndexFromPointerPosition(t,e,i):n,o=this._activeDraggables,l=o.indexOf(t),d=t.getPlaceholderElement(),h=o[s];if(h===t&&(h=o[s+1]),!h&&(s==null||s===-1||s<o.length-1)&&this._shouldEnterAsFirstChild(e,i)&&(h=o[0]),l>-1&&o.splice(l,1),h&&!this._dragDropRegistry.isDragging(h)){let u=h.getRootElement();u.parentElement.insertBefore(d,u),o.splice(s,0,t)}else this._element.appendChild(d),o.push(t);d.style.transform="",this._cacheItemPositions()}withItems(t){this._activeDraggables=t.slice(),this._cacheItemPositions()}withSortPredicate(t){this._sortPredicate=t}reset(){this._activeDraggables?.forEach(t=>{let e=t.getRootElement();if(e){let i=this._itemPositions.find(n=>n.drag===t)?.initialTransform;e.style.transform=i||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(t){return(this.orientation==="horizontal"&&this.direction==="rtl"?this._itemPositions.slice().reverse():this._itemPositions).findIndex(i=>i.drag===t)}updateOnScroll(t,e){this._itemPositions.forEach(({clientRect:i})=>{ul(i,t,e)}),this._itemPositions.forEach(({drag:i})=>{this._dragDropRegistry.isDragging(i)&&i._sortFromLastPointerPosition()})}withElementContainer(t){this._element=t}_cacheItemPositions(){let t=this.orientation==="horizontal";this._itemPositions=this._activeDraggables.map(e=>{let i=e.getVisibleElement();return{drag:e,offset:0,initialTransform:i.style.transform||"",clientRect:Uf(i)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_getItemOffsetPx(t,e,i){let n=this.orientation==="horizontal",s=n?e.left-t.left:e.top-t.top;return i===-1&&(s+=n?e.width-t.width:e.height-t.height),s}_getSiblingOffsetPx(t,e,i){let n=this.orientation==="horizontal",s=e[t].clientRect,o=e[t+i*-1],l=s[n?"width":"height"]*i;if(o){let d=n?"left":"top",h=n?"right":"bottom";i===-1?l-=o.clientRect[d]-s[h]:l+=s[d]-o.clientRect[h]}return l}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;let i=this._itemPositions,n=this.orientation==="horizontal";if(i[0].drag!==this._activeDraggables[0]){let o=i[i.length-1].clientRect;return n?t>=o.right:e>=o.bottom}else{let o=i[0].clientRect;return n?t<=o.left:e<=o.top}}_getItemIndexFromPointerPosition(t,e,i,n){let s=this.orientation==="horizontal",o=this._itemPositions.findIndex(({drag:l,clientRect:d})=>{if(l===t)return!1;if(n){let h=s?n.x:n.y;if(l===this._previousSwap.drag&&this._previousSwap.overlaps&&h===this._previousSwap.delta)return!1}return s?e>=Math.floor(d.left)&&e<Math.floor(d.right):i>=Math.floor(d.top)&&i<Math.floor(d.bottom)});return o===-1||!this._sortPredicate(o,t)?-1:o}},zf=class{_document;_dragDropRegistry;_element;_sortPredicate;_rootNode;_activeItems;_previousSwap={drag:null,deltaX:0,deltaY:0,overlaps:!1};_relatedNodes=[];constructor(t,e){this._document=t,this._dragDropRegistry=e}start(t){let e=this._element.childNodes;this._relatedNodes=[];for(let i=0;i<e.length;i++){let n=e[i];this._relatedNodes.push([n,n.nextSibling])}this.withItems(t)}sort(t,e,i,n){let s=this._getItemIndexFromPointerPosition(t,e,i),o=this._previousSwap;if(s===-1||this._activeItems[s]===t)return null;let l=this._activeItems[s];if(o.drag===l&&o.overlaps&&o.deltaX===n.x&&o.deltaY===n.y)return null;let d=this.getItemIndex(t),h=t.getPlaceholderElement(),u=l.getRootElement();s>d?u.after(h):u.before(h),gh(this._activeItems,d,s);let m=this._getRootNode().elementFromPoint(e,i);return o.deltaX=n.x,o.deltaY=n.y,o.drag=l,o.overlaps=u===m||u.contains(m),{previousIndex:d,currentIndex:s}}enter(t,e,i,n){let s=n==null||n<0?this._getItemIndexFromPointerPosition(t,e,i):n;s===-1&&(s=this._getClosestItemIndexToPointer(t,e,i));let o=this._activeItems[s],l=this._activeItems.indexOf(t);l>-1&&this._activeItems.splice(l,1),o&&!this._dragDropRegistry.isDragging(o)?(this._activeItems.splice(s,0,t),o.getRootElement().before(t.getPlaceholderElement())):(this._activeItems.push(t),this._element.appendChild(t.getPlaceholderElement()))}withItems(t){this._activeItems=t.slice()}withSortPredicate(t){this._sortPredicate=t}reset(){let t=this._element,e=this._previousSwap;for(let i=this._relatedNodes.length-1;i>-1;i--){let[n,s]=this._relatedNodes[i];n.parentNode===t&&n.nextSibling!==s&&(s===null?t.appendChild(n):s.parentNode===t&&t.insertBefore(n,s))}this._relatedNodes=[],this._activeItems=[],e.drag=null,e.deltaX=e.deltaY=0,e.overlaps=!1}getActiveItemsSnapshot(){return this._activeItems}getItemIndex(t){return this._activeItems.indexOf(t)}updateOnScroll(){this._activeItems.forEach(t=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}withElementContainer(t){t!==this._element&&(this._element=t,this._rootNode=void 0)}_getItemIndexFromPointerPosition(t,e,i){let n=this._getRootNode().elementFromPoint(Math.floor(e),Math.floor(i)),s=n?this._activeItems.findIndex(o=>{let l=o.getRootElement();return n===l||l.contains(n)}):-1;return s===-1||!this._sortPredicate(s,t)?-1:s}_getRootNode(){return this._rootNode||(this._rootNode=Oo(this._element)||this._document),this._rootNode}_getClosestItemIndexToPointer(t,e,i){if(this._activeItems.length===0)return-1;if(this._activeItems.length===1)return 0;let n=1/0,s=-1;for(let o=0;o<this._activeItems.length;o++){let l=this._activeItems[o];if(l!==t){let{x:d,y:h}=l.getRootElement().getBoundingClientRect(),u=Math.hypot(e-d,i-h);u<n&&(n=u,s=o)}}return s}},Jw=.05,nC=.05,Vn=function(r){return r[r.NONE=0]="NONE",r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r}(Vn||{}),Gi=function(r){return r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r}(Gi||{}),Hf=class{_dragDropRegistry;_ngZone;_viewportRuler;element;disabled=!1;sortingDisabled=!1;lockAxis;autoScrollDisabled=!1;autoScrollStep=2;enterPredicate=()=>!0;sortPredicate=()=>!0;beforeStarted=new ne;entered=new ne;exited=new ne;dropped=new ne;sorted=new ne;receivingStarted=new ne;receivingStopped=new ne;data;_container;_isDragging=!1;_parentPositions;_sortStrategy;_domRect;_draggables=[];_siblings=[];_activeSiblings=new Set;_viewportScrollSubscription=ei.EMPTY;_verticalScrollDirection=Vn.NONE;_horizontalScrollDirection=Gi.NONE;_scrollNode;_stopScrollTimers=new ne;_cachedShadowRoot=null;_document;_scrollableElements=[];_initialScrollSnap;_direction="ltr";constructor(t,e,i,n,s){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=s;let o=this.element=li(t);this._document=i,this.withOrientation("vertical").withElementContainer(o),e.registerDropContainer(this),this._parentPositions=new uh(i)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,i,n){this._draggingStarted(),n==null&&this.sortingDisabled&&(n=this._draggables.indexOf(t)),this._sortStrategy.enter(t,e,i,n),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,n,s,o,l,d={}){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:i,container:this,previousContainer:n,isPointerOverContainer:s,distance:o,dropPoint:l,event:d})}withItems(t){let e=this._draggables;return this._draggables=t,t.forEach(i=>i._withDropContainer(this)),this.isDragging()&&(e.filter(n=>n.isDragging()).every(n=>t.indexOf(n)===-1)?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(t){return this._direction=t,this._sortStrategy instanceof fh&&(this._sortStrategy.direction=t),this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){if(t==="mixed")this._sortStrategy=new zf(this._document,this._dragDropRegistry);else{let e=new fh(this._dragDropRegistry);e.direction=this._direction,e.orientation=t,this._sortStrategy=e}return this._sortStrategy.withElementContainer(this._container),this._sortStrategy.withSortPredicate((e,i)=>this.sortPredicate(e,i,this)),this}withScrollableParents(t){let e=this._container;return this._scrollableElements=t.indexOf(e)===-1?[e,...t]:t.slice(),this}withElementContainer(t){if(t===this._container)return this;let e=li(this.element),i=this._scrollableElements.indexOf(this._container),n=this._scrollableElements.indexOf(t);return i>-1&&this._scrollableElements.splice(i,1),n>-1&&this._scrollableElements.splice(n,1),this._sortStrategy&&this._sortStrategy.withElementContainer(t),this._cachedShadowRoot=null,this._scrollableElements.unshift(t),this._container=t,this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?this._sortStrategy.getItemIndex(t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,n){if(this.sortingDisabled||!this._domRect||!Ww(this._domRect,Jw,e,i))return;let s=this._sortStrategy.sort(t,e,i,n);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:t})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,n=Vn.NONE,s=Gi.NONE;if(this._parentPositions.positions.forEach((o,l)=>{l===this._document||!o.clientRect||i||Ww(o.clientRect,Jw,t,e)&&([n,s]=x2(l,o.clientRect,this._direction,t,e),(n||s)&&(i=l))}),!n&&!s){let{width:o,height:l}=this._viewportRuler.getViewportSize(),d={width:o,height:l,top:0,right:o,bottom:l,left:0};n=rC(d,e),s=sC(d,t),i=window}i&&(n!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||i!==this._scrollNode)&&(this._verticalScrollDirection=n,this._horizontalScrollDirection=s,this._scrollNode=i,(n||s)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){let t=this._container.style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){this._parentPositions.cache(this._scrollableElements),this._domRect=this._parentPositions.positions.get(this._container).clientRect}_reset(){this._isDragging=!1;let t=this._container.style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(e=>e._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_startScrollInterval=()=>{this._stopScrolling(),W0(0,$c).pipe(ot(this._stopScrollTimers)).subscribe(()=>{let t=this._scrollNode,e=this.autoScrollStep;this._verticalScrollDirection===Vn.UP?t.scrollBy(0,-e):this._verticalScrollDirection===Vn.DOWN&&t.scrollBy(0,e),this._horizontalScrollDirection===Gi.LEFT?t.scrollBy(-e,0):this._horizontalScrollDirection===Gi.RIGHT&&t.scrollBy(e,0)})};_isOverContainer(t,e){return this._domRect!=null&&Nf(this._domRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(n=>n._canReceive(t,e,i))}_canReceive(t,e,i){if(!this._domRect||!Nf(this._domRect,e,i)||!this.enterPredicate(t,this))return!1;let n=this._getShadowRoot().elementFromPoint(e,i);return n?n===this._container||this._container.contains(n):!1}_startReceiving(t,e){let i=this._activeSiblings;!i.has(t)&&e.every(n=>this.enterPredicate(n,this)||this._draggables.indexOf(n)>-1)&&(i.add(t),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:t,receiver:this,items:e}))}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:t,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){let e=this._parentPositions.handleScroll(t);e&&this._sortStrategy.updateOnScroll(e.top,e.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){let t=Oo(this._container);this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){let t=this._sortStrategy.getActiveItemsSnapshot().filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}};function rC(r,t){let{top:e,bottom:i,height:n}=r,s=n*nC;return t>=e-s&&t<=e+s?Vn.UP:t>=i-s&&t<=i+s?Vn.DOWN:Vn.NONE}function sC(r,t){let{left:e,right:i,width:n}=r,s=n*nC;return t>=e-s&&t<=e+s?Gi.LEFT:t>=i-s&&t<=i+s?Gi.RIGHT:Gi.NONE}function x2(r,t,e,i,n){let s=rC(t,n),o=sC(t,i),l=Vn.NONE,d=Gi.NONE;if(s){let h=r.scrollTop;s===Vn.UP?h>0&&(l=Vn.UP):r.scrollHeight-h>r.clientHeight&&(l=Vn.DOWN)}if(o){let h=r.scrollLeft;e==="rtl"?o===Gi.RIGHT?h<0&&(d=Gi.RIGHT):r.scrollWidth+h>r.clientWidth&&(d=Gi.LEFT):o===Gi.LEFT?h>0&&(d=Gi.LEFT):r.scrollWidth-h>r.clientWidth&&(d=Gi.RIGHT)}return[l,d]}var hh=Hi({passive:!1,capture:!0}),w2=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-drag-resets-container",""],decls:0,vars:0,template:function(i,n){},styles:["@layer cdk-resets{.cdk-drag-preview{background:none;border:none;padding:0;color:inherit;inset:auto}}.cdk-drag-placeholder *,.cdk-drag-preview *{pointer-events:none !important}"],encapsulation:2,changeDetection:0})}return r})(),Gf=(()=>{class r{_ngZone=C(ke);_document=C(Ve);_styleLoader=C(ii);_dropInstances=new Set;_dragInstances=new Set;_activeDragInstances=_n([]);_globalListeners=new Map;_draggingPredicate=e=>e.isDragging();_domNodesToDirectives=null;pointerMove=new ne;pointerUp=new ne;scroll=new ne;constructor(){}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),this._dragInstances.size===1&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,hh)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),this._dragInstances.size===0&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,hh)}startDragging(e,i){if(!(this._activeDragInstances().indexOf(e)>-1)&&(this._styleLoader.load(w2),this._activeDragInstances.update(n=>[...n,e]),this._activeDragInstances().length===1)){let n=i.type.startsWith("touch"),s={handler:o=>this.pointerUp.next(o),options:!0};n?(this._globalListeners.set("touchend",s),this._globalListeners.set("touchcancel",s)):this._globalListeners.set("mouseup",s),this._globalListeners.set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:hh}),n||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:hh}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,l)=>{this._document.addEventListener(l,o.handler,o.options)})})}}stopDragging(e){this._activeDragInstances.update(i=>{let n=i.indexOf(e);return n>-1?(i.splice(n,1),[...i]):i}),this._activeDragInstances().length===0&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances().indexOf(e)>-1}scrolled(e){let i=[this.scroll];return e&&e!==this._document&&i.push(new Rn(n=>this._ngZone.runOutsideAngular(()=>{let o=l=>{this._activeDragInstances().length&&n.next(l)};return e.addEventListener("scroll",o,!0),()=>{e.removeEventListener("scroll",o,!0)}}))),tn(...i)}registerDirectiveNode(e,i){this._domNodesToDirectives??=new WeakMap,this._domNodesToDirectives.set(e,i)}removeDirectiveNode(e){this._domNodesToDirectives?.delete(e)}getDragDirectiveForNode(e){return this._domNodesToDirectives?.get(e)||null}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._domNodesToDirectives=null,this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_preventDefaultWhileDragging=e=>{this._activeDragInstances().length>0&&e.preventDefault()};_persistentTouchmoveListener=e=>{this._activeDragInstances().length>0&&(this._activeDragInstances().some(this._draggingPredicate)&&e.preventDefault(),this.pointerMove.next(e))};_clearGlobalListeners(){this._globalListeners.forEach((e,i)=>{this._document.removeEventListener(i,e.handler,e.options)}),this._globalListeners.clear()}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),C2={dragStartThreshold:5,pointerDirectionChangeThreshold:5},$f=(()=>{class r{_document=C(Ve);_ngZone=C(ke);_viewportRuler=C(Fr);_dragDropRegistry=C(Gf);_renderer=C(On).createRenderer(null,null);constructor(){}createDrag(e,i=C2){return new Vf(e,i,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry,this._renderer)}createDropList(e){return new Hf(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Wf=new te("CDK_DRAG_PARENT");var oC=new te("CdkDragHandle"),_h=(()=>{class r{element=C(ve);_parentDrag=C(Wf,{optional:!0,skipSelf:!0});_dragDropRegistry=C(Gf);_stateChanges=new ne;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._stateChanges.next(this)}_disabled=!1;constructor(){this._parentDrag?._addHandle(this)}ngAfterViewInit(){if(!this._parentDrag){let e=this.element.nativeElement.parentElement;for(;e;){let i=this._dragDropRegistry.getDragDirectiveForNode(e);if(i){this._parentDrag=i,i._addHandle(this);break}e=e.parentElement}}}ngOnDestroy(){this._parentDrag?._removeHandle(this),this._stateChanges.complete()}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:[2,"cdkDragHandleDisabled","disabled",ge]},features:[et([{provide:oC,useExisting:r}]),at]})}return r})(),aC=new te("CDK_DRAG_CONFIG"),lC=new te("CdkDropList"),bh=(()=>{class r{element=C(ve);dropContainer=C(lC,{optional:!0,skipSelf:!0});_ngZone=C(ke);_viewContainerRef=C(lr);_dir=C(ri,{optional:!0});_changeDetectorRef=C($e);_selfHandle=C(oC,{optional:!0,self:!0});_parentDrag=C(Wf,{optional:!0,skipSelf:!0});_dragDropRegistry=C(Gf);_destroyed=new ne;_handles=new is([]);_previewTemplate;_placeholderTemplate;_dragRef;data;lockAxis;rootElementSelector;boundaryElement;dragStartDelay;freeDragPosition;get disabled(){return this._disabled||!!(this.dropContainer&&this.dropContainer.disabled)}set disabled(e){this._disabled=e,this._dragRef.disabled=this._disabled}_disabled;constrainPosition;previewClass;previewContainer;scale=1;started=new fe;released=new fe;ended=new fe;entered=new fe;exited=new fe;dropped=new fe;moved=new Rn(e=>{let i=this._dragRef.moved.pipe(Ot(n=>({source:this,pointerPosition:n.pointerPosition,event:n.event,delta:n.delta,distance:n.distance}))).subscribe(e);return()=>{i.unsubscribe()}});_injector=C(ft);constructor(){let e=this.dropContainer,i=C(aC,{optional:!0}),n=C($f);this._dragRef=n.createDrag(this.element,{dragStartThreshold:i&&i.dragStartThreshold!=null?i.dragStartThreshold:5,pointerDirectionChangeThreshold:i&&i.pointerDirectionChangeThreshold!=null?i.pointerDirectionChangeThreshold:5,zIndex:i?.zIndex}),this._dragRef.data=this,this._dragDropRegistry.registerDirectiveNode(this.element.nativeElement,this),i&&this._assignDefaults(i),e&&(this._dragRef._withDropContainer(e._dropListRef),e.addItem(this),e._dropListRef.beforeStarted.pipe(ot(this._destroyed)).subscribe(()=>{this._dragRef.scale=this.scale})),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(e){this._dragRef.setFreeDragPosition(e)}ngAfterViewInit(){nn(()=>{this._updateRootElement(),this._setupHandlesListener(),this._dragRef.scale=this.scale,this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)},{injector:this._injector})}ngOnChanges(e){let i=e.rootElementSelector,n=e.freeDragPosition;i&&!i.firstChange&&this._updateRootElement(),this._dragRef.scale=this.scale,n&&!n.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this),this._dragDropRegistry.removeDirectiveNode(this.element.nativeElement),this._ngZone.runOutsideAngular(()=>{this._handles.complete(),this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_addHandle(e){let i=this._handles.getValue();i.push(e),this._handles.next(i)}_removeHandle(e){let i=this._handles.getValue(),n=i.indexOf(e);n>-1&&(i.splice(n,1),this._handles.next(i))}_setPreviewTemplate(e){this._previewTemplate=e}_resetPreviewTemplate(e){e===this._previewTemplate&&(this._previewTemplate=null)}_setPlaceholderTemplate(e){this._placeholderTemplate=e}_resetPlaceholderTemplate(e){e===this._placeholderTemplate&&(this._placeholderTemplate=null)}_updateRootElement(){let e=this.element.nativeElement,i=e;this.rootElementSelector&&(i=e.closest!==void 0?e.closest(this.rootElementSelector):e.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(i||e)}_getBoundaryElement(){let e=this.boundaryElement;return e?typeof e=="string"?this.element.nativeElement.closest(e):li(e):null}_syncInputs(e){e.beforeStarted.subscribe(()=>{if(!e.isDragging()){let i=this._dir,n=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,o=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.scale=this.scale,e.dragStartDelay=typeof n=="object"&&n?n:an(n),e.constrainPosition=this.constrainPosition,e.previewClass=this.previewClass,e.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(o).withPreviewContainer(this.previewContainer||"global"),i&&e.withDirection(i.value)}}),e.beforeStarted.pipe(gn(1)).subscribe(()=>{if(this._parentDrag){e.withParent(this._parentDrag._dragRef);return}let i=this.element.nativeElement.parentElement;for(;i;){let n=this._dragDropRegistry.getDragDirectiveForNode(i);if(n){e.withParent(n._dragRef);break}i=i.parentElement}})}_handleEvents(e){e.started.subscribe(i=>{this.started.emit({source:this,event:i.event}),this._changeDetectorRef.markForCheck()}),e.released.subscribe(i=>{this.released.emit({source:this,event:i.event})}),e.ended.subscribe(i=>{this.ended.emit({source:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:i.container.data,item:this,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:i.container.data,item:this})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,isPointerOverContainer:i.isPointerOverContainer,item:this,distance:i.distance,dropPoint:i.dropPoint,event:i.event})})}_assignDefaults(e){let{lockAxis:i,dragStartDelay:n,constrainPosition:s,previewClass:o,boundaryElement:l,draggingDisabled:d,rootElementSelector:h,previewContainer:u}=e;this.disabled=d??!1,this.dragStartDelay=n||0,i&&(this.lockAxis=i),s&&(this.constrainPosition=s),o&&(this.previewClass=o),l&&(this.boundaryElement=l),h&&(this.rootElementSelector=h),u&&(this.previewContainer=u)}_setupHandlesListener(){this._handles.pipe(Ar(e=>{let i=e.map(n=>n.element);this._selfHandle&&this.rootElementSelector&&i.push(this.element),this._dragRef.withHandles(i)}),ns(e=>tn(...e.map(i=>i._stateChanges.pipe(Ri(i))))),ot(this._destroyed)).subscribe(e=>{let i=this._dragRef,n=e.element.nativeElement;e.disabled?i.disableHandle(n):i.enableHandle(n)})}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","cdkDrag",""]],hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(i,n){i&2&&ce("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:[0,"cdkDragData","data"],lockAxis:[0,"cdkDragLockAxis","lockAxis"],rootElementSelector:[0,"cdkDragRootElement","rootElementSelector"],boundaryElement:[0,"cdkDragBoundary","boundaryElement"],dragStartDelay:[0,"cdkDragStartDelay","dragStartDelay"],freeDragPosition:[0,"cdkDragFreeDragPosition","freeDragPosition"],disabled:[2,"cdkDragDisabled","disabled",ge],constrainPosition:[0,"cdkDragConstrainPosition","constrainPosition"],previewClass:[0,"cdkDragPreviewClass","previewClass"],previewContainer:[0,"cdkDragPreviewContainer","previewContainer"],scale:[2,"cdkDragScale","scale",ti]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[et([{provide:Wf,useExisting:r}]),at,Et]})}return r})(),eC=new te("CdkDropListGroup");var cC=(()=>{class r{element=C(ve);_changeDetectorRef=C($e);_scrollDispatcher=C(ps);_dir=C(ri,{optional:!0});_group=C(eC,{optional:!0,skipSelf:!0});_destroyed=new ne;_scrollableParentsResolved;static _dropLists=[];_dropListRef;connectedTo=[];data;orientation;id=C(zt).getId("cdk-drop-list-");lockAxis;get disabled(){return this._disabled||!!this._group&&this._group.disabled}set disabled(e){this._dropListRef.disabled=this._disabled=e}_disabled;sortingDisabled;enterPredicate=()=>!0;sortPredicate=()=>!0;autoScrollDisabled;autoScrollStep;elementContainerSelector;dropped=new fe;entered=new fe;exited=new fe;sorted=new fe;_unsortedItems=new Set;constructor(){let e=C($f),i=C(aC,{optional:!0});this._dropListRef=e.createDropList(this.element),this._dropListRef.data=this,i&&this._assignDefaults(i),this._dropListRef.enterPredicate=(n,s)=>this.enterPredicate(n.data,s.data),this._dropListRef.sortPredicate=(n,s,o)=>this.sortPredicate(n,s.data,o.data),this._setupInputSyncSubscription(this._dropListRef),this._handleEvents(this._dropListRef),r._dropLists.push(this),this._group&&this._group._items.add(this)}addItem(e){this._unsortedItems.add(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}removeItem(e){this._unsortedItems.delete(e),this._dropListRef.isDragging()&&this._syncItemsWithRef()}getSortedItems(){return Array.from(this._unsortedItems).sort((e,i)=>e._dragRef.getVisibleElement().compareDocumentPosition(i._dragRef.getVisibleElement())&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)}ngOnDestroy(){let e=r._dropLists.indexOf(this);e>-1&&r._dropLists.splice(e,1),this._group&&this._group._items.delete(this),this._unsortedItems.clear(),this._dropListRef.dispose(),this._destroyed.next(),this._destroyed.complete()}_setupInputSyncSubscription(e){this._dir&&this._dir.change.pipe(Ri(this._dir.value),ot(this._destroyed)).subscribe(i=>e.withDirection(i)),e.beforeStarted.subscribe(()=>{let i=ds(this.connectedTo).map(n=>{if(typeof n=="string"){let s=r._dropLists.find(o=>o.id===n);return s}return n});if(this._group&&this._group._items.forEach(n=>{i.indexOf(n)===-1&&i.push(n)}),!this._scrollableParentsResolved){let n=this._scrollDispatcher.getAncestorScrollContainers(this.element).map(s=>s.getElementRef().nativeElement);this._dropListRef.withScrollableParents(n),this._scrollableParentsResolved=!0}if(this.elementContainerSelector){let n=this.element.nativeElement.querySelector(this.elementContainerSelector);e.withElementContainer(n)}e.disabled=this.disabled,e.lockAxis=this.lockAxis,e.sortingDisabled=this.sortingDisabled,e.autoScrollDisabled=this.autoScrollDisabled,e.autoScrollStep=an(this.autoScrollStep,2),e.connectedTo(i.filter(n=>n&&n!==this).map(n=>n._dropListRef)).withOrientation(this.orientation)})}_handleEvents(e){e.beforeStarted.subscribe(()=>{this._syncItemsWithRef(),this._changeDetectorRef.markForCheck()}),e.entered.subscribe(i=>{this.entered.emit({container:this,item:i.item.data,currentIndex:i.currentIndex})}),e.exited.subscribe(i=>{this.exited.emit({container:this,item:i.item.data}),this._changeDetectorRef.markForCheck()}),e.sorted.subscribe(i=>{this.sorted.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,container:this,item:i.item.data})}),e.dropped.subscribe(i=>{this.dropped.emit({previousIndex:i.previousIndex,currentIndex:i.currentIndex,previousContainer:i.previousContainer.data,container:i.container.data,item:i.item.data,isPointerOverContainer:i.isPointerOverContainer,distance:i.distance,dropPoint:i.dropPoint,event:i.event}),this._changeDetectorRef.markForCheck()}),tn(e.receivingStarted,e.receivingStopped).subscribe(()=>this._changeDetectorRef.markForCheck())}_assignDefaults(e){let{lockAxis:i,draggingDisabled:n,sortingDisabled:s,listAutoScrollDisabled:o,listOrientation:l}=e;this.disabled=n??!1,this.sortingDisabled=s??!1,this.autoScrollDisabled=o??!1,this.orientation=l||"vertical",i&&(this.lockAxis=i)}_syncItemsWithRef(){this._dropListRef.withItems(this.getSortedItems().map(e=>e._dragRef))}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["","cdkDropList",""],["cdk-drop-list"]],hostAttrs:[1,"cdk-drop-list"],hostVars:7,hostBindings:function(i,n){i&2&&(ye("id",n.id),ce("cdk-drop-list-disabled",n.disabled)("cdk-drop-list-dragging",n._dropListRef.isDragging())("cdk-drop-list-receiving",n._dropListRef.isReceiving()))},inputs:{connectedTo:[0,"cdkDropListConnectedTo","connectedTo"],data:[0,"cdkDropListData","data"],orientation:[0,"cdkDropListOrientation","orientation"],id:"id",lockAxis:[0,"cdkDropListLockAxis","lockAxis"],disabled:[2,"cdkDropListDisabled","disabled",ge],sortingDisabled:[2,"cdkDropListSortingDisabled","sortingDisabled",ge],enterPredicate:[0,"cdkDropListEnterPredicate","enterPredicate"],sortPredicate:[0,"cdkDropListSortPredicate","sortPredicate"],autoScrollDisabled:[2,"cdkDropListAutoScrollDisabled","autoScrollDisabled",ge],autoScrollStep:[0,"cdkDropListAutoScrollStep","autoScrollStep"],elementContainerSelector:[0,"cdkDropListElementContainer","elementContainerSelector"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[et([{provide:eC,useValue:void 0},{provide:lC,useExisting:r}]),at]})}return r})();var vh=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({providers:[$f],imports:[hr]})}return r})();var k2=new te("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let r=C(ci);return()=>r.scrollStrategies.reposition()}});function E2(r){return()=>r.scrollStrategies.reposition()}var S2={provide:k2,deps:[ci],useFactory:E2};var hC=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({providers:[S2],imports:[Or,Ye,ur,hr,Ye]})}return r})(),uC={transformMenu:ls("transformMenu",[Hs("void",vn({opacity:0,transform:"scale(0.8)"})),dr("void => enter",Ir("120ms cubic-bezier(0, 0, 0.2, 1)",vn({opacity:1,transform:"scale(1)"}))),dr("* => void",Ir("100ms 25ms linear",vn({opacity:0})))]),fadeInItems:ls("fadeInItems",[Hs("showing",vn({opacity:1})),dr("void => *",[vn({opacity:0}),Ir("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},t5=uC.fadeInItems,i5=uC.transformMenu;var Ah={};Ah.d=(r,t)=>{for(var e in t)Ah.o(t,e)&&!Ah.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})};Ah.o=(r,t)=>Object.prototype.hasOwnProperty.call(r,t);var $i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Jf=[.001,0,0,.001,0,0],Th=1.35,M2=.35,s5=M2/Th,xn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Cs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xl="pdfjs_internal_editor_",je={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},nt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},A2={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},eg={TRIANGLES:1,LATTICE:2,PATCH:3},_i={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ih={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},hi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var Xo={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var lu={ERRORS:0,WARNINGS:1,INFOS:5},wl={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},pl={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},T2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},cu=lu.WARNINGS;function I2(r){Number.isInteger(r)&&(cu=r)}function D2(){return cu}function du(r){cu>=lu.INFOS&&console.info(`Info: ${r}`)}function ze(r){cu>=lu.WARNINGS&&console.warn(`Warning: ${r}`)}function At(r){throw new Error(r)}function rt(r,t){r||At(t)}function P2(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function FC(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=L2(r)}catch{}let i=t?URL.parse(r,t):URL.parse(r);return P2(i)?i:null}function LC(r,t,e=!1){let i=URL.parse(r);return i?(i.hash=t,i.href):e&&FC(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function He(r,t,e,i=!1){return Object.defineProperty(r,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}var no=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}(),Dh=class extends no{constructor(t,e){super(t,"PasswordException"),this.code=e}},vl=class extends no{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},Cl=class extends no{constructor(t){super(t,"InvalidPDFException")}},ta=class extends no{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}},tg=class extends no{constructor(t){super(t,"FormatError")}},gr=class extends no{constructor(t){super(t,"AbortException")}};function NC(r){(typeof r!="object"||r?.length===void 0)&&At("Invalid argument for bytesToString");let t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);let i=[];for(let n=0;n<t;n+=e){let s=Math.min(n+e,t),o=r.subarray(n,s);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function Vl(r){typeof r!="string"&&At("Invalid argument for stringToBytes");let t=r.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=r.charCodeAt(i)&255;return e}function R2(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function O2(){let r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function F2(){try{return new Function(""),!0}catch{return!1}}var oi=class{static get isLittleEndian(){return He(this,"isLittleEndian",O2())}static get isEvalSupported(){return He(this,"isEvalSupported",F2())}static get isOffscreenCanvasSupported(){return He(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return He(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return He(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return He(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){let{platform:t,userAgent:e}=navigator;return He(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return He(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},qf=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0")),de=class{static makeHexColor(t,e,i){return`#${qf[t]}${qf[e]}${qf[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){let n=t[i],s=t[i+1];t[i]=n*e[0]+s*e[2]+e[4],t[i+1]=n*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){let n=e[0],s=e[1],o=e[2],l=e[3],d=e[4],h=e[5];for(let u=0;u<6;u+=2){let m=t[i+u],f=t[i+u+1];t[i+u]=m*n+f*o+d,t[i+u+1]=m*s+f*l+h}}static applyInverseTransform(t,e){let i=t[0],n=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-n*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-i*e[1]+n*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,i){let n=e[0],s=e[1],o=e[2],l=e[3],d=e[4],h=e[5],u=t[0],m=t[1],f=t[2],_=t[3],y=n*u+d,v=y,x=n*f+d,S=x,I=l*m+h,P=I,B=l*_+h,N=B;if(s!==0||o!==0){let z=s*u,j=s*f,Q=o*m,ee=o*_;y+=Q,S+=Q,x+=ee,v+=ee,I+=z,N+=z,B+=j,P+=j}i[0]=Math.min(i[0],y,x,v,S),i[1]=Math.min(i[1],I,B,P,N),i[2]=Math.max(i[2],y,x,v,S),i[3]=Math.max(i[3],I,B,P,N)}static inverseTransform(t){let e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){let i=t[0],n=t[1],s=t[2],o=t[3],l=i**2+n**2,d=i*s+n*o,h=s**2+o**2,u=(l+h)/2,m=Math.sqrt(u**2-(l*h-d**2));e[0]=Math.sqrt(u+m||1),e[1]=Math.sqrt(u-m||1)}static normalizeRect(t){let e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){let i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>n)return null;let s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>o?null:[i,s,n,o]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,n,s){s[0]=Math.min(s[0],t,i),s[1]=Math.min(s[1],e,n),s[2]=Math.max(s[2],t,i),s[3]=Math.max(s[3],e,n)}static#e(t,e,i,n,s,o,l,d,h,u){if(h<=0||h>=1)return;let m=1-h,f=h*h,_=f*h,y=m*(m*(m*t+3*h*e)+3*f*i)+_*n,v=m*(m*(m*s+3*h*o)+3*f*l)+_*d;u[0]=Math.min(u[0],y),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],y),u[3]=Math.max(u[3],v)}static#t(t,e,i,n,s,o,l,d,h,u,m,f){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&this.#e(t,e,i,n,s,o,l,d,-m/u,f);return}let _=u**2-4*m*h;if(_<0)return;let y=Math.sqrt(_),v=2*h;this.#e(t,e,i,n,s,o,l,d,(-u+y)/v,f),this.#e(t,e,i,n,s,o,l,d,(-u-y)/v,f)}static bezierBoundingBox(t,e,i,n,s,o,l,d,h){h[0]=Math.min(h[0],t,l),h[1]=Math.min(h[1],e,d),h[2]=Math.max(h[2],t,l),h[3]=Math.max(h[3],e,d),this.#t(t,i,s,l,e,n,o,d,3*(-t+3*(i-s)+l),6*(t-2*i+s),3*(i-t),h),this.#t(t,i,s,l,e,n,o,d,3*(-e+3*(n-o)+d),6*(e-2*n+o),3*(n-e),h)}};function L2(r){return decodeURIComponent(escape(r))}var Yf=null,pC=null;function N2(r){return Yf||(Yf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,pC=new Map([["\uFB05","\u017Ft"]])),r.replaceAll(Yf,(t,e,i)=>e?e.normalize("NFKC"):pC.get(i))}function BC(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let r=new Uint8Array(32);return crypto.getRandomValues(r),NC(r)}var Zo="pdfjs_internal_id_";function B2(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;let[i,n,...s]=e;if(!r(i)&&!Number.isInteger(i)||!t(n))return!1;let o=s.length,l=!0;switch(n.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(let d of s)if(!(typeof d=="number"||l&&d===null))return!1;return!0}function qi(r,t,e){return Math.min(Math.max(r,t),e)}function VC(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(NC(r))}function V2(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):Vl(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...t){return new Promise(e=>{e(r(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});var kl=class r{static textContent(t){let e=[],i={items:e,styles:Object.create(null)};function n(s){if(!s)return;let o=null,l=s.name;if(l==="#text")o=s.value;else if(r.shouldBuildText(l))s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&e.push({str:o}),!!s.children)for(let d of s.children)n(d)}return n(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},Ph=class{static setupStorage(t,e,i,n,s){let o=n.getValue(e,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),s==="print")break;t.addEventListener("input",l=>{n.setValue(e,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?t.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",l=>{n.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),s==="print")break;t.addEventListener("input",l=>{n.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(let l of i.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{let d=l.target.options,h=d.selectedIndex===-1?"":d[d.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:n,linkService:s}){let{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(let[d,h]of Object.entries(o))if(h!=null)switch(d){case"class":h.length&&t.setAttribute(d,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!l||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,h)}l&&s.addLinkAttributes(t,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(t,o.dataId,e,i)}static render(t){let e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,s=t.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:s,linkService:i});let l=s!=="richText",d=t.div;if(d.append(o),t.viewport){let m=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=m}l&&d.setAttribute("class","xfaLayer xfaFont");let h=[];if(n.children.length===0){if(n.value){let m=document.createTextNode(n.value);o.append(m),l&&kl.shouldBuildText(n.name)&&h.push(m)}return{textDivs:h}}let u=[[n,-1,o]];for(;u.length>0;){let[m,f,_]=u.at(-1);if(f+1===m.children.length){u.pop();continue}let y=m.children[++u.at(-1)[1]];if(y===null)continue;let{name:v}=y;if(v==="#text"){let S=document.createTextNode(y.value);h.push(S),_.append(S);continue}let x=y?.attributes?.xmlns?document.createElementNS(y.attributes.xmlns,v):document.createElement(v);if(_.append(x),y.attributes&&this.setAttributes({html:x,element:y,storage:e,intent:s,linkService:i}),y.children?.length>0)u.push([y,-1,x]);else if(y.value){let S=document.createTextNode(y.value);l&&kl.shouldBuildText(v)&&h.push(S),x.append(S)}}for(let m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){let e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}},zr="http://www.w3.org/2000/svg",Es=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function zl(r,t="text"){return q(this,null,function*(){if(bl(r,document.baseURI)){let e=yield fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{let n=new XMLHttpRequest;n.open("GET",r,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}i(new Error(n.statusText))}},n.send(null)})})}var El=class r{constructor({viewBox:t,userUnit:e,scale:i,rotation:n,offsetX:s=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=n,this.offsetX=s,this.offsetY=o,i*=e;let d=(t[2]+t[0])/2,h=(t[3]+t[1])/2,u,m,f,_;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,m=0,f=0,_=1;break;case 90:u=0,m=1,f=1,_=0;break;case 270:u=0,m=-1,f=-1,_=0;break;case 0:u=1,m=0,f=0,_=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,_=-_);let y,v,x,S;u===0?(y=Math.abs(h-t[1])*i+s,v=Math.abs(d-t[0])*i+o,x=(t[3]-t[1])*i,S=(t[2]-t[0])*i):(y=Math.abs(d-t[0])*i+s,v=Math.abs(h-t[1])*i+o,x=(t[2]-t[0])*i,S=(t[3]-t[1])*i),this.transform=[u*i,m*i,f*i,_*i,y-u*i*d-f*i*h,v-m*i*d-_*i*h],this.width=x,this.height=S}get rawDims(){let t=this.viewBox;return He(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:s=!1}={}){return new r({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}convertToViewportPoint(t,e){let i=[t,e];return de.applyTransform(i,this.transform),i}convertToViewportRectangle(t){let e=[t[0],t[1]];de.applyTransform(e,this.transform);let i=[t[2],t[3]];return de.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){let i=[t,e];return de.applyInverseTransform(i,this.transform),i}},Sl=class extends no{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function hu(r){let t=r.length,e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function P_(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function z2(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function H2(r,t="document.pdf"){if(typeof r!="string")return t;if(hu(r))return ze('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let i=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(r);if(!i)return t;let n=l=>{try{let d=decodeURIComponent(l);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:l):d}catch{return l}},s=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(s.test(o))return n(o);if(i.searchParams.size>0){let l=Array.from(i.searchParams.values()).reverse();for(let h of l)if(s.test(h))return n(h);let d=Array.from(i.searchParams.keys()).reverse();for(let h of d)if(s.test(h))return n(h)}if(i.hash){let d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return n(d[0])}return t}var Rh=class{started=Object.create(null);times=[];time(t){t in this.started&&ze(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ze(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){let t=[],e=0;for(let{name:i}of this.times)e=Math.max(i.length,e);for(let{name:i,start:n,end:s}of this.times)t.push(`${i.padEnd(e)} ${s-n}ms
`);return t.join("")}};function bl(r,t){let e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function Wn(r){r.preventDefault()}function Zt(r){r.preventDefault(),r.stopPropagation()}function W2(r){console.log("Deprecated API usage: "+r)}var Ml=class{static#e;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let e=this.#e.exec(t);if(!e)return null;let i=parseInt(e[1],10),n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;let h=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,h==="-"?(o+=u,l+=m):h==="+"&&(o-=u,l-=m),new Date(Date.UTC(i,n,s,o,l,d))}};function U2(r,{scale:t=1,rotation:e=0}){let{width:i,height:n}=r.attributes.style,s=[0,0,parseInt(i),parseInt(n)];return new El({viewBox:s,userUnit:1,scale:t,rotation:e})}function Hl(r){if(r.startsWith("#")){let t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ze(`Not a valid color format: "${r}"`),[0,0,0])}function j2(r){let t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(let e of r.keys()){t.style.color=e;let i=window.getComputedStyle(t).color;r.set(e,Hl(i))}t.remove()}function Gt(r){let{a:t,b:e,c:i,d:n,e:s,f:o}=r.getTransform();return[t,e,i,n,s,o]}function mr(r){let{a:t,b:e,c:i,d:n,e:s,f:o}=r.getTransform().invertSelf();return[t,e,i,n,s,o]}function Js(r,t,e=!1,i=!0){if(t instanceof El){let{pageWidth:n,pageHeight:s}=t.rawDims,{style:o}=r,l=oi.isCSSRoundSupported,d=`var(--total-scale-factor) * ${n}px`,h=`var(--total-scale-factor) * ${s}px`,u=l?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=l?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=m):(o.width=m,o.height=u)}i&&r.setAttribute("data-main-rotation",t.rotation)}var Wr=class r{constructor(){let{pixelRatio:t}=r;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,n,s=-1){let o=1/0,l=1/0,d=1/0;i=r.capPixels(i,s),i>0&&(o=Math.sqrt(i/(t*e))),n!==-1&&(l=n/t,d=n/e);let h=Math.min(o,l,d);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){let i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}},ig=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],ng=class{static get isDarkMode(){return He(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}},rg=class{static get commentForegroundColor(){let t=document.createElement("span");t.classList.add("comment","sidebar");let{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);let{color:i}=window.getComputedStyle(t);return t.remove(),He(this,"commentForegroundColor",Hl(i))}};function G2(r,t,e,i){i=Math.min(Math.max(i??1,0),1);let n=255*(1-i);return r=Math.round(r*i+n),t=Math.round(t*i+n),e=Math.round(e*i+n),[r,t,e]}function mC(r,t){let e=r[0]/255,i=r[1]/255,n=r[2]/255,s=Math.max(e,i,n),o=Math.min(e,i,n),l=(s+o)/2;if(s===o)t[0]=t[1]=0;else{let d=s-o;switch(t[1]=l<.5?d/(s+o):d/(2-s-o),s){case e:t[0]=((i-n)/d+(i<n?6:0))*60;break;case i:t[0]=((n-e)/d+2)*60;break;case n:t[0]=((e-i)/d+4)*60;break}}t[2]=l}function sg(r,t){let e=r[0],i=r[1],n=r[2],s=(1-Math.abs(2*n-1))*i,o=s*(1-Math.abs(e/60%2-1)),l=n-s/2;switch(Math.floor(e/60)){case 0:t[0]=s+l,t[1]=o+l,t[2]=l;break;case 1:t[0]=o+l,t[1]=s+l,t[2]=l;break;case 2:t[0]=l,t[1]=s+l,t[2]=o+l;break;case 3:t[0]=l,t[1]=o+l,t[2]=s+l;break;case 4:t[0]=o+l,t[1]=l,t[2]=s+l;break;case 5:case 6:t[0]=s+l,t[1]=l,t[2]=o+l;break}}function fC(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function gC(r,t,e){sg(r,e),e.map(fC);let i=.2126*e[0]+.7152*e[1]+.0722*e[2];sg(t,e),e.map(fC);let n=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>n?(i+.05)/(n+.05):(n+.05)/(i+.05)}var _C=new Map;function $2(r,t){let e=r[0]+r[1]*256+r[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776,i=_C.get(e);if(i)return i;let n=new Float32Array(9),s=n.subarray(0,3),o=n.subarray(3,6);mC(r,o);let l=n.subarray(6,9);mC(t,l);let d=l[2]<.5,h=d?12:4.5;if(o[2]=d?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),gC(o,l,s)<h){let u,m;d?(u=o[2],m=1):(u=0,m=o[2]);let f=.005;for(;m-u>f;){let _=o[2]=(u+m)/2;d===gC(o,l,s)<h?u=_:m=_}o[2]=d?m:u}return sg(o,s),i=de.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),_C.set(e,i),i}function zC({html:r,dir:t,className:e},i){let n=document.createDocumentFragment();if(typeof r=="string"){let s=document.createElement("p");s.dir=t||"auto";let o=r.split(/(?:\r\n?|\n)/);for(let l=0,d=o.length;l<d;++l){let h=o[l];s.append(document.createTextNode(h)),l<d-1&&s.append(document.createElement("br"))}n.append(s)}else Ph.render({xfaHtml:r,div:n,intent:"richText"});n.firstElementChild.classList.add("richText",e),i.append(n)}function HC(r){let t=new Path2D;if(!r)return t;for(let e=0,i=r.length;e<i;)switch(r[e++]){case pl.moveTo:t.moveTo(r[e++],r[e++]);break;case pl.lineTo:t.lineTo(r[e++],r[e++]);break;case pl.curveTo:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case pl.quadraticCurveTo:t.quadraticCurveTo(r[e++],r[e++],r[e++],r[e++]);break;case pl.closePath:t.closePath();break;default:ze(`Unrecognized drawing path operator: ${r[e-1]}`);break}return t}var og=class r{#e=null;#t=null;#n;#i=null;#o=null;#s=null;#r=null;#a=null;static#c=null;constructor(t){this.#n=t,r.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){let t=this.#e=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");let e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Wn,{signal:e}),t.addEventListener("pointerdown",r.#l,{signal:e}));let i=this.#i=document.createElement("div");i.className="buttons",t.append(i);let n=this.#n.toolbarPosition;if(n){let{style:s}=t,o=this.#n._uiManager.direction==="ltr"?1-n[0]:n[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#e}static#l(t){t.stopPropagation()}#u(t){this.#n._focusEventsAllowed=!1,Zt(t)}#h(t){this.#n._focusEventsAllowed=!0,Zt(t)}#p(t){let e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#u.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Wn,{signal:e}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#o?.shown(),this.#s?.shown()}addDeleteButton(){let{editorType:t,_uiManager:e}=this.#n,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",r.#c[t]),this.#p(i)&&i.addEventListener("click",n=>{e.delete()},{signal:e._signal}),this.#i.append(i)}get#g(){let t=document.createElement("div");return t.className="divider",t}addAltText(t){return q(this,null,function*(){let e=yield t.render();this.#p(e),this.#i.append(e,this.#g),this.#o=t})}addComment(t,e=null){if(this.#s)return;let i=t.renderForToolbar();if(!i)return;this.#p(i);let n=this.#r=this.#g;e?(this.#i.insertBefore(i,e),this.#i.insertBefore(n,e)):this.#i.append(i,n),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#t)return;this.#t=t;let e=t.renderButton();this.#p(e),this.#i.append(e,this.#g)}addEditSignatureButton(t){return q(this,null,function*(){let e=this.#a=yield t.renderEditButton(this.#n);this.#p(e),this.#i.append(e,this.#g)})}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#r?.remove(),this.#r=null;break}}addButton(t,e){return q(this,null,function*(){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&(yield this.addAltText(e));break;case"editSignature":e&&(yield this.addEditSignatureButton(e));break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}})}addButtonBefore(t,e,i){return q(this,null,function*(){if(!e&&t==="comment")return;let n=this.#i.querySelector(i);n&&t==="comment"&&this.addComment(e,n)})}updateEditSignatureButton(t){this.#a&&(this.#a.title=t)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}},ag=class{#e=null;#t=null;#n;constructor(t){this.#n=t}#i(){let t=this.#t=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");let e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Wn,{signal:e});let i=this.#e=document.createElement("div");return i.className="buttons",t.append(i),this.#n.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#o(t,e){let i=0,n=0;for(let s of t){let o=s.y+s.height;if(o<i)continue;let l=s.x+(e?s.width:0);if(o>i){n=l,i=o;continue}e?l>n&&(n=l):l<n&&(n=l)}return[e?1-n:n,i]}show(t,e,i){let[n,s]=this.#o(e,i),{style:o}=this.#t||=this.#i();t.append(this.#t),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(t,e,i,n){let s=document.createElement("button");s.classList.add("basic",t),s.tabIndex=0,s.setAttribute("data-l10n-id",e);let o=document.createElement("span");s.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",i);let l=this.#n._signal;l instanceof AbortSignal&&!l.aborted&&(s.addEventListener("contextmenu",Wn,{signal:l}),s.addEventListener("click",n,{signal:l})),this.#e.append(s)}};function WC(r,t,e){for(let i of e)t.addEventListener(i,r[i].bind(r))}var Oi=class r{static#e=NaN;static#t=null;static#n=NaN;static#i=null;static initializeAndAddPointerId(t){(r.#t||=new Set).add(t)}static setPointer(t,e){r.#e||=e,r.#i??=t}static setTimeStamp(t){r.#n=t}static isSamePointerId(t){return r.#e===t}static isSamePointerIdOrRemove(t){return r.#e===t?!0:(r.#t?.delete(t),!1)}static isSamePointerType(t){return r.#i===t}static isInitializedAndDifferentPointerType(t){return r.#i!==null&&!r.isSamePointerType(t)}static isSameTimeStamp(t){return r.#n===t}static isUsingMultiplePointers(){return r.#t?.size>=1}static clearPointerType(){r.#i=null}static clearPointerIds(){r.#e=NaN,r.#t=null}static clearTimeStamp(){r.#n=NaN}},lg=class{#e=0;get id(){return`${xl}${this.#e++}`}},cg=class r{#e=BC();#t=0;#n=null;static get _isSVGFittingCanvas(){let t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;let s=n.decode().then(()=>(i.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return He(this,"_isSVGFittingCanvas",s)}#i(t,e){return q(this,null,function*(){this.#n||=new Map;let i=this.#n.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let n;if(typeof e=="string"?(i.url=e,n=yield zl(e,"blob")):e instanceof File?n=i.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){let s=r._isSVGFittingCanvas,o=new FileReader,l=new Image,d=new Promise((h,u)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,h()},o.onload=()=>q(this,null,function*(){let m=i.svgUrl=o.result;l.src=(yield s)?`${m}#svgView(preserveAspectRatio(none))`:m}),l.onerror=o.onerror=u});o.readAsDataURL(n),yield d}else i.bitmap=yield createImageBitmap(n);i.refCounter=1}catch(n){ze(n),i=null}return this.#n.set(t,i),i&&this.#n.set(i.id,i),i})}getFromFile(t){return q(this,null,function*(){let{lastModified:e,name:i,size:n,type:s}=t;return this.#i(`${e}_${i}_${n}_${s}`,t)})}getFromUrl(t){return q(this,null,function*(){return this.#i(t,t)})}getFromBlob(t,e){return q(this,null,function*(){let i=yield e;return this.#i(t,i)})}getFromId(t){return q(this,null,function*(){this.#n||=new Map;let e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){let{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)})}getFromCanvas(t,e){this.#n||=new Map;let i=this.#n.get(t);if(i?.bitmap)return i.refCounter+=1,i;let n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),i={bitmap:n.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(t,i),this.#n.set(i.id,i),i}getSvgUrl(t){let e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;let e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;let{bitmap:i}=e;if(!e.url&&!e.file){let n=new OffscreenCanvas(i.width,i.height);n.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=n.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#e}_`)}},dg=class{#e=[];#t=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:i,mustExec:n,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(n&&t(),this.#t)return;let d={cmd:t,undo:e,post:i,type:s};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(d);return}if(o&&this.#e[this.#i].type===s){l&&(d.undo=this.#e[this.#i].undo),this.#e[this.#i]=d;return}let h=this.#i+1;h===this.#n?this.#e.splice(0,1):(this.#i=h,h<this.#e.length&&this.#e.splice(h)),this.#e.push(d)}undo(){if(this.#i===-1)return;this.#t=!0;let{undo:t,post:e}=this.#e[this.#i];t(),e?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;let{cmd:t,post:e}=this.#e[this.#i];t(),e?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}cleanType(t){if(this.#i!==-1){for(let e=this.#i;e>=0;e--)if(this.#e[e].type!==t){this.#e.splice(e+1,this.#i-e),this.#i=e;return}this.#e.length=0,this.#i=-1}}destroy(){this.#e=null}},eo=class{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=oi.platform;for(let[i,n,s={}]of t)for(let o of i){let l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:n,options:s}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:n,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#e(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);let e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;let i=this.callbacks.get(this.#e(e));if(!i)return;let{callback:n,options:{bubbles:s=!1,args:o=[],checker:l=null}}=i;l&&!l(t,e)||(n.bind(t,...o,e)(),s||Zt(e))}},hg=class r{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let t=new Map([["CanvasText",null],["Canvas",null]]);return j2(t),He(this,"_colors",t)}convert(t){let e=Hl(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[i,n]of this._colors)if(n.every((s,o)=>s===e[o]))return r._colorsMapping.get(i);return e}getHexCode(t){let e=this._colors.get(t);return e?de.makeHexColor(...e):t}},Al=(()=>{class r{#e=new AbortController;#t=null;#n=null;#i=new Map;#o=new Map;#s=null;#r=null;#a=null;#c=new dg;#l=null;#u=null;#h=null;#p=0;#g=new Set;#f=null;#d=null;#m=new Set;_editorUndoBar=null;#_=!1;#v=!1;#b=!1;#E=null;#C=null;#x=null;#M=null;#y=!1;#k=null;#I=new lg;#A=!1;#T=!1;#N=!1;#P=null;#O=null;#B=null;#F=null;#j=null;#S=je.NONE;#w=new Set;#R=null;#V=null;#H=null;#q=null;#$=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#W=[0,0];#L=null;#G=null;#Q=null;#J=null;#z=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let e=r.prototype,i=l=>l.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:d})=>{if(d instanceof HTMLInputElement){let{type:h}=d;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return He(this,"_keyboardManager",new eo([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(l,{target:d})=>!(d instanceof HTMLButtonElement)&&l.#G.contains(d)&&!l.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(l,{target:d})=>!(d instanceof HTMLButtonElement)&&l.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:i}]]))}constructor(e,i,n,s,o,l,d,h,u,m,f,_,y,v,x,S){let I=this._signal=this.#e.signal;this.#G=e,this.#Q=i,this.#J=n,this.#s=s,this.#l=o,this.#V=l,this.#$=h,this._eventBus=d,d._on("editingaction",this.onEditingAction.bind(this),{signal:I}),d._on("pagechanging",this.onPageChanging.bind(this),{signal:I}),d._on("scalechanging",this.onScaleChanging.bind(this),{signal:I}),d._on("rotationchanging",this.onRotationChanging.bind(this),{signal:I}),d._on("setpreference",this.onSetPreference.bind(this),{signal:I}),d._on("switchannotationeditorparams",P=>this.updateParams(P.type,P.value),{signal:I}),window.addEventListener("pointerdown",()=>{this.#T=!0},{capture:!0,signal:I}),window.addEventListener("pointerup",()=>{this.#T=!1},{capture:!0,signal:I}),this.#oe(),this.#ue(),this.#te(),this.#r=h.annotationStorage,this.#E=h.filterFactory,this.#H=u,this.#M=m||null,this.#_=f,this.#v=_,this.#b=y,this.#j=v||null,this.viewParameters={realScale:Es.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=S!==!1,o?.setSidebarUiManager(this)}destroy(){this.#z?.resolve(),this.#z=null,this.#e?.abort(),this.#e=null,this._signal=null;for(let e of this.#o.values())e.destroy();this.#o.clear(),this.#i.clear(),this.#m.clear(),this.#F?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#s?.destroy(),this.#l?.destroy(),this.#V?.destroy(),this.#k?.hide(),this.#k=null,this.#B?.destroy(),this.#B=null,this.#n=null,this.#C&&(clearTimeout(this.#C),this.#C=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#j}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return He(this,"hcmFilter",this.#H?this.#E.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return He(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return He(this,"_highlightColors",this.#M?new Map(this.#M.split(",").map(e=>(e=e.split("=").map(i=>i.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){let{_highlightColors:e}=this;if(!e)return He(this,"highlightColors",null);let i=new Map,n=!!this.#H;for(let[s,o]of e){let l=s.endsWith("_HCM");if(n&&l){i.set(s.replace("_HCM",""),o);continue}!n&&!l&&i.set(s,o)}return He(this,"highlightColors",i)}get highlightColorNames(){return He(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;let i=this.highlightColorNames.get(e);return this._highlightColors.get(i)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,i=!1){this.#s?.editAltText(this,e,i)}hasCommentManager(){return!!this.#l}editComment(e,i,n,s){this.#l?.showDialog(this,e,i,n,s)}selectComment(e,i){this.#o.get(e)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,i,n=void 0){this.#l?.toggleCommentPopup(e,i,n)}makeCommentColor(e,i){return e&&this.#l?.makeCommentColor(e,i)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}waitForEditorsRendered(e){return q(this,null,function*(){if(this.#o.has(e-1))return;let{resolve:i,promise:n}=Promise.withResolvers(),s=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",s),i())};this._eventBus.on("editorsrendered",s),yield n})}getSignature(e){this.#V?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#V}switchToMode(e,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,i){this._eventBus.dispatch("setpreference",{source:this,name:e,value:i})}onSetPreference({name:e,value:i}){switch(e){case"enableNewAltTextWhenAddingImage":this.#b=i;break}}onPageChanging({pageNumber:e}){this.#p=e-1}focusMainContainer(){this.#G.focus()}findParent(e,i){for(let n of this.#o.values()){let{x:s,y:o,width:l,height:d}=n.div.getBoundingClientRect();if(e>=s&&e<=s+l&&i>=o&&i<=o+d)return n}return null}disableUserSelect(e=!1){this.#Q.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#m.add(e)}removeShouldRescale(e){this.#m.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Es.PDF_TO_CSS_UNITS;for(let i of this.#m)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Z({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){let{currentLayer:i}=this;if(i.hasTextLayer(e))return i;for(let n of this.#o.values())if(n.hasTextLayer(e))return n;return null}highlightSelection(e="",i=!1){let n=document.getSelection();if(!n||n.isCollapsed)return;let{anchorNode:s,anchorOffset:o,focusNode:l,focusOffset:d}=n,h=n.toString(),m=this.#Z(n).closest(".textLayer"),f=this.getSelectionBoxes(m);if(!f)return;n.empty();let _=this.#ee(m),y=this.#S===je.NONE,v=()=>{let x=_?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:s,anchorOffset:o,focusNode:l,focusOffset:d,text:h});y&&this.showAllEditors("highlight",!0,!0),i&&x?.editComment()};if(y){this.switchToMode(je.HIGHLIGHT,v);return}v()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){let e=document.getSelection();if(!e||e.isCollapsed)return;let n=this.#Z(e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#k||=new ag(this),this.#k.show(n,s,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#r)return null;let i=`${xl}${e}`,n=this.#r.getRawValue(i);return n&&this.#r.remove(i),n}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}a11yAlert(e,i=null){let n=this.#J;n&&(n.setAttribute("data-l10n-id",e),i?n.setAttribute("data-l10n-args",JSON.stringify(i)):n.removeAttribute("data-l10n-args"))}#se(){let e=document.getSelection();if(!e||e.isCollapsed){this.#R&&(this.#k?.hide(),this.#R=null,this.#D({hasSelectedText:!1}));return}let{anchorNode:i}=e;if(i===this.#R)return;let s=this.#Z(e).closest(".textLayer");if(!s){this.#R&&(this.#k?.hide(),this.#R=null,this.#D({hasSelectedText:!1}));return}if(this.#k?.hide(),this.#R=i,this.#D({hasSelectedText:!0}),!(this.#S!==je.HIGHLIGHT&&this.#S!==je.NONE)&&(this.#S===je.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#y=this.isShiftKeyDown,!this.isShiftKeyDown)){let o=this.#S===je.HIGHLIGHT?this.#ee(s):null;if(o?.toggleDrawing(),this.#T){let l=new AbortController,d=this.combinedSignal(l),h=u=>{u.type==="pointerup"&&u.button!==0||(l.abort(),o?.toggleDrawing(!0),u.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else o?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#S===je.HIGHLIGHT?this.highlightSelection(e):this.#_&&this.#re()}#oe(){document.addEventListener("selectionchange",this.#se.bind(this),{signal:this._signal})}#ae(){if(this.#x)return;this.#x=new AbortController;let e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#y&&(this.#y=!1,this.#X("main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let i of this.#w)if(i.div.contains(e)){this.#O=[i,e],i._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;let[e,i]=this.#O;this.#O=null,i.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#te(){if(this.#P)return;this.#P=new AbortController;let e=this.combinedSignal(this.#P);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ce(){this.#P?.abort(),this.#P=null}#de(){if(this.#u)return;this.#u=new AbortController;let e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#he(){this.#u?.abort(),this.#u=null}#ue(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ce(),this.setEditingState(!1)}dragOver(e){for(let{type:i}of e.dataTransfer.items)for(let n of this.#d)if(n.isHandlingMimeForPasting(i)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let i of e.dataTransfer.items)for(let n of this.#d)if(n.isHandlingMimeForPasting(i.type)){n.paste(i,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;let i=[];for(let n of this.#w){let s=n.serialize(!0);s&&i.push(s)}i.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(e){this.copy(e),this.delete()}paste(e){return q(this,null,function*(){e.preventDefault();let{clipboardData:i}=e;for(let o of i.items)for(let l of this.#d)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=i.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){ze(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();let s=this.currentLayer;try{let o=[];for(let h of n){let u=yield s.deserialize(h);if(!u)return;o.push(u)}let l=()=>{for(let h of o)this.#ie(h);this.#ne(o)},d=()=>{for(let h of o)h.remove()};this.addCommands({cmd:l,undo:d,mustExec:!0})}catch(o){ze(`paste: "${o.message}".`)}})}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#S!==je.NONE&&!this.isEditorHandlingKeyboard&&r._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#y&&(this.#y=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#D(e){Object.entries(e).some(([n,s])=>this.#Y[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#S===je.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#U([[nt.HIGHLIGHT_FREE,!0]]))}#U(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ae(),this.#de(),this.#D({isEditing:this.#S!==je.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#he(),this.#D({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#d){this.#d=e;for(let i of this.#d)this.#U(i.defaultPropertiesToUpdate)}}getId(){return this.#I.id}get currentLayer(){return this.#o.get(this.#p)}getLayer(e){return this.#o.get(e)}get currentPageIndex(){return this.#p}addLayer(e){this.#o.set(e.pageIndex,e),this.#A?e.enable():e.disable()}removeLayer(e){this.#o.delete(e.pageIndex)}updateMode(e,i=null,n=!1,s=!1,o=!1,l=!1){return q(this,null,function*(){if(this.#S!==e&&!(this.#z&&(yield this.#z.promise,!this.#z))){if(this.#z=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#S===je.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#S=e,e===je.NONE){this.setEditingState(!1),this.#me();for(let d of this.#i.values())d.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#z.resolve();return}for(let d of this.#i.values())d.addStandaloneCommentButton();e===je.SIGNATURE&&(yield this.#V?.loadSignatures()),n&&Oi.clearPointerType(),this.setEditingState(!0),yield this.#pe(),this.unselectAll();for(let d of this.#o.values())d.updateMode(e);if(e===je.POPUP){this.#n||=yield this.#$.getAnnotationsByType(new Set(this.#d.map(u=>u._editorType)));let d=new Set,h=[];for(let u of this.#i.values()){let{annotationElementId:m,hasComment:f,deleted:_}=u;m&&d.add(m),f&&!_&&h.push(u.getData())}for(let u of this.#n){let{id:m,popupRef:f,contentsObj:_}=u;f&&_?.str&&!d.has(m)&&!this.#g.has(m)&&h.push(u)}this.#l?.showSidebar(h)}if(!i){s&&this.addNewEditorFromKeyboard(),this.#z.resolve();return}for(let d of this.#i.values())d.uid===i?(this.setSelected(d),l?d.editComment():o?d.enterInEditMode():d.focus()):d.unselect();this.#z.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#S&&this._eventBus.dispatch("switchannotationeditormode",J({source:this},e))}updateParams(e,i){if(this.#d){switch(e){case nt.CREATE:this.currentLayer.addNewEditor(i);return;case nt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(e,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(let n of this.#w)n.updateParams(e,i);else for(let n of this.#d)n.updateDefaultParams(e,i)}}showAllEditors(e,i,n=!1){for(let o of this.#i.values())o.editorType===e&&o.show(i);(this.#q?.get(nt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#U([[nt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(e=!1){if(this.#N!==e){this.#N=e;for(let i of this.#o.values())e?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",e)}}#pe(){return q(this,null,function*(){if(!this.#A){this.#A=!0;let e=[];for(let i of this.#o.values())e.push(i.enable());yield Promise.all(e);for(let i of this.#i.values())i.enable()}})}#me(){if(this.unselectAll(),this.#A){this.#A=!1;for(let e of this.#o.values())e.disable();for(let e of this.#i.values())e.disable()}}*getEditors(e){for(let i of this.#i.values())i.pageIndex===e&&(yield i)}getEditor(e){return this.#i.get(e)}addEditor(e){this.#i.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#C&&clearTimeout(this.#C),this.#C=setTimeout(()=>{this.focusMainContainer(),this.#C=null},0)),this.#i.delete(e.id),e.annotationElementId&&this.#F?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){let i=this.#o.get(e.pageIndex);i?i.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#U(e.propertiesToUpdate))}get#fe(){let e=null;for(e of this.#w);return e}updateUI(e){this.#fe===e&&this.#U(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#U(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#D({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#h?.commitOrRemove();for(let i of this.#w)i!==e&&i.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#D({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#D({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#D({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#D({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(let e of this.#i.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();let e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;let i=e?[e]:[...this.#w],n=()=>{this._editorUndoBar?.show(s,i.length===1?i[0].editorType:i.length);for(let o of i)o.remove()},s=()=>{for(let o of i)this.#ie(o)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ne(e){for(let i of this.#w)i.unselect();this.#w.clear();for(let i of e)i.isEmpty()||(this.#w.add(i),i.select());this.#D({hasSelectedEditor:this.hasSelection})}selectAll(){for(let e of this.#w)e.commit();this.#ne(this.#i.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#S!==je.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(let e of this.#w)e.unselect();this.#w.clear(),this.#D({hasSelectedEditor:!1})}}translateSelectedEditors(e,i,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#W[0]+=e,this.#W[1]+=i;let[s,o]=this.#W,l=[...this.#w],d=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#W[0]=this.#W[1]=0,this.addCommands({cmd:()=>{for(let h of l)this.#i.has(h.id)&&(h.translateInPage(s,o),h.translationDone())},undo:()=>{for(let h of l)this.#i.has(h.id)&&(h.translateInPage(-s,-o),h.translationDone())},mustExec:!1})},d);for(let h of l)h.translateInPage(e,i),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(let e of this.#w)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);let e=this.#f;this.#f=null;let i=!1;for(let[{x:s,y:o,pageIndex:l},d]of e)d.newX=s,d.newY=o,d.newPageIndex=l,i||=s!==d.savedX||o!==d.savedY||l!==d.savedPageIndex;if(!i)return!1;let n=(s,o,l,d)=>{if(this.#i.has(s.id)){let h=this.#o.get(d);h?s._setParentAndPosition(h,o,l):(s.pageIndex=d,s.x=o,s.y=l)}};return this.addCommands({cmd:()=>{for(let[s,{newX:o,newY:l,newPageIndex:d}]of e)n(s,o,l,d)},undo:()=>{for(let[s,{savedX:o,savedY:l,savedPageIndex:d}]of e)n(s,o,l,d)},mustExec:!0}),!0}dragSelectedEditors(e,i){if(this.#f)for(let n of this.#f.keys())n.drag(e,i)}rebuild(e){if(e.parent===null){let i=this.getLayer(e.pageIndex);i?(i.changeParent(e),i.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#S}isEditingMode(){return this.#S!==je.NONE}get imageManager(){return He(this,"imageManager",new cg)}getSelectionBoxes(e){if(!e)return null;let i=document.getSelection();for(let u=0,m=i.rangeCount;u<m;u++)if(!e.contains(i.getRangeAt(u).commonAncestorContainer))return null;let{x:n,y:s,width:o,height:l}=e.getBoundingClientRect(),d;switch(e.getAttribute("data-main-rotation")){case"90":d=(u,m,f,_)=>({x:(m-s)/l,y:1-(u+f-n)/o,width:_/l,height:f/o});break;case"180":d=(u,m,f,_)=>({x:1-(u+f-n)/o,y:1-(m+_-s)/l,width:f/o,height:_/l});break;case"270":d=(u,m,f,_)=>({x:1-(m+_-s)/l,y:(u-n)/o,width:_/l,height:f/o});break;default:d=(u,m,f,_)=>({x:(u-n)/o,y:(m-s)/l,width:f/o,height:_/l});break}let h=[];for(let u=0,m=i.rangeCount;u<m;u++){let f=i.getRangeAt(u);if(!f.collapsed)for(let{x:_,y,width:v,height:x}of f.getClientRects())v===0||x===0||h.push(d(_,y,v,x))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:i}){(this.#a||=new Map).set(e,i)}removeChangedExistingAnnotation({annotationElementId:e}){this.#a?.delete(e)}renderAnnotationElement(e){let i=this.#a?.get(e.data.id);if(!i)return;let n=this.#r.getRawValue(i);n&&(this.#S===je.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,i,n){let s=this.#F?.get(e);s&&(s.setCanvas(i,n),this.#F.delete(e))}addMissingCanvas(e,i){(this.#F||=new Map).set(e,i)}}return r})(),bC=(()=>{class r{#e=null;#t=!1;#n=null;#i=null;#o=null;#s=null;#r=!1;#a=null;#c=null;#l=null;#u=null;#h=!1;static#p=null;static _l10n=null;constructor(e){this.#c=e,this.#h=e._uiManager.useNewAltTextFlow,r.#p||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){r._l10n??=e}render(){return q(this,null,function*(){let e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";let i=this.#i=document.createElement("span");e.append(i),this.#h?(e.classList.add("new"),e.setAttribute("data-l10n-id",r.#p.missing),i.setAttribute("data-l10n-id",r.#p["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let n=this.#c._uiManager._signal;e.addEventListener("contextmenu",Wn,{signal:n}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});let s=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#r=!0,s(o))},{signal:n}),yield this.#f(),e})}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#h?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#h?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}setGuessedText(e){return q(this,null,function*(){this.#e===null&&(this.#l=e,this.#u=yield r._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#f())})}toggleAltTextBadge(e=!1){if(!this.#h||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){let i=this.#a=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#a.classList.toggle("hidden",!e)}serialize(e){let i=this.#e;return!e&&this.#l===i&&(i=this.#u),{altText:i,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#u}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:i,guessedText:n,textWithDisclaimer:s,cancel:o=!1}){n&&(this.#l=n,this.#u=s),!(this.#e===e&&this.#t===i)&&(o||(this.#e=e,this.#t=i),this.#f())}toggle(e=!1){this.#n&&(!e&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#o=null,this.#a?.remove(),this.#a=null}#f(){return q(this,null,function*(){let e=this.#n;if(!e)return;if(this.#h){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",r.#p[this.#g]),this.#i?.setAttribute("data-l10n-id",r.#p[`${this.#g}-label`]),!this.#e){this.#o?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#o?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#o;if(!i){this.#o=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;let s=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#o.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#o?.classList.remove("show")},{signal:o})}this.#t?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#e),i.parentNode||e.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)})}}return r})(),Qo=class{#e=null;#t=null;#n=!1;#i=null;#o=null;#s=null;#r=null;#a=null;#c=!1;#l=null;constructor(t){this.#i=t}renderForToolbar(){let t=this.#t=document.createElement("button");return t.className="comment",this.#u(t,!1)}renderForStandalone(){let t=this.#e=document.createElement("button");t.className="annotationCommentButton";let e=this.#i.commentButtonPosition;if(e){let{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;let n=this.#i.commentButtonColor;n&&(i.backgroundColor=n)}return this.#u(t,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;let t=this.#i.commentButtonColor;t&&(this.#e.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;let{x:t,y:e,height:i}=this.#e.getBoundingClientRect(),{x:n,y:s,width:o,height:l}=this.#i.parent.boundingClientRect;return[(t-n)/o,(e+i-s)/l]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#e&&(this.#e.classList.toggle("selected",t),this.#e.ariaExpanded=e)}#u(t,e){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));let i=this.#i._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",Wn,{signal:i}),e&&(t.addEventListener("focusin",s=>{this.#i._focusEventsAllowed=!1,Zt(s)},{capture:!0,signal:i}),t.addEventListener("focusout",s=>{this.#i._focusEventsAllowed=!0,Zt(s)},{capture:!0,signal:i})),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});let n=s=>{s.preventDefault(),t===this.#t?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",n,{capture:!0,signal:i}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(this.#n=!0,n(s))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:i}),t}edit(t){let e=this.commentPopupPositionInLayer,i,n;if(e)[i,n]=e;else{[i,n]=this.#i.commentButtonPosition;let{width:u,height:m,x:f,y:_}=this.#i;i=f+i*u,n=_+n*m}let s=this.#i.parent.boundingClientRect,{x:o,y:l,width:d,height:h}=s;this.#i._uiManager.editComment(this.#i,o+i*d,l+n*h,Ue(J({},t),{parentDimensions:s}))}finish(){this.#t&&(this.#t.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#o}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#s,date:this.#a,deleted:this.isDeleted()}}set data(t){if(t!==this.#r&&(this.#s=null),t===null){this.#r="",this.#c=!0;return}this.#r=t,this.#a=new Date,this.#c=!1}setInitialText(t,e=null){this.#o=t,this.data=t,this.#a=null,this.#s=e}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#r="",this.#s=null,this.#a=null,this.#i=null,this.#n=!1,this.#c=!1}},Oh=class r{#e;#t=!1;#n=null;#i;#o;#s;#r;#a=null;#c;#l=null;#u;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:n=null,onPinching:s=null,onPinchEnd:o=null,signal:l}){this.#e=t,this.#n=i,this.#i=e,this.#o=n,this.#s=s,this.#r=o,this.#u=new AbortController,this.#c=AbortSignal.any([l,this.#u.signal]),t.addEventListener("touchstart",this.#p.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Wr.pixelRatio}#p(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#a)return;let n=this.#a=new AbortController,s=AbortSignal.any([this.#c,n.signal]),o=this.#e,l={capture:!0,signal:s,passive:!1},d=h=>{h.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};o.addEventListener("pointerdown",h=>{h.pointerType==="touch"&&(Zt(h),d(h))},l),o.addEventListener("pointerup",d,l),o.addEventListener("pointercancel",d,l);return}if(!this.#h){this.#h=new AbortController;let n=AbortSignal.any([this.#c,this.#h.signal]),s=this.#e,o={signal:n,capture:!1,passive:!1};s.addEventListener("touchmove",this.#g.bind(this),o);let l=this.#f.bind(this);s.addEventListener("touchend",l,o),s.addEventListener("touchcancel",l,o),o.capture=!0,s.addEventListener("pointerdown",Zt,o),s.addEventListener("pointermove",Zt,o),s.addEventListener("pointercancel",Zt,o),s.addEventListener("pointerup",Zt,o),this.#o?.()}if(Zt(t),t.touches.length!==2||this.#n?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;Zt(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);let{screenX:n,screenY:s}=e,{screenX:o,screenY:l}=i,d=this.#l,{touch0X:h,touch0Y:u,touch1X:m,touch1Y:f}=d,_=m-h,y=f-u,v=o-n,x=l-s,S=Math.hypot(v,x)||1,I=Math.hypot(_,y)||1;if(!this.#t&&Math.abs(I-S)<=r.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=n,d.touch0Y=s,d.touch1X=o,d.touch1Y=l,!this.#t){this.#t=!0;return}let P=[(n+o)/2,(s+l)/2];this.#s?.(P,I,S)}#f(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#r?.()),this.#l&&(Zt(t),this.#l=null,this.#t=!1))}destroy(){this.#u?.abort(),this.#u=null,this.#a?.abort(),this.#a=null}},Dt=class r{#e=null;#t=null;#n=null;#i=null;#o=null;#s=!1;#r=null;#a="";#c=null;#l=null;#u=null;#h=null;#p=null;#g="";#f=!1;#d=null;#m=!1;#_=!1;#v=!1;#b=null;#E=0;#C=0;#x=null;#M=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#y=!1;#k=r._zIndex++;static _borderLineWidth=-1;static _colorManager=new hg;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let t=r.prototype._resizeWithKeyboard,e=Al.TRANSLATE_SMALL,i=Al.TRANSLATE_BIG;return He(this,"_resizerKeyboardManager",new eo([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],r.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;let{rotation:e,rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,n],this.pageTranslation=[s,o];let[l,d]=this.parentDimensions;this.x=t.x/l,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return He(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){let e=new ug({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(r._l10n??=t,r._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),r._borderLineWidth!==-1)return;let i=getComputedStyle(document.documentElement);r._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){At("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#y}set _isDraggable(t){this.#y=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){let[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#k}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#L(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,n){let[s,o]=this.parentDimensions;[i,n]=this.screenToPageTranslation(i,n),this.x=(t+i)/s,this.y=(e+n)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){let[i,n]=this.parentDimensions;this.setAt(t*i,e*n,this.width*i,this.height*n),this._onTranslated()}#I([t,e],i,n){[i,n]=this.screenToPageTranslation(i,n),this.x+=i/t,this.y+=n/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#I(this.parentDimensions,t,e)}translateInPage(t,e){this.#d||=[this.x,this.y,this.width,this.height],this.#I(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#d||=[this.x,this.y,this.width,this.height];let{div:i,parentDimensions:[n,s]}=this;if(this.x+=t/n,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:m,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this,[d,h]=this.getBaseTranslation();o+=d,l+=h;let{style:u}=i;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}get _hasBeenResized(){return!!this.#d&&(this.#d[2]!==this.width||this.#d[3]!==this.height)}getBaseTranslation(){let[t,e]=this.parentDimensions,{_borderLineWidth:i}=r,n=i/t,s=i/e;switch(this.rotation){case 90:return[-n,s];case 180:return[n,s];case 270:return[n,-s];default:return[-n,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){let{div:{style:e},pageDimensions:[i,n]}=this,{x:s,y:o,width:l,height:d}=this;if(l*=i,d*=n,s*=i,o*=n,this._mustFixPosition)switch(t){case 0:s=qi(s,0,i-l),o=qi(o,0,n-d);break;case 90:s=qi(s,0,i-d),o=qi(o,l,n);break;case 180:s=qi(s,l,i),o=qi(o,d,n);break;case 270:s=qi(s,d,i),o=qi(o,0,n-l);break}this.x=s/=i,this.y=o/=n;let[h,u]=this.getBaseTranslation();s+=h,o+=u,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#A(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return r.#A(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return r.#A(t,e,360-this.parentRotation)}#T(t){switch(t){case 90:{let[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){let{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#N(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");let t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(let i of t){let n=document.createElement("div");this.#c.append(n),n.classList.add("resizer",i),n.setAttribute("data-resizer-name",i),n.addEventListener("pointerdown",this.#P.bind(this,i),{signal:e}),n.addEventListener("contextmenu",Wn,{signal:e}),n.tabIndex=-1}this.div.prepend(this.#c)}#P(t,e){e.preventDefault();let{isMac:i}=oi.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#n?.toggle(!1);let n=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];let s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#F.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Zt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Wn,{signal:o}),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let l=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;let h=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=l,this.div.style.cursor=d,this.#B()};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}#O(t,e,i,n){this.width=i,this.height=n,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#u)return;let{savedX:t,savedY:e,savedWidth:i,savedHeight:n}=this.#u;this.#u=null;let s=this.x,o=this.y,l=this.width,d=this.height;s===t&&o===e&&l===i&&d===n||this.addCommands({cmd:this.#O.bind(this,s,o,l,d),undo:this.#O.bind(this,t,e,i,n),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#F(t,e){let[i,n]=this.parentDimensions,s=this.x,o=this.y,l=this.width,d=this.height,h=r.MIN_SIZE/i,u=r.MIN_SIZE/n,m=this.#T(this.rotation),f=(ue,Me)=>[m[0]*ue+m[2]*Me,m[1]*ue+m[3]*Me],_=this.#T(360-this.rotation),y=(ue,Me)=>[_[0]*ue+_[2]*Me,_[1]*ue+_[3]*Me],v,x,S=!1,I=!1;switch(t){case"topLeft":S=!0,v=(ue,Me)=>[0,0],x=(ue,Me)=>[ue,Me];break;case"topMiddle":v=(ue,Me)=>[ue/2,0],x=(ue,Me)=>[ue/2,Me];break;case"topRight":S=!0,v=(ue,Me)=>[ue,0],x=(ue,Me)=>[0,Me];break;case"middleRight":I=!0,v=(ue,Me)=>[ue,Me/2],x=(ue,Me)=>[0,Me/2];break;case"bottomRight":S=!0,v=(ue,Me)=>[ue,Me],x=(ue,Me)=>[0,0];break;case"bottomMiddle":v=(ue,Me)=>[ue/2,Me],x=(ue,Me)=>[ue/2,0];break;case"bottomLeft":S=!0,v=(ue,Me)=>[0,Me],x=(ue,Me)=>[ue,0];break;case"middleLeft":I=!0,v=(ue,Me)=>[0,Me/2],x=(ue,Me)=>[ue,Me/2];break}let P=v(l,d),B=x(l,d),N=f(...B),z=r._round(s+N[0]),j=r._round(o+N[1]),Q=1,ee=1,ae,he;if(e.fromKeyboard)({deltaX:ae,deltaY:he}=e);else{let{screenX:ue,screenY:Me}=e,[vt,dt]=this.#l;[ae,he]=this.screenToPageTranslation(ue-vt,Me-dt),this.#l[0]=ue,this.#l[1]=Me}if([ae,he]=y(ae/i,he/n),S){let ue=Math.hypot(l,d);Q=ee=Math.max(Math.min(Math.hypot(B[0]-P[0]-ae,B[1]-P[1]-he)/ue,1/l,1/d),h/l,u/d)}else I?Q=qi(Math.abs(B[0]-P[0]-ae),h,1)/l:ee=qi(Math.abs(B[1]-P[1]-he),u,1)/d;let ct=r._round(l*Q),Ct=r._round(d*ee);N=f(...x(ct,Ct));let st=z-N[0],kt=j-N[1];this.#d||=[this.x,this.y,this.width,this.height],this.width=ct,this.height=Ct,this.x=st,this.y=kt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}addEditToolbar(){return q(this,null,function*(){if(this._editToolbar||this.#_)return this._editToolbar;this._editToolbar=new og(this),this.div.append(this._editToolbar.render());let{toolbarButtons:t}=this;if(t)for(let[e,i]of t)yield this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar})}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){let e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(bC.initialize(r._l10n),this.#n=new bC(this),this.#e&&(this.#n.data=this.#e,this.#e=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(t){return q(this,null,function*(){yield this.#n?.setGuessedText(t)})}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.canAddComment?this.#i||=new Qo(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#o){this._uiManager.isEditingMode()&&this.#o.classList.remove("hidden");return}this.hasComment&&(this.#o=this.#i.renderForStandalone(),this.div.append(this.#o))}}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#o=null}hideStandaloneCommentButton(){this.#o?.classList.add("hidden")}get comment(){let{data:{richText:t,text:e,date:i,deleted:n}}=this.#i;return{text:e,richText:t,date:i,deleted:n,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Qo(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#i||=new Qo(this),this.#i.setInitialText(t,i),!this.annotationElementId))return;let n=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);n&&this.updateFromAnnotationLayer(n)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}editComment(t){return q(this,null,function*(){this.#i||=new Qo(this),this.#i.edit(t)})}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){let[,,,n]=t.rect,[s]=this.pageDimensions,[o]=this.pageTranslation,l=o+s+1,d=n-100,h=l+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,d,h,n]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#i.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){let t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();let[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);let[n,s]=this.getInitialTranslation();return this.translate(n,s),WC(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#M||=new Oh({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#j.bind(this),onPinching:this.#S.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#j(){this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#S(t,e,i){let s=.7*(i/e)+1-.7;if(s===1)return;let o=this.#T(this.rotation),l=(z,j)=>[o[0]*z+o[2]*j,o[1]*z+o[3]*j],[d,h]=this.parentDimensions,u=this.x,m=this.y,f=this.width,_=this.height,y=r.MIN_SIZE/d,v=r.MIN_SIZE/h;s=Math.max(Math.min(s,1/f,1/_),y/f,v/_);let x=r._round(f*s),S=r._round(_*s);if(x===f&&S===_)return;this.#d||=[u,m,f,_];let I=l(f/2,_/2),P=r._round(u+I[0]),B=r._round(m+I[1]),N=l(x/2,S/2);this.x=P-N[0],this.y=B-N[1],this.width=x,this.height=S,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(t){let{isMac:e}=oi.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#V(t);return}this.#R(t)}#R(t){let{isMac:e}=oi.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#V(t){let{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1,n=new AbortController,s=this._uiManager.combinedSignal(n),o={capture:!0,passive:!1,signal:s},l=h=>{n.abort(),this.#r=null,this.#f=!1,this._uiManager.endDragSession()||this.#R(h),i&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#C=t.clientY,this.#r=t.pointerId,this.#a=t.pointerType,window.addEventListener("pointermove",h=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());let{clientX:u,clientY:m,pointerId:f}=h;if(f!==this.#r){Zt(h);return}let[_,y]=this.screenToPageTranslation(u-this.#E,m-this.#C);this.#E=u,this.#C=m,this._uiManager.dragSelectedEditors(_,y)},o),window.addEventListener("touchmove",Zt,o),window.addEventListener("pointerdown",h=>{h.pointerType===this.#a&&(this.#M||h.isPrimary)&&l(h),Zt(h)},o));let d=h=>{if(!this.#r||this.#r===h.pointerId){l(h);return}Zt(h)};window.addEventListener("pointerup",d,{signal:s}),window.addEventListener("blur",d,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){let n=this.parentScale,[s,o]=this.pageDimensions,[l,d]=this.pageTranslation,h=t/n,u=e/n,m=this.x*s,f=this.y*o,_=this.width*s,y=this.height*o;switch(i){case 0:return[m+h+l,o-f-u-y+d,m+h+_+l,o-f-u+d];case 90:return[m+u+l,o-f+h+d,m+u+y+l,o-f+h+_+d];case 180:return[m-h-_+l,o-f+u+d,m-h+l,o-f+u+y+d];case 270:return[m-u-y+l,o-f-h-_+d,m-u+l,o-f-h+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){let[i,n,s,o]=t,l=s-i,d=o-n;switch(this.rotation){case 0:return[i,e-o,l,d];case 90:return[i,e-n,d,l];case 180:return[s,e-n,l,d];case 270:return[s,e-o,d,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&r._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){let{comment:{text:t,color:e,date:i,opacity:n,deleted:s,richText:o},uid:l,pageIndex:d,creationDate:h,modificationDate:u}=this;return{id:l,pageIndex:d,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:h,modificationDate:i||u,popupRef:!s,color:e,opacity:n}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#_=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#_=!1,!0):!1}isInEditMode(){return this.#_}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:t,left:e,bottom:i,right:n}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return e<o&&n>0&&t<s&&i>0}#H(){if(this.#p||!this.div)return;this.#p=new AbortController;let t=this._uiManager.combinedSignal(this.#p);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static deserialize(t,e,i){return q(this,null,function*(){let n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});n.rotation=t.rotation,n.#e=t.accessibilityData,n._isCopy=t.isCopy||!1;let[s,o]=n.pageDimensions,[l,d,h,u]=n.getRectInCurrentCoords(t.rect,o);return n.x=l/s,n.y=d/o,n.width=h/s,n.height=u/o,n})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#p?.abort(),this.#p=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#L(),this.removeEditToolbar(),this.#x){for(let t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#M?.destroy(),this.#M=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#N(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){let{commentButtonPosition:[t,e]}=this,[i,n,s,o]=this.getPDFRect();return[r._round(i+(s-i)*t),r._round(n+(o-n)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#u={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let e=this.#c.children;if(!this.#t){this.#t=Array.from(e);let o=this.#q.bind(this),l=this.#$.bind(this),d=this._uiManager._signal;for(let h of this.#t){let u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:d}),h.addEventListener("blur",l,{signal:d}),h.addEventListener("focus",this.#Y.bind(this,u),{signal:d}),h.setAttribute("data-l10n-id",r._l10nResizer[u])}}let i=this.#t[0],n=0;for(let o of e){if(o===i)break;n++}let s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==n){if(s<n)for(let l=0;l<n-s;l++)this.#c.append(this.#c.firstElementChild);else if(s>n)for(let l=0;l<s-n;l++)this.#c.firstElementChild.before(this.#c.lastElementChild);let o=0;for(let l of e){let h=this.#t[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",r._l10nResizer[h])}}this.#W(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){r._resizerKeyboardManager.exec(this,t)}#$(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#L()}#Y(t){this.#g=this.#v?t:""}#W(t){if(this.#t)for(let e of this.#t)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#F(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#L(){this.#v=!1,this.#W(-1),this.#B()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(t){this.#m=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#x||=new Map;let{action:i}=t,n=this.#x.get(i);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(i),this.#x.size===0&&(this.#x=null)},r._telemetryTimeout),this.#x.set(i,n);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){let i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){let{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},ug=class extends Dt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},vC=3285377520,zn=4294901760,fr=65535,Fh=class{constructor(t){this.h1=t?t&4294967295:vC,this.h2=t?t&4294967295:vC}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let v=0,x=t.length;v<x;v++){let S=t.charCodeAt(v);S<=255?e[i++]=S:(e[i++]=S>>>8,e[i++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let n=i>>2,s=i-n*4,o=new Uint32Array(e.buffer,0,n),l=0,d=0,h=this.h1,u=this.h2,m=3432918353,f=461845907,_=m&fr,y=f&fr;for(let v=0;v<n;v++)v&1?(l=o[v],l=l*m&zn|l*_&fr,l=l<<15|l>>>17,l=l*f&zn|l*y&fr,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(d=o[v],d=d*m&zn|d*_&fr,d=d<<15|d>>>17,d=d*f&zn|d*y&fr,u^=d,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,s){case 3:l^=e[n*4+2]<<16;case 2:l^=e[n*4+1]<<8;case 1:l^=e[n*4],l=l*m&zn|l*_&fr,l=l<<15|l>>>17,l=l*f&zn|l*y&fr,n&1?h^=l:u^=l}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&zn|t*36045&fr,e=e*4283543511&zn|((e<<16|t>>>16)*2950163797&zn)>>>16,t^=e>>>1,t=t*444984403&zn|t*60499&fr,e=e*3301882366&zn|((e<<16|t>>>16)*3120437893&zn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}},pg=Object.freeze({map:null,hash:"",transfer:void 0}),Tl=class{#e=!1;#t=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){let i=this.#i.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#i.get(t)}remove(t){let e=this.#i.get(t);if(e!==void 0&&(e instanceof Dt&&this.#n.delete(e.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(let i of this.#i.values())if(i instanceof Dt)return;this.onAnnotationEditor(null)}}setValue(t,e){let i=this.#i.get(t),n=!1;if(i!==void 0)for(let[s,o]of Object.entries(e))i[s]!==o&&(n=!0,i[s]=o);else n=!0,this.#i.set(t,e);n&&this.#o(),e instanceof Dt&&((this.#n||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#o(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Lh(this)}get serializable(){if(this.#i.size===0)return pg;let t=new Map,e=new Fh,i=[],n=Object.create(null),s=!1;for(let[o,l]of this.#i){let d=l instanceof Dt?l.serialize(!1,n):l;d&&(t.set(o,d),e.update(`${o}:${JSON.stringify(d)}`),s||=!!d.bitmap)}if(s)for(let o of t.values())o.bitmap&&i.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:pg}get editorStats(){let t=null,e=new Map,i=0,n=0;for(let s of this.#i.values()){if(!(s instanceof Dt)){s.popup&&(s.popup.deleted?n+=1:i+=1);continue}s.isCommentDeleted?n+=1:s.hasEditedComment&&(i+=1);let o=s.telemetryFinalData;if(!o)continue;let{type:l}=o;e.has(l)||e.set(l,Object.getPrototypeOf(s).constructor),t||=Object.create(null);let d=t[l]||=new Map;for(let[h,u]of Object.entries(o)){if(h==="type")continue;let m=d.get(h);m||(m=new Map,d.set(h,m));let f=m.get(u)??0;m.set(u,f+1)}}if((n>0||i>0)&&(t||=Object.create(null),t.comments={deleted:n,edited:i}),!t)return null;for(let[s,o]of e)t[s]=o.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){this.#t=null}updateEditor(t,e){let i=this.#n?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#t)return this.#t;let t=[];if(this.#n)for(let e of this.#n.values())e.serialize()&&t.push(e.annotationElementId);return this.#t={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}},Lh=class extends Tl{#e;constructor(t){super();let{map:e,hash:i,transfer:n}=t.serializable,s=structuredClone(e,n?{transfer:n}:null);this.#e={map:s,hash:i,transfer:n}}get print(){At("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return He(this,"modifiedIds",{ids:new Set,hash:""})}},mg=class{#e=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(let t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(n){return q(this,arguments,function*({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#e.has(t.loadedName))){if(rt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:s,src:o,style:l}=t,d=new FontFace(s,o,l);this.addNativeFontFace(d);try{yield d.load(),this.#e.add(s),i?.(t)}catch{ze(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}At("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(t){return q(this,null,function*(){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){yield this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){let i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{yield i.loaded}catch(n){throw ze(`Failed to load font '${i.family}': '${n}'.`),t.disableFontFace=!0,n}}return}let e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;yield new Promise(i=>{let n=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,n)})}})}get isFontLoadingAPISupported(){let t=!!this._document?.fonts;return He(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return He(this,"isSyncFontLoadingSupported",$i||oi.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(rt(!n.done,"completeRequest() cannot be called twice."),n.done=!0;i.length>0&&i[0].done;){let s=i.shift();setTimeout(s.callback,0)}}let{loadingRequests:i}=this,n={done:!1,complete:e,callback:t};return i.push(n),n}get _loadTestFont(){let t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return He(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(B,N){return B.charCodeAt(N)<<24|B.charCodeAt(N+1)<<16|B.charCodeAt(N+2)<<8|B.charCodeAt(N+3)&255}function n(B,N,z,j){let Q=B.substring(0,N),ee=B.substring(N+z);return Q+j+ee}let s,o,l=this._document.createElement("canvas");l.width=1,l.height=1;let d=l.getContext("2d"),h=0;function u(B,N){if(++h>30){ze("Load test font never loaded."),N();return}if(d.font="30px "+B,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(u.bind(null,B,N))}let m=`lt${Date.now()}${this.loadTestFontId++}`,f=this._loadTestFont;f=n(f,976,m.length,m);let y=16,v=1482184792,x=i(f,y);for(s=0,o=m.length-3;s<o;s+=4)x=x-v+i(m,s)|0;s<m.length&&(x=x-v+i(m+"XXX",s)|0),f=n(f,y,4,R2(x));let S=`url(data:font/opentype;base64,${btoa(f)});`,I=`@font-face {font-family:"${m}";src:${S}}`;this.insertRule(I);let P=this._document.createElement("div");P.style.visibility="hidden",P.style.width=P.style.height="10px",P.style.position="absolute",P.style.top=P.style.left="0px";for(let B of[t.loadedName,m]){let N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=B,P.append(N)}this._document.body.append(P),u(m,()=>{P.remove(),e.complete()})}},fg=class{#e;constructor(t,e=null,i,n){this.compiledGlyphs=Object.create(null),this.#e=t,this._inspectFont=e,i&&Object.assign(this,i),n&&(this.charProcOperatorList=n)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let t=`url(data:${this.mimetype};base64,${VC(this.data)});`,e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let i=this.loadedName+"_path_"+e,n;try{n=t.get(i)}catch(o){ze(`getPathGenerator - ignoring character: "${o}".`)}let s=HC(n?.path);return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=s}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(t){He(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(t){He(this,"bbox",t)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}},yC=(()=>{class r{#e;#t;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){let i=new TextEncoder,n={},s=0;for(let u of r.strings){let m=i.encode(e[u]);n[u]=m,s+=4+m.length}let o=new ArrayBuffer(s),l=new Uint8Array(o),d=new DataView(o),h=0;for(let u of r.strings){let m=n[u],f=m.length;d.setUint32(h,f),l.set(m,h+4),h+=4+f}return rt(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}#i(e){rt(e<r.strings.length,"Invalid string index");let i=0;for(let s=0;s<e;s++)i+=this.#t.getUint32(i)+4;let n=this.#t.getUint32(i);return this.#n.decode(new Uint8Array(this.#e,i+4,n))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}return r})(),xC=(()=>{class r{#e;#t;#n;static strings=["css","loadedName","baseFontName","src"];static write(e){let i=new TextEncoder,n={},s=0;for(let _ of r.strings){let y=i.encode(e[_]);n[_]=y,s+=4+y.length}s+=4;let o,l,d=1+s;e.style&&(o=i.encode(e.style.style),l=i.encode(e.style.weight),d+=4+o.length+4+l.length);let h=new ArrayBuffer(d),u=new Uint8Array(h),m=new DataView(h),f=0;m.setUint8(f++,e.guessFallback?1:0),m.setUint32(f,0),f+=4,s=0;for(let _ of r.strings){let y=n[_],v=y.length;s+=4+v,m.setUint32(f,v),u.set(y,f+4),f+=4+v}return m.setUint32(f-s-4,s),e.style&&(m.setUint32(f,o.length),u.set(o,f+4),f+=4+o.length,m.setUint32(f,l.length),u.set(l,f+4),f+=4+l.length),rt(f<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(f)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#i(e){rt(e<r.strings.length,"Invalid string index");let i=5;for(let s=0;s<e;s++)i+=this.#t.getUint32(i)+4;let n=this.#t.getUint32(i);return this.#n.decode(new Uint8Array(this.#e,i+4,n))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);let i=this.#t.getUint32(e),n=this.#n.decode(new Uint8Array(this.#e,e+4,i));e+=4+i;let s=this.#t.getUint32(e),o=this.#n.decode(new Uint8Array(this.#e,e+4,s));return{style:n,weight:o}}}return r})(),q2=(()=>{class r{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#n=this.#t+1+2*4;static#i=this.#n+1+8*6;static#o=this.#i+1+2*3;#s;#r;#a;constructor({data:e,extra:i}){this.#s=e,this.#r=new TextDecoder,this.#a=new DataView(this.#s),i&&Object.assign(this,i)}#c(e){rt(e<r.bools.length,"Invalid boolean index");let i=Math.floor(e/4),n=e*2%8,s=this.#a.getUint8(i)>>n&3;return s===0?void 0:s===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return rt(e<r.numbers.length,"Invalid number index"),this.#a.getFloat64(r.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=r.#t;if(this.#a.getUint8(e)===0)return;e+=1;let n=[];for(let s=0;s<4;s++)n.push(this.#a.getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=r.#n;if(this.#a.getUint8(e)===0)return;e+=1;let n=[];for(let s=0;s<6;s++)n.push(this.#a.getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=r.#i;if(this.#a.getUint8(e)===0)return;e+=1;let n=[];for(let s=0;s<3;s++)n.push(this.#a.getInt16(e,!0)),e+=2;return n}#u(e){rt(e<r.strings.length,"Invalid string index");let i=r.#o+4;for(let o=0;o<e;o++)i+=this.#a.getUint32(i)+4;let n=this.#a.getUint32(i),s=new Uint8Array(n);return s.set(new Uint8Array(this.#s,i+4,n)),this.#r.decode(s)}get fallbackName(){return this.#u(0)}get loadedName(){return this.#u(1)}get mimetype(){return this.#u(2)}get name(){return this.#u(3)}get data(){let e=r.#o,i=this.#a.getUint32(e);e+=4+i;let n=this.#a.getUint32(e);e+=4+n;let s=this.#a.getUint32(e);e+=4+s;let o=this.#a.getUint32(e);if(o!==0)return new Uint8Array(this.#s,e+4,o)}clearData(){let e=r.#o,i=this.#a.getUint32(e);e+=4+i;let n=this.#a.getUint32(e);e+=4+n;let s=this.#a.getUint32(e);e+=4+s;let o=this.#a.getUint32(e);new Uint8Array(this.#s,e+4,o).fill(0),this.#a.setUint32(e,0)}get cssFontInfo(){let e=r.#o,i=this.#a.getUint32(e);e+=4+i;let n=this.#a.getUint32(e);e+=4+n;let s=this.#a.getUint32(e);if(s===0)return null;let o=new Uint8Array(s);return o.set(new Uint8Array(this.#s,e+4,s)),new yC(o.buffer)}get systemFontInfo(){let e=r.#o,i=this.#a.getUint32(e);e+=4+i;let n=this.#a.getUint32(e);if(n===0)return null;let s=new Uint8Array(n);return s.set(new Uint8Array(this.#s,e+4,n)),new xC(s.buffer)}static write(e){let i=e.systemFontInfo?xC.write(e.systemFontInfo):null,n=e.cssFontInfo?yC.write(e.cssFontInfo):null,s=new TextEncoder,o={},l=0;for(let x of r.strings)o[x]=s.encode(e[x]),l+=4+o[x].length;let d=r.#o+4+l+4+(i?i.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(d),u=new Uint8Array(h),m=new DataView(h),f=0,_=r.bools.length,y=0,v=0;for(let x=0;x<_;x++){let S=e[r.bools[x]];y|=(S===void 0?0:S?2:1)<<v,v+=2,(v===8||x===_-1)&&(m.setUint8(f++,y),y=0,v=0)}rt(f===r.#e,"FontInfo.write: Boolean properties offset mismatch");for(let x of r.numbers)m.setFloat64(f,e[x]),f+=8;if(rt(f===r.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){m.setUint8(f++,4);for(let x of e.bbox)m.setInt16(f,x,!0),f+=2}else m.setUint8(f++,0),f+=2*4;if(rt(f===r.#n,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){m.setUint8(f++,6);for(let x of e.fontMatrix)m.setFloat64(f,x,!0),f+=8}else m.setUint8(f++,0),f+=8*6;if(rt(f===r.#i,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){m.setUint8(f++,1);for(let x of e.defaultVMetrics)m.setInt16(f,x,!0),f+=2}else m.setUint8(f++,0),f+=3*2;rt(f===r.#o,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(r.#o,0),f+=4;for(let x of r.strings){let S=o[x],I=S.length;m.setUint32(f,I),u.set(S,f+4),f+=4+I}if(m.setUint32(r.#o,f-r.#o-4),!i)m.setUint32(f,0),f+=4;else{let x=i.byteLength;m.setUint32(f,x),rt(f+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(i),f+4),f+=4+x}if(!n)m.setUint32(f,0),f+=4;else{let x=n.byteLength;m.setUint32(f,x),rt(f+4+x<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(n),f+4),f+=4+x}return e.data===void 0?(m.setUint32(f,0),f+=4):(m.setUint32(f,e.data.length),u.set(e.data,f+4),f+=4+e.data.length),rt(f<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(f)}}return r})(),gg=class r{static#e=0;static#t=1;static#n=2;static#i=3;static#o=4;static#s=8;static#r=12;static#a=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,i=null,n=[],s=[],o=[],l=[],d=null,h=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,i=t[2],o=t[3],e===1?n.push(...t[4],...t[5]):n.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],n=t[2],s=t[3],l=t[4]||[],i=t[6],h=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}let u=Math.floor(n.length/2),m=Math.floor(s.length/3),f=o.length,_=l.length,y=0;for(let N of l)y+=1,y=Math.ceil(y/4)*4,y+=4+N.coords.length*4,y+=4+N.colors.length*4,N.verticesPerRow!==void 0&&(y+=4);let v=20+u*8+m*3+f*8+(i?16:0)+(h?3:0)+y,x=new ArrayBuffer(v),S=new DataView(x),I=new Uint8Array(x);S.setUint8(r.#e,e),S.setUint8(r.#t,i?1:0),S.setUint8(r.#n,h?1:0),S.setUint8(r.#i,d),S.setUint32(r.#o,u,!0),S.setUint32(r.#s,m,!0),S.setUint32(r.#r,f,!0),S.setUint32(r.#a,_,!0);let P=20;new Float32Array(x,P,u*2).set(n),P+=u*8,I.set(s,P),P+=m*3;for(let[N,z]of o)S.setFloat32(P,N,!0),P+=4,S.setUint32(P,parseInt(z.slice(1),16),!0),P+=4;if(i)for(let N of i)S.setFloat32(P,N,!0),P+=4;h&&(I.set(h,P),P+=3);for(let N=0;N<l.length;N++){let z=l[N];S.setUint8(P,z.type),P+=1,P=Math.ceil(P/4)*4,S.setUint32(P,z.coords.length,!0),P+=4,new Int32Array(x,P,z.coords.length).set(z.coords),P+=z.coords.length*4,S.setUint32(P,z.colors.length,!0),P+=4,new Int32Array(x,P,z.colors.length).set(z.colors),P+=z.colors.length*4,z.verticesPerRow!==void 0&&(S.setUint32(P,z.verticesPerRow,!0),P+=4)}return x}getIR(){let t=this.view,e=this.data[r.#e],i=!!this.data[r.#t],n=!!this.data[r.#n],s=t.getUint32(r.#o,!0),o=t.getUint32(r.#s,!0),l=t.getUint32(r.#r,!0),d=t.getUint32(r.#a,!0),h=20,u=new Float32Array(this.buffer,h,s*2);h+=s*8;let m=new Uint8Array(this.buffer,h,o*3);h+=o*3;let f=[];for(let x=0;x<l;++x){let S=t.getFloat32(h,!0);h+=4;let I=t.getUint32(h,!0);h+=4,f.push([S,`#${I.toString(16).padStart(6,"0")}`])}let _=null;if(i){_=[];for(let x=0;x<4;++x)_.push(t.getFloat32(h,!0)),h+=4}let y=null;n&&(y=new Uint8Array(this.buffer,h,3),h+=3);let v=[];for(let x=0;x<d;++x){let S=t.getUint8(h);h+=1,h=Math.ceil(h/4)*4;let I=t.getUint32(h,!0);h+=4;let P=new Int32Array(this.buffer,h,I);h+=I*4;let B=t.getUint32(h,!0);h+=4;let N=new Int32Array(this.buffer,h,B);h+=B*4;let z={type:S,coords:P,colors:N};S===eg.LATTICE&&(z.verticesPerRow=t.getUint32(h,!0),h+=4),v.push(z)}if(e===1)return["RadialAxial","axial",_,f,Array.from(u.slice(0,2)),Array.from(u.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",_,f,[u[0],u[1]],[u[3],u[4]],u[2],u[5]];if(e===3){let x=this.data[r.#i],S=null;if(u.length>0){let I=u[0],P=u[0],B=u[1],N=u[1];for(let z=0;z<u.length;z+=2){let j=u[z],Q=u[z+1];I=I>j?j:I,B=B>Q?Q:B,P=P<j?j:P,N=N<Q?Q:N}S=[I,B,P,N]}return["Mesh",x,u,m,v,S,_,y]}throw new Error(`Unsupported pattern kind: ${e}`)}},_g=class{static write(t){let e,i;return oi.isFloat16ArraySupported?(i=new ArrayBuffer(t.length*2),e=new Float16Array(i)):(i=new ArrayBuffer(t.length*4),e=new Float32Array(i)),e.set(t),i}#e;constructor(t){this.#e=t}get path(){return oi.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}};function Y2(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if($i)return r;let t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function X2(r){if($i&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Vl(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function yh(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}var bg=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,K2=r=>typeof r=="object"&&typeof r?.name=="string",Z2=B2.bind(null,bg,K2),vg=class{#e=new Map;#t=Promise.resolve();postMessage(t,e){let i={data:structuredClone(t,e?{transfer:e}:null)};this.#t.then(()=>{for(let[n]of this.#e)n.call(this,i)})}addEventListener(t,e,i=null){let n=null;if(i?.signal instanceof AbortSignal){let{signal:s}=i;if(s.aborted){ze("LoopbackPort - cannot use an `aborted` signal.");return}let o=()=>this.removeEventListener(t,e);n=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}this.#e.set(e,n)}removeEventListener(t,e){this.#e.get(e)?.(),this.#e.delete(e)}terminate(){for(let[,t]of this.#e)t?.();this.#e.clear()}},xh={DATA:1,ERROR:2},di={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wC(){}function ln(r){if(r instanceof gr||r instanceof Cl||r instanceof Dh||r instanceof ta||r instanceof vl)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||At('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new gr(r.message);case"InvalidPDFException":return new Cl(r.message);case"PasswordException":return new Dh(r.message,r.code);case"ResponseException":return new ta(r.message,r.status,r.missing);case"UnknownErrorException":return new vl(r.message,r.details)}return new vl(r.message,r.toString())}var Qs=class{#e=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){let i=t.callbackId,n=this.callbackCapabilities[i];if(!n)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===xh.DATA)n.resolve(t.data);else if(t.callback===xh.ERROR)n.reject(ln(t.reason));else throw new Error("Unexpected callback case");return}let e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){let i=this.sourceName,n=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(o){s.postMessage({sourceName:i,targetName:n,callback:xh.DATA,callbackId:t.callbackId,data:o})},function(o){s.postMessage({sourceName:i,targetName:n,callback:xh.ERROR,callbackId:t.callbackId,reason:ln(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){let i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){let n=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[n]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},i)}catch(o){s.reject(o)}return s.promise}sendWithStream(t,e,i,n){let s=this.streamId++,o=this.sourceName,l=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{let u=Promise.withResolvers();return this.streamControllers[s]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:o,targetName:l,action:t,streamId:s,data:e,desiredSize:h.desiredSize},n),u.promise},pull:h=>{let u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,d.postMessage({sourceName:o,targetName:l,stream:di.PULL,streamId:s,desiredSize:h.desiredSize}),u.promise},cancel:h=>{rt(h instanceof Error,"cancel must have a valid reason");let u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,d.postMessage({sourceName:o,targetName:l,stream:di.CANCEL,streamId:s,reason:ln(h)}),u.promise}},i)}#n(t){let e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,o=this,l=this.actionHandler[t.action],d={enqueue(h,u=1,m){if(this.isCancelled)return;let f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:n,stream:di.ENQUEUE,streamId:e,chunk:h},m)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:di.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){rt(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:n,stream:di.ERROR,streamId:e,reason:ln(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(l,t.data,d).then(function(){s.postMessage({sourceName:i,targetName:n,stream:di.START_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:i,targetName:n,stream:di.START_COMPLETE,streamId:e,reason:ln(h)})})}#i(t){let e=t.streamId,i=this.sourceName,n=t.sourceName,s=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case di.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(ln(t.reason));break;case di.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(ln(t.reason));break;case di.PULL:if(!l){s.postMessage({sourceName:i,targetName:n,stream:di.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||wC).then(function(){s.postMessage({sourceName:i,targetName:n,stream:di.PULL_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:i,targetName:n,stream:di.PULL_COMPLETE,streamId:e,reason:ln(h)})});break;case di.ENQUEUE:if(rt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case di.CLOSE:if(rt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#o(o,e);break;case di.ERROR:rt(o,"error should have stream controller"),o.controller.error(ln(t.reason)),this.#o(o,e);break;case di.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(ln(t.reason)),this.#o(o,e);break;case di.CANCEL:if(!l)break;let d=ln(t.reason);Promise.try(l.onCancel||wC,d).then(function(){s.postMessage({sourceName:i,targetName:n,stream:di.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){s.postMessage({sourceName:i,targetName:n,stream:di.CANCEL_COMPLETE,streamId:e,reason:ln(h)})}),l.sinkCapability.reject(d),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}#o(t,e){return q(this,null,function*(){yield Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]})}destroy(){this.#e?.abort(),this.#e=null}},Nh=class{#e=!1;constructor({enableHWA:t=!1}){this.#e=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");let i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){At("Abstract method `_createCanvas` called.")}},yg=class extends Nh{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){let i=this._document.createElement("canvas");return i.width=t,i.height=e,i}},Bh=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}fetch(e){return q(this,arguments,function*({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");let i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})})}_fetch(t){return q(this,null,function*(){At("Abstract method `_fetch` called.")})}},Vh=class extends Bh{_fetch(t){return q(this,null,function*(){let e=yield zl(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Vl(e)})}},zh=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,n,s){return"none"}destroy(t=!1){}},xg=class extends zh{#e;#t;#n;#i;#o;#s;#r=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#i=t,this.#o=e}get#a(){return this.#t||=new Map}get#c(){return this.#s||=new Map}get#l(){if(!this.#n){let t=this.#o.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;let i=this.#o.createElementNS(zr,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#o.createElementNS(zr,"defs"),t.append(i),i.append(this.#n),this.#o.body.append(t)}return this.#n}#u(t){if(t.length===1){let d=t[0],h=new Array(256);for(let m=0;m<256;m++)h[m]=d[m]/255;let u=h.join(",");return[u,u,u]}let[e,i,n]=t,s=new Array(256),o=new Array(256),l=new Array(256);for(let d=0;d<256;d++)s[d]=e[d]/255,o[d]=i[d]/255,l[d]=n[d]/255;return[s.join(","),o.join(","),l.join(",")]}#h(t){if(this.#e===void 0){this.#e="";let e=this.#o.URL;e!==this.#o.baseURI&&(hu(e)?ze('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=LC(e,""))}return`url(${this.#e}#${t})`}addFilter(t){if(!t)return"none";let e=this.#a.get(t);if(e)return e;let[i,n,s]=this.#u(t),o=t.length===1?i:`${i}${n}${s}`;if(e=this.#a.get(o),e)return this.#a.set(t,e),e;let l=`g_${this.#i}_transfer_map_${this.#r++}`,d=this.#h(l);this.#a.set(t,d),this.#a.set(o,d);let h=this.#f(l);return this.#m(i,n,s,h),d}addHCMFilter(t,e){let i=`${t}-${e}`,n="base",s=this.#c.get(n);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#c.set(n,s)),!t||!e))return s.url;let o=this.#v(t);t=de.makeHexColor(...o);let l=this.#v(e);if(e=de.makeHexColor(...l),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return s.url;let d=new Array(256);for(let _=0;_<=255;_++){let y=_/255;d[_]=y<=.03928?y/12.92:((y+.055)/1.055)**2.4}let h=d.join(","),u=`g_${this.#i}_hcm_filter`,m=s.filter=this.#f(u);this.#m(h,h,h,m),this.#g(m);let f=(_,y)=>{let v=o[_]/255,x=l[_]/255,S=new Array(y+1);for(let I=0;I<=y;I++)S[I]=v+I/y*(x-v);return S.join(",")};return this.#m(f(0,5),f(1,5),f(2,5),m),s.url=this.#h(u),s.url}addAlphaFilter(t){let e=this.#a.get(t);if(e)return e;let[i]=this.#u([t]),n=`alpha_${i}`;if(e=this.#a.get(n),e)return this.#a.set(t,e),e;let s=`g_${this.#i}_alpha_map_${this.#r++}`,o=this.#h(s);this.#a.set(t,o),this.#a.set(n,o);let l=this.#f(s);return this.#_(i,l),o}addLuminosityFilter(t){let e=this.#a.get(t||"luminosity");if(e)return e;let i,n;if(t?([i]=this.#u([t]),n=`luminosity_${i}`):n="luminosity",e=this.#a.get(n),e)return this.#a.set(t,e),e;let s=`g_${this.#i}_luminosity_map_${this.#r++}`,o=this.#h(s);this.#a.set(t,o),this.#a.set(n,o);let l=this.#f(s);return this.#p(l),t&&this.#_(i,l),o}addHighlightHCMFilter(t,e,i,n,s){let o=`${e}-${i}-${n}-${s}`,l=this.#c.get(t);if(l?.key===o||(l?(l.filter?.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},this.#c.set(t,l)),!e||!i))return l.url;let[d,h]=[e,i].map(this.#v.bind(this)),u=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[f,_]=[n,s].map(this.#v.bind(this));m<u&&([u,m,f,_]=[m,u,_,f]),this.#l.style.color="";let y=(S,I,P)=>{let B=new Array(256),N=(m-u)/P,z=S/255,j=(I-S)/(255*P),Q=0;for(let ee=0;ee<=P;ee++){let ae=Math.round(u+ee*N),he=z+ee*j;for(let ct=Q;ct<=ae;ct++)B[ct]=he;Q=ae+1}for(let ee=Q;ee<256;ee++)B[ee]=B[Q-1];return B.join(",")},v=`g_${this.#i}_hcm_${t}_filter`,x=l.filter=this.#f(v);return this.#g(x),this.#m(y(f[0],_[0],5),y(f[1],_[1],5),y(f[2],_[2],5),x),l.url=this.#h(v),l.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#r=0)}#p(t){let e=this.#o.createElementNS(zr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){let e=this.#o.createElementNS(zr,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#f(t){let e=this.#o.createElementNS(zr,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#d(t,e,i){let n=this.#o.createElementNS(zr,e);n.setAttribute("type","discrete"),n.setAttribute("tableValues",i),t.append(n)}#m(t,e,i,n){let s=this.#o.createElementNS(zr,"feComponentTransfer");n.append(s),this.#d(s,"feFuncR",t),this.#d(s,"feFuncG",e),this.#d(s,"feFuncB",i)}#_(t,e){let i=this.#o.createElementNS(zr,"feComponentTransfer");e.append(i),this.#d(i,"feFuncA",t)}#v(t){return this.#l.style.color=t,Hl(getComputedStyle(this.#l).getPropertyValue("color"))}},Hh=class{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return q(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");let i=`${this.baseUrl}${t}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load font data at: ${i}`)})})}_fetch(t){return q(this,null,function*(){At("Abstract method `_fetch` called.")})}},Wh=class extends Hh{_fetch(t){return q(this,null,function*(){let e=yield zl(t,"arraybuffer");return new Uint8Array(e)})}},Uh=class{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return q(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");let i=`${this.baseUrl}${t}`;return this._fetch(i).catch(n=>{throw new Error(`Unable to load wasm data at: ${i}`)})})}_fetch(t){return q(this,null,function*(){At("Abstract method `_fetch` called.")})}},jh=class extends Uh{_fetch(t){return q(this,null,function*(){let e=yield zl(t,"arraybuffer");return new Uint8Array(e)})}};$i&&ze("Please use the `legacy` build in Node.js environments.");function R_(r){return q(this,null,function*(){let e=yield process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)})}var wg=class extends zh{},Cg=class extends Nh{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}},kg=class extends Bh{_fetch(t){return q(this,null,function*(){return R_(t)})}},Eg=class extends Hh{_fetch(t){return q(this,null,function*(){return R_(t)})}},Sg=class extends Uh{_fetch(t){return q(this,null,function*(){return R_(t)})}},Yo="__forcedDependency",{floor:CC,ceil:kC}=Math;function wh(r,t,e,i,n,s){r[t*4+0]=Math.min(r[t*4+0],e),r[t*4+1]=Math.min(r[t*4+1],i),r[t*4+2]=Math.max(r[t*4+2],n),r[t*4+3]=Math.max(r[t*4+3],s)}var Mg=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0],Ag=class{#e;#t;constructor(t,e){this.#e=t,this.#t=e}get length(){return this.#e.length}isEmpty(t){return this.#e[t]===Mg}minX(t){return this.#t[t*4+0]/256}minY(t){return this.#t[t*4+1]/256}maxX(t){return(this.#t[t*4+2]+1)/256}maxY(t){return(this.#t[t*4+3]+1)/256}},Ch=(r,t)=>{if(!r)return;let e=r.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},r.set(t,e)),e},Tg=class{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[Yo]:[]};#n=new Map;#i=[];#o=[];#s=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#a=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#u=new Map;#h=new Map;#p;#g;#f;#d;#m;constructor(t,e,i=!1){this.#p=t.width,this.#g=t.height,this.#_(e),i&&(this.#m=new Map)}growOperationsCount(t){t>=this.#d.length&&this.#_(t,this.#d)}#_(t,e){let i=new ArrayBuffer(t*4);this.#f=new Uint8ClampedArray(i),this.#d=new Uint32Array(i),e&&e.length>0?(this.#d.set(e),this.#d.fill(Mg,e.length)):this.#d.fill(Mg)}save(t){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[Yo]:{__proto__:this.#t[Yo]}},this.#r={__proto__:this.#r},this.#i.push(t),this}restore(t){let e=Object.getPrototypeOf(this.#e);if(e===null)return this;this.#e=e,this.#t=Object.getPrototypeOf(this.#t),this.#r=Object.getPrototypeOf(this.#r);let i=this.#i.pop();return i!==void 0&&(Ch(this.#m,t)?.dependencies.add(i),this.#d[t]=this.#d[i]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){let e=this.#i.pop();return e!==void 0&&(Ch(this.#m,t)?.dependencies.add(e),this.#d[t]=this.#d[e]),this}beginMarkedContent(t){return this.#o.push(t),this}endMarkedContent(t){let e=this.#o.pop();return e!==void 0&&(Ch(this.#m,t)?.dependencies.add(e),this.#d[t]=this.#d[e]),this}pushBaseTransform(t){return this.#s.push(de.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,e){return this.#e[t]=e,this}recordIncrementalData(t,e){return this.#t[t].push(e),this}resetIncrementalData(t,e){return this.#t[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#e[t]=this.#n.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Yo,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(let e of t)e in this.#e&&this.recordFutureForcedDependency(e,this.#e[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(let t of this.#l)this.recordFutureForcedDependency(Yo,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#a[0]=1/0,this.#a[1]=1/0,this.#a[2]=-1/0,this.#a[3]=-1/0),this}recordClipBox(t,e,i,n,s,o){let l=de.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];de.axialAlignedBoundingBox([i,s,n,o],l,d);let h=de.intersect(this.#r,d);return h?(this.#r[0]=h[0],this.#r[1]=h[1],this.#r[2]=h[2],this.#r[3]=h[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(t,e,i,n,s,o){let l=this.#r;if(l[0]===1/0)return this;let d=de.multiplyByDOMMatrix(this.#s.at(-1),e.getTransform());if(l[0]===-1/0)return de.axialAlignedBoundingBox([i,s,n,o],d,this.#a),this;let h=[1/0,1/0,-1/0,-1/0];return de.axialAlignedBoundingBox([i,s,n,o],d,h),this.#a[0]=Math.min(this.#a[0],Math.max(h[0],l[0])),this.#a[1]=Math.min(this.#a[1],Math.max(h[1],l[1])),this.#a[2]=Math.max(this.#a[2],Math.min(h[2],l[2])),this.#a[3]=Math.max(this.#a[3],Math.min(h[3],l[3])),this}recordCharacterBBox(t,e,i,n=1,s=0,o=0,l){let d=i.bbox,h,u;if(d&&(h=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(i),h!==!1&&(u=[0,0,0,0],de.axialAlignedBoundingBox(d,i.fontMatrix,u),(n!==1||s!==0||o!==0)&&de.scaleMinMax([n,0,0,-n,s,o],u),h)))return this.recordBBox(t,e,u[0],u[2],u[1],u[3]);if(!l)return this.recordFullPageBBox(t);let m=l();return d&&u&&h===void 0&&(h=u[0]<=s-m.actualBoundingBoxLeft&&u[2]>=s+m.actualBoundingBoxRight&&u[1]<=o-m.actualBoundingBoxAscent&&u[3]>=o+m.actualBoundingBoxDescent,this.#h.set(i,h),h)?this.recordBBox(t,e,u[0],u[2],u[1],u[3]):this.recordBBox(t,e,s-m.actualBoundingBoxLeft,s+m.actualBoundingBoxRight,o-m.actualBoundingBoxAscent,o+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#a[0]=Math.max(0,this.#r[0]),this.#a[1]=Math.max(0,this.#r[1]),this.#a[2]=Math.min(this.#p,this.#r[2]),this.#a[3]=Math.min(this.#g,this.#r[3]),this}getSimpleIndex(t){return this.#e[t]}recordDependencies(t,e){let i=this.#l,n=this.#e,s=this.#t;for(let o of e)o in this.#e?i.add(n[o]):o in s&&s[o].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#l.add(this.#n.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Yo]),this.#m){let i=Ch(this.#m,t),{dependencies:n}=i;this.#l.forEach(n.add,n),this.#i.forEach(n.add,n),this.#o.forEach(n.add,n),n.delete(t),i.isRenderingOperation=!0}if(this.#c===t){let i=CC(this.#a[0]*256/this.#p),n=CC(this.#a[1]*256/this.#g),s=kC(this.#a[2]*256/this.#p),o=kC(this.#a[3]*256/this.#g);wh(this.#f,t,i,n,s,o);for(let l of this.#l)l!==t&&wh(this.#f,l,i,n,s,o);for(let l of this.#i)l!==t&&wh(this.#f,l,i,n,s,o);for(let l of this.#o)l!==t&&wh(this.#f,l,i,n,s,o);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){let i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(let n of i)this.recordIncrementalData("sameLineText",n);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#r[0]=Math.max(this.#r[0],this.#a[0]),this.#r[1]=Math.max(this.#r[1],this.#a[1]),this.#r[2]=Math.min(this.#r[2],this.#a[2]),this.#r[3]=Math.min(this.#r[3],this.#a[3]),e||this.#l.clear()),this}_takePendingDependencies(){let t=this.#l;return this.#l=new Set,t}_extractOperation(t){let e=this.#u.get(t);return this.#u.delete(t),e}_pushPendingDependencies(t){for(let e of t)this.#l.add(e)}take(){return this.#h.clear(),new Ag(this.#d,this.#f)}takeDebugMetadata(){return this.#m}},Gh=class r{#e;#t;#n;#i=0;#o=0;constructor(t,e,i){if(t instanceof r&&t.#n===!!i)return t;this.#e=t,this.#t=e,this.#n=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#o++,this.#e.save(this.#t),this}restore(t){return this.#o>0&&(this.#e.restore(this.#t),this.#o--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#e.pushBaseTransform(t),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(t,e){return this.#e.recordSimpleData(t,this.#t),this}recordIncrementalData(t,e){return this.#e.recordIncrementalData(t,this.#t),this}resetIncrementalData(t,e){return this.#e.resetIncrementalData(t,this.#t),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#e.recordSimpleDataFromNamed(t,e,this.#t),this}recordFutureForcedDependency(t,e){return this.#e.recordFutureForcedDependency(t,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#e.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#e.resetBBox(this.#t),this}recordClipBox(t,e,i,n,s,o){return this.#n||this.#e.recordClipBox(this.#t,e,i,n,s,o),this}recordBBox(t,e,i,n,s,o){return this.#n||this.#e.recordBBox(this.#t,e,i,n,s,o),this}recordCharacterBBox(t,e,i,n,s,o,l){return this.#n||this.#e.recordCharacterBBox(this.#t,e,i,n,s,o,l),this}recordFullPageBBox(t){return this.#n||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(t){return this.#e.getSimpleIndex(t)}recordDependencies(t,e){return this.#e.recordDependencies(this.#t,e),this}recordNamedDependency(t,e){return this.#e.recordNamedDependency(this.#t,e),this}recordOperation(t){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(t){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}},Hn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ti={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ig(r,t){if(!t)return;let e=t[2]-t[0],i=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,i),r.clip(n)}var Il=class{isModifyingCurrentTransform(){return!1}getPattern(){At("Abstract method `getPattern` called.")}},Dg=class extends Il{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let i,n=this._p0,s=this._p1;if(e&&(n=n.slice(),s=s.slice(),de.applyTransform(n,e),de.applyTransform(s,e)),this._type==="axial")i=t.createLinearGradient(n[0],n[1],s[0],s[1]);else if(this._type==="radial"){let o=this._r0,l=this._r1;if(e){let d=new Float32Array(2);de.singularValueDecompose2dScale(e,d),o*=d[0],l*=d[0]}i=t.createRadialGradient(n[0],n[1],o,s[0],s[1],l)}for(let o of this._colorStops)i.addColorStop(o[0],o[1]);return i}getPattern(t,e,i,n){let s;if(n===Ti.STROKE||n===Ti.FILL){if(this.isOriginBased()){let f=de.transform(i,e.baseTransform);this.matrix&&(f=de.transform(f,this.matrix));let _=.001,y=Math.hypot(f[0],f[1]),v=Math.hypot(f[2],f[3]),x=(f[0]*f[2]+f[1]*f[3])/(y*v);if(Math.abs(x)<_)if(this.isRadial()){if(Math.abs(y-v)<_)return this._createGradient(t,f)}else return this._createGradient(t,f)}let o=e.current.getClippedPathBoundingBox(n,Gt(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,d=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",l,d),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),i=de.transform(i,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),Ig(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=t.createPattern(h.canvas,"no-repeat");let m=new DOMMatrix(i);s.setTransform(m)}else Ig(t,this._bbox),s=this._createGradient(t);return s}};function Xf(r,t,e,i,n,s,o,l){let d=t.coords,h=t.colors,u=r.data,m=r.width*4,f;d[e+1]>d[i+1]&&(f=e,e=i,i=f,f=s,s=o,o=f),d[i+1]>d[n+1]&&(f=i,i=n,n=f,f=o,o=l,l=f),d[e+1]>d[i+1]&&(f=e,e=i,i=f,f=s,s=o,o=f);let _=(d[e]+t.offsetX)*t.scaleX,y=(d[e+1]+t.offsetY)*t.scaleY,v=(d[i]+t.offsetX)*t.scaleX,x=(d[i+1]+t.offsetY)*t.scaleY,S=(d[n]+t.offsetX)*t.scaleX,I=(d[n+1]+t.offsetY)*t.scaleY;if(y>=I)return;let P=h[s],B=h[s+1],N=h[s+2],z=h[o],j=h[o+1],Q=h[o+2],ee=h[l],ae=h[l+1],he=h[l+2],ct=Math.round(y),Ct=Math.round(I),st,kt,ue,Me,vt,dt,tr,qt;for(let Pt=ct;Pt<=Ct;Pt++){if(Pt<x){let Tt=Pt<y?0:(y-Pt)/(y-x);st=_-(_-v)*Tt,kt=P-(P-z)*Tt,ue=B-(B-j)*Tt,Me=N-(N-Q)*Tt}else{let Tt;Pt>I?Tt=1:x===I?Tt=0:Tt=(x-Pt)/(x-I),st=v-(v-S)*Tt,kt=z-(z-ee)*Tt,ue=j-(j-ae)*Tt,Me=Q-(Q-he)*Tt}let ut;Pt<y?ut=0:Pt>I?ut=1:ut=(y-Pt)/(y-I),vt=_-(_-S)*ut,dt=P-(P-ee)*ut,tr=B-(B-ae)*ut,qt=N-(N-he)*ut;let Xi=Math.round(Math.min(st,vt)),jn=Math.round(Math.max(st,vt)),Ki=m*Pt+Xi*4;for(let Tt=Xi;Tt<=jn;Tt++)ut=(st-Tt)/(st-vt),ut<0?ut=0:ut>1&&(ut=1),u[Ki++]=kt-(kt-dt)*ut|0,u[Ki++]=ue-(ue-tr)*ut|0,u[Ki++]=Me-(Me-qt)*ut|0,u[Ki++]=255}}function Q2(r,t,e){let i=t.coords,n=t.colors,s,o;switch(t.type){case eg.LATTICE:let l=t.verticesPerRow,d=Math.floor(i.length/l)-1,h=l-1;for(s=0;s<d;s++){let u=s*l;for(let m=0;m<h;m++,u++)Xf(r,e,i[u],i[u+1],i[u+l],n[u],n[u+1],n[u+l]),Xf(r,e,i[u+l+1],i[u+1],i[u+l],n[u+l+1],n[u+1],n[u+l])}break;case eg.TRIANGLES:for(s=0,o=i.length;s<o;s+=3)Xf(r,e,i[s],i[s+1],i[s+2],n[s],n[s+1],n[s+2]);break;default:throw new Error("illegal figure")}}var Pg=class extends Il{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){let l=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),_=h/m,y=u/f,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-d,scaleX:1/_,scaleY:1/y},x=m+2*2,S=f+2*2,I=i.getCanvas("mesh",x,S),P=I.context,B=P.createImageData(m,f);if(e){let z=B.data;for(let j=0,Q=z.length;j<Q;j+=4)z[j]=e[0],z[j+1]=e[1],z[j+2]=e[2],z[j+3]=255}for(let z of this._figures)Q2(B,z,v);return P.putImageData(B,2,2),{canvas:I.canvas,offsetX:l-2*_,offsetY:d-2*y,scaleX:_,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,n){Ig(t,this._bbox);let s=new Float32Array(2);if(n===Ti.SHADING)de.singularValueDecompose2dScale(Gt(t),s);else if(this.matrix){de.singularValueDecompose2dScale(this.matrix,s);let[l,d]=s;de.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=l,s[1]*=d}else de.singularValueDecompose2dScale(e.baseTransform,s);let o=this._createMeshCanvas(s,n===Ti.SHADING?null:this._background,e.cachedCanvases);return n!==Ti.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}},Rg=class extends Il{getPattern(){return"hotpink"}};function J2(r){switch(r[0]){case"RadialAxial":return new Dg(r);case"Mesh":return new Pg(r);case"Dummy":return new Rg}throw new Error(`Unknown IR type: ${r[0]}`)}var EC={COLORED:1,UNCOLORED:2},eF=(()=>{class r{static MAX_PATTERN_SIZE=3e3;constructor(e,i,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=i,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e,i){let{bbox:n,operatorList:s,paintType:o,tilingType:l,color:d,canvasGraphicsFactory:h}=this,{xstep:u,ystep:m}=this;u=Math.abs(u),m=Math.abs(m),du("TilingType: "+l);let f=n[0],_=n[1],y=n[2],v=n[3],x=y-f,S=v-_,I=new Float32Array(2);de.singularValueDecompose2dScale(this.matrix,I);let[P,B]=I;de.singularValueDecompose2dScale(this.baseTransform,I);let N=P*I[0],z=B*I[1],j=x,Q=S,ee=!1,ae=!1,he=Math.ceil(u*N),ct=Math.ceil(m*z),Ct=Math.ceil(x*N),st=Math.ceil(S*z);he>=Ct?j=u:ee=!0,ct>=st?Q=m:ae=!0;let kt=this.getSizeAndScale(j,this.ctx.canvas.width,N),ue=this.getSizeAndScale(Q,this.ctx.canvas.height,z),Me=e.cachedCanvases.getCanvas("pattern",kt.size,ue.size),vt=Me.context,dt=h.createCanvasGraphics(vt,i);if(dt.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(dt,o,d),vt.translate(-kt.scale*f,-ue.scale*_),dt.transform(0,kt.scale,0,0,ue.scale,0,0),vt.save(),dt.dependencyTracker?.save(),this.clipBbox(dt,f,_,y,v),dt.baseTransform=Gt(dt.ctx),dt.executeOperatorList(s),dt.endDrawing(),dt.dependencyTracker?.restore(),vt.restore(),ee||ae){let tr=Me.canvas;ee&&(j=u),ae&&(Q=m);let qt=this.getSizeAndScale(j,this.ctx.canvas.width,N),Pt=this.getSizeAndScale(Q,this.ctx.canvas.height,z),ut=qt.size,Xi=Pt.size,jn=e.cachedCanvases.getCanvas("pattern-workaround",ut,Xi),Ki=jn.context,Tt=ee?Math.floor(x/u):0,da=ae?Math.floor(S/m):0;for(let ir=0;ir<=Tt;ir++)for(let nr=0;nr<=da;nr++)Ki.drawImage(tr,ut*ir,Xi*nr,ut,Xi,0,0,ut,Xi);return{canvas:jn.canvas,scaleX:qt.scale,scaleY:Pt.scale,offsetX:f,offsetY:_}}return{canvas:Me.canvas,scaleX:kt.scale,scaleY:ue.scale,offsetX:f,offsetY:_}}getSizeAndScale(e,i,n){let s=Math.max(r.MAX_PATTERN_SIZE,i),o=Math.ceil(e*n);return o>=s?o=s:n=o/e,{scale:n,size:o}}clipBbox(e,i,n,s,o){let l=s-i,d=o-n;e.ctx.rect(i,n,l,d),de.axialAlignedBoundingBox([i,n,s,o],Gt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,i,n){let s=e.ctx,o=e.current;switch(i){case EC.COLORED:let{fillStyle:l,strokeStyle:d}=this.ctx;s.fillStyle=o.fillColor=l,s.strokeStyle=o.strokeColor=d;break;case EC.UNCOLORED:s.fillStyle=s.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new tg(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,i,n,s,o){let l=n;s!==Ti.SHADING&&(l=de.transform(l,i.baseTransform),this.matrix&&(l=de.transform(l,this.matrix)));let d=this.createPatternCanvas(i,o),h=new DOMMatrix(l);h=h.translate(d.offsetX,d.offsetY),h=h.scale(1/d.scaleX,1/d.scaleY);let u=e.createPattern(d.canvas,"repeat");return u.setTransform(h),u}}return r})();function tF({src:r,srcPos:t=0,dest:e,width:i,height:n,nonBlackColor:s=4294967295,inverseDecode:o=!1}){let l=oi.isLittleEndian?4278190080:255,[d,h]=o?[s,l]:[l,s],u=i>>3,m=i&7,f=r.length;e=new Uint32Array(e.buffer);let _=0;for(let y=0;y<n;y++){for(let x=t+u;t<x;t++){let S=t<f?r[t]:255;e[_++]=S&128?h:d,e[_++]=S&64?h:d,e[_++]=S&32?h:d,e[_++]=S&16?h:d,e[_++]=S&8?h:d,e[_++]=S&4?h:d,e[_++]=S&2?h:d,e[_++]=S&1?h:d}if(m===0)continue;let v=t<f?r[t++]:255;for(let x=0;x<m;x++)e[_++]=v&1<<7-x?h:d}return{srcPos:t,destPos:_}}var SC=16,MC=100,iF=15,AC=10,cn=16,Kf=new DOMMatrix,wn=new Float32Array(2),Jo=new Float32Array([1/0,1/0,-1/0,-1/0]);function nF(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},r.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},r.transform=function(e,i,n,s,o,l){t.transform(e,i,n,s,o,l),this.__originalTransform(e,i,n,s,o,l)},r.setTransform=function(e,i,n,s,o,l){t.setTransform(e,i,n,s,o,l),this.__originalSetTransform(e,i,n,s,o,l)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},r.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},r.bezierCurveTo=function(e,i,n,s,o,l){t.bezierCurveTo(e,i,n,s,o,l),this.__originalBezierCurveTo(e,i,n,s,o,l)},r.rect=function(e,i,n,s){t.rect(e,i,n,s),this.__originalRect(e,i,n,s)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}var Og=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,i)):(n=this.canvasFactory.create(e,i),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(let t in this.cache){let e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function kh(r,t,e,i,n,s,o,l,d,h){let[u,m,f,_,y,v]=Gt(r);if(m===0&&f===0){let I=o*u+y,P=Math.round(I),B=l*_+v,N=Math.round(B),z=(o+d)*u+y,j=Math.abs(Math.round(z)-P)||1,Q=(l+h)*_+v,ee=Math.abs(Math.round(Q)-N)||1;return r.setTransform(Math.sign(u),0,0,Math.sign(_),P,N),r.drawImage(t,e,i,n,s,0,0,j,ee),r.setTransform(u,m,f,_,y,v),[j,ee]}if(u===0&&_===0){let I=l*f+y,P=Math.round(I),B=o*m+v,N=Math.round(B),z=(l+h)*f+y,j=Math.abs(Math.round(z)-P)||1,Q=(o+d)*m+v,ee=Math.abs(Math.round(Q)-N)||1;return r.setTransform(0,Math.sign(m),Math.sign(f),0,P,N),r.drawImage(t,e,i,n,s,0,0,ee,j),r.setTransform(u,m,f,_,y,v),[ee,j]}r.drawImage(t,e,i,n,s,o,l,d,h);let x=Math.hypot(u,m),S=Math.hypot(f,_);return[x*d,S*h]}var $h=class{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Jf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=_i.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Jo.slice()}clone(){let t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ti.FILL,e=null){let i=this.minMax.slice();if(t===Ti.STROKE){e||At("Stroke bounding box must include transform."),de.singularValueDecompose2dScale(e,wn);let n=wn[0]*this.lineWidth/2,s=wn[1]*this.lineWidth/2;i[0]-=n,i[1]-=s,i[2]+=n,i[3]+=s}return i}updateClipFromPath(){let t=de.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Jo,0)}getClippedPathBoundingBox(t=Ti.FILL,e=null){return de.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function TC(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}let e=t.height,i=t.width,n=e%cn,s=(e-n)/cn,o=n===0?s:s+1,l=r.createImageData(i,cn),d=0,h,u=t.data,m=l.data,f,_,y,v;if(t.kind===Ih.GRAYSCALE_1BPP){let x=u.byteLength,S=new Uint32Array(m.buffer,0,m.byteLength>>2),I=S.length,P=i+7>>3,B=4294967295,N=oi.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<s?cn:n,h=0,_=0;_<y;_++){let z=x-d,j=0,Q=z>P?i:z*8-7,ee=Q&-8,ae=0,he=0;for(;j<ee;j+=8)he=u[d++],S[h++]=he&128?B:N,S[h++]=he&64?B:N,S[h++]=he&32?B:N,S[h++]=he&16?B:N,S[h++]=he&8?B:N,S[h++]=he&4?B:N,S[h++]=he&2?B:N,S[h++]=he&1?B:N;for(;j<Q;j++)ae===0&&(he=u[d++],ae=128),S[h++]=he&ae?B:N,ae>>=1}for(;h<I;)S[h++]=0;r.putImageData(l,0,f*cn)}}else if(t.kind===Ih.RGBA_32BPP){for(_=0,v=i*cn*4,f=0;f<s;f++)m.set(u.subarray(d,d+v)),d+=v,r.putImageData(l,0,_),_+=cn;f<o&&(v=i*n*4,m.set(u.subarray(d,d+v)),r.putImageData(l,0,_))}else if(t.kind===Ih.RGB_24BPP)for(y=cn,v=i*y,f=0;f<o;f++){for(f>=s&&(y=n,v=i*y),h=0,_=v;_--;)m[h++]=u[d++],m[h++]=u[d++],m[h++]=u[d++],m[h++]=255;r.putImageData(l,0,f*cn)}else throw new Error(`bad image kind: ${t.kind}`)}function IC(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}let e=t.height,i=t.width,n=e%cn,s=(e-n)/cn,o=n===0?s:s+1,l=r.createImageData(i,cn),d=0,h=t.data,u=l.data;for(let m=0;m<o;m++){let f=m<s?cn:n;({srcPos:d}=tF({src:h,srcPos:d,dest:u,width:i,height:f,nonBlackColor:0})),r.putImageData(l,0,m*cn)}}function ml(r,t){let e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let i of e)r[i]!==void 0&&(t[i]=r[i]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Eh(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);let{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function DC(r,t){if(t)return!0;de.singularValueDecompose2dScale(r,wn);let e=Math.fround(Wr.pixelRatio*Es.PDF_TO_CSS_UNITS);return wn[0]<=e&&wn[1]<=e}var rF=["butt","round","square"],sF=["miter","round","bevel"],oF={},PC={},ea=class r{constructor(t,e,i,n,s,{optionalContentConfig:o,markedContentStack:l=null},d,h,u){this.ctx=t,this.current=new $h(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new Og(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=u??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:n=null}){let s=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=l,i){let d=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...Gt(this.compositeCtx))}this.ctx.save(),Eh(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Gt(this.ctx)}executeOperatorList(t,e,i,n,s){let o=t.argsArray,l=t.fnArray,d=e||0,h=o.length;if(h===d)return d;let u=h-d>AC&&typeof i=="function",m=u?Date.now()+iF:0,f=0,_=this.commonObjs,y=this.objs,v,x;for(;;){if(n!==void 0&&d===n.nextBreakPoint)return n.breakIt(d,i),d;if(!s||s(d))if(v=l[d],x=o[d]??null,v!==wl.dependency)x===null?this[v](d):this[v](d,...x);else for(let S of x){this.dependencyTracker?.recordNamedData(S,d);let I=S.startsWith("g_")?_:y;if(!I.has(S))return I.get(S,i),d}if(d++,d===h)return d;if(u&&++f>AC){if(Date.now()>m)return i(),d;f=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let t of this._cachedBitmapsMap.values()){for(let e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){let e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){let i=t.width??t.displayWidth,n=t.height??t.displayHeight,s=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=i,d=n,h="prescale1",u,m;for(;s>2&&l>1||o>2&&d>1;){let f=l,_=d;s>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/f),o>2&&d>1&&(_=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,o/=d/_),u=this.cachedCanvases.getCanvas(h,f,_),m=u.context,m.clearRect(0,0,f,_),m.drawImage(t,0,0,l,d,0,0,f,_),t=u.canvas,l=f,d=_,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:d}}_createMaskCanvas(t,e){let i=this.ctx,{width:n,height:s}=e,o=this.current.fillColor,l=this.current.patternFill,d=Gt(i),h,u,m,f;if((e.bitmap||e.data)&&e.count>1){let ae=e.bitmap||e.data.buffer;u=JSON.stringify(l?d:[d.slice(0,4),o]),h=this._cachedBitmapsMap.get(ae),h||(h=new Map,this._cachedBitmapsMap.set(ae,h));let he=h.get(u);if(he&&!l){let ct=Math.round(Math.min(d[0],d[2])+d[4]),Ct=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,Hn.transformAndFill),{canvas:he,offsetX:ct,offsetY:Ct}}m=he}m||(f=this.cachedCanvases.getCanvas("maskCanvas",n,s),IC(f.context,e));let _=de.transform(d,[1/n,0,0,-1/s,0,0]);_=de.transform(_,[1,0,0,1,0,-s]);let y=Jo.slice();de.axialAlignedBoundingBox([0,0,n,s],_,y);let[v,x,S,I]=y,P=Math.round(S-v)||1,B=Math.round(I-x)||1,N=this.cachedCanvases.getCanvas("fillCanvas",P,B),z=N.context,j=v,Q=x;z.translate(-j,-Q),z.transform(..._),m||(m=this._scaleImage(f.canvas,mr(z)),m=m.img,h&&l&&h.set(u,m)),z.imageSmoothingEnabled=DC(Gt(z),e.interpolate),kh(z,m,0,0,m.width,m.height,0,0,n,s),z.globalCompositeOperation="source-in";let ee=de.transform(mr(z),[1,0,0,1,-j,-Q]);return z.fillStyle=l?o.getPattern(i,this,ee,Ti.FILL,t):o,z.fillRect(0,0,n,s),h&&!l&&(this.cachedCanvases.delete("fillCanvas"),h.set(u,N.canvas)),this.dependencyTracker?.recordDependencies(t,Hn.transformAndFill),{canvas:N.canvas,offsetX:Math.round(j),offsetY:Math.round(Q)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=rF[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=sF[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);let n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(let[i,n]of e)switch(i){case"LW":this.setLineWidth(t,n);break;case"LC":this.setLineCap(t,n);break;case"LJ":this.setLineJoin(t,n);break;case"ML":this.setMiterLimit(t,n);break;case"D":this.setDash(t,n[0],n[1]);break;case"RI":this.setRenderingIntent(t,n);break;case"FL":this.setFlatness(t,n);break;case"Font":this.setFont(t,n[0],n[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=n;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=n;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=n;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,i=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,e,i);this.suspendedCtx=this.ctx;let o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),ml(this.suspendedCtx,o),nF(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ml(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,n){let s=n[0],o=n[1],l=n[2]-s,d=n[3]-o;l===0||d===0||(this.genericComposeSMask(e.context,i,l,d,e.subtype,e.backdrop,e.transferMap,s,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,n,s,o,l,d,h,u,m){let f=t.canvas,_=d-u,y=h-m;if(o)if(_<0||y<0||_+i>f.width||y+n>f.height){let x=this.cachedCanvases.getCanvas("maskExtension",i,n),S=x.context;S.drawImage(f,-_,-y),S.globalCompositeOperation="destination-atop",S.fillStyle=o,S.fillRect(0,0,i,n),S.globalCompositeOperation="source-over",f=x.canvas,_=y=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);let x=new Path2D;x.rect(_,y,i,n),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(_,y,i,n),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));let v=new Path2D;v.rect(d,h,i,n),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(f,_,y,i,n,d,h,i,n),e.restore()}save(t){this.inSMaskMode&&ml(this.ctx,this.suspendedCtx),this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ml(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,n,s,o,l){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,n,s,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,n){let[s]=i;if(!n){s||=i[0]=new Path2D,this[e](t,s);return}if(this.dependencyTracker!==null){let o=e===wl.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,n[0]-o,n[2]+o,n[1]-o,n[3]+o).recordDependencies(t,["transform"])}s instanceof Path2D||(s=i[0]=HC(s)),de.axialAlignedBoundingBox(n,Gt(this.ctx),this.current.minMax),this[e](t,s),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){let n=this.ctx,s=this.current.strokeColor;if(n.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&s?.getPattern){let o=s.isModifyingCurrentTransform()?n.getTransform():null;if(n.save(),n.strokeStyle=s.getPattern(n,this,mr(n),Ti.STROKE,t),o){let l=new Path2D;l.addPath(e,n.getTransform().invertSelf().multiplySelf(o)),e=l}this.rescaleAndStroke(e,!1),n.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Hn.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Ti.STROKE,Gt(this.ctx))),n.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){let n=this.ctx,s=this.current.fillColor,o=this.current.patternFill,l=!1;if(o){let h=s.isModifyingCurrentTransform()?n.getTransform():null;if(this.dependencyTracker?.save(t),n.save(),n.fillStyle=s.getPattern(n,this,mr(n),Ti.FILL,t),h){let u=new Path2D;u.addPath(e,n.getTransform().invertSelf().multiplySelf(h)),e=u}l=!0}let d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(n.fill(e,"evenodd"),this.pendingEOFill=!1):n.fill(e)),this.dependencyTracker?.recordDependencies(t,Hn.fill),l&&(n.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Hn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=oF}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=PC}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){let e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){let{dependencyTracker:n}=this;e!==void 0&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",t),n.recordCloseMarker(t)}if(e!==void 0){let n=new Path2D,s=i.getTransform().invertSelf();for(let{transform:o,x:l,y:d,fontSize:h,path:u}of e)u&&n.addPath(u,new DOMMatrix(o).preMultiplySelf(s).translate(l,d).scale(h,-h));i.clip(n)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);let n=this.commonObjs.get(e),s=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=n.fontMatrix||Jf,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ze("Invalid font matrix for font "+e),i<0?(i=-i,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=i,n.isType3Font)return;let o=n.loadedName||"sans-serif",l=n.systemFontInfo?.css||`"${o}", ${n.fallbackName}`,d="normal";n.black?d="900":n.bold&&(d="bold");let h=n.italic?"italic":"normal",u=i;i<SC?u=SC:i>MC&&(u=MC),this.current.fontSizeScale=i/u,this.ctx.font=`${h} ${d} ${u}px ${l}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);let{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,i){let n=new Path2D;return n.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),n}paintChar(t,e,i,n,s,o){let l=this.ctx,d=this.current,h=d.font,u=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,f=u&_i.FILL_STROKE_MASK,_=!!(u&_i.ADD_TO_PATH_FLAG),y=d.patternFill&&!h.missingFile,v=d.patternStroke&&!h.missingFile,x;if((h.disableFontFace||_||y||v)&&!h.missingFile&&(x=h.getPathGenerator(this.commonObjs,e)),x&&(h.disableFontFace||y||v)){l.save(),l.translate(i,n),l.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,l,h);let S;if(f===_i.FILL||f===_i.FILL_STROKE)if(s){S=l.getTransform(),l.setTransform(...s);let I=this.#n(x,S,s);l.fill(I)}else l.fill(x);if(f===_i.STROKE||f===_i.FILL_STROKE)if(o){S||=l.getTransform(),l.setTransform(...o);let{a:I,b:P,c:B,d:N}=S,z=de.inverseTransform(o),j=de.transform([I,P,B,N,0,0],z);de.singularValueDecompose2dScale(j,wn),l.lineWidth*=Math.max(wn[0],wn[1])/m,l.stroke(this.#n(x,S,o))}else l.lineWidth/=m,l.stroke(x);l.restore()}else(f===_i.FILL||f===_i.FILL_STROKE)&&(l.fillText(e,i,n),this.dependencyTracker?.recordCharacterBBox(t,l,h,m,i,n,()=>l.measureText(e))),(f===_i.STROKE||f===_i.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,l,h,m,i,n,()=>l.measureText(e)).recordDependencies(t,Hn.stroke),l.strokeText(e,i,n));_&&((this.pendingTextPaths||=[]).push({transform:Gt(l),x:i,y:n,fontSize:m,path:x}),this.dependencyTracker?.recordCharacterBBox(t,l,h,m,i,n))}get isFontSubpixelAAEnabled(){let{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);let e=t.getImageData(0,0,10,10).data,i=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){i=!0;break}return He(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Hn.showText).resetBBox(t),this.current.textRenderingMode&_i.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());let i=this.current,n=i.font;if(n.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}let s=i.fontSize;if(s===0){this.dependencyTracker?.recordOperation(t);return}let o=this.ctx,l=i.fontSizeScale,d=i.charSpacing,h=i.wordSpacing,u=i.fontDirection,m=i.textHScale*u,f=e.length,_=n.vertical,y=_?1:-1,v=n.defaultVMetrics,x=s*i.fontMatrix[0],S=i.textRenderingMode===_i.FILL&&!n.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),u>0?o.scale(m,-1):o.scale(m,1);let I,P,B=i.textRenderingMode&_i.FILL_STROKE_MASK,N=B===_i.FILL||B===_i.FILL_STROKE,z=B===_i.STROKE||B===_i.FILL_STROKE;if(N&&i.patternFill){o.save();let he=i.fillColor.getPattern(o,this,mr(o),Ti.FILL,t);I=Gt(o),o.restore(),o.fillStyle=he}if(z&&i.patternStroke){o.save();let he=i.strokeColor.getPattern(o,this,mr(o),Ti.STROKE,t);P=Gt(o),o.restore(),o.strokeStyle=he}let j=i.lineWidth,Q=i.textMatrixScale;if(Q===0||j===0?z&&(j=this.getSinglePixelWidth()):j/=Q,l!==1&&(o.scale(l,l),j/=l),o.lineWidth=j,n.isInvalidPDFjsFont){let he=[],ct=0;for(let st of e)he.push(st.unicode),ct+=st.width;let Ct=he.join("");if(o.fillText(Ct,0,0),this.dependencyTracker!==null){let st=o.measureText(Ct);this.dependencyTracker.recordBBox(t,this.ctx,-st.actualBoundingBoxLeft,st.actualBoundingBoxRight,-st.actualBoundingBoxAscent,st.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=ct*x*m,o.restore(),this.compose();return}let ee=0,ae;for(ae=0;ae<f;++ae){let he=e[ae];if(typeof he=="number"){ee+=y*he*s/1e3;continue}let ct=!1,Ct=(he.isSpace?h:0)+d,st=he.fontChar,kt=he.accent,ue,Me,vt=he.width;if(_){let qt=he.vmetric||v,Pt=-(he.vmetric?qt[1]:vt*.5)*x,ut=qt[2]*x;vt=qt?-qt[0]:vt,ue=Pt/l,Me=(ee+ut)/l}else ue=ee/l,Me=0;let dt;if(n.remeasure&&vt>0){dt=o.measureText(st);let qt=dt.width*1e3/s*l;if(vt<qt&&this.isFontSubpixelAAEnabled){let Pt=vt/qt;ct=!0,o.save(),o.scale(Pt,1),ue/=Pt}else vt!==qt&&(ue+=(vt-qt)/2e3*s/l)}if(this.contentVisible&&(he.isInFont||n.missingFile)){if(S&&!kt)o.fillText(st,ue,Me),this.dependencyTracker?.recordCharacterBBox(t,o,dt?{bbox:null}:n,s/l,ue,Me,()=>dt??o.measureText(st));else if(this.paintChar(t,st,ue,Me,I,P),kt){let qt=ue+s*kt.offset.x/l,Pt=Me-s*kt.offset.y/l;this.paintChar(t,kt.fontChar,qt,Pt,I,P)}}let tr=_?vt*x-Ct*u:vt*x+Ct*u;ee+=tr,ct&&o.restore()}_?i.y-=ee:i.x+=ee*m,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){let i=this.ctx,n=this.current,s=n.font,o=n.fontSize,l=n.fontDirection,d=s.vertical?1:-1,h=n.charSpacing,u=n.wordSpacing,m=n.textHScale*l,f=n.fontMatrix||Jf,_=e.length,y=n.textRenderingMode===_i.INVISIBLE,v,x,S,I;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),n.textMatrix&&i.transform(...n.textMatrix),i.translate(n.x,n.y+n.textRise),i.scale(m,l);let P=this.dependencyTracker;for(this.dependencyTracker=P?new Gh(P,t):null,v=0;v<_;++v){if(x=e[v],typeof x=="number"){I=d*x*o/1e3,this.ctx.translate(I,0),n.x+=I*m;continue}let B=(x.isSpace?u:0)+h,N=s.charProcOperatorList[x.operatorListId];N?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...f),this.executeOperatorList(N),this.restore()):ze(`Type3 character "${x.operatorListId}" is not available.`);let z=[x.width,0];de.applyTransform(z,f),S=z[0]*o+B,i.translate(S,0),n.x+=S*m}i.restore(),P&&(this.dependencyTracker=P)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,n,s,o,l){let d=new Path2D;d.rect(n,s,o-n,l-s),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,n,o,s,l).recordClipBox(t,this.ctx,n,o,s,l),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){let n=this.baseTransform||Gt(this.ctx),s={createCanvasGraphics:(o,l)=>new r(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Gh(this.dependencyTracker,l,!0):null)};i=new eF(e,this.ctx,s,n)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=J2(this.getObject(t,e)),this.cachedPatterns.set(e,n)),i&&(n.matrix=i),n}shadingFill(t,e){if(!this.contentVisible)return;let i=this.ctx;this.save(t);let n=this._getPattern(t,e);i.fillStyle=n.getPattern(i,this,mr(i),Ti.SHADING,t);let s=mr(i);if(s){let{width:o,height:l}=i.canvas,d=Jo.slice();de.axialAlignedBoundingBox([0,0,o,l],s,d);let[h,u,m,f]=d;this.ctx.fillRect(h,u,m-h,f-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Hn.transform).recordDependencies(t,Hn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){At("Should not call beginInlineImage")}beginImageData(){At("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Gt(this.ctx),i)){de.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);let[n,s,o,l]=i,d=new Path2D;d.rect(n,s,o-n,l-s),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,n,o,s,l),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let i=this.ctx;e.isolated||du("TODO: Support non-isolated groups."),e.knockout&&ze("Knockout groups not supported.");let n=Gt(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Jo.slice();de.axialAlignedBoundingBox(e.bbox,Gt(i),s);let o=[0,0,i.canvas.width,i.canvas.height];s=de.intersect(s,o)||[0,0,0,0];let l=Math.floor(s[0]),d=Math.floor(s[1]),h=Math.max(Math.ceil(s[2])-l,1),u=Math.max(Math.ceil(s[3])-d,1);this.current.startNewPathAndClipBox([0,0,h,u]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);let f=this.cachedCanvases.getCanvas(m,h,u),_=f.context;_.translate(-l,-d),_.transform(...n);let y=new Path2D,[v,x,S,I]=e.bbox;if(y.rect(v,x,S-v,I-x),e.matrix){let P=new Path2D;P.addPath(y,new DOMMatrix(e.matrix)),y=P}_.clip(y),e.smask&&this.smaskStack.push({canvas:f.canvas,context:_,offsetX:l,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(l,d),i.save()),ml(i,_),this.ctx=_,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;let i=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();let s=Gt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...s);let o=Jo.slice();de.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],s,o),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,i,n,s,o){if(this.#e(),Eh(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){let l=i[2]-i[0],d=i[3]-i[1];if(o&&this.annotationCanvasMap){n=n.slice(),n[4]-=i[0],n[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=l,i[3]=d,de.singularValueDecompose2dScale(Gt(this.ctx),wn);let{viewportScale:h}=this,u=Math.ceil(l*this.outputScaleX*h),m=Math.ceil(d*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(u,m);let{canvas:f,context:_}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=_,this.ctx.save(),this.ctx.setTransform(wn[0],0,0,-wn[1],0,d*wn[1]),Eh(this.ctx)}else{Eh(this.ctx),this.endPath(t);let h=new Path2D;h.rect(i[0],i[1],l,d),this.ctx.clip(h)}}this.current=new $h(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...n),this.transform(t,...s)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;let i=e.count;e=this.getObject(t,e.data,e),e.count=i;let n=this.ctx,s=this._createMaskCanvas(t,e),o=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,s.offsetX,s.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(t),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,n=0,s=0,o,l){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);let d=this.ctx;d.save();let h=Gt(d);d.transform(i,n,s,o,0,0);let u=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,u.offsetX-h[4],u.offsetY-h[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,f=l.length;m<f;m+=2){let _=de.transform(h,[i,n,s,o,l[m],l[m+1]]);d.drawImage(u.canvas,_[4],_[5]),this.dependencyTracker?.recordBBox(t,this.ctx,_[4],_[4]+u.canvas.width,_[5],_[5]+u.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;let i=this.ctx,n=this.current.fillColor,s=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Hn.transformAndFill);for(let o of e){let{data:l,width:d,height:h,transform:u}=o,m=this.cachedCanvases.getCanvas("maskCanvas",d,h),f=m.context;f.save();let _=this.getObject(t,l,o);IC(f,_),f.globalCompositeOperation="source-in",f.fillStyle=s?n.getPattern(f,this,mr(i),Ti.FILL,t):n,f.fillRect(0,0,d,h),f.restore(),i.save(),i.transform(...u),i.scale(1,-1),kh(i,m.canvas,0,0,d,h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,d,0,h),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;let i=this.getObject(t,e);if(!i){ze("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,n,s){if(!this.contentVisible)return;let o=this.getObject(t,e);if(!o){ze("Dependent image isn't ready yet");return}let l=o.width,d=o.height,h=[];for(let u=0,m=s.length;u<m;u+=2)h.push({transform:[i,0,0,n,s[u],s[u+1]],x:0,y:0,w:l,h:d});this.paintInlineImageXObjectGroup(t,o,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;let{bitmap:e,width:i,height:n}=t,s=this.cachedCanvases.getCanvas("inlineImage",i,n),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",s.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;let i=e.width,n=e.height,s=this.ctx;this.save(t);let{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none"),s.scale(1/i,-1/n);let l;if(e.bitmap)l=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)l=e;else{let u=this.cachedCanvases.getCanvas("inlineImage",i,n).context;TC(u,e),l=this.applyTransferMapsToCanvas(u)}let d=this._scaleImage(l,mr(s));s.imageSmoothingEnabled=DC(Gt(s),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,s,0,i,-n,0).recordDependencies(t,Hn.imageXObject).recordOperation(t),kh(s,d.img,0,0,d.paintWidth,d.paintHeight,0,-n,i,n),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;let n=this.ctx,s;if(e.bitmap)s=e.bitmap;else{let o=e.width,l=e.height,h=this.cachedCanvases.getCanvas("inlineImage",o,l).context;TC(h,e),s=this.applyTransferMapsToCanvas(h)}this.dependencyTracker?.resetBBox(t);for(let o of i)n.save(),n.transform(...o.transform),n.scale(1,-1),kh(n,s,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,1,-1,0),n.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Hn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){let n=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);let s=this.ctx;this.pendingClip?(n||(this.pendingClip===PC?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let t=Gt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{let e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:t}=this.current,{a:e,b:i,c:n,d:s}=this.ctx.getTransform(),o,l;if(i===0&&n===0){let d=Math.abs(e),h=Math.abs(s);if(d===h)if(t===0)o=l=1/d;else{let u=d*t;o=l=u<1?1/u:1}else if(t===0)o=1/d,l=1/h;else{let u=d*t,m=h*t;o=u<1?1/u:1,l=m<1?1/m:1}}else{let d=Math.abs(e*s-i*n),h=Math.hypot(e,i),u=Math.hypot(n,s);if(t===0)o=u/d,l=h/d;else{let m=t*d;o=u>m?u/m:1,l=h>m?h/m:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){let{ctx:i,current:{lineWidth:n}}=this,[s,o]=this.getScaleForStroking();if(s===o){i.lineWidth=(n||1)*s,i.stroke(t);return}let l=i.getLineDash();e&&i.save(),i.scale(s,o),Kf.a=1/s,Kf.d=1/o;let d=new Path2D;if(d.addPath(t,Kf),l.length>0){let h=Math.max(s,o);i.setLineDash(l.map(u=>u/h)),i.lineDashOffset/=h}i.lineWidth=n||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(let r in wl)ea.prototype[r]!==void 0&&(ea.prototype[wl[r]]=ea.prototype[r]);var Hr=class{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#e=t}static get workerSrc(){return this.#t}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#t=t}},Fg=class{#e;#t;constructor({parsedData:t,rawData:e}){this.#e=t,this.#t=e}getRaw(){return this.#t}get(t){return this.#e.get(t)??null}[Symbol.iterator](){return this.#e.entries()}},Ko=Symbol("INTERNAL"),Lg=class{#e=!1;#t=!1;#n=!1;#i=!0;constructor(t,{name:e,intent:i,usage:n,rbGroups:s}){this.#e=!!(t&xn.DISPLAY),this.#t=!!(t&xn.PRINT),this.name=e,this.intent=i,this.usage=n,this.rbGroups=s}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;let{print:t,view:e}=this.usage;return this.#e?e?.viewState!=="OFF":this.#t?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==Ko&&At("Internal method `_setVisible` called."),this.#n=i,this.#i=e}},Ng=class{#e=null;#t=new Map;#n=null;#i=null;constructor(t,e=xn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(let i of t.groups)this.#t.set(i.id,new Lg(e,i));if(t.baseState==="OFF")for(let i of this.#t.values())i._setVisible(Ko,!1);for(let i of t.on)this.#t.get(i)._setVisible(Ko,!0);for(let i of t.off)this.#t.get(i)._setVisible(Ko,!1);this.#n=this.getHash()}}#o(t){let e=t.length;if(e<2)return!0;let i=t[0];for(let n=1;n<e;n++){let s=t[n],o;if(Array.isArray(s))o=this.#o(s);else if(this.#t.has(s))o=this.#t.get(s).visible;else return ze(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"}isVisible(t){if(this.#t.size===0)return!0;if(!t)return du("Optional content group not defined."),!0;if(t.type==="OCG")return this.#t.has(t.id)?this.#t.get(t.id).visible:(ze(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#o(t.expression);if(!t.policy||t.policy==="AnyOn"){for(let e of t.ids){if(!this.#t.has(e))return ze(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(let e of t.ids){if(!this.#t.has(e))return ze(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(let e of t.ids){if(!this.#t.has(e))return ze(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(let e of t.ids){if(!this.#t.has(e))return ze(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!1}return!0}return ze(`Unknown optional content policy ${t.policy}.`),!0}return ze(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){let n=this.#t.get(t);if(!n){ze(`Optional content group not found: ${t}`);return}if(i&&e&&n.rbGroups.length)for(let s of n.rbGroups)for(let o of s)o!==t&&this.#t.get(o)?._setVisible(Ko,!1,!0);n._setVisible(Ko,!!e,!0),this.#e=null}setOCGState({state:t,preserveRB:e}){let i;for(let n of t){switch(n){case"ON":case"OFF":case"Toggle":i=n;continue}let s=this.#t.get(n);if(s)switch(i){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!s.visible,e);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroup(t){return this.#t.get(t)||null}getHash(){if(this.#e!==null)return this.#e;let t=new Fh;for(let[e,i]of this.#t)t.update(`${e}:${i.visible}`);return this.#e=t.hexdigest()}[Symbol.iterator](){return this.#t.entries()}},Bg=class{constructor(t,{disableRange:e=!1,disableStream:i=!1}){rt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:n,initialData:s,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,s?.length>0){let d=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),t.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){let i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{let n=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(i),!0)});rt(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){let e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){rt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let t=this._queuedChunks;return this._queuedChunks=null,new Vg(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new zg(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},Vg=class{constructor(t,e,i=!1,n=null){this._stream=t,this._done=i||!1,this._filename=P_(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(let s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return q(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},zg=class{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return q(this,null,function*(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function aF(r){let t=!0,e=i("filename\\*","i").exec(r);if(e){e=e[1];let u=l(e);return u=unescape(u),u=d(u),u=h(u),s(u)}if(e=o(r),e){let u=h(e);return s(u)}if(e=i("filename","i").exec(r),e){e=e[1];let u=l(e);return u=h(u),s(u)}function i(u,m){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function n(u,m){if(u){if(!/^[\x00-\xFF]+$/.test(m))return m;try{let f=new TextDecoder(u,{fatal:!0}),_=Vl(m);m=f.decode(_),t=!1}catch{}}return m}function s(u){return t&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),t&&(u=n("iso-8859-1",u))),u}function o(u){let m=[],f,_=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=_.exec(u))!==null;){let[,v,x,S]=f;if(v=parseInt(v,10),v in m){if(v===0)break;continue}m[v]=[x,S]}let y=[];for(let v=0;v<m.length&&v in m;++v){let[x,S]=m[v];S=l(S),x&&(S=unescape(S),v===0&&(S=d(S))),y.push(S)}return y.join("")}function l(u){if(u.startsWith('"')){let m=u.slice(1).split('\\"');for(let f=0;f<m.length;++f){let _=m[f].indexOf('"');_!==-1&&(m[f]=m[f].slice(0,_),m.length=f+1),m[f]=m[f].replaceAll(/\\(.)/g,"$1")}u=m.join('"')}return u}function d(u){let m=u.indexOf("'");if(m===-1)return u;let f=u.slice(0,m),y=u.slice(m+1).replace(/^[^']*'/,"");return n(f,y)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,f,_,y){if(_==="q"||_==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,x){return String.fromCharCode(parseInt(x,16))}),n(f,y);try{y=atob(y)}catch{}return n(f,y)})}return""}function UC(r,t){let e=new Headers;if(!r||!t||typeof t!="object")return e;for(let i in t){let n=t[i];n!==void 0&&e.append(i,n)}return e}function uu(r){return URL.parse(r)?.origin??null}function jC({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:i}){let n={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(r.get("Content-Length"),10);return!Number.isInteger(s)||(n.suggestedLength=s,s<=2*e)||i||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function GC(r){let t=r.get("Content-Disposition");if(t){let e=aF(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(P_(e))return e}return null}function Wl(r,t){return new ta(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function $C(r){return r===200||r===206}function qC(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function YC(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(ze(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}var Hg=class{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=UC(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return rt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Wg(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new Ug(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},Wg=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;let i=new Headers(t.headers),n=e.url;fetch(n,qC(i,this._withCredentials,this._abortController)).then(s=>{if(t._responseOrigin=uu(s.url),!$C(s.status))throw Wl(s.status,n);this._reader=s.body.getReader(),this._headersCapability.resolve();let o=s.headers,{allowRangeRequests:l,suggestedLength:d}=jC({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=d||this._contentLength,this._filename=GC(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new gr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return q(this,null,function*(){yield this._headersCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:YC(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},Ug=class{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;let n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;let s=new Headers(t.headers);s.append("Range",`bytes=${e}-${i-1}`);let o=n.url;fetch(o,qC(s,this._withCredentials,this._abortController)).then(l=>{let d=uu(l.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!$C(l.status))throw Wl(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return q(this,null,function*(){yield this._readCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:YC(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},Zf=200,Qf=206;function lF(r){let t=r.response;return typeof t!="string"?t:Vl(t).buffer}var jg=class{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=UC(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){let e=new XMLHttpRequest,i=this.currXhrId++,n=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(let[s,o]of this.headers)e.setRequestHeader(s,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=Qf):n.expectedStatus=Zf,e.responseType="arraybuffer",rt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){let i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){let i=this.pendingRequests[t];if(!i)return;let n=i.xhr;if(n.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){i.onError(n.status);return}let s=n.status||Zf;if(!(s===Zf&&i.expectedStatus===Qf)&&s!==i.expectedStatus){i.onError(n.status);return}let l=lF(n);if(s===Qf){let d=n.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);h?i.onDone({begin:parseInt(h[1],10),chunk:l}):(ze('Missing or invalid "Content-Range" header.'),i.onError(0))}else l?i.onDone({begin:0,chunk:l}):i.onError(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){let e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},Gg=class{constructor(t){this._source=t,this._manager=new jg(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){let e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return rt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $g(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){let i=new qg(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},$g=class{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=uu(e.responseURL);let i=e.getAllResponseHeaders(),n=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{let[d,...h]=l.split(": ");return[d,h.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=jC({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=GC(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Wl(t,this._url),this._headersCapability.reject(this._storedError);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return q(this,null,function*(){if(yield this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0,this._headersCapability.reject(t);for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},qg=class{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let t=uu(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){let e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Wl(t,this._url);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}read(){return q(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},cF=/^[a-z][a-z0-9\-+.]+:/i;function dF(r){if(cF.test(r))return new URL(r);let t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}var Yg=class{constructor(t){this.source=t,this.url=dF(t.url),rt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return rt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Xg(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new Kg(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},Xg=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=Wl(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return q(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new gr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},Kg=class{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let n=t.source;this._isStreamingSupported=!n.disableStream;let s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){return q(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},fl=Symbol("INITIAL_DATA"),qh=class{#e=Object.create(null);#t(t){return this.#e[t]||=Ue(J({},Promise.withResolvers()),{data:fl})}get(t,e=null){if(e){let n=this.#t(t);return n.promise.then(()=>e(n.data)),null}let i=this.#e[t];if(!i||i.data===fl)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){let e=this.#e[t];return!!e&&e.data!==fl}delete(t){let e=this.#e[t];return!e||e.data===fl?!1:(delete this.#e[t],!0)}resolve(t,e=null){let i=this.#t(t);i.data=e,i.resolve()}clear(){for(let t in this.#e){let{data:e}=this.#e[t];e?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(let t in this.#e){let{data:e}=this.#e[t];e!==fl&&(yield[t,e])}}},hF=1e5,RC=30,Dl=class r{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#o=null;#s=null;#r=0;#a=0;#c=null;#l=null;#u=0;#h=0;#p=Object.create(null);#g=[];#f=null;#d=[];#m=new WeakMap;#_=null;static#v=new Map;static#b=new Map;static#E=new WeakMap;static#C=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#f=t;else if(typeof t=="object")this.#f=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=e,this.#h=i.scale*Wr.pixelRatio,this.#u=i.rotation,this.#s={div:null,properties:null,ctx:null};let{pageWidth:n,pageHeight:s,pageX:o,pageY:l}=i.rawDims;this.#_=[1,0,0,-1,-o,l+s],this.#a=n,this.#r=s,r.#T(),e.style.setProperty("--min-font-size",r.#C),Js(e,i),this.#e.promise.finally(()=>{r.#x.delete(this),this.#s=null,this.#p=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:t,isFirefox:e}=oi.platform;return He(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){let t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#e.resolve();return}this.#o??=e.lang,Object.assign(this.#p,e.styles),this.#M(e.items),t()},this.#e.reject)};return this.#c=this.#f.getReader(),r.#x.add(this),t(),this.#e.promise}update({viewport:t,onBefore:e=null}){let i=t.scale*Wr.pixelRatio,n=t.rotation;if(n!==this.#u&&(e?.(),this.#u=n,Js(this.#l,{rotation:n})),i!==this.#h){e?.(),this.#h=i;let s={div:null,properties:null,ctx:r.#I(this.#o)};for(let o of this.#d)s.properties=this.#m.get(o),s.div=o,this.#k(s)}}cancel(){let t=new gr("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#e.reject(t)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#g}#M(t){if(this.#n)return;this.#s.ctx??=r.#I(this.#o);let e=this.#d,i=this.#g;for(let n of t){if(e.length>hF){ze("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(n.str===void 0){if(n.type==="beginMarkedContentProps"||n.type==="beginMarkedContent"){let s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),n.id&&this.#t.setAttribute("id",`${n.id}`),s.append(this.#t)}else n.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(n.str),this.#y(n)}}#y(t){let e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#d.push(e);let n=de.transform(this.#_,t.transform),s=Math.atan2(n[1],n[0]),o=this.#p[t.fontName];o.vertical&&(s+=Math.PI/2);let l=this.#i&&o.fontSubstitution||o.fontFamily;l=r.fontFamilyMap.get(l)||l;let d=Math.hypot(n[2],n[3]),h=d*r.#N(l,o,this.#o),u,m;s===0?(u=n[4],m=n[5]-h):(u=n[4]+h*Math.sin(s),m=n[5]-h*Math.cos(s));let f=e.style;f.left=`${(100*u/this.#a).toFixed(2)}%`,f.top=`${(100*m/this.#r).toFixed(2)}%`,f.setProperty("--font-height",`${d.toFixed(2)}px`),f.fontFamily=l,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#i&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),s!==0&&(i.angle=s*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){let y=Math.abs(t.transform[0]),v=Math.abs(t.transform[3]);y!==v&&Math.max(y,v)/Math.min(y,v)>1.5&&(_=!0)}if(_&&(i.canvasWidth=o.vertical?t.height:t.width),this.#m.set(e,i),this.#s.div=e,this.#s.properties=i,this.#k(this.#s),i.hasText&&this.#t.append(e),i.hasEOL){let y=document.createElement("br");y.setAttribute("role","presentation"),this.#t.append(y)}}#k(t){let{div:e,properties:i,ctx:n}=t,{style:s}=e;if(i.canvasWidth!==0&&i.hasText){let{fontFamily:o}=s,{canvasWidth:l,fontSize:d}=i;r.#A(n,d*this.#h,o);let{width:h}=n.measureText(e.textContent);h>0&&s.setProperty("--scale-x",l*this.#h/h)}i.angle!==0&&s.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#x.size>0)){this.#v.clear();for(let{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#I(t=null){let e=this.#b.get(t||="");if(!e){let i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#A(t,e,i){let n=this.#E.get(t);e===n.size&&i===n.family||(t.font=`${e}px ${i}`,n.size=e,n.family=i)}static#T(){if(this.#C!==null)return;let t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#C=t.getBoundingClientRect().height,t.remove()}static#N(t,e,i){let n=this.#v.get(t);if(n)return n;let s=this.#I(i);s.canvas.width=s.canvas.height=RC,this.#A(s,RC,t);let o=s.measureText(""),l=o.fontBoundingBoxAscent,d=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let h=.8;return l?h=l/(l+d):(oi.platform.isFirefox&&ze("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),this.#v.set(t,h),h}},uF=100;function O_(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});let t=new Zg,{docId:e}=t,i=r.url?Y2(r.url):null,n=r.data?X2(r.data):null,s=r.httpHeaders||null,o=r.withCredentials===!0,l=r.password??null,d=r.range instanceof Yh?r.range:null,h=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16,u=r.worker instanceof Pl?r.worker:null,m=r.verbosity,f=typeof r.docBaseUrl=="string"&&!hu(r.docBaseUrl)?r.docBaseUrl:null,_=yh(r.cMapUrl),y=r.cMapPacked!==!1,v=r.CMapReaderFactory||($i?kg:Vh),x=yh(r.iccUrl),S=yh(r.standardFontDataUrl),I=r.StandardFontDataFactory||($i?Eg:Wh),P=yh(r.wasmUrl),B=r.WasmFactory||($i?Sg:jh),N=r.stopAtErrors!==!0,z=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,j=r.isEvalSupported!==!1,Q=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!$i,ee=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!$i&&(oi.platform.isFirefox||!globalThis.chrome),ae=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,he=typeof r.disableFontFace=="boolean"?r.disableFontFace:$i,ct=r.fontExtraProperties===!0,Ct=r.enableXfa===!0,st=r.ownerDocument||globalThis.document,kt=r.disableRange===!0,ue=r.disableStream===!0,Me=r.disableAutoFetch===!0,vt=r.pdfBug===!0,dt=r.CanvasFactory||($i?Cg:yg),tr=r.FilterFactory||($i?wg:xg),qt=r.enableHWA===!0,Pt=r.useWasm!==!1,ut=d?d.length:r.length??NaN,Xi=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!$i&&!he,jn=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(v===Vh&&I===Wh&&B===jh&&_&&S&&P&&bl(_,document.baseURI)&&bl(S,document.baseURI)&&bl(P,document.baseURI)),Ki=null;I2(m);let Tt={canvasFactory:new dt({ownerDocument:st,enableHWA:qt}),filterFactory:new tr({docId:e,ownerDocument:st}),cMapReaderFactory:jn?null:new v({baseUrl:_,isCompressed:y}),standardFontDataFactory:jn?null:new I({baseUrl:S}),wasmFactory:jn?null:new B({baseUrl:P})};u||(u=Pl.create({verbosity:m,port:Hr.workerPort}),t._worker=u);let da={docId:e,apiVersion:"5.4.530",data:n,password:l,disableAutoFetch:Me,rangeChunkSize:h,length:ut,docBaseUrl:f,enableXfa:Ct,evaluatorOptions:{maxImageSize:z,disableFontFace:he,ignoreErrors:N,isEvalSupported:j,isOffscreenCanvasSupported:Q,isImageDecoderSupported:ee,canvasMaxAreaInBytes:ae,fontExtraProperties:ct,useSystemFonts:Xi,useWasm:Pt,useWorkerFetch:jn,cMapUrl:_,iccUrl:x,standardFontDataUrl:S,wasmUrl:P}},ir={ownerDocument:st,pdfBug:vt,styleElement:Ki,loadingParams:{disableAutoFetch:Me,enableXfa:Ct}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let nr=u.messageHandler.sendWithPromise("GetDocRequest",da,n?[n.buffer]:null),oo;if(d)oo=new Bg(d,{disableRange:kt,disableStream:ue});else if(!n){if(!i)throw new Error("getDocument - no `url` parameter provided.");let Li=bl(i)?Hg:$i?Yg:Gg;oo=new Li({url:i,length:ut,httpHeaders:s,withCredentials:o,rangeChunkSize:h,disableRange:kt,disableStream:ue})}return nr.then(Li=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let Gr=new Qs(e,Li,u.port),Qu=new e_(Gr,t,oo,ir,Tt,qt);t._transport=Qu,Gr.send("Ready",null)})}).catch(t._capability.reject),t}var Zg=class r{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${r.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}destroy(){return q(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null})}getData(){return q(this,null,function*(){return this._transport.getData()})}},Yh=class{#e=Promise.withResolvers();#t=[];#n=[];#i=[];#o=[];constructor(t,e,i=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=n}addRangeListener(t){this.#o.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#t.push(t)}onDataRange(t,e){for(let i of this.#o)i(t,e)}onDataProgress(t,e){this.#e.promise.then(()=>{for(let i of this.#i)i(t,e)})}onDataProgressiveRead(t){this.#e.promise.then(()=>{for(let e of this.#n)e(t)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(let t of this.#t)t()})}transportReady(){this.#e.resolve()}requestDataRange(t,e){At("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},Qg=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return He(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},Jg=class{#e=!1;constructor(t,e,i,n=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=n?new Rh:null,this._pdfBug=n,this.commonObjs=i.commonObjs,this.objs=new qh,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:s=!1}={}){return new El({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:n,dontFlip:s})}getAnnotations({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return He(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return q(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:n="display",annotationMode:s=Cs.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:d=null,annotationCanvasMap:h=null,pageColors:u=null,printAnnotationStorage:m=null,isEditing:f=!1,recordOperations:_=!1,operationsFilter:y=null}){this._stats?.time("Overall");let v=this._transport.getRenderingIntent(n,s,m,f),{renderingIntent:x,cacheKey:S}=v;this.#e=!1,d||=this._transport.getOptionalContentConfig(x);let I=this._intentStates.get(S);I||(I=Object.create(null),this._intentStates.set(S,I)),I.streamReaderCancelTimeout&&(clearTimeout(I.streamReaderCancelTimeout),I.streamReaderCancelTimeout=null);let P=!!(x&xn.PRINT);I.displayReadyCapability||(I.displayReadyCapability=Promise.withResolvers(),I.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(v));let B=!!(this._pdfBug&&globalThis.StepperManager?.enabled),N=!this.recordedBBoxes&&(_||B),z=ee=>{if(I.renderTasks.delete(j),N){let ae=j.gfx?.dependencyTracker.take();ae&&(j.stepper&&j.stepper.setOperatorBBoxes(ae,j.gfx.dependencyTracker.takeDebugMetadata()),_&&(this.recordedBBoxes=ae))}P&&(this.#e=!0),this.#t(),ee?(j.capability.reject(ee),this._abortOperatorList({intentState:I,reason:ee instanceof Error?ee:new Error(ee)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new i_({callback:z,params:{canvas:e,canvasContext:t,dependencyTracker:N?new Tg(e,I.operatorList.length,B):null,viewport:i,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:I.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!P,pdfBug:this._pdfBug,pageColors:u,enableHWA:this._transport.enableHWA,operationsFilter:y});(I.renderTasks||=new Set).add(j);let Q=j.task;return Promise.all([I.displayReadyCapability.promise,d]).then(([ee,ae])=>{if(this.destroyed){z();return}if(this._stats?.time("Rendering"),!(ae.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:ee,optionalContentConfig:ae}),j.operatorListChanged()}).catch(z),Q}getOperatorList({intent:t="display",annotationMode:e=Cs.ENABLE,printAnnotationStorage:i=null,isEditing:n=!1}={}){function s(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(d))}let o=this._transport.getRenderingIntent(t,e,i,n,!0),l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let d;return l.opListReadCapability||(d=Object.create(null),d.operatorListChanged=s,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(d),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>kl.textContent(i));let e=this.streamTextContent(t);return new Promise(function(i,n){function s(){o.read().then(function({value:d,done:h}){if(h){i(l);return}l.lang??=d.lang,Object.assign(l.styles,d.styles),l.items.push(...d.items),s()},n)}let o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(let i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,Promise.all(t)}cleanup(t=!1){this.#e=!0;let e=this.#t();return t&&e&&(this._stats&&=new Rh),e}#t(){if(!this.#e||this.destroyed)return!1;for(let{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(t,e){let i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,n=t.length;i<n;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(let i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:n}){let{map:s,transfer:o}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:n},o).getReader(),h=this._intentStates.get(e);h.streamReader=d;let u=()=>{d.read().then(({value:m,done:f})=>{if(f){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,h),u())},m=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(let f of h.renderTasks)f.operatorListChanged();this.#t()}if(h.displayReadyCapability)h.displayReadyCapability.reject(m);else if(h.opListReadCapability)h.opListReadCapability.reject(m);else throw m}})};u()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Sl){let n=uF;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new gr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[n,s]of this._intentStates)if(s===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}},Pl=class r{#e=Promise.withResolvers();#t=null;#n=null;#i=null;static#o=0;static#s=!1;static#r=new WeakMap;static{$i&&(this.#s=!0,Hr.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(t,e)=>{let i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;let n=new URL(e,i);return i.origin===n.origin},this._createCDNWrapper=t=>{let e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},this.fromPort=t=>{if(W2("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.create(t)}}constructor({name:t=null,port:e=null,verbosity:i=D2()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(r.#r.has(e))throw new Error("Cannot use more than one PDFWorker per port.");r.#r.set(e,this),this.#c(e)}else this.#l()}get promise(){return this.#e.promise}#a(){this.#e.resolve(),this.#t.send("configure",{verbosity:this.verbosity})}get port(){return this.#n}get messageHandler(){return this.#t}#c(t){this.#n=t,this.#t=new Qs("main","worker",t),this.#t.on("ready",()=>{}),this.#a()}#l(){if(r.#s||r.#h){this.#u();return}let{workerSrc:t}=r;try{r._isSameOrigin(window.location,t)||(t=r._createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t,{type:"module"}),i=new Qs("main","worker",e),n=()=>{s.abort(),i.destroy(),e.terminate(),this.destroyed?this.#e.reject(new Error("Worker was destroyed")):this.#u()},s=new AbortController;e.addEventListener("error",()=>{this.#i||n()},{signal:s.signal}),i.on("test",l=>{if(s.abort(),this.destroyed||!l){n();return}this.#t=i,this.#n=e,this.#i=e,this.#a()}),i.on("ready",l=>{if(s.abort(),this.destroyed){n();return}try{o()}catch{this.#u()}});let o=()=>{let l=new Uint8Array;i.send("test",l,[l.buffer])};o();return}catch{du("The worker has been disabled.")}this.#u()}#u(){r.#s||(ze("Setting up fake worker."),r.#s=!0),r._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this.#e.reject(new Error("Worker was destroyed"));return}let e=new vg;this.#n=e;let i=`fake${r.#o++}`,n=new Qs(i+"_worker",i,e);t.setup(n,e),this.#t=new Qs(i,i+"_worker",e),this.#a()}).catch(t=>{this.#e.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this.#i?.terminate(),this.#i=null,r.#r.delete(this.#n),this.#n=null,this.#t?.destroy(),this.#t=null}static create(t){let e=this.#r.get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new r(t)}static get workerSrc(){if(Hr.workerSrc)return Hr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#h(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return He(this,"_setupFakeWorkerGlobal",q(this,null,function*(){return this.#h?this.#h:(yield import(this.workerSrc)).WorkerMessageHandler}))}},e_=class{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#o=null;constructor(t,e,i,n,s,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new qh,this.fontLoader=new mg({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#s(t,e=null){let i=this.#e.get(t);if(i)return i;let n=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,n),n}get annotationStorage(){return He(this,"annotationStorage",new Tl)}getRenderingIntent(t,e=Cs.ENABLE,i=null,n=!1,s=!1){let o=xn.DISPLAY,l=pg;switch(t){case"any":o=xn.ANY;break;case"display":break;case"print":o=xn.PRINT;break;default:ze(`getRenderingIntent - invalid intent: ${t}`)}let d=o&xn.PRINT&&i instanceof Lh?i:this.annotationStorage;switch(e){case Cs.DISABLE:o+=xn.ANNOTATIONS_DISABLE;break;case Cs.ENABLE:break;case Cs.ENABLE_FORMS:o+=xn.ANNOTATIONS_FORMS;break;case Cs.ENABLE_STORAGE:o+=xn.ANNOTATIONS_STORAGE,l=d.serializable;break;default:ze(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(o+=xn.IS_EDITING),s&&(o+=xn.OPLIST);let{ids:h,hash:u}=d.modifiedIds,m=[o,l.hash,u];return{renderingIntent:o,cacheKey:m.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#o?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let i of this.#t.values())t.push(i._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Dl.cleanup(),this._networkStream?.cancelAllRequests(new gr("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,n)=>{rt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},n.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){n.close();return}rt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{n.error(s)})},n.onCancel=s=>{this._fullReader.cancel(s),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",i=>q(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:n,isRangeSupported:s,contentLength:o}=this._fullReader;return(!n||!s)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{e.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:n,isRangeSupported:s,contentLength:o}})),t.on("GetRangeReader",(i,n)=>{rt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){n.close();return}n.onPull=()=>{s.read().then(function({value:o,done:l}){if(l){n.close();return}rt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{s.cancel(o),n.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new Qg(i,this))}),t.on("DocException",i=>{e._capability.reject(ln(i))}),t.on("PasswordRequest",i=>{this.#o=Promise.withResolvers();try{if(!e.onPassword)throw ln(i);let n=s=>{s instanceof Error?this.#o.reject(s):this.#o.resolve({password:s})};e.onPassword(n,i.code)}catch(n){this.#o.reject(n)}return this.#o.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,n,s])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(n){case"Font":if("error"in s){let m=s.error;ze(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}let o=new q2(s),l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,f)=>globalThis.FontInspector.fontAdded(m,f):null,d=new fg(o,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":let{imageRef:h}=s;rt(h,"The imageRef must be defined.");for(let m of this.#t.values())for(let[,f]of m.objs)if(f?.ref===h)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new _g(s));break;case"Image":this.commonObjs.resolve(i,s);break;case"Pattern":let u=new gg(s);this.commonObjs.resolve(i,u.getIR());break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([i,n,s,o])=>{if(this.destroyed)return;let l=this.#t.get(n);if(!l.objs.has(i)){if(l._intentStates.size===0){o?.bitmap?.close();return}switch(s){case"Image":case"Pattern":l.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",i=>q(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");let n=this[i.type];if(!n)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(i)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ze("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let e=t-1,i=this.#n.get(e);if(i)return i;let n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#i.set(s.refStr,t);let o=new Jg(e,s,this,this._params.pdfBug);return this.#t.set(e,o),o});return this.#n.set(e,n),n}getPageIndex(t){return bg(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(e=>new Ng(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",e=this.#e.get(t);if(e)return e;let i=this.messageHandler.sendWithPromise(t,null).then(n=>({info:n[0],metadata:n[1]?new Fg(n[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:n[2]}));return this.#e.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(t=!1){return q(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let e of this.#t.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Dl.cleanup()}})}cachedPageNumber(t){if(!bg(t))return null;let e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(e)??null}},t_=class{#e=null;onContinue=null;onError=null;constructor(t){this.#e=t}get promise(){return this.#e.capability.promise}cancel(t=0){this.#e.cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=this.#e.operatorList;if(!t)return!1;let{annotationCanvasMap:e}=this.#e;return t.form||t.canvas&&e?.size>0}},i_=class r{#e=null;static#t=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:n,annotationCanvasMap:s,operatorList:o,pageIndex:l,canvasFactory:d,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:m=!1,pageColors:f=null,enableHWA:_=!1,operationsFilter:y=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=n,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=d,this.filterFactory=h,this._pdfBug=m,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new t_(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=_,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(r.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{viewport:i,transform:n,background:s,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ea(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:n,viewport:i,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),r.#t.delete(this._canvas),t||=new Sl(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return q(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),r.#t.delete(this._canvas),this.callback())))})}},pF="5.4.530",mF="50cc4adac",Xh=class r{#e=null;#t=null;#n;#i=null;#o=!1;#s=!1;#r=null;#a;#c=null;#l=null;static#u=null;static get _keyboardManager(){return He(this,"_keyboardManager",new eo([[["Escape","mac+Escape"],r.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],r.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],r.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],r.prototype._moveToPrevious],[["Home","mac+Home"],r.prototype._moveToBeginning],[["End","mac+End"],r.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#s=!1,this.#r=t):this.#s=!0,this.#l=t?._uiManager||e,this.#a=this.#l._eventBus,this.#n=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",r.#u||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let t=this.#e=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#r&&(t.ariaControls=`${this.#r.id}_colorpicker_dropdown`);let e=this.#l._signal;t.addEventListener("click",this.#f.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});let i=this.#t=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#n,t.append(i),t}renderMainDropdown(){let t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){let t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",Wn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(t.id=`${this.#r.id}_colorpicker_dropdown`);for(let[i,n]of this.#l.highlightColors){let s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",n),s.title=i,s.setAttribute("data-l10n-id",r.#u[i]);let o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=n,s.ariaSelected=n===this.#n,s.addEventListener("click",this.#p.bind(this,n),{signal:e}),t.append(s)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#p(t,e){e.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:nt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#e){this.#f(t);return}let e=t.target.getAttribute("data-color");e&&this.#p(e,t)}_moveToNext(t){if(!this.#m){this.#f(t);return}if(t.target===this.#e){this.#i.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstElementChild||t.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#f(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#f(t);return}this.#i.firstElementChild?.focus()}_moveToEnd(t){if(!this.#m){this.#f(t);return}this.#i.lastElementChild?.focus()}#g(t){r._keyboardManager.exec(this,t)}#f(t){if(this.#m){this.hideDropdown();return}if(this.#o=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}let e=this.#i=this.#h();this.#e.append(e)}#d(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#m(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#m){this.#r?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#o})}}updateColor(t){if(this.#t&&(this.#t.style.backgroundColor=t),!this.#i)return;let e=this.#l.highlightColors.values();for(let i of this.#i.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}},Kh=class r{#e=null;#t=null;#n=null;static#i=null;constructor(t){this.#t=t,this.#n=t._uiManager,r.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;let{editorType:t,colorType:e,color:i}=this.#t,n=this.#e=document.createElement("input");return n.type="color",n.value=i||"#000000",n.className="basicColorPicker",n.tabIndex=0,n.setAttribute("data-l10n-id",r.#i[t]),n.addEventListener("input",()=>{this.#n.updateParams(e,n.value)},{signal:this.#n._signal}),n}update(t){this.#e&&(this.#e.value=t)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}};function OC(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function gl(r){return Math.max(0,Math.min(255,255*r))}var Zh=class{static CMYK_G([t,e,i,n]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=gl(t),[t,t,t]}static G_HTML([t]){let e=OC(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(gl)}static RGB_HTML(t){return`#${t.map(OC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,i+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,i,n]){return[gl(1-Math.min(1,t+n)),gl(1-Math.min(1,i+n)),gl(1-Math.min(1,e+n))]}static CMYK_HTML(t){let e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){let n=1-t,s=1-e,o=1-i,l=Math.min(n,s,o);return["CMYK",n,s,o,l]}};var n_=class{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");let n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),i||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){At("Abstract method `_createSVG` called.")}},ia=class extends n_{_createSVG(t){return document.createElementNS(zr,t)}},fF=9,to=new WeakSet,gF=new Date().getTimezoneOffset()*60*1e3,yl=class{static create(t){switch(t.data.annotationType){case hi.LINK:return new Rl(t);case hi.TEXT:return new s_(t);case hi.WIDGET:switch(t.data.fieldType){case"Tx":return new o_(t);case"Btn":return t.data.radioButton?new Qh(t):t.data.checkBox?new l_(t):new c_(t);case"Ch":return new d_(t);case"Sig":return new a_(t)}return new Ur(t);case hi.POPUP:return new Ol(t);case hi.FREETEXT:return new Jh(t);case hi.LINE:return new u_(t);case hi.SQUARE:return new p_(t);case hi.CIRCLE:return new m_(t);case hi.POLYLINE:return new eu(t);case hi.CARET:return new g_(t);case hi.INK:return new Fl(t);case hi.POLYGON:return new f_(t);case hi.HIGHLIGHT:return new tu(t);case hi.UNDERLINE:return new __(t);case hi.SQUIGGLY:return new b_(t);case hi.STRIKEOUT:return new v_(t);case hi.STAMP:return new iu(t);case hi.FILEATTACHMENT:return new y_(t);default:return new $t(t)}}},$t=class r{#e=null;#t=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(i)),n&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return r._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){let{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){let t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;let{quadPoints:e,inkLists:i,rect:n}=this.data,s=-1/0,o=-1/0;if(e?.length>=8){for(let l=0;l<e.length;l+=8)e[l+1]>o?(o=e[l+1],s=e[l+2]):e[l+1]===o&&(s=Math.max(s,e[l+2]));return[s,o]}if(i?.length>=1){for(let l of i)for(let d=0,h=l.length;d<h;d+=2)l[d+1]>o?(o=l[d+1],s=l[d]):l[d+1]===o&&(s=Math.max(s,l[d]));if(s!==1/0)return[s,o]}return n?[n[2],n[3]]:null}_normalizePoint(t){let{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:n,pageX:s,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-s)/i,t[1]=100*(t[1]-o)/n,t}get commentText(){let{data:t}=this;return this.annotationStorage.getRawValue(`${xl}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){let{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${xl}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#e||={rect:this.data.rect.slice(0)});let{rect:e,popup:i}=t;e&&this.#i(e);let n=this.#n?.popup||this.popup;!n&&i?.text&&(this._createPopup(i),n=this.#n.popup),n&&(n.updateEdited(t),i?.deleted&&(n.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(t){let{container:{style:e},data:{rect:i,rotation:n},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-l)/s}%`,e.top=`${100*(o-t[3]+d)/o}%`,n===0?(e.width=`${100*(t[2]-t[0])/s}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(n)}_createContainer(t){let{data:e,parent:{page:i,viewport:n}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),!(this instanceof Ur)&&!(this instanceof Rl)&&(s.tabIndex=0);let{style:o}=s;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof Ol){let{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,s),s}let{width:l,height:d}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;let v=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(v>0||x>0){let I=`calc(${v}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;o.borderRadius=I}else if(this instanceof Qh){let I=`calc(${l}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;o.borderRadius=I}switch(e.borderStyle.style){case Xo.SOLID:o.borderStyle="solid";break;case Xo.DASHED:o.borderStyle="dashed";break;case Xo.BEVELED:ze("Unimplemented border style: beveled");break;case Xo.INSET:ze("Unimplemented border style: inset");break;case Xo.UNDERLINE:o.borderBottomStyle="solid";break;default:break}let S=e.borderColor||null;S?(this.#t=!0,o.borderColor=de.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):o.borderWidth=0}let h=de.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:u,pageHeight:m,pageX:f,pageY:_}=n.rawDims;o.left=`${100*(h[0]-f)/u}%`,o.top=`${100*(h[1]-_)/m}%`;let{rotation:y}=e;return e.hasOwnCanvas||y===0?(o.width=`${100*l/u}%`,o.height=`${100*d/m}%`):this.setRotation(y,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;let{pageWidth:i,pageHeight:n}=this.parent.viewport.rawDims,{width:s,height:o}=this;t%180!==0&&([s,o]=[o,s]),e.style.width=`${100*s/i}%`,e.style.height=`${100*o/n}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){let t=(e,i,n)=>{let s=n.detail[e],o=s[0],l=s.slice(1);n.target.style[i]=Zh[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[i]:Zh[`${o}_rgb`](l)})};return He(this,"_commonActions",{display:e=>{let{display:i}=e.detail,n=i%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{let i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){let i=this._commonActions;for(let n of Object.keys(e.detail))(t[n]||i[n])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;let i=this._commonActions;for(let[n,s]of Object.entries(e)){let o=i[n];if(o){let l={detail:{[n]:s},target:t};o(l),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[e,i,n,s]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){let[v,x,S,I]=t.subarray(2,6);if(n===v&&s===x&&e===S&&i===I)return}let{style:o}=this.container,l;if(this.#t){let{borderColor:v,borderWidth:x}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}let d=n-e,h=s-i,{svgFactory:u}=this,m=u.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";let f=u.createElement("defs");m.append(f);let _=u.createElement("clipPath"),y=`clippath_${this.data.id}`;_.setAttribute("id",y),_.setAttribute("clipPathUnits","objectBoundingBox"),f.append(_);for(let v=2,x=t.length;v<x;v+=8){let S=t[v],I=t[v+1],P=t[v+2],B=t[v+3],N=u.createElement("rect"),z=(P-e)/d,j=(s-I)/h,Q=(S-P)/d,ee=(I-B)/h;N.setAttribute("x",z),N.setAttribute("y",j),N.setAttribute("width",Q),N.setAttribute("height",ee),_.append(N),l?.push(`<rect vector-effect="non-scaling-stroke" x="${z}" y="${j}" width="${Q}" height="${ee}"/>`)}this.#t&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(m),this.container.style.clipPath=`url(#${y})`}_createPopup(t=null){let{data:e}=this,i,n;t?(i={str:t.text},n=t.date):(i=e.contentsObj,n=e.modificationDate),this.#n=new Ol({data:{color:e.color,titleObj:e.titleObj,modificationDate:n,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){At("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){let i=[];if(this._fieldObjects){let n=this._fieldObjects[t];if(n)for(let{page:s,id:o,exportValues:l}of n){if(s===-1||o===e)continue;let d=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!to.has(h)){ze(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:d,domElement:h})}return i}for(let n of document.getElementsByName(t)){let{exportValue:s}=n,o=n.getAttribute("data-element-id");o!==e&&to.has(n)&&i.push({id:o,exportValue:s,domElement:n})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(let e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}},r_=class extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){let{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}},Rl=class extends $t{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let n=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),n=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),n=!0):t.attachment?(this.#t(i,t.attachment,t.overlaidText,t.attachmentDest),n=!0):t.setOCGState?(this.#n(i,t.setOCGState,t.overlaidText),n=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),n=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),n=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),n=!0):this.isTooltipOnly&&!n&&(this._bindLink(i,""),n=!0)),this.container.classList.add("linkAnnotation"),n&&(this.contentElement=i,this.container.append(i)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#e(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#e()}#t(t,e,i="",n=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,n),!1),this.#e()}#n(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#e()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let n of Object.keys(e.actions)){let s=i.get(n);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:n}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#e()}_bindResetFormAction(t,e){let i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){ze('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();let{fields:n,refs:s,include:o}=e,l=[];if(n.length!==0||s.length!==0){let u=new Set(s);for(let m of n){let f=this._fieldObjects[m]||[];for(let{id:_}of f)u.add(_)}for(let m of Object.values(this._fieldObjects))for(let f of m)u.has(f.id)===o&&l.push(f)}else for(let u of Object.values(this._fieldObjects))l.push(...u);let d=this.annotationStorage,h=[];for(let u of l){let{id:m}=u;switch(h.push(m),u.type){case"text":{let _=u.defaultValue||"";d.setValue(m,{value:_});break}case"checkbox":case"radiobutton":{let _=u.defaultValue===u.exportValues;d.setValue(m,{value:_});break}case"combobox":case"listbox":{let _=u.defaultValue||"";d.setValue(m,{value:_});break}default:continue}let f=document.querySelector(`[data-element-id="${m}"]`);if(f){if(!to.has(f)){ze(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;f.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}}),!1}}},s_=class extends $t{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}},Ur=class extends $t{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return oi.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,n,s){i.includes("mouse")?t.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(i,o=>{if(i==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:s(o)}})})}_setEventListeners(t,e,i,n){for(let[s,o]of i)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,s,o,n),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){let e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":de.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){let e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||fF,s=t.style,o,l=2,d=h=>Math.round(10*h)/10;if(this.data.multiLine){let h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(h/(Th*n))||1,m=h/u;o=Math.min(n,d(m/Th))}else{let h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(n,d(h/Th))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=de.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},o_=class extends Ur{constructor(t){let e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,n){let s=this.annotationStorage;for(let o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=i),s.setValue(o.id,{[n]:i})}render(){let t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){let n=t.getValue(e,{value:this.data.fieldValue}),s=n.value||"",o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let l=n.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));let d={userValue:s,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=l??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",l??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),to.add(i),this.contentElement=i,i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;let{datetimeFormat:h,datetimeType:u,timeStep:m}=this.data,f=!!u&&this.enableScripting;h&&(i.title=h),this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",y=>{t.setValue(e,{value:y.target.value}),this.setPropertyOnSiblings(i,"value",y.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",y=>{let v=this.data.defaultFieldValue??"";i.value=d.userValue=v,d.formattedValue=null});let _=y=>{let{formattedValue:v}=d;v!=null&&(y.target.value=v),y.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",v=>{if(d.focused)return;let{target:x}=v;if(f&&(x.type=u,m&&(x.step=m)),d.userValue){let S=d.userValue;if(f)if(u==="time"){let I=new Date(S),P=[I.getHours(),I.getMinutes(),I.getSeconds()];x.value=P.map(B=>B.toString().padStart(2,"0")).join(":")}else x.value=new Date(S-gF).toISOString().split(u==="date"?"T":".",1)[0];else x.value=S}d.lastCommittedValue=x.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);let x={value(S){d.userValue=S.detail.value??"",f||t.setValue(e,{value:d.userValue.toString()}),S.target.value=d.userValue},formattedValue(S){let{formattedValue:I}=S.detail;d.formattedValue=I,I!=null&&S.target!==document.activeElement&&(S.target.value=I);let P={formattedValue:I};f&&(P.value=I),t.setValue(e,P)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{let{charLimit:I}=S.detail,{target:P}=S;if(I===0){P.removeAttribute("maxLength");return}P.setAttribute("maxLength",I);let B=d.userValue;!B||B.length<=I||(B=B.slice(0,I),P.value=d.userValue=B,t.setValue(e,{value:B}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:B,willCommit:!0,commitKey:1,selStart:P.selectionStart,selEnd:P.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),i.addEventListener("keydown",v=>{d.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(d.commitKey=3),x===-1)return;let{value:S}=v.target;d.lastCommittedValue!==S&&(d.lastCommittedValue=S,d.userValue=S,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});let y=_;_=null,i.addEventListener("blur",v=>{if(!d.focused||!v.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);let{target:x}=v,{value:S}=x;if(f){if(S&&u==="time"){let I=S.split(":").map(P=>parseInt(P,10));S=new Date(2e3,0,1,I[0],I[1],I[2]||0).valueOf(),x.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();x.type="text"}d.userValue=S,d.lastCommittedValue!==S&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}),y(v)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",v=>{d.lastCommittedValue=null;let{data:x,target:S}=v,{value:I,selectionStart:P,selectionEnd:B}=S,N=P,z=B;switch(v.inputType){case"deleteWordBackward":{let j=I.substring(0,P).match(/\w*[^\w]*$/);j&&(N-=j[0].length);break}case"deleteWordForward":{let j=I.substring(P).match(/^[^\w]*\w*/);j&&(z+=j[0].length);break}case"deleteContentBackward":P===B&&(N-=1);break;case"deleteContentForward":P===B&&(z+=1);break}v.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:I,change:x||"",willCommit:!1,selStart:N,selEnd:z}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(_&&i.addEventListener("blur",_),this.data.comb){let v=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},a_=class extends Ur{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},l_=class extends Ur{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,e=this.data,i=e.id,n=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(i,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let s=document.createElement("input");return to.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{let{name:l,checked:d}=o.target;for(let h of this._getElementsByName(l,i)){let u=d&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(i,{value:d})}),s.addEventListener("resetform",o=>{let l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{let l={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},Qh=class extends Ur{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let t=this.annotationStorage,e=this.data,i=e.id,n=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(i,{value:n})),n)for(let o of this._getElementsByName(e.fieldName,i))t.setValue(o.id,{value:!1});let s=document.createElement("input");if(to.add(s),s.setAttribute("data-element-id",i),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,n&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{let{name:l,checked:d}=o.target;for(let h of this._getElementsByName(l,i))t.setValue(h.id,{value:!1});t.setValue(i,{value:d})}),s.addEventListener("resetform",o=>{let l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){let o=e.buttonValue;s.addEventListener("updatefromsandbox",l=>{let d={value:h=>{let u=o===h.detail.value;for(let m of this._getElementsByName(h.target.name)){let f=u&&m.id===i;m.domElement&&(m.domElement.checked=f),t.setValue(m.id,{value:f})}}};this._dispatchEventFromSandbox(d,l)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},c_=class extends Rl{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");let e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}},d_=class extends Ur{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");to.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{let m=this.data.defaultFieldValue;for(let f of n.options)f.selected=f.value===m});for(let u of this.data.options){let m=document.createElement("option");m.textContent=u.displayValue,m.value=u.exportValue,i.value.includes(u.exportValue)&&(m.setAttribute("selected",!0),s=!1),n.append(m)}let o=null;if(s){let u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),o=()=>{u.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}let l=u=>{let m=u?"value":"textContent",{options:f,multiple:_}=n;return _?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[m]):f.selectedIndex===-1?null:f[f.selectedIndex][m]},d=l(!1),h=u=>{let m=u.target.options;return Array.prototype.map.call(m,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{let m={value(f){o?.();let _=f.detail.value,y=new Set(Array.isArray(_)?_:[_]);for(let v of n.options)v.selected=y.has(v.value);t.setValue(e,{value:l(!0)}),d=l(!1)},multipleSelection(f){n.multiple=!0},remove(f){let _=n.options,y=f.detail.remove;_[y].selected=!1,n.remove(y),_.length>0&&Array.prototype.findIndex.call(_,x=>x.selected)===-1&&(_[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),d=l(!1)},clear(f){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),d=l(!1)},insert(f){let{index:_,displayValue:y,exportValue:v}=f.detail.insert,x=n.children[_],S=document.createElement("option");S.textContent=y,S.value=v,x?x.before(S):n.append(S),t.setValue(e,{value:l(!0),items:h(f)}),d=l(!1)},items(f){let{items:_}=f.detail;for(;n.length!==0;)n.remove(0);for(let y of _){let{displayValue:v,exportValue:x}=y,S=document.createElement("option");S.textContent=v,S.value=x,n.append(S)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),d=l(!1)},indices(f){let _=new Set(f.detail.indices);for(let y of f.target.options)y.selected=_.has(y.index);t.setValue(e,{value:l(!0)}),d=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(m,u)}),n.addEventListener("input",u=>{let m=l(!0),f=l(!1);t.setValue(e,{value:m}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:f,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}},Ol=class extends $t{constructor(t){let{data:e,elements:i,parent:n}=t,s=!!n._commentManager;if(super(t,{isRenderable:!s&&$t._hasPopupData(e)}),this.elements=i,s&&$t._hasPopupData(e)){let o=this.popup=this.#e();for(let l of i)l.popup=o}else this.popup=null}#e(){return new h_({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){let{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";let e=this.popup=this.#e(),i=[];for(let n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",i.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(n=>`${Zo}${n}`).join(",")),this.container}},h_=class{#e=null;#t=this.#j.bind(this);#n=this.#V.bind(this);#i=this.#R.bind(this);#o=this.#w.bind(this);#s=null;#r=null;#a=null;#c=null;#l=null;#u=null;#h=null;#p=!1;#g=null;#f=null;#d=null;#m=null;#_=null;#v=null;#b=null;#E=null;#C=null;#x=null;#M=!1;#y=null;#k=null;constructor({container:t,color:e,elements:i,titleObj:n,modificationDate:s,contentsObj:o,richText:l,parent:d,rect:h,parentRect:u,open:m,commentManager:f=null}){this.#r=t,this.#C=n,this.#a=o,this.#E=l,this.#u=d,this.#s=e,this.#b=h,this.#h=u,this.#l=i,this.#e=f,this.#y=i[0],this.#c=Ml.toDateObject(s),this.trigger=i.flatMap(_=>_.getElementsToTriggerPopup()),f||(this.#I(),this.#r.hidden=!0,m&&this.#w())}#I(){if(this.#f)return;this.#f=new AbortController;let{signal:t}=this.#f;for(let e of this.trigger)e.addEventListener("click",this.#o,{signal:t}),e.addEventListener("pointerenter",this.#i,{signal:t}),e.addEventListener("pointerleave",this.#n,{signal:t}),e.classList.add("popupTriggerArea");for(let e of this.#l)e.container?.addEventListener("keydown",this.#t,{signal:t})}#A(){let t=this.#l.find(e=>e.hasCommentButton);t&&(this.#_=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#m){this.#m.parentNode||this.#y.container.after(this.#m);return}if(this.#_||this.#A(),!this.#_)return;let{signal:t}=this.#f=new AbortController,e=this.#y.hasOwnCommentButton,i=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!e)},n=()=>{this.#e.toggleCommentPopup(this,!1,!0,!e)},s=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(e){this.#m=this.#y.container;for(let o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#t,{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",n,{signal:t}),o.addEventListener("pointerleave",s,{signal:t}),o.classList.add("popupTriggerArea")}else{let o=this.#m=document.createElement("button");o.className="annotationCommentButton";let l=this.#y.container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#N(),this.#T(),o.addEventListener("keydown",this.#t,{signal:t}),o.addEventListener("click",i,{signal:t}),o.addEventListener("pointerenter",n,{signal:t}),o.addEventListener("pointerleave",s,{signal:t}),l.after(o)}}#T(){if(this.#y.extraPopupElement&&!this.#y.editor)return;this.#m||this.renderCommentButton();let[t,e]=this.#_,{style:i}=this.#m;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#N(){this.#y.extraPopupElement||(this.#m||this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){let{color:t,opacity:e}=this.#y.commentData;return t?this.#u._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){let{richText:t,color:e,opacity:i,creationDate:n,modificationDate:s}=this.#y.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:n,modificationDate:s}}get elementBeforePopup(){return this.#m}get comment(){return this.#k||=this.#y.commentText,this.#k}set comment(t){t!==this.comment&&(this.#y.commentText=this.#k=t)}focus(){this.#y.container?.focus()}get parentBoundingClientRect(){return this.#y.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#m&&(this.#m.classList.toggle("selected",t),this.#m.ariaExpanded=e)}setSelectedCommentButton(t){this.#m.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;let{x:t,y:e,height:i}=this.#m.getBoundingClientRect(),{x:n,y:s,width:o,height:l}=this.#y.layer.getBoundingClientRect();return[(t-n)/o,(e+i-s)/l]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#_}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){let[e,i]=this.#v||this.commentButtonPosition.map(h=>h/100),n=this.parentBoundingClientRect,{x:s,y:o,width:l,height:d}=n;this.#e.showDialog(null,this,s+e*l,o+i*d,Ue(J({},t),{parentDimensions:n}))}render(){if(this.#g)return;let t=this.#g=document.createElement("div");if(t.className="popup",this.#s){let i=t.style.outlineColor=de.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}let e=document.createElement("span");if(e.className="header",this.#C?.str){let i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#C}if(t.append(e),this.#c){let i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}zC({html:this.#P||this.#a.str,dir:this.#a?.dir,className:"popupContent"},t),this.#r.append(t)}get#P(){let t=this.#E,e=this.#a;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#O(){return this.#P?.attributes?.style?.fontSize||0}get#B(){return this.#P?.attributes?.style?.color||null}#F(t){let e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(let s of t.split(`
`))e.push({name:"span",value:s,attributes:n});return i}#j(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#p)&&this.#w()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#e){i?(this.remove(),this.#k=null):e&&(e.deleted?this.remove():(this.#N(),this.#k=e.text)),t&&(this.#_=null,this.#A(),this.#T());return}if(i||e?.deleted){this.remove();return}this.#I(),this.#x||={contentsObj:this.#a,richText:this.#E},t&&(this.#d=null),e&&e.text&&(this.#E=this.#F(e.text),this.#c=Ml.toDateObject(e.date),this.#a=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#a,richText:this.#E}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#d=null)}remove(){if(this.#f?.abort(),this.#f=null,this.#g?.remove(),this.#g=null,this.#M=!1,this.#p=!1,this.#m?.remove(),this.#m=null,this.trigger)for(let t of this.trigger)t.classList.remove("popupTriggerArea")}#S(){if(this.#d!==null)return;let{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:n,pageY:s}}}=this.#u,o=!!this.#h,l=o?this.#h:this.#b;for(let y of this.#l)if(!l||de.intersect(y.data.rect,l)!==null){l=y.data.rect,o=!0;break}let d=de.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),u=o?l[2]-l[0]+5:0,m=d[0]+u,f=d[1];this.#d=[100*(m-n)/e,100*(f-s)/i];let{style:_}=this.#r;_.left=`${this.#d[0]}%`,_.top=`${this.#d[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#p=!this.#p,this.#p?(this.#R(),this.#r.addEventListener("click",this.#o),this.#r.addEventListener("keydown",this.#t)):(this.#V(),this.#r.removeEventListener("click",this.#o),this.#r.removeEventListener("keydown",this.#t))}#R(){this.#g||this.render(),this.isVisible?this.#p&&this.#r.classList.add("focused"):(this.#S(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#V(){this.#r.classList.remove("focused"),!(this.#p||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#M=this.isVisible,this.#M&&(this.#r.hidden=!0)}maybeShow(){this.#e||(this.#I(),this.#M&&(this.#g||this.#R(),this.#M=!1,this.#r.hidden=!1))}get isVisible(){return this.#e?!1:this.#r.hidden===!1}},Jh=class extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=je.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(let e of this.textContent){let i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},u_=class extends $t{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let{data:t,width:e,height:i}=this,n=this.svgFactory.create(e,i,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),n.append(s),this.container.append(n),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},p_=class extends $t{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let{data:t,width:e,height:i}=this,n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",e-s),o.setAttribute("height",i-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.append(o),this.container.append(n),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},m_=class extends $t{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let{data:t,width:e,height:i}=this,n=this.svgFactory.create(e,i,!0),s=t.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",i/2),o.setAttribute("rx",e/2-s/2),o.setAttribute("ry",i/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.append(o),this.container.append(n),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},eu=class extends $t{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:e,borderStyle:i,popupRef:n},width:s,height:o}=this;if(!e)return this.container;let l=this.svgFactory.create(s,o,!0),d=[];for(let u=0,m=e.length;u<m;u+=2){let f=e[u]-t[0],_=t[3]-e[u+1];d.push(`${f},${_}`)}d=d.join(" ");let h=this.#e=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",d),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},f_=class extends eu{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},g_=class extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}},Fl=class extends $t{#e=null;#t=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?je.HIGHLIGHT:je.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,rotation:e,inkLists:i,borderStyle:n,popupRef:s}}=this,{transform:o,width:l,height:d}=this.#n(e,t),h=this.svgFactory.create(l,d,!0),u=this.#e=this.svgFactory.createElement("svg:g");h.append(u),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",o);for(let m=0,f=i.length;m<f;m++){let _=this.svgFactory.createElement(this.svgElementName);this.#t.push(_),_.setAttribute("points",i[m].join(",")),u.append(_)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);let{thickness:e,points:i,rect:n}=t,s=this.#e;if(e>=0&&s.setAttribute("stroke-width",e||1),i)for(let o=0,l=this.#t.length;o<l;o++)this.#t[o].setAttribute("points",i[o].join(","));if(n){let{transform:o,width:l,height:d}=this.#n(this.data.rotation,n);s.parentElement.setAttribute("viewBox",`0 0 ${l} ${d}`),s.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}},tu=class extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=je.HIGHLIGHT}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){let i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},__=class extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){let i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},b_=class extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){let i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},v_=class extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){let i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}},iu=class extends $t{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=je.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}},y_=class extends $t{#e=null;constructor(t){super(t,{isRenderable:!0});let{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",J({source:this},e))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:e}=this,i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;let{isMac:n}=oi.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(n?s.metaKey:s.ctrlKey)&&this.#t()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},x_=class r{#e=null;#t=null;#n=null;#i=new Map;#o=null;#s=null;#r=[];#a=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:n,page:s,viewport:o,structTreeLayer:l,commentManager:d,linkService:h,annotationStorage:u}){this.div=t,this.#e=e,this.#t=i,this.#o=l||null,this.#s=h||null,this.#n=u||new Tl,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n,this._commentManager=d||null}hasEditableAnnotations(){return this.#i.size>0}render(t){return q(this,null,function*(){let{annotations:e}=t,i=this.div;Js(i,this.viewport);let n=new Map,s=[],o={data:null,layer:i,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ia,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(let l of e){if(l.noHTML)continue;let d=l.annotationType===hi.POPUP;if(d){let m=n.get(l.id);if(!m)continue;if(!this._commentManager){s.push(l);continue}o.elements=m}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;o.data=l;let h=yl.create(o);if(!h.isRenderable)continue;if(!d&&(this.#r.push(h),l.popupRef)){let m=n.get(l.popupRef);m?m.push(h):n.set(l.popupRef,[h])}let u=h.render();l.hidden&&(u.style.visibility="hidden"),h._isEditable&&(this.#i.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}yield this.#c();for(let l of s){let d=o.elements=n.get(l.id);o.data=l;let h=yl.create(o);if(!h.isRenderable)continue;let u=h.render();h.contentElement.id=`${Zo}${l.id}`,l.hidden&&(u.style.visibility="hidden"),d.at(-1).container.after(u)}this.#l()})}#c(){return q(this,null,function*(){if(this.#r.length===0)return;this.div.replaceChildren();let t=[];if(!this.#a){this.#a=!0;for(let{contentElement:i,data:{id:n}}of this.#r){let s=i.id=`${Zo}${n}`;t.push(this.#o?.getAriaAttributes(s).then(o=>{if(o)for(let[l,d]of o)i.setAttribute(l,d)}))}}this.#r.sort(({data:{rect:[i,n,s,o]}},{data:{rect:[l,d,h,u]}})=>{if(i===s&&n===o)return 1;if(l===h&&d===u)return-1;let m=o,f=n,_=(n+o)/2,y=u,v=d,x=(d+u)/2;if(_>=y&&x<=f)return-1;if(x>=m&&_<=v)return 1;let S=(i+s)/2,I=(l+h)/2;return S-I});let e=document.createDocumentFragment();for(let i of this.#r)e.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&e.append(i.extraPopupElement.render());if(this.div.append(e),yield Promise.all(t),this.#e)for(let i of this.#r)this.#e.addPointerInTextLayer(i.contentElement,!1)})}addLinkAnnotations(t){return q(this,null,function*(){let e={data:null,layer:this.div,linkService:this.#s,svgFactory:new ia,parent:this};for(let i of t){i.borderStyle||=r._defaultBorderStyle,e.data=i;let n=yl.create(e);n.isRenderable&&(n.render(),n.contentElement.id=`${Zo}${i.id}`,this.#r.push(n))}yield this.#c()})}update({viewport:t}){let e=this.div;this.viewport=t,Js(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#t)return;let t=this.div;for(let[e,i]of this.#t){let n=t.querySelector(`[data-annotation-id="${e}"]`);if(!n)continue;i.className="annotationContent";let{firstChild:s}=n;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):n.append(i);let o=this.#i.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,n.id,i),o._hasNoCanvas=!1):o.canvas=i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){let{div:e}=this,{id:i,rotation:n}=t,s=new r_({data:{id:i,rect:t.getPDFRect(),rotation:n},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#n});return s.render(),s.contentElement.id=`${Zo}${i}`,s.createOrUpdatePopup(),this.#r.push(s),s}removeAnnotation(t){let e=this.#r.findIndex(n=>n.data.id===t);if(e<0)return;let[i]=this.#r.splice(e,1);this.#e?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(let e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return He(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Xo.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Sh=/\r\n?|\n/g,w_=class r extends Dt{#e="";#t=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let t=r.prototype,e=s=>s.isEmpty(),i=Al.TRANSLATE_SMALL,n=Al.TRANSLATE_BIG;return He(this,"_keyboardManager",new eo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}]]))}static _type="freetext";static _editorType=je.FREETEXT;constructor(t){super(Ue(J({},t),{name:"freeTextEditor"})),this.color=t.color||r._defaultColor||Dt._defaultLineColor,this.#i=t.fontSize||r._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){Dt.initialize(t,e);let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case nt.FREETEXT_SIZE:r._defaultFontSize=e;break;case nt.FREETEXT_COLOR:r._defaultColor=e;break}}updateParams(t,e){switch(t){case nt.FREETEXT_SIZE:this.#o(e);break;case nt.FREETEXT_COLOR:this.#s(e);break}}static get defaultPropertiesToUpdate(){return[[nt.FREETEXT_SIZE,r._defaultFontSize],[nt.FREETEXT_COLOR,r._defaultColor||Dt._defaultLineColor]]}get propertiesToUpdate(){return[[nt.FREETEXT_SIZE,this.#i],[nt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Kh(this),[["colorPicker",this._colorPicker]]}get colorType(){return nt.FREETEXT_COLOR}#o(t){let e=n=>{this.editorDiv.style.fontSize=`calc(${n}px * var(--total-scale-factor))`,this.translate(0,-(n-this.#i)*this.parentScale),this.#i=n,this.#a()},i=this.#i;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){let e=n=>{this.color=n,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){let t=this.parentScale;return[-r._internalPadding*t,-(r._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;let t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){let t=[];this.editorDiv.normalize();let e=null;for(let i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(r.#c(i)),e=i);return t.join(`
`)}#a(){let[t,e]=this.parentDimensions,i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{let{currentLayer:n,div:s}=this,o=s.style.display,l=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",n.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=this.#e,e=this.#e=this.#r().trimEnd();if(t===e)return;let i=n=>{if(this.#e=n,!n){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#a()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#a()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){r._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){let[n,s]=this.parentDimensions;if(this.annotationElementId){let{position:o}=this._initialData,[l,d]=this.getInitialTranslation();[l,d]=this.pageTranslationToScreen(l,d);let[h,u]=this.pageDimensions,[m,f]=this.pageTranslation,_,y;switch(this.rotation){case 0:_=t+(o[0]-m)/h,y=e+this.height-(o[1]-f)/u;break;case 90:_=t+(o[0]-m)/h,y=e-(o[1]-f)/u,[l,d]=[d,-l];break;case 180:_=t-this.width+(o[0]-m)/h,y=e-(o[1]-f)/u,[l,d]=[-l,-d];break;case 270:_=t+(o[0]-m-this.height*u)/h,y=e+(o[1]-f-this.width*h)/u,[l,d]=[-d,l];break}this.setAt(_*n,y*s,l,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Sh,"")}editorDivPaste(t){let e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();let n=r.#h(e.getData("text")||"").replaceAll(Sh,`
`);if(!n)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let o=s.getRangeAt(0);if(!n.includes(`
`)){o.insertNode(document.createTextNode(n)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:l,startOffset:d}=o,h=[],u=[];if(l.nodeType===Node.TEXT_NODE){let _=l.parentElement;if(u.push(l.nodeValue.slice(d).replaceAll(Sh,"")),_!==this.editorDiv){let y=h;for(let v of this.editorDiv.childNodes){if(v===_){y=u;continue}y.push(r.#c(v))}}h.push(l.nodeValue.slice(0,d).replaceAll(Sh,""))}else if(l===this.editorDiv){let _=h,y=0;for(let v of this.editorDiv.childNodes)y++===d&&(_=u),_.push(r.#c(v))}this.#e=`${h.join(`
`)}${n}${u.join(`
`)}`,this.#l();let m=new Range,f=Math.sumPrecise(h.map(_=>_.length));for(let{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){let y=_.nodeValue.length;if(f<=y){m.setStart(_,f),m.setEnd(_,f);break}f-=y}s.removeAllRanges(),s.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(let t of this.#e.split(`
`)){let e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#e.replaceAll("\xA0"," ")}static#h(t){return t.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}getPDFRect(){let t=r._internalPadding*this.parentScale;return this.getRect(t,t)}static deserialize(t,e,i){return q(this,null,function*(){let n=null;if(t instanceof Jh){let{data:{defaultAppearanceData:{fontSize:o,fontColor:l},rect:d,rotation:h,id:u,popupRef:m,richText:f,contentsObj:_,creationDate:y,modificationDate:v},textContent:x,textPosition:S,parent:{page:{pageNumber:I}}}=t;if(!x||x.length===0)return null;n=t={annotationType:je.FREETEXT,color:Array.from(l),fontSize:o,value:x.join(`
`),position:S,pageIndex:I-1,rect:d.slice(0),rotation:h,annotationElementId:u,id:u,deleted:!1,popupRef:m,comment:_?.str||null,richText:f,creationDate:y,modificationDate:v}}let s=yield Ls(r,this,"deserialize").call(this,t,e,i);return s.#i=t.fontSize,s.color=de.makeHexColor(...t.color),s.#e=r.#h(t.value),s._initialData=n,t.comment&&s.setCommentData(t),s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let e=Dt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#i,value:this.#u()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#p(i)?null:(i.id=this.annotationElementId,i)}#p(t){let{value:e,fontSize:i,color:n,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((o,l)=>o!==n[l])||t.pageIndex!==s}renderAnnotationElement(t){let e=super.renderAnnotationElement(t);if(!e)return null;let{style:i}=e;i.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(let n of this.#e.split(`
`)){let s=document.createElement("div");s.append(n?document.createTextNode(n):document.createElement("br")),e.append(s)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}},me=(()=>{class r{static PRECISION=1e-4;toSVGPath(){At("Abstract method `toSVGPath` must be implemented.")}get box(){At("Abstract getter `box` must be implemented.")}serialize(e,i){At("Abstract method `serialize` must be implemented.")}static _rescale(e,i,n,s,o,l){l||=new Float32Array(e.length);for(let d=0,h=e.length;d<h;d+=2)l[d]=i+e[d]*s,l[d+1]=n+e[d+1]*o;return l}static _rescaleAndSwap(e,i,n,s,o,l){l||=new Float32Array(e.length);for(let d=0,h=e.length;d<h;d+=2)l[d]=i+e[d+1]*s,l[d+1]=n+e[d]*o;return l}static _translate(e,i,n,s){s||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)s[o]=i+e[o],s[o+1]=n+e[o+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,i,n,s,o){switch(o){case 90:return[1-i/n,e/s];case 180:return[1-e/n,1-i/s];case 270:return[i/n,1-e/s];default:return[e/n,i/s]}}static _normalizePagePoint(e,i,n){switch(n){case 90:return[1-i,e];case 180:return[1-e,1-i];case 270:return[i,1-e];default:return[e,i]}}static createBezierPoints(e,i,n,s,o,l){return[(e+5*n)/6,(i+5*s)/6,(5*n+o)/6,(5*s+l)/6,(n+o)/2,(s+l)/2]}}return r})(),nu=class r{#e;#t=[];#n;#i;#o=[];#s=new Float32Array(18);#r;#a;#c;#l;#u;#h;#p=[];static#g=8;static#f=2;static#d=r.#g+r.#f;constructor({x:t,y:e},i,n,s,o,l=0){this.#e=i,this.#h=s*n,this.#i=o,this.#s.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=l,this.#l=r.#g*n,this.#c=r.#d*n,this.#u=n,this.#p.push(t,e)}isEmpty(){return isNaN(this.#s[8])}#m(){let t=this.#s.subarray(4,6),e=this.#s.subarray(16,18),[i,n,s,o]=this.#e;return[(this.#r+(t[0]-e[0])/2-i)/s,(this.#a+(t[1]-e[1])/2-n)/o,(this.#r+(e[0]-t[0])/2-i)/s,(this.#a+(e[1]-t[1])/2-n)/o]}add({x:t,y:e}){this.#r=t,this.#a=e;let[i,n,s,o]=this.#e,[l,d,h,u]=this.#s.subarray(8,12),m=t-h,f=e-u,_=Math.hypot(m,f);if(_<this.#c)return!1;let y=_-this.#l,v=y/_,x=v*m,S=v*f,I=l,P=d;l=h,d=u,h+=x,u+=S,this.#p?.push(t,e);let B=-S/y,N=x/y,z=B*this.#h,j=N*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([h+z,u+j],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([h-z,u-j],16),isNaN(this.#s[6])?(this.#o.length===0&&(this.#s.set([l+z,d+j],2),this.#o.push(NaN,NaN,NaN,NaN,(l+z-i)/s,(d+j-n)/o),this.#s.set([l-z,d-j],14),this.#t.push(NaN,NaN,NaN,NaN,(l-z-i)/s,(d-j-n)/o)),this.#s.set([I,P,l,d,h,u],6),!this.isEmpty()):(this.#s.set([I,P,l,d,h,u],6),Math.abs(Math.atan2(P-d,I-l)-Math.atan2(S,x))<Math.PI/2?([l,d,h,u]=this.#s.subarray(2,6),this.#o.push(NaN,NaN,NaN,NaN,((l+h)/2-i)/s,((d+u)/2-n)/o),[l,d,I,P]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((I+l)/2-i)/s,((P+d)/2-n)/o),!0):([I,P,l,d,h,u]=this.#s.subarray(0,6),this.#o.push(((I+5*l)/6-i)/s,((P+5*d)/6-n)/o,((5*l+h)/6-i)/s,((5*d+u)/6-n)/o,((l+h)/2-i)/s,((d+u)/2-n)/o),[h,u,l,d,I,P]=this.#s.subarray(12,18),this.#t.push(((I+5*l)/6-i)/s,((P+5*d)/6-n)/o,((5*l+h)/6-i)/s,((5*d+u)/6-n)/o,((l+h)/2-i)/s,((d+u)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";let t=this.#o,e=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#_();let i=[];i.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?i.push(`L${t[n+4]} ${t[n+5]}`):i.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);this.#b(i);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?i.push(`L${e[n+4]} ${e[n+5]}`):i.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return this.#v(i),i.join(" ")}#_(){let[t,e,i,n]=this.#e,[s,o,l,d]=this.#m();return`M${(this.#s[2]-t)/i} ${(this.#s[3]-e)/n} L${(this.#s[4]-t)/i} ${(this.#s[5]-e)/n} L${s} ${o} L${l} ${d} L${(this.#s[16]-t)/i} ${(this.#s[17]-e)/n} L${(this.#s[14]-t)/i} ${(this.#s[15]-e)/n} Z`}#v(t){let e=this.#t;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){let[e,i,n,s]=this.#e,o=this.#s.subarray(4,6),l=this.#s.subarray(16,18),[d,h,u,m]=this.#m();t.push(`L${(o[0]-e)/n} ${(o[1]-i)/s} L${d} ${h} L${u} ${m} L${(l[0]-e)/n} ${(l[1]-i)/s}`)}newFreeDrawOutline(t,e,i,n,s,o){return new ru(t,e,i,n,s,o)}getOutlines(){let t=this.#o,e=this.#t,i=this.#s,[n,s,o,l]=this.#e,d=new Float32Array((this.#p?.length??0)+2);for(let m=0,f=d.length-2;m<f;m+=2)d[m]=(this.#p[m]-n)/o,d[m+1]=(this.#p[m+1]-s)/l;if(d[d.length-2]=(this.#r-n)/o,d[d.length-1]=(this.#a-s)/l,isNaN(i[6])&&!this.isEmpty())return this.#E(d);let h=new Float32Array(this.#o.length+24+this.#t.length),u=t.length;for(let m=0;m<u;m+=2){if(isNaN(t[m])){h[m]=h[m+1]=NaN;continue}h[m]=t[m],h[m+1]=t[m+1]}u=this.#x(h,u);for(let m=e.length-6;m>=6;m-=6)for(let f=0;f<6;f+=2){if(isNaN(e[m+f])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=e[m+f],h[u+1]=e[m+f+1],u+=2}return this.#C(h,u),this.newFreeDrawOutline(h,d,this.#e,this.#u,this.#n,this.#i)}#E(t){let e=this.#s,[i,n,s,o]=this.#e,[l,d,h,u]=this.#m(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-i)/s,(e[3]-n)/o,NaN,NaN,NaN,NaN,(e[4]-i)/s,(e[5]-n)/o,NaN,NaN,NaN,NaN,l,d,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-i)/s,(e[17]-n)/o,NaN,NaN,NaN,NaN,(e[14]-i)/s,(e[15]-n)/o],0),this.newFreeDrawOutline(m,t,this.#e,this.#u,this.#n,this.#i)}#C(t,e){let i=this.#t;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#x(t,e){let i=this.#s.subarray(4,6),n=this.#s.subarray(16,18),[s,o,l,d]=this.#e,[h,u,m,f]=this.#m();return t.set([NaN,NaN,NaN,NaN,(i[0]-s)/l,(i[1]-o)/d,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,m,f,NaN,NaN,NaN,NaN,(n[0]-s)/l,(n[1]-o)/d],e),e+=24}},ru=class extends me{#e;#t=new Float32Array(4);#n;#i;#o;#s;#r;constructor(t,e,i,n,s,o){super(),this.#r=t,this.#o=e,this.#e=i,this.#s=n,this.#n=s,this.#i=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#a(o);let[l,d,h,u]=this.#t;for(let m=0,f=t.length;m<f;m+=2)t[m]=(t[m]-l)/h,t[m+1]=(t[m+1]-d)/u;for(let m=0,f=e.length;m<f;m+=2)e[m]=(e[m]-l)/h,e[m+1]=(e[m+1]-d)/u}toSVGPath(){let t=[`M${this.#r[4]} ${this.#r[5]}`];for(let e=6,i=this.#r.length;e<i;e+=6){if(isNaN(this.#r[e])){t.push(`L${this.#r[e+4]} ${this.#r[e+5]}`);continue}t.push(`C${this.#r[e]} ${this.#r[e+1]} ${this.#r[e+2]} ${this.#r[e+3]} ${this.#r[e+4]} ${this.#r[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,n],s){let o=i-t,l=n-e,d,h;switch(s){case 0:d=me._rescale(this.#r,t,n,o,-l),h=me._rescale(this.#o,t,n,o,-l);break;case 90:d=me._rescaleAndSwap(this.#r,t,e,o,l),h=me._rescaleAndSwap(this.#o,t,e,o,l);break;case 180:d=me._rescale(this.#r,i,e,-o,l),h=me._rescale(this.#o,i,e,-o,l);break;case 270:d=me._rescaleAndSwap(this.#r,i,n,-o,-l),h=me._rescaleAndSwap(this.#o,i,n,-o,-l);break}return{outline:Array.from(d),points:[Array.from(h)]}}#a(t){let e=this.#r,i=e[4],n=e[5],s=[i,n,i,n],o=i,l=n,d=i,h=n,u=t?Math.max:Math.min,m=new Float32Array(4);for(let _=6,y=e.length;_<y;_+=6){let v=e[_+4],x=e[_+5];isNaN(e[_])?(de.pointBoundingBox(v,x,s),l>x?(o=v,l=x):l===x&&(o=u(o,v)),h<x?(d=v,h=x):h===x&&(d=u(d,v))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,de.bezierBoundingBox(i,n,...e.slice(_,_+6),m),de.rectBoundingBox(m[0],m[1],m[2],m[3],s),l>m[1]?(o=m[0],l=m[1]):l===m[1]&&(o=u(o,m[0])),h<m[3]?(d=m[2],h=m[3]):h===m[3]&&(d=u(d,m[2]))),i=v,n=x}let f=this.#t;f[0]=s[0]-this.#n,f[1]=s[1]-this.#n,f[2]=s[2]-s[0]+2*this.#n,f[3]=s[3]-s[1]+2*this.#n,this.firstPoint=[o,l],this.lastPoint=[d,h]}get box(){return this.#t}newOutliner(t,e,i,n,s,o=0){return new nu(t,e,i,n,s,o)}getNewOutline(t,e){let[i,n,s,o]=this.#t,[l,d,h,u]=this.#e,m=s*h,f=o*u,_=i*h+l,y=n*u+d,v=this.newOutliner({x:this.#o[0]*m+_,y:this.#o[1]*f+y},this.#e,this.#s,t,this.#i,e??this.#n);for(let x=2;x<this.#o.length;x+=2)v.add({x:this.#o[x]*m+_,y:this.#o[x+1]*f+y});return v.getOutlines()}},Ll=class{#e;#t;#n;#i=[];#o=[];constructor(t,e=0,i=0,n=!0){let s=[1/0,1/0,-1/0,-1/0],l=10**-4;for(let{x,y:S,width:I,height:P}of t){let B=Math.floor((x-e)/l)*l,N=Math.ceil((x+I+e)/l)*l,z=Math.floor((S-e)/l)*l,j=Math.ceil((S+P+e)/l)*l,Q=[B,z,j,!0],ee=[N,z,j,!1];this.#i.push(Q,ee),de.rectBoundingBox(B,z,N,j,s)}let d=s[2]-s[0]+2*i,h=s[3]-s[1]+2*i,u=s[0]-i,m=s[1]-i,f=n?-1/0:1/0,_=1/0,y=this.#i.at(n?-1:-2),v=[y[0],y[2]];for(let x of this.#i){let[S,I,P,B]=x;!B&&n?I<_?(_=I,f=S):I===_&&(f=Math.max(f,S)):B&&!n&&(I<_?(_=I,f=S):I===_&&(f=Math.min(f,S))),x[0]=(S-u)/d,x[1]=(I-m)/h,x[2]=(P-m)/h}this.#e=new Float32Array([u,m,d,h]),this.#t=[f,_],this.#n=v}getOutlines(){this.#i.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);let t=[];for(let e of this.#i)e[3]?(t.push(...this.#l(e)),this.#a(e)):(this.#c(e),t.push(...this.#l(e)));return this.#s(t)}#s(t){let e=[],i=new Set;for(let o of t){let[l,d,h]=o;e.push([l,d,o],[l,h,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){let d=e[o][2],h=e[o+1][2];d.push(h),h.push(d),i.add(d),i.add(h)}let n=[],s;for(;i.size>0;){let o=i.values().next().value,[l,d,h,u,m]=o;i.delete(o);let f=l,_=d;for(s=[l,h],n.push(s);;){let y;if(i.has(u))y=u;else if(i.has(m))y=m;else break;i.delete(y),[l,d,h,u,m]=y,f!==l&&(s.push(f,_,l,_===d?d:h),f=l),_=_===d?h:d}s.push(f,_)}return new C_(n,this.#e,this.#t,this.#n)}#r(t){let e=this.#o,i=0,n=e.length-1;for(;i<=n;){let s=i+n>>1,o=e[s][0];if(o===t)return s;o<t?i=s+1:n=s-1}return n+1}#a([,t,e]){let i=this.#r(t);this.#o.splice(i,0,[t,e])}#c([,t,e]){let i=this.#r(t);for(let n=i;n<this.#o.length;n++){let[s,o]=this.#o[n];if(s!==t)break;if(s===t&&o===e){this.#o.splice(n,1);return}}for(let n=i-1;n>=0;n--){let[s,o]=this.#o[n];if(s!==t)break;if(s===t&&o===e){this.#o.splice(n,1);return}}}#l(t){let[e,i,n]=t,s=[[e,i,n]],o=this.#r(n);for(let l=0;l<o;l++){let[d,h]=this.#o[l];for(let u=0,m=s.length;u<m;u++){let[,f,_]=s[u];if(!(h<=f||_<=d)){if(f>=d){if(_>h)s[u][1]=h;else{if(m===1)return[];s.splice(u,1),u--,m--}continue}s[u][2]=d,_>h&&s.push([e,h,_])}}}return s}},C_=class extends me{#e;#t;constructor(t,e,i,n){super(),this.#t=t,this.#e=e,this.firstPoint=i,this.lastPoint=n}toSVGPath(){let t=[];for(let e of this.#t){let[i,n]=e;t.push(`M${i} ${n}`);for(let s=2;s<e.length;s+=2){let o=e[s],l=e[s+1];o===i?(t.push(`V${l}`),n=l):l===n&&(t.push(`H${o}`),i=o)}t.push("Z")}return t.join(" ")}serialize([t,e,i,n],s){let o=[],l=i-t,d=n-e;for(let h of this.#t){let u=new Array(h.length);for(let m=0;m<h.length;m+=2)u[m]=t+h[m]*l,u[m+1]=n-h[m+1]*d;o.push(u)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}},Nl=class extends nu{newFreeDrawOutline(t,e,i,n,s,o){return new k_(t,e,i,n,s,o)}},k_=class extends ru{newOutliner(t,e,i,n,s,o=0){return new Nl(t,e,i,n,s,o)}},su=class r extends Dt{#e=null;#t=0;#n;#i=null;#o=null;#s=null;#r=null;#a=0;#c=null;#l=null;#u=null;#h=!1;#p=null;#g=null;#f=null;#d="";#m;#_="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=je.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let t=r.prototype;return He(this,"_keyboardManager",new eo([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super(Ue(J({},t),{name:"highlightEditor"})),this.color=t.color||r._defaultColor,this.#m=t.thickness||r._defaultThickness,this.opacity=t.opacity||r._defaultOpacity,this.#n=t.boxes||null,this.#_=t.methodOfCreation||"",this.#d=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#y()):this.#n&&(this.#e=t.anchorNode,this.#t=t.anchorOffset,this.#r=t.focusNode,this.#a=t.focusOffset,this.#v(),this.#y(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#_}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){let t=new Ll(this.#n,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;let e=new Ll(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=e.getOutlines();let{firstPoint:i}=this.#l;this.#p=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];let{lastPoint:n}=this.#s;this.#g=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;let n=1.5;if(this.#s=t.getNewOutline(this.#m/2+n,.0025),e>=0)this.#u=e,this.#i=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#f=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){let m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#u,{bbox:r.#k(this.#l.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#f,{bbox:r.#k(this.#s.box,m),path:{d:this.#s.toSVGPath()}})}let[s,o,l,d]=t.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=l,this.height=d;break;case 90:{let[m,f]=this.parentDimensions;this.x=o,this.y=1-s,this.width=l*f/m,this.height=d*m/f;break}case 180:this.x=1-s,this.y=1-o,this.width=l,this.height=d;break;case 270:{let[m,f]=this.parentDimensions;this.x=1-o,this.y=s,this.width=l*f/m,this.height=d*m/f;break}}let{firstPoint:h}=t;this.#p=[(h[0]-s)/l,(h[1]-o)/d];let{lastPoint:u}=this.#s;this.#g=[(u[0]-s)/l,(u[1]-o)/d]}static initialize(t,e){Dt.initialize(t,e),r._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case nt.HIGHLIGHT_COLOR:r._defaultColor=e;break;case nt.HIGHLIGHT_THICKNESS:r._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#p}updateParams(t,e){switch(t){case nt.HIGHLIGHT_COLOR:this.#E(e);break;case nt.HIGHLIGHT_THICKNESS:this.#C(e);break}}static get defaultPropertiesToUpdate(){return[[nt.HIGHLIGHT_COLOR,r._defaultColor],[nt.HIGHLIGHT_THICKNESS,r._defaultThickness]]}get propertiesToUpdate(){return[[nt.HIGHLIGHT_COLOR,this.color||r._defaultColor],[nt.HIGHLIGHT_THICKNESS,this.#m||r._defaultThickness],[nt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#u,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#o?.updateColor(this.color),super.onUpdatedColor()}#E(t){let e=(s,o)=>{this.color=s,this.opacity=o,this.onUpdatedColor()},i=this.color,n=this.opacity;this.addCommands({cmd:e.bind(this,t,r._defaultOpacity),undo:e.bind(this,i,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#C(t){let e=this.#m,i=n=>{this.#m=n,this.#x(n)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:nt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#o=new Xh({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#T())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#T())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#M(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#y(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#M():t&&(this.#y(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#M(){this.#u===null||!this.parent||(this.parent.drawLayer.remove(this.#u),this.#u=null,this.parent.drawLayer.remove(this.#f),this.#f=null)}#y(t=this.parent){this.#u===null&&({id:this.#u,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#f=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#k([t,e,i,n],s){switch(s){case 90:return[1-e-n,t,n,i];case 180:return[1-t-i,1-e-n,i,n];case 270:return[e,1-t-i,n,i]}return[t,e,i,n]}rotate(t){let{drawLayer:e}=this.parent,i;this.#h?(t=(t-this.rotation+360)%360,i=r.#k(this.#l.box,t)):i=r.#k([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#u,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#f,{bbox:r.#k(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;let t=super.render();this.#d&&(t.setAttribute("aria-label",this.#d),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#I.bind(this),{signal:this._uiManager._signal});let e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#i,this.setDims(),WC(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1}})}#I(t){r._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#A(!0);break;case 1:case 3:this.#A(!1);break}}#A(t){if(!this.#e)return;let e=window.getSelection();t?e.setPosition(this.#e,this.#t):e.setPosition(this.#r,this.#a)}select(){super.select(),this.#f&&this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#f&&(this.parent?.drawLayer.updateProperties(this.#f,{rootClass:{selected:!1}}),this.#h||this.#A(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#u,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#f,{rootClass:{hidden:!t}}))}#T(){return this.#h?this.rotation:0}#N(){if(this.#h)return null;let[t,e]=this.pageDimensions,[i,n]=this.pageTranslation,s=this.#n,o=new Float32Array(s.length*8),l=0;for(let{x:d,y:h,width:u,height:m}of s){let f=d*t+i,_=(1-h)*e+n;o[l]=o[l+4]=f,o[l+1]=o[l+3]=_,o[l+2]=o[l+6]=f+u*t,o[l+5]=o[l+7]=_-m*e,l+=8}return o}#P(t){return this.#l.serialize(t,this.#T())}static startHighlighting(t,e,{target:i,x:n,y:s}){let{x:o,y:l,width:d,height:h}=i.getBoundingClientRect(),u=new AbortController,m=t.combinedSignal(u),f=_=>{u.abort(),this.#B(t,_)};window.addEventListener("blur",f,{signal:m}),window.addEventListener("pointerup",f,{signal:m}),window.addEventListener("pointerdown",Zt,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",Wn,{signal:m}),i.addEventListener("pointermove",this.#O.bind(this,t),{signal:m}),this._freeHighlight=new Nl({x:n,y:s},[o,l,d,h],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,i){return q(this,null,function*(){let n=null;if(t instanceof tu){let{data:{quadPoints:y,rect:v,rotation:x,id:S,color:I,opacity:P,popupRef:B,richText:N,contentsObj:z,creationDate:j,modificationDate:Q},parent:{page:{pageNumber:ee}}}=t;n=t={annotationType:je.HIGHLIGHT,color:Array.from(I),opacity:P,quadPoints:y,boxes:null,pageIndex:ee-1,rect:v.slice(0),rotation:x,annotationElementId:S,id:S,deleted:!1,popupRef:B,richText:N,comment:z?.str||null,creationDate:j,modificationDate:Q}}else if(t instanceof Fl){let{data:{inkLists:y,rect:v,rotation:x,id:S,color:I,borderStyle:{rawWidth:P},popupRef:B,richText:N,contentsObj:z,creationDate:j,modificationDate:Q},parent:{page:{pageNumber:ee}}}=t;n=t={annotationType:je.HIGHLIGHT,color:Array.from(I),thickness:P,inkLists:y,boxes:null,pageIndex:ee-1,rect:v.slice(0),rotation:x,annotationElementId:S,id:S,deleted:!1,popupRef:B,richText:N,comment:z?.str||null,creationDate:j,modificationDate:Q}}let{color:s,quadPoints:o,inkLists:l,opacity:d}=t,h=yield Ls(r,this,"deserialize").call(this,t,e,i);h.color=de.makeHexColor(...s),h.opacity=d||1,l&&(h.#m=t.thickness),h._initialData=n,t.comment&&h.setCommentData(t);let[u,m]=h.pageDimensions,[f,_]=h.pageTranslation;if(o){let y=h.#n=[];for(let v=0;v<o.length;v+=8)y.push({x:(o[v]-f)/u,y:1-(o[v+1]-_)/m,width:(o[v+2]-o[v])/u,height:(o[v+1]-o[v+5])/m});h.#v(),h.#y(),h.rotate(h.rotation)}else if(l){h.#h=!0;let y=l[0],v={x:y[0]-f,y:m-(y[1]-_)},x=new Nl(v,[0,0,u,m],1,h.#m/2,!0,.001);for(let P=0,B=y.length;P<B;P+=2)v.x=y[P]-f,v.y=m-(y[P+1]-_),x.add(v);let{id:S,clipPathId:I}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);h.#b({highlightOutlines:x.getOutlines(),highlightId:S,clipPathId:I}),h.#y(),h.rotate(h.parentRotation)}return h})}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let e=Dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#m,quadPoints:this.#N(),outlines:this.#P(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#F(i)?null:(i.id=this.annotationElementId,i)}#F(t){let{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,n)=>i!==e[n])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}},ou=class{#e=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(let[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#e[t]=e}toSVGProperties(){let t=this.#e;return this.#e=Object.create(null),{root:t}}reset(){this.#e=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){At("Not implemented")}},XC=(()=>{class r extends Dt{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#o=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#s(e),this.#c())}#s({drawOutlines:e,drawId:i,drawingOptions:n}){this.#e=e,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=this.#r(e,this.parent),this.#h(e.box)}#r(e,i){let{id:n}=i.drawLayer.draw(r._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(e,i){let n=new Set(Object.keys(e));for(let[s,o]of Object.entries(i))n.has(s)?Object.assign(e[s],o):e[s]=o;return e}static getDefaultDrawingOptions(e){At("Not implemented")}static get typesMap(){At("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){let n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,i),this._currentParent&&(r.#n.updateProperty(n,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){let n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,i)}static get defaultPropertiesToUpdate(){let e=[],i=this._defaultDrawingOptions;for(let[n,s]of this.typesMap)e.push([n,i[s]]);return e}get propertiesToUpdate(){let e=[],{_drawingOptions:i}=this;for(let[n,s]of this.constructor.typesMap)e.push([n,i[s]]);return e}_updateProperty(e,i,n){let s=this._drawingOptions,o=s[i],l=d=>{s.updateProperty(i,d);let h=this.#e.updateProperty(i,d);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,r._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#u()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,r._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#u()),{bbox:this.#p()}))}_onTranslating(e,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,r._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#u(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#a(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#a()):e&&(this._uiManager.addShouldRescale(this),this.#c(e),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),i&&this.select()}#a(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#r(this.#e,e)}}#l([e,i,n,s]){let{parentDimensions:[o,l],rotation:d}=this;switch(d){case 90:return[i,1-e,n*(l/o),s*(o/l)];case 180:return[1-e,1-i,n,s];case 270:return[1-i,e,n*(l/o),s*(o/l)];default:return[e,i,n,s]}}#u(){let{x:e,y:i,width:n,height:s,parentDimensions:[o,l],rotation:d}=this;switch(d){case 90:return[1-i,e,n*(o/l),s*(l/o)];case 180:return[1-e,1-i,n,s];case 270:return[i,1-e,n*(o/l),s*(l/o)];default:return[e,i,n,s]}}#h(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){let{x:e,y:i,width:n,height:s,rotation:o,parentRotation:l,parentDimensions:[d,h]}=this;switch((o*4+l)/90){case 1:return[1-i-s,e,s,n];case 2:return[1-e-n,1-i-s,n,s];case 3:return[i,1-e-n,s,n];case 4:return[e,i-n*(d/h),s*(h/d),n*(d/h)];case 5:return[1-i,e,n*(d/h),s*(h/d)];case 6:return[1-e-s*(h/d),1-i,s*(h/d),n*(d/h)];case 7:return[i-n*(d/h),1-e-s*(h/d),n*(d/h),s*(h/d)];case 8:return[e-n,i-s,n,s];case 9:return[1-i,e-n,s,n];case 10:return[1-e,1-i,n,s];case 11:return[i-s,1-e,s,n];case 12:return[e-s*(h/d),i,s*(h/d),n*(d/h)];case 13:return[1-i-n*(d/h),e-s*(h/d),n*(d/h),s*(h/d)];case 14:return[1-e,1-i-n*(d/h),s*(h/d),n*(d/h)];case 15:return[i,1-e,n*(d/h),s*(h/d)];default:return[e,i,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,r._mergeSVGProperties({bbox:this.#p()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,i;this._isCopy&&(e=this.x,i=this.y);let n=super.render();n.classList.add("draw");let s=document.createElement("div");return n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,i),n}static createDrawerInstance(e,i,n,s,o){At("Not implemented")}static startDrawing(e,i,n,s){let{target:o,offsetX:l,offsetY:d,pointerId:h,pointerType:u}=s;if(Oi.isInitializedAndDifferentPointerType(u))return;let{viewport:{rotation:m}}=e,{width:f,height:_}=o.getBoundingClientRect(),y=r.#i=new AbortController,v=e.combinedSignal(y);if(Oi.setPointer(u,h),window.addEventListener("pointerup",x=>{Oi.isSamePointerIdOrRemove(x.pointerId)&&this._endDraw(x)},{signal:v}),window.addEventListener("pointercancel",x=>{Oi.isSamePointerIdOrRemove(x.pointerId)&&this._currentParent.endDrawingSession()},{signal:v}),window.addEventListener("pointerdown",x=>{Oi.isSamePointerType(x.pointerType)&&(Oi.initializeAndAddPointerId(x.pointerId),r.#n.isCancellable()&&(r.#n.removeLastElement(),r.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",Wn,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",x=>{Oi.isSameTimeStamp(x.timeStamp)&&Zt(x)},{signal:v}),e.toggleDrawing(),i._editorUndoBar?.hide(),r.#n){e.drawLayer.updateProperties(this._currentDrawId,r.#n.startNew(l,d,f,_,m));return}i.updateUIForDefaultProperties(this),r.#n=this.createDrawerInstance(l,d,f,_,m),r.#o=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(r.#o.toSVGProperties(),r.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Oi.isSameTimeStamp(e.timeStamp),!r.#n)return;let{offsetX:i,offsetY:n,pointerId:s}=e;if(Oi.isSamePointerId(s)){if(Oi.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,r.#n.add(i,n)),Oi.setTimeStamp(e.timeStamp),Zt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,r.#n=null,r.#o=null,Oi.clearTimeStamp()),r.#i&&(r.#i.abort(),r.#i=null,Oi.clearPointerIds())}static _endDraw(e){let i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),e?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,r.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){let n=r.#n,s=this._currentDrawId,o=n.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(s,n.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:nt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){let i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(nt.DRAW_STEP),!r.#n.isEmpty()){let{pageDimensions:[n,s],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:r.#n.getOutlines(n*o,s*o,o,this._INNER_MARGIN),drawingOptions:r.#o,mustBeCommitted:!e});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,n,s,o,l){At("Not implemented")}static deserialize(e,i,n){return q(this,null,function*(){let{rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:d}}=i.viewport,h=this.deserializeDraw(l,d,s,o,this._INNER_MARGIN,e),u=yield Ls(r,this,"deserialize").call(this,e,i,n);return u.createDrawingOptions(e),u.#s({drawOutlines:h}),u.#c(),u.onScaleChanging(),u.rotate(),u})}serializeDraw(e){let[i,n]=this.pageTranslation,[s,o]=this.pageDimensions;return this.#e.serialize([i,n,s,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}return r})(),E_=class{#e=new Float64Array(6);#t;#n;#i;#o;#s;#r="";#a=0;#c=new io;#l;#u;constructor(t,e,i,n,s,o){this.#l=i,this.#u=n,this.#i=s,this.#o=o,[t,e]=this.#h(t,e);let l=this.#t=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e],this.#n=[{line:l,points:this.#s}],this.#e.set(l,0)}updateProperty(t,e){t==="stroke-width"&&(this.#o=e)}#h(t,e){return me._normalizePoint(t,e,this.#l,this.#u,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,e){[t,e]=this.#h(t,e);let[i,n,s,o]=this.#e.subarray(2,6),l=t-s,d=e-o;return Math.hypot(this.#l*l,this.#u*d)<=2?null:(this.#s.push(t,e),isNaN(i)?(this.#e.set([s,o,t,e],2),this.#t.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([i,n,s,o,t,e],0),this.#t.push(...me.createBezierPoints(i,n,s,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){let i=this.add(t,e);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,n,s){this.#l=i,this.#u=n,this.#i=s,[t,e]=this.#h(t,e);let o=this.#t=[NaN,NaN,NaN,NaN,t,e];this.#s=[t,e];let l=this.#n.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#n.push({line:o,points:this.#s}),this.#e.set(o,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#t=t.line,this.#s=t.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#r="";for(let t=0,e=this.#n.length;t<e;t++){let{line:i,points:n}=this.#n[t];this.#t=i,this.#s=n,this.#a=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){let t=me.svgRound(this.#t[4]),e=me.svgRound(this.#t[5]);if(this.#s.length===2)return this.#r=`${this.#r} M ${t} ${e} Z`,this.#r;if(this.#s.length<=6){let n=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,n)} M ${t} ${e}`,this.#a=6}if(this.#s.length===4){let n=me.svgRound(this.#t[10]),s=me.svgRound(this.#t[11]);return this.#r=`${this.#r} L ${n} ${s}`,this.#a=12,this.#r}let i=[];this.#a===0&&(i.push(`M ${t} ${e}`),this.#a=6);for(let n=this.#a,s=this.#t.length;n<s;n+=6){let[o,l,d,h,u,m]=this.#t.slice(n,n+6).map(me.svgRound);i.push(`C${o} ${l} ${d} ${h} ${u} ${m}`)}return this.#r+=i.join(" "),this.#a=this.#t.length,this.#r}getOutlines(t,e,i,n){let s=this.#n.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#c.build(this.#n,t,e,i,this.#i,this.#o,n),this.#e=null,this.#t=null,this.#n=null,this.#r=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},io=class extends me{#e;#t=0;#n;#i;#o;#s;#r;#a;#c;build(t,e,i,n,s,o,l){this.#o=e,this.#s=i,this.#r=n,this.#a=s,this.#c=o,this.#n=l??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let t=[];for(let{line:e}of this.#i){if(t.push(`M${me.svgRound(e[4])} ${me.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${me.svgRound(e[10])} ${me.svgRound(e[11])}`);continue}for(let i=6,n=e.length;i<n;i+=6){let[s,o,l,d,h,u]=e.subarray(i,i+6).map(me.svgRound);t.push(`C${s} ${o} ${l} ${d} ${h} ${u}`)}}return t.join("")}serialize([t,e,i,n],s){let o=[],l=[],[d,h,u,m]=this.#u(),f,_,y,v,x,S,I,P,B;switch(this.#a){case 0:B=me._rescale,f=t,_=e+n,y=i,v=-n,x=t+d*i,S=e+(1-h-m)*n,I=t+(d+u)*i,P=e+(1-h)*n;break;case 90:B=me._rescaleAndSwap,f=t,_=e,y=i,v=n,x=t+h*i,S=e+d*n,I=t+(h+m)*i,P=e+(d+u)*n;break;case 180:B=me._rescale,f=t+i,_=e,y=-i,v=n,x=t+(1-d-u)*i,S=e+h*n,I=t+(1-d)*i,P=e+(h+m)*n;break;case 270:B=me._rescaleAndSwap,f=t+i,_=e+n,y=-i,v=-n,x=t+(1-h-m)*i,S=e+(1-d-u)*n,I=t+(1-h)*i,P=e+(1-d)*n;break}for(let{line:N,points:z}of this.#i)o.push(B(N,f,_,y,v,s?new Array(N.length):null)),l.push(B(z,f,_,y,v,s?new Array(z.length):null));return{lines:o,points:l,rect:[x,S,I,P]}}static deserialize(t,e,i,n,s,{paths:{lines:o,points:l},rotation:d,thickness:h}){let u=[],m,f,_,y,v;switch(d){case 0:v=me._rescale,m=-t/i,f=e/n+1,_=1/i,y=-1/n;break;case 90:v=me._rescaleAndSwap,m=-e/n,f=-t/i,_=1/n,y=1/i;break;case 180:v=me._rescale,m=t/i+1,f=-e/n,_=-1/i,y=1/n;break;case 270:v=me._rescaleAndSwap,m=e/n+1,f=t/i+1,_=-1/n,y=-1/i;break}if(!o){o=[];for(let S of l){let I=S.length;if(I===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(I===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}let P=new Float32Array(3*(I-2));o.push(P);let[B,N,z,j]=S.subarray(0,4);P.set([NaN,NaN,NaN,NaN,B,N],0);for(let Q=4;Q<I;Q+=2){let ee=S[Q],ae=S[Q+1];P.set(me.createBezierPoints(B,N,z,j,ee,ae),(Q-2)*3),[B,N,z,j]=[z,j,ee,ae]}}}for(let S=0,I=o.length;S<I;S++)u.push({line:v(o[S].map(P=>P??NaN),m,f,_,y),points:v(l[S].map(P=>P??NaN),m,f,_,y)});let x=new this.prototype.constructor;return x.build(u,i,n,1,d,h,s),x}#l(t=this.#c){let e=this.#n+t/2*this.#r;return this.#a%180===0?[e/this.#o,e/this.#s]:[e/this.#s,e/this.#o]}#u(){let[t,e,i,n]=this.#e,[s,o]=this.#l(0);return[t+s,e+o,i-2*s,n-2*o]}#h(){let t=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:n}of this.#i){if(n.length<=12){for(let l=4,d=n.length;l<d;l+=6)de.pointBoundingBox(n[l],n[l+1],t);continue}let s=n[4],o=n[5];for(let l=6,d=n.length;l<d;l+=6){let[h,u,m,f,_,y]=n.subarray(l,l+6);de.bezierBoundingBox(s,o,h,u,m,f,_,y,t),s=_,o=y}}let[e,i]=this.#l();t[0]=qi(t[0]-e,0,1),t[1]=qi(t[1]-i,0,1),t[2]=qi(t[2]+e,0,1),t[3]=qi(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#e}updateProperty(t,e){return t==="stroke-width"?this.#p(e):null}#p(t){let[e,i]=this.#l();this.#c=t;let[n,s]=this.#l(),[o,l]=[n-e,s-i],d=this.#e;return d[0]-=o,d[1]-=l,d[2]+=2*o,d[3]+=2*l,d}updateParentDimensions([t,e],i){let[n,s]=this.#l();this.#o=t,this.#s=e,this.#r=i;let[o,l]=this.#l(),d=o-n,h=l-s,u=this.#e;return u[0]-=d,u[1]-=h,u[2]+=2*d,u[3]+=2*h,u}updateRotation(t){return this.#t=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(me.svgRound).join(" ")}get defaultProperties(){let[t,e]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(e)}`}}}get rotationTransform(){let[,,t,e]=this.#e,i=0,n=0,s=0,o=0,l=0,d=0;switch(this.#t){case 90:n=e/t,s=-t/e,l=t;break;case 180:i=-1,o=-1,l=t,d=e;break;case 270:n=-e/t,s=t/e,d=e;break;default:return""}return`matrix(${i} ${n} ${s} ${o} ${me.svgRound(l)} ${me.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,n]){let[s,o]=this.#l(),[l,d,h,u]=this.#e;if(Math.abs(h-s)<=me.PRECISION||Math.abs(u-o)<=me.PRECISION){let v=t+i/2-(l+h/2),x=e+n/2-(d+u/2);return{path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(e)}`,transform:`${this.rotationTransform} translate(${v} ${x})`}}}let m=(i-2*s)/(h-2*s),f=(n-2*o)/(u-2*o),_=h/i,y=u/n;return{path:{"transform-origin":`${me.svgRound(l)} ${me.svgRound(d)}`,transform:`${this.rotationTransform} scale(${_} ${y}) translate(${me.svgRound(s)} ${me.svgRound(o)}) scale(${m} ${f}) translate(${me.svgRound(-s)} ${me.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,i,n]){let[s,o]=this.#l(),l=this.#e,[d,h,u,m]=l;if(l[0]=t,l[1]=e,l[2]=i,l[3]=n,Math.abs(u-s)<=me.PRECISION||Math.abs(m-o)<=me.PRECISION){let x=t+i/2-(d+u/2),S=e+n/2-(h+m/2);for(let{line:I,points:P}of this.#i)me._translate(I,x,S,I),me._translate(P,x,S,P);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let f=(i-2*s)/(u-2*s),_=(n-2*o)/(m-2*o),y=-f*(d+s)+t+s,v=-_*(h+o)+e+o;if(f!==1||_!==1||y!==0||v!==0)for(let{line:x,points:S}of this.#i)me._rescale(x,y,v,f,_,x),me._rescale(S,y,v,f,_,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${me.svgRound(t)} ${me.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){let[n,s]=i,o=this.#e,l=t-o[0],d=e-o[1];if(this.#o===n&&this.#s===s)for(let{line:h,points:u}of this.#i)me._translate(h,l,d,h),me._translate(u,l,d,u);else{let h=this.#o/n,u=this.#s/s;this.#o=n,this.#s=s;for(let{line:m,points:f}of this.#i)me._rescale(m,l,d,h,u,m),me._rescale(f,l,d,h,u,f);o[2]*=h,o[3]*=u}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${me.svgRound(t)} ${me.svgRound(e)}`}}}get defaultSVGProperties(){let t=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${me.svgRound(t[0])} ${me.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}},au=class r extends ou{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Dt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){let t=new r(this._viewParameters);return t.updateAll(this),t}},S_=class r extends XC{static _type="ink";static _editorType=je.INK;static _defaultDrawingOptions=null;constructor(t){super(Ue(J({},t),{name:"inkEditor"})),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){Dt.initialize(t,e),this._defaultDrawingOptions=new au(e.viewParameters)}static getDefaultDrawingOptions(t){let e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return He(this,"typesMap",new Map([[nt.INK_THICKNESS,"stroke-width"],[nt.INK_COLOR,"stroke"],[nt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,n,s){return new E_(t,e,i,n,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,n,s,o){return io.deserialize(t,e,i,n,s,o)}static deserialize(t,e,i){return q(this,null,function*(){let n=null;if(t instanceof Fl){let{data:{inkLists:o,rect:l,rotation:d,id:h,color:u,opacity:m,borderStyle:{rawWidth:f},popupRef:_,richText:y,contentsObj:v,creationDate:x,modificationDate:S},parent:{page:{pageNumber:I}}}=t;n=t={annotationType:je.INK,color:Array.from(u),thickness:f,opacity:m,paths:{points:o},boxes:null,pageIndex:I-1,rect:l.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:_,richText:y,comment:v?.str||null,creationDate:x,modificationDate:S}}let s=yield Ls(r,this,"deserialize").call(this,t,e,i);return s._initialData=n,t.comment&&s.setCommentData(t),s})}get toolbarButtons(){return this._colorPicker||=new Kh(this),[["colorPicker",this._colorPicker]]}get colorType(){return nt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){let t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=r.getDefaultDrawingOptions({stroke:de.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:n,"stroke-opacity":s,"stroke-width":o}}=this,l=Object.assign(super.serialize(t),{color:Dt._colorManager.convert(n),opacity:s,thickness:o,paths:{lines:e,points:i}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(t){let{color:e,thickness:i,opacity:n,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==e[l])||t.thickness!==i||t.opacity!==n||t.pageIndex!==s}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}},Bl=class extends io{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}},Mh=8,_l=3,ks=class{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(t,e,i,n){return i-=t,n-=e,i===0?n>0?0:4:i===1?n+6:2-n}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,e,i,n,s,o,l){let d=this.#t(i,n,s,o);for(let h=0;h<8;h++){let u=(-h+d-l+16)%8,m=this.#n[2*u],f=this.#n[2*u+1];if(t[(i+m)*e+(n+f)]!==0)return u}return-1}static#o(t,e,i,n,s,o,l){let d=this.#t(i,n,s,o);for(let h=0;h<8;h++){let u=(h+d+l+16)%8,m=this.#n[2*u],f=this.#n[2*u+1];if(t[(i+m)*e+(n+f)]!==0)return u}return-1}static#s(t,e,i,n){let s=t.length,o=new Int32Array(s);for(let u=0;u<s;u++)o[u]=t[u]<=n?1:0;for(let u=1;u<i-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*i-1-u]=0;let l=1,d,h=[];for(let u=1;u<i-1;u++){d=1;for(let m=1;m<e-1;m++){let f=u*e+m,_=o[f];if(_===0)continue;let y=u,v=m;if(_===1&&o[f-1]===0)l+=1,v-=1;else if(_>=1&&o[f+1]===0)l+=1,v+=1,_>1&&(d=_);else{_!==1&&(d=Math.abs(_));continue}let x=[m,u],S=v===m+1,I={isHole:S,points:x,id:l,parent:0};h.push(I);let P;for(let he of h)if(he.id===d){P=he;break}P?P.isHole?I.parent=S?P.parent:d:I.parent=S?d:P.parent:I.parent=S?d:0;let B=this.#i(o,e,u,m,y,v,0);if(B===-1){o[f]=-l,o[f]!==1&&(d=Math.abs(o[f]));continue}let N=this.#n[2*B],z=this.#n[2*B+1],j=u+N,Q=m+z;y=j,v=Q;let ee=u,ae=m;for(;;){let he=this.#o(o,e,ee,ae,y,v,1);N=this.#n[2*he],z=this.#n[2*he+1];let ct=ee+N,Ct=ae+z;x.push(Ct,ct);let st=ee*e+ae;if(o[st+1]===0?o[st]=-l:o[st]===1&&(o[st]=l),ct===u&&Ct===m&&ee===j&&ae===Q){o[f]!==1&&(d=Math.abs(o[f]));break}else y=ee,v=ae,ee=ct,ae=Ct}}}return h}static#r(t,e,i,n){if(i-e<=4){for(let j=e;j<i-2;j+=2)n.push(t[j],t[j+1]);return}let s=t[e],o=t[e+1],l=t[i-4]-s,d=t[i-3]-o,h=Math.hypot(l,d),u=l/h,m=d/h,f=u*o-m*s,_=d/l,y=1/h,v=Math.atan(_),x=Math.cos(v),S=Math.sin(v),I=y*(Math.abs(x)+Math.abs(S)),P=y*(1-I+I**2),B=Math.max(Math.atan(Math.abs(S+x)*P),Math.atan(Math.abs(S-x)*P)),N=0,z=e;for(let j=e+2;j<i-2;j+=2){let Q=Math.abs(f-u*t[j+1]+m*t[j]);Q>N&&(z=j,N=Q)}N>(h*B)**2?(this.#r(t,e,z+2,n),this.#r(t,z,i,n)):n.push(s,o)}static#a(t){let e=[],i=t.length;return this.#r(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,n,s,o){let l=new Float32Array(o**2),d=-2*n**2,h=o>>1;for(let v=0;v<o;v++){let x=(v-h)**2;for(let S=0;S<o;S++)l[v*o+S]=Math.exp((x+(S-h)**2)/d)}let u=new Float32Array(256),m=-2*s**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/m);let f=t.length,_=new Uint8Array(f),y=new Uint32Array(256);for(let v=0;v<i;v++)for(let x=0;x<e;x++){let S=v*e+x,I=t[S],P=0,B=0;for(let z=0;z<o;z++){let j=v+z-h;if(!(j<0||j>=i))for(let Q=0;Q<o;Q++){let ee=x+Q-h;if(ee<0||ee>=e)continue;let ae=t[j*e+ee],he=l[z*o+Q]*u[Math.abs(ae-I)];P+=ae*he,B+=he}}let N=_[S]=Math.round(P/B);y[N]++}return[_,y]}static#l(t){let e=new Uint32Array(256);for(let i of t)e[i]++;return e}static#u(t){let e=t.length,i=new Uint8ClampedArray(e>>2),n=-1/0,s=1/0;for(let l=0,d=i.length;l<d;l++){let h=i[l]=t[l<<2];n=Math.max(n,h),s=Math.min(s,h)}let o=255/(n-s);for(let l=0,d=i.length;l<d;l++)i[l]=(i[l]-s)*o;return i}static#h(t){let e,i=-1/0,n=-1/0,s=t.findIndex(d=>d!==0),o=s,l=s;for(e=s;e<256;e++){let d=t[e];d>i&&(e-o>n&&(n=e-o,l=e-1),i=d,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#p(t){let e=t,{width:i,height:n}=t,{maxDim:s}=this.#e,o=i,l=n;if(i>s||n>s){let f=i,_=n,y=Math.log2(Math.max(i,n)/s),v=Math.floor(y);y=y===v?v-1:v;for(let S=0;S<y;S++){o=Math.ceil(f/2),l=Math.ceil(_/2);let I=new OffscreenCanvas(o,l);I.getContext("2d").drawImage(t,0,0,f,_,0,0,o,l),f=o,_=l,t!==e&&t.close(),t=I.transferToImageBitmap()}let x=Math.min(s/o,s/l);o=Math.round(o*x),l=Math.round(l*x)}let h=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,o,l),h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,l);let u=h.getImageData(0,0,o,l).data;return[this.#u(u),o,l]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:n},s,o,l,d){let h=new OffscreenCanvas(1,1),u=h.getContext("2d",{alpha:!1}),m=200,f=u.font=`${i} ${n} ${m}px ${e}`,{actualBoundingBoxLeft:_,actualBoundingBoxRight:y,actualBoundingBoxAscent:v,actualBoundingBoxDescent:x,fontBoundingBoxAscent:S,fontBoundingBoxDescent:I,width:P}=u.measureText(t),B=1.5,N=Math.ceil(Math.max(Math.abs(_)+Math.abs(y)||0,P)*B),z=Math.ceil(Math.max(Math.abs(v)+Math.abs(x)||m,Math.abs(S)+Math.abs(I)||m)*B);h=new OffscreenCanvas(N,z),u=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,N,z),u.fillStyle="black",u.fillText(t,N*(B-1)/2,z*(3-B)/2);let j=this.#u(u.getImageData(0,0,N,z).data),Q=this.#l(j),ee=this.#h(Q),ae=this.#s(j,N,z,ee);return this.processDrawnLines({lines:{curves:ae,width:N,height:z},pageWidth:s,pageHeight:o,rotation:l,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,n,s){let[o,l,d]=this.#p(t),[h,u]=this.#c(o,l,d,Math.hypot(l,d)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),m=this.#h(u),f=this.#s(h,l,d,m);return this.processDrawnLines({lines:{curves:f,width:l,height:d},pageWidth:e,pageHeight:i,rotation:n,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:n,innerMargin:s,mustSmooth:o,areContours:l}){n%180!==0&&([e,i]=[i,e]);let{curves:d,width:h,height:u}=t,m=t.thickness??0,f=[],_=Math.min(e/h,i/u),y=_/e,v=_/i,x=[];for(let{points:I}of d){let P=o?this.#a(I):I;if(!P)continue;x.push(P);let B=P.length,N=new Float32Array(B),z=new Float32Array(3*(B===2?2:B-2));if(f.push({line:z,points:N}),B===2){N[0]=P[0]*y,N[1]=P[1]*v,z.set([NaN,NaN,NaN,NaN,N[0],N[1]],0);continue}let[j,Q,ee,ae]=P;j*=y,Q*=v,ee*=y,ae*=v,N.set([j,Q,ee,ae],0),z.set([NaN,NaN,NaN,NaN,j,Q],0);for(let he=4;he<B;he+=2){let ct=N[he]=P[he]*y,Ct=N[he+1]=P[he+1]*v;z.set(me.createBezierPoints(j,Q,ee,ae,ct,Ct),(he-2)*3),[j,Q,ee,ae]=[ee,ae,ct,Ct]}}if(f.length===0)return null;let S=l?new Bl:new io;return S.build(f,e,i,1,n,l?0:m,s),{outline:S,newCurves:x,areContours:l,thickness:m,width:h,height:u}}static compressSignature(o){return q(this,arguments,function*({outlines:t,areContours:e,thickness:i,width:n,height:s}){let l=1/0,d=-1/0,h=0;for(let B of t){h+=B.length;for(let N=2,z=B.length;N<z;N++){let j=B[N]-B[N-2];l=Math.min(l,j),d=Math.max(d,j)}}let u;l>=-128&&d<=127?u=Int8Array:l>=-32768&&d<=32767?u=Int16Array:u=Int32Array;let m=t.length,f=Mh+_l*m,_=new Uint32Array(f),y=0;_[y++]=f*Uint32Array.BYTES_PER_ELEMENT+(h-2*m)*u.BYTES_PER_ELEMENT,_[y++]=0,_[y++]=n,_[y++]=s,_[y++]=e?0:1,_[y++]=Math.max(0,Math.floor(i??0)),_[y++]=m,_[y++]=u.BYTES_PER_ELEMENT;for(let B of t)_[y++]=B.length-2,_[y++]=B[0],_[y++]=B[1];let v=new CompressionStream("deflate-raw"),x=v.writable.getWriter();yield x.ready,x.write(_);let S=u.prototype.constructor;for(let B of t){let N=new S(B.length-2);for(let z=2,j=B.length;z<j;z++)N[z-2]=B[z]-B[z-2];x.write(N)}x.close();let I=yield new Response(v.readable).arrayBuffer(),P=new Uint8Array(I);return VC(P)})}static decompressSignature(t){return q(this,null,function*(){try{let o=V2(t),{readable:l,writable:d}=new DecompressionStream("deflate-raw"),h=d.getWriter();yield h.ready,h.write(o).then(()=>q(this,null,function*(){yield h.ready,yield h.close()})).catch(()=>{});let u=null,m=0;try{for(var e=N0(l),i,n,s;i=!(n=yield e.next()).done;i=!1){let j=n.value;u||=new Uint8Array(new Uint32Array(j.buffer,0,4)[0]),u.set(j,m),m+=j.length}}catch{s=[n]}finally{try{i&&(n=e.return)&&(yield n.call(e))}finally{if(s)throw s[0]}}let f=new Uint32Array(u.buffer,0,u.length>>2),_=f[1];if(_!==0)throw new Error(`Invalid version: ${_}`);let y=f[2],v=f[3],x=f[4]===0,S=f[5],I=f[6],P=f[7],B=[],N=(Mh+_l*I)*Uint32Array.BYTES_PER_ELEMENT,z;switch(P){case Int8Array.BYTES_PER_ELEMENT:z=new Int8Array(u.buffer,N);break;case Int16Array.BYTES_PER_ELEMENT:z=new Int16Array(u.buffer,N);break;case Int32Array.BYTES_PER_ELEMENT:z=new Int32Array(u.buffer,N);break}m=0;for(let j=0;j<I;j++){let Q=f[_l*j+Mh],ee=new Float32Array(Q+2);B.push(ee);for(let ae=0;ae<_l-1;ae++)ee[ae]=f[_l*j+Mh+ae+1];for(let ae=0;ae<Q;ae++)ee[ae+2]=ee[ae]+z[m++]}return{areContours:x,thickness:S,outlines:B,width:y,height:v}}catch(o){return ze(`decompressSignature: ${o}`),null}})}},M_=class r extends ou{constructor(){super(),super.updateProperties({fill:Dt._defaultLineColor,"stroke-width":0})}clone(){let t=new r;return t.updateAll(this),t}},A_=class r extends au{constructor(t){super(t),super.updateProperties({stroke:Dt._defaultLineColor,"stroke-width":1})}clone(){let t=new r(this._viewParameters);return t.updateAll(this),t}},T_=class r extends XC{#e=!1;#t=null;#n=null;#i=null;static _type="signature";static _editorType=je.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super(Ue(J({},t),{mustBeCommitted:!0,name:"signatureEditor"})),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){Dt.initialize(t,e),this._defaultDrawingOptions=new M_,this._defaultDrawnSignatureOptions=new A_(e.viewParameters)}static getDefaultDrawingOptions(t){let e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return He(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(t){let e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e,{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){let{lines:n,mustSmooth:s,areContours:o,description:l,uuid:d,heightInPage:h}=this.#n,{rawDims:{pageWidth:u,pageHeight:m},rotation:f}=this.parent.viewport,_=ks.processDrawnLines({lines:n,pageWidth:u,pageHeight:m,rotation:f,innerMargin:r._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(_,h,l,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#t}set description(t){this.#t=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){let{newCurves:t,areContours:e,thickness:i,width:n,height:s}=this.#n,o=Math.max(n,s),l=ks.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:n,height:s},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,n){let{x:s,y:o}=this,{outline:l}=this.#n=t;this.#e=l instanceof Bl,this.description=i;let d;this.#e?d=r.getDefaultDrawingOptions():(d=r._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:d});let[,h]=this.pageDimensions,u=e/h;u=u>=1?.5:u,this.width*=u/this.height,this.width>=1&&(u*=.9/this.width,this.width=.9),this.height=u,this.setDims(),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(n),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!n,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){let{rawDims:{pageWidth:e,pageHeight:i},rotation:n}=this.parent.viewport;return ks.process(t,e,i,n,r._INNER_MARGIN)}getFromText(t,e){let{rawDims:{pageWidth:i,pageHeight:n},rotation:s}=this.parent.viewport;return ks.extractContoursFromText(t,e,i,n,s,r._INNER_MARGIN)}getDrawnSignature(t){let{rawDims:{pageWidth:e,pageHeight:i},rotation:n}=this.parent.viewport;return ks.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:n,innerMargin:r._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=r.getDefaultDrawingOptions():(this._drawingOptions=r._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;let{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":n}}=this,s=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:n});return this.addComment(s),t?(s.paths={lines:e,points:i},s.uuid=this.#i,s.isCopy=!0):s.lines=e,this.#t&&(s.accessibilityData={type:"Figure",alt:this.#t}),s}static deserializeDraw(t,e,i,n,s,o){return o.areContours?Bl.deserialize(t,e,i,n,s,o):io.deserialize(t,e,i,n,s,o)}static deserialize(t,e,i){return q(this,null,function*(){let n=yield Ls(r,this,"deserialize").call(this,t,e,i);return n.#e=t.areContours,n.description=t.accessibilityData?.alt||"",n.#i=t.uuid,n})}},I_=class r extends Dt{#e=null;#t=null;#n=null;#i=null;#o=null;#s="";#r=null;#a=!1;#c=null;#l=!1;#u=!1;static _type="stamp";static _editorType=je.STAMP;constructor(t){super(Ue(J({},t),{name:"stampEditor"})),this.#i=t.bitmapUrl,this.#o=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){Dt.initialize(t,e)}static isHandlingMimeForPasting(t){return ig.includes(t)}static paste(t,e){e.pasteEditor({mode:je.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#e=t.bitmap,e||(this.#t=t.id,this.#l=t.isSvg),t.file&&(this.#s=t.file.name),this.#f()}#p(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(t=null,e=!0){return q(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!(yield i.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:n,width:s,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=yield i.guess({name:"altText",request:{data:n,width:s,height:o,channels:n.length/(s*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");let d=l.output;return yield this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d})}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#h(i,!0)).finally(()=>this.#p());return}if(this.#i){let i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(n=>this.#h(n)).finally(()=>this.#p());return}if(this.#o){let i=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(n=>this.#h(n)).finally(()=>this.#p());return}let t=document.createElement("input");t.type="file",t.accept=ig.join(",");let e=this._uiManager._signal;this.#n=new Promise(i=>{t.addEventListener("change",()=>q(this,null,function*(){if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let n=yield this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(n)}i()}),{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#p()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#r===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#o||this.#t||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#e?this.#f():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){let{id:i,bitmap:n}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#t=i,n&&(this.#e=n),this.#a=!1,this.#f())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);let t=200;this.#c=setTimeout(()=>{this.#c=null,this.#m()},t)}#f(){let{div:t}=this,{width:e,height:i}=this.#e,[n,s]=this.pageDimensions,o=.75;if(this.width)e=this.width*n,i=this.height*s;else if(e>o*n||i>o*s){let d=Math.min(o*n/e,o*s/i);e*=d,i*=d}this._uiManager.enableWaiting(!1);let l=this.#r=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),this.width=e/n,this.height=i/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#u||(this.parent.addUndoableEditor(this),this.#u=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);let{width:n,height:s}=this.#e,o=new Wr,l=this.#e,d=n,h=s,u=null;if(e){if(n>e||s>e){let z=Math.min(e/n,e/s);d=Math.floor(n*z),h=Math.floor(s*z)}u=document.createElement("canvas");let f=u.width=Math.ceil(d*o.sx),_=u.height=Math.ceil(h*o.sy);this.#l||(l=this.#d(f,_));let y=u.getContext("2d");y.filter=this._uiManager.hcmFilter;let v="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":ng.isDarkMode&&(v="#8f8f9d",x="#42414d");let S=15,I=S*o.sx,P=S*o.sy,B=new OffscreenCanvas(I*2,P*2),N=B.getContext("2d");N.fillStyle=v,N.fillRect(0,0,I*2,P*2),N.fillStyle=x,N.fillRect(0,0,I,P),N.fillRect(I,P,I,P),y.fillStyle=y.createPattern(B,"repeat"),y.fillRect(0,0,f,_),y.drawImage(l,0,0,l.width,l.height,0,0,f,_)}let m=null;if(i){let f,_;if(o.symmetric&&l.width<t&&l.height<t)f=l.width,_=l.height;else if(l=this.#e,n>t||s>t){let x=Math.min(t/n,t/s);f=Math.floor(n*x),_=Math.floor(s*x),this.#l||(l=this.#d(f,_))}let v=new OffscreenCanvas(f,_).getContext("2d",{willReadFrequently:!0});v.drawImage(l,0,0,l.width,l.height,0,0,f,_),m={width:f,height:_,data:v.getImageData(0,0,f,_).data}}return{canvas:u,width:d,height:h,imageData:m}}#d(t,e){let{width:i,height:n}=this.#e,s=i,o=n,l=this.#e;for(;s>2*t||o>2*e;){let d=s,h=o;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));let u=new OffscreenCanvas(s,o);u.getContext("2d").drawImage(l,0,0,d,h,0,0,s,o),l=u.transferToImageBitmap()}return l}#m(){let[t,e]=this.parentDimensions,{width:i,height:n}=this,s=new Wr,o=Math.ceil(i*t*s.sx),l=Math.ceil(n*e*s.sy),d=this.#r;if(!d||d.width===o&&d.height===l)return;d.width=o,d.height=l;let h=this.#l?this.#e:this.#d(o,l),u=d.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(h,0,0,h.width,h.height,0,0,o,l)}#_(t){if(t){if(this.#l){let n=this._uiManager.imageManager.getSvgUrl(this.#t);if(n)return n}let e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#e,e.getContext("2d").drawImage(this.#e,0,0),e.toDataURL()}if(this.#l){let[e,i]=this.pageDimensions,n=Math.round(this.width*e*Es.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*Es.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(n,s);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,n,s),o.transferToImageBitmap()}return structuredClone(this.#e)}static deserialize(t,e,i){return q(this,null,function*(){let n=null,s=!1;if(t instanceof iu){let{data:{rect:v,rotation:x,id:S,structParent:I,popupRef:P,richText:B,contentsObj:N,creationDate:z,modificationDate:j},container:Q,parent:{page:{pageNumber:ee}},canvas:ae}=t,he,ct;ae?(delete t.canvas,{id:he,bitmap:ct}=i.imageManager.getFromCanvas(Q.id,ae),ae.remove()):(s=!0,t._hasNoCanvas=!0);let Ct=(yield e._structTree.getAriaAttributes(`${Zo}${S}`))?.get("aria-label")||"";n=t={annotationType:je.STAMP,bitmapId:he,bitmap:ct,pageIndex:ee-1,rect:v.slice(0),rotation:x,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:Ct},isSvg:!1,structParent:I,popupRef:P,richText:B,comment:N?.str||null,creationDate:z,modificationDate:j}}let o=yield Ls(r,this,"deserialize").call(this,t,e,i),{rect:l,bitmap:d,bitmapUrl:h,bitmapId:u,isSvg:m,accessibilityData:f}=t;s?(i.addMissingCanvas(t.id,o),o.#a=!0):u&&i.imageManager.isValidId(u)?(o.#t=u,d&&(o.#e=d)):o.#i=h,o.#l=m;let[_,y]=o.pageDimensions;return o.width=(l[2]-l[0])/_,o.height=(l[3]-l[1])/y,f&&(o.altTextData=f),o._initialData=n,t.comment&&o.setCommentData(t),o.#u=!!n,o})}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let i=Object.assign(super.serialize(t),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#_(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;let{decorative:n,altText:s}=this.serializeAltText(!1);if(!n&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let l=this.#v(i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;let o=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#t))e.stamps.set(this.#t,{area:o,serialized:i}),i.bitmap=this.#_(!1);else if(this.#l){let l=e.stamps.get(this.#t);o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=this.#_(!1))}return i}#v(t){let{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,n=t.pageIndex===e,s=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&n&&s,isSameAltText:s}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}},_F=(()=>{class r{#e;#t=!1;#n=null;#i=null;#o=null;#s=new Map;#r=!1;#a=!1;#c=!1;#l=null;#u=null;#h=null;#p=null;#g=null;#f=-1;#d;static _initialized=!1;static#m=new Map([w_,S_,I_,su,T_].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:i,div:n,structTreeLayer:s,accessibilityManager:o,annotationLayer:l,drawLayer:d,textLayer:h,viewport:u,l10n:m}){let f=[...r.#m.values()];if(!r._initialized){r._initialized=!0;for(let _ of f)_.initialize(m,e)}e.registerEditorTypes(f),this.#d=e,this.pageIndex=i,this.div=n,this.#e=o,this.#n=l,this.viewport=u,this.#h=h,this.drawLayer=d,this._structTree=s,this.#d.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===je.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#x(),e){case je.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case je.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case je.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:i}=this.div;if(i.toggle("nonEditing",!1),e===je.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(let n of r.#m.values())i.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#h?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.togglePointerEvents(e)}get#_(){return this.#s.size!==0?this.#s.values():this.#d.getEditors(this.pageIndex)}enable(){return q(this,null,function*(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;let e=new Set;for(let n of this.#_)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#d.removeChangedExistingAnnotation(n),e.add(n.annotationElementId));let i=this.#n;if(i)for(let n of i.getEditableAnnotations()){if(n.hide(),this.#d.isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;let s=yield this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}this.#c=!1,this.#d._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})})}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;let s=this.#d.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",o=>{let{clientX:d,clientY:h,timeStamp:u}=o,m=this.#f;if(u-m>500){this.#f=u;return}this.#f=-1;let{classList:f}=this.div;f.toggle("getElements",!0);let _=document.elementsFromPoint(d,h);if(f.toggle("getElements",!1),!this.div.contains(_[0]))return;let y,v=new RegExp(`^${xl}[0-9]+$`);for(let S of _)if(v.test(S.id)){y=S.id;break}if(!y)return;let x=this.#s.get(y);x?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),x.dblclick(o))},{signal:s,capture:!0})}let e=this.#n,i=[];if(e){let s=new Map,o=new Map;for(let d of this.#_){if(d.disableEditing(),!d.annotationElementId){i.push(d);continue}if(d.serialize()!==null){s.set(d.annotationElementId,d);continue}else o.set(d.annotationElementId,d);this.getEditableAnnotation(d.annotationElementId)?.show(),d.remove()}let l=e.getEditableAnnotations();for(let d of l){let{id:h}=d.data;if(this.#d.isDeletedAnnotationElement(h)){d.updateEdited({deleted:!0});continue}let u=o.get(h);if(u){u.resetAnnotationElement(d),u.show(!1),d.show();continue}u=s.get(h),u&&(this.#d.addChangedExistingAnnotation(u),u.renderAnnotationElement(d)&&u.show(!1)),d.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);let{classList:n}=this.div;for(let s of r.#m.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(i),this.#a=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#p){this.#p=new AbortController;let e=this.#d.combinedSignal(this.#p);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:e}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#p&&(this.#p.abort(),this.#p=null,this.#h.div.classList.remove("highlighting"))}#v(e){this.#d.unselectAll();let{target:i}=e;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){let{isMac:n}=oi.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#d.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),su.startHighlighting(this,this.#d.direction==="ltr",{target:this.#h.div,x:e.x,y:e.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;let e=this.#d.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:e}),this.div.addEventListener("pointercancel",i,{signal:e})}disableClick(){this.#i?.abort(),this.#i=null}attach(e){this.#s.set(e.id,e);let{annotationElementId:i}=e;i&&this.#d.isDeletedAnnotationElement(i)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#s.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e),Dt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){let i=e.render();this.div.append(i),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;let{activeElement:i}=document;e.div.contains(i)&&!this.#o&&(e._focusEventsAllowed=!1,this.#o=setTimeout(()=>{this.#o=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),i.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){let i=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:i,undo:n,mustExec:!1})}getEditorByUID(e){for(let i of this.#s.values())if(i.uid===e)return i;return null}getNextId(){return this.#d.getId()}get#b(){return r.#m.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#E(e){let i=this.#b;return i?new i.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}pasteEditor(e,i){return q(this,null,function*(){this.updateToolbar(e),yield this.#d.updateMode(e.mode);let{offsetX:n,offsetY:s}=this.#C(),o=this.getNextId(),l=this.#E(J({parent:this,id:o,x:n,y:s,uiManager:this.#d,isCentered:!0},i));l&&this.add(l)})}deserialize(e){return q(this,null,function*(){return(yield r.#m.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d))||null})}createAndAddNewEditor(e,i,n={}){let s=this.getNextId(),o=this.#E(J({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:i},n));return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#C(){let{x:e,y:i,width:n,height:s}=this.boundingClientRect,o=Math.max(0,e),l=Math.max(0,i),d=Math.min(window.innerWidth,e+n),h=Math.min(window.innerHeight,i+s),u=(o+d)/2-e,m=(l+h)/2-i,[f,_]=this.viewport.rotation%180===0?[u,m]:[m,u];return{offsetX:f,offsetY:_}}addNewEditor(e={}){this.createAndAddNewEditor(this.#C(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){let{isMac:i}=oi.platform;if(e.button!==0||e.ctrlKey&&i||e.target!==this.div||!this.#r||(this.#r=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}let n=this.#d.getMode();if(n===je.STAMP||n===je.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===je.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}let{isMac:i}=oi.platform;if(e.button!==0||e.ctrlKey&&i||e.target!==this.div)return;if(this.#r=!0,this.#b?.isDrawer){this.startDrawingSession(e);return}let n=this.#d.getActive();this.#t=!n||n.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#l=new AbortController;let i=this.#d.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#u=null,this.commitOrRemove())},{signal:i}),this.#b.startDrawing(this,this.#d,!1,e)}pause(e){if(e){let{activeElement:i}=document;this.div.contains(i)&&(this.#u=i);return}this.#u&&setTimeout(()=>{this.#u?.focus(),this.#u=null},0)}endDrawingSession(e=!1){return this.#l?(this.#d.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#u=null,this.#b.endDrawing(e)):null}findNewParent(e,i,n){let s=this.#d.findParent(i,n);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#o&&(clearTimeout(this.#o),this.#o=null);for(let e of this.#s.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#s.clear(),this.#d.removeLayer(this)}#x(){for(let e of this.#s.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Js(this.div,e);for(let i of this.#d.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#x();let i=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Js(this.div,{rotation:n}),i!==n)for(let s of this.#s.values())s.rotate(n)}get pageDimensions(){let{pageWidth:e,pageHeight:i}=this.viewport.rawDims;return[e,i]}get scale(){return this.#d.viewParameters.realScale}}return r})(),D_=class r{#e=null;#t=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#e){this.#e=t;return}if(this.#e!==t){if(this.#t.size>0)for(let e of this.#t.values())e.remove(),t.append(e);this.#e=t}}static get _svgFactory(){return He(this,"_svgFactory",new ia)}static#o(t,[e,i,n,s]){let{style:o}=t;o.top=`${100*i}%`,o.left=`${100*e}%`,o.width=`${100*n}%`,o.height=`${100*s}%`}#s(){let t=r._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),t}#r(t,e){let i=r._svgFactory.createElement("clipPath");t.append(i);let n=`clip_${e}`;i.setAttribute("id",n),i.setAttribute("clipPathUnits","objectBoundingBox");let s=r._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),n}#a(t,e){for(let[i,n]of Object.entries(e))n===null?t.removeAttribute(i):t.setAttribute(i,n)}draw(t,e=!1,i=!1){let n=r.#i++,s=this.#s(),o=r._svgFactory.createElement("defs");s.append(o);let l=r._svgFactory.createElement("path");o.append(l);let d=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",d),l.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(n,l);let h=i?this.#r(o,d):null,u=r._svgFactory.createElement("use");return s.append(u),u.setAttribute("href",`#${d}`),this.updateProperties(s,t),this.#t.set(n,s),{id:n,clipPathId:`url(#${h})`}}drawOutline(t,e){let i=r.#i++,n=this.#s(),s=r._svgFactory.createElement("defs");n.append(s);let o=r._svgFactory.createElement("path");s.append(o);let l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){let m=r._svgFactory.createElement("mask");s.append(m),d=`mask_p${this.pageIndex}_${i}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");let f=r._svgFactory.createElement("rect");m.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");let _=r._svgFactory.createElement("use");m.append(_),_.setAttribute("href",`#${l}`),_.setAttribute("stroke","none"),_.setAttribute("fill","black"),_.setAttribute("fill-rule","nonzero"),_.classList.add("mask")}let h=r._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${l}`),d&&h.setAttribute("mask",`url(#${d})`);let u=h.cloneNode();return n.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(n,t),this.#t.set(i,n),i}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;let{root:i,bbox:n,rootClass:s,path:o}=e,l=typeof t=="number"?this.#t.get(t):t;if(l){if(i&&this.#a(l,i),n&&r.#o(l,n),s){let{classList:d}=l;for(let[h,u]of Object.entries(s))d.toggle(h,u)}if(o){let h=l.firstElementChild.firstElementChild;this.#a(h,o)}}}updateParent(t,e){if(e===this)return;let i=this.#t.get(t);i&&(e.#e.append(i),this.#t.delete(t),e.#t.set(t,i))}remove(t){this.#n.delete(t),this.#e!==null&&(this.#t.get(t).remove(),this.#t.delete(t))}destroy(){this.#e=null;for(let t of this.#t.values())t.remove();this.#t.clear(),this.#n.clear()}};globalThis._pdfjsTestingUtils={HighlightOutliner:Ll};globalThis.pdfjsLib={AbortException:gr,AnnotationEditorLayer:_F,AnnotationEditorParamsType:nt,AnnotationEditorType:je,AnnotationEditorUIManager:Al,AnnotationLayer:x_,AnnotationMode:Cs,AnnotationType:hi,applyOpacity:G2,build:mF,ColorPicker:Xh,createValidAbsoluteUrl:FC,CSSConstants:rg,DOMSVGFactory:ia,DrawLayer:D_,FeatureTest:oi,fetchData:zl,findContrastColor:$2,getDocument:O_,getFilenameFromUrl:z2,getPdfFilenameFromUrl:H2,getRGB:Hl,getUuid:BC,getXfaPageViewport:U2,GlobalWorkerOptions:Hr,ImageKind:Ih,InvalidPDFException:Cl,isDataScheme:hu,isPdfFile:P_,isValidExplicitDest:Z2,MathClamp:qi,noContextMenu:Wn,normalizeUnicode:N2,OPS:wl,OutputScale:Wr,PasswordResponses:T2,PDFDataRangeTransport:Yh,PDFDateString:Ml,PDFWorker:Pl,PermissionFlag:A2,PixelsPerInch:Es,RenderingCancelledException:Sl,renderRichText:zC,ResponseException:ta,setLayerDimensions:Js,shadow:He,SignatureExtractor:ks,stopEvent:Zt,SupportedImageMimeTypes:ig,TextLayer:Dl,TouchManager:Oh,updateUrlHash:LC,Util:de,VerbosityLevel:lu,version:pF,XfaLayer:Ph};var vF="dm-tool-files",Ss="files",yF=1,pu=class r{openDb(){return new Promise((t,e)=>{let i=indexedDB.open(vF,yF);i.onerror=()=>{e(i.error)},i.onsuccess=()=>{t(i.result)},i.onupgradeneeded=n=>{let s=n.target.result;s.objectStoreNames.contains(Ss)||s.createObjectStore(Ss,{keyPath:"id"})}})}saveFile(t,e){return q(this,null,function*(){let i=yield this.openDb();try{return yield new Promise((n,s)=>{let o=i.transaction(Ss,"readwrite"),l=o.objectStore(Ss),d={id:t,blob:e,fileName:e.name,fileType:e.type},h=l.put(d);h.onsuccess=()=>n(),h.onerror=()=>s(h.error),o.onerror=()=>s(o.error)})}finally{i.close()}})}getFile(t){return q(this,null,function*(){let e=yield this.openDb();try{return yield new Promise((i,n)=>{let s=e.transaction(Ss,"readonly"),l=s.objectStore(Ss).get(t);l.onsuccess=()=>{i(l.result||null)},l.onerror=()=>n(l.error),s.onerror=()=>n(s.error)})}finally{e.close()}})}deleteFile(t){return q(this,null,function*(){let e=yield this.openDb();try{return yield new Promise((i,n)=>{let s=e.transaction(Ss,"readwrite"),l=s.objectStore(Ss).delete(t);l.onsuccess=()=>i(),l.onerror=()=>n(l.error),s.onerror=()=>n(s.error)})}finally{e.close()}})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})};var wF=["fileInput"],CF=["pdfContainer"],kF=r=>({items:r,level:0}),EF=(r,t)=>({items:r,level:t});function SF(r,t){if(r&1){let e=ie();w(0,"div",10)(1,"button",11),U("click",function(){H(e);let n=T();return W(n.openFileDialog())}),F(2," Open File "),E()()}}function MF(r,t){r&1&&(w(0,"div",10)(1,"span"),F(2,"Loading..."),E()())}function AF(r,t){if(r&1&&re(0,"img",12),r&2){let e=T();R("src",e.fileUrl,Ao)}}function TF(r,t){r&1&&cr(0)}function IF(r,t){if(r&1){let e=ie();w(0,"div",17)(1,"div",18)(2,"span"),F(3,"Contents"),E(),w(4,"button",19),U("click",function(){H(e);let n=T(2);return W(n.showToc=!1)}),w(5,"mat-icon"),F(6,"close"),E()()(),w(7,"div",20),X(8,TF,1,0,"ng-container",21),E()()}if(r&2){let e=T(2),i=Ut(9);A(8),R("ngTemplateOutlet",i)("ngTemplateOutletContext",os(2,kF,e.outline))}}function DF(r,t){if(r&1&&(w(0,"div",22,3),re(2,"canvas",23),E()),r&2){let e=t.index;ye("data-page",e+1),A(2),R("id","pdf-page-"+(e+1))}}function PF(r,t){if(r&1){let e=ie();w(0,"div",13),X(1,IF,9,4,"div",14),w(2,"div",15,2),U("scroll",function(){H(e);let n=T();return W(n.onScroll())}),X(4,DF,3,2,"div",16),E()()}if(r&2){let e=T();A(),R("ngIf",e.showToc&&e.outline.length>0),A(3),R("ngForOf",e.pages)}}function RF(r,t){if(r&1){let e=ie();w(0,"button",33),U("click",function(){H(e);let n=T(3);return W(n.showToc=!n.showToc)}),w(1,"mat-icon"),F(2,"menu_book"),E()()}if(r&2){let e=T(3);ce("active",e.showToc)}}function OF(r,t){if(r&1){let e=ie();wi(0),X(1,RF,3,2,"button",27),w(2,"button",28),U("click",function(){H(e);let n=T(2);return W(n.previousPage())}),w(3,"mat-icon"),F(4,"chevron_left"),E()(),w(5,"input",29),Fe("ngModelChange",function(n){H(e);let s=T(2);return Oe(s.pageInput,n)||(s.pageInput=n),W(n)}),U("keydown.enter",function(){H(e);let n=T(2);return W(n.goToPage())})("blur",function(){H(e);let n=T(2);return W(n.goToPage())}),E(),w(6,"span",30),F(7),E(),w(8,"button",28),U("click",function(){H(e);let n=T(2);return W(n.nextPage())}),w(9,"mat-icon"),F(10,"chevron_right"),E()(),w(11,"span",31),F(12,"|"),E(),w(13,"button",28),U("click",function(){H(e);let n=T(2);return W(n.zoomOut())}),w(14,"mat-icon"),F(15,"remove"),E()(),w(16,"span",32),F(17),E(),w(18,"button",28),U("click",function(){H(e);let n=T(2);return W(n.zoomIn())}),w(19,"mat-icon"),F(20,"add"),E()(),w(21,"span",31),F(22,"|"),E(),Ci()}if(r&2){let e=T(2);A(),R("ngIf",e.outline.length>0),A(),R("disabled",e.currentPage<=1),A(3),Re("ngModel",e.pageInput),R("max",e.totalPages),A(2),Ze("/ ",e.totalPages,""),A(),R("disabled",e.currentPage>=e.totalPages),A(5),R("disabled",e.zoomLevel<=.5),A(4),Ze("",e.Math.round(e.zoomLevel*100),"%"),A(),R("disabled",e.zoomLevel>=3)}}function FF(r,t){if(r&1){let e=ie();w(0,"div",24),X(1,OF,23,9,"ng-container",25),w(2,"button",26),U("click",function(){H(e);let n=T();return W(n.clearFile())}),F(3,"Clear"),E()()}if(r&2){let e=T();A(),R("ngIf",!e.isImage&&e.pdfDoc)}}function LF(r,t){if(r&1){let e=ie();w(0,"button",39),U("click",function(n){H(e);let s=T().$implicit,o=T(2);return W(o.toggleOutlineItem(s,n))}),w(1,"mat-icon"),F(2),E()()}if(r&2){let e=T().$implicit;A(2),Te(e.expanded?"expand_more":"chevron_right")}}function NF(r,t){r&1&&cr(0)}function BF(r,t){if(r&1&&(w(0,"div"),X(1,NF,1,0,"ng-container",21),E()),r&2){let e=T().$implicit,i=T().level;T();let n=Ut(9);A(),R("ngTemplateOutlet",n)("ngTemplateOutletContext",od(2,EF,e.items,i+1))}}function VF(r,t){if(r&1){let e=ie();w(0,"div",35)(1,"div",36),U("click",function(){let n=H(e).$implicit,s=T(2);return W(s.goToOutlineItem(n))}),X(2,LF,3,1,"button",37),w(3,"span",38),F(4),E()(),X(5,BF,2,5,"div",25),E()}if(r&2){let e=t.$implicit,i=T().level;fi("padding-left",i*16,"px"),A(2),R("ngIf",e.items==null?null:e.items.length),A(2),Te(e.title),A(),R("ngIf",e.expanded&&(e.items==null?null:e.items.length))}}function zF(r,t){if(r&1&&X(0,VF,6,5,"div",34),r&2){let e=t.items;R("ngForOf",e)}}Hr.workerSrc="pdf.worker.min.mjs";var mu=class r{constructor(t,e,i){this.sanitizer=t;this.fileStorage=e;this.cdr=i}settings;widgetId;settingsChange=new fe;fileInput;pdfContainer;Math=Math;fileUrl=null;isImage=!1;loading=!1;pdfDoc=null;currentPage=1;pageInput=1;totalPages=0;pages=[];outline=[];showToc=!1;zoomLevel=1;pdfData=null;renderedPages=new Set;renderingPages=new Set;scrollTimeout=null;ngOnInit(){return q(this,null,function*(){if(this.settings?.pdfPage&&(this.currentPage=this.settings.pdfPage,this.pageInput=this.currentPage),this.widgetId){this.loading=!0,this.cdr.detectChanges();try{let t=yield this.fileStorage.getFile(this.widgetId);t?.blob&&(this.isImage=t.fileType?.startsWith("image/")||!1,this.isImage?this.fileUrl=URL.createObjectURL(t.blob):(this.pdfData=yield t.blob.arrayBuffer(),this.fileUrl="pdf",yield this.loadPdf()))}catch(t){console.error("Error restoring file from IndexedDB:",t)}finally{this.loading=!1,this.cdr.detectChanges()}}})}ngAfterViewInit(){this.pdfDoc&&setTimeout(()=>this.renderVisiblePages(),100)}ngOnDestroy(){this.fileUrl&&this.isImage&&URL.revokeObjectURL(this.fileUrl),this.pdfDoc&&this.pdfDoc.destroy(),this.scrollTimeout&&clearTimeout(this.scrollTimeout)}openFileDialog(){this.fileInput.nativeElement.click()}onFileSelected(t){return q(this,null,function*(){let e=t.target;if(e.files&&e.files[0]){let i=e.files[0];if(this.isImage=i.type.startsWith("image/"),this.fileUrl&&this.isImage&&URL.revokeObjectURL(this.fileUrl),this.pdfDoc&&(this.pdfDoc.destroy(),this.pdfDoc=null),this.currentPage=1,this.pageInput=1,this.renderedPages.clear(),this.renderingPages.clear(),this.outline=[],this.showToc=!1,this.zoomLevel=1,this.isImage?this.fileUrl=URL.createObjectURL(i):(this.pdfData=yield i.arrayBuffer(),this.fileUrl="pdf",yield this.loadPdf()),this.widgetId)try{yield this.fileStorage.saveFile(this.widgetId,i)}catch(n){console.error("Error saving file to IndexedDB:",n)}this.settings&&(this.settings.fileName=i.name,this.settings.fileType=i.type,this.settings.pdfPage=this.currentPage,delete this.settings.fileDataUrl,this.notifySettingsChange()),this.cdr.detectChanges()}})}loadPdf(){return q(this,null,function*(){if(this.pdfData)try{let t=O_({data:this.pdfData});this.pdfDoc=yield t.promise,this.totalPages=this.pdfDoc.numPages,this.pages=Array.from({length:this.totalPages},(e,i)=>i+1),this.currentPage>this.totalPages&&(this.currentPage=this.totalPages),this.currentPage<1&&(this.currentPage=1),this.pageInput=this.currentPage,yield this.loadOutline(),this.cdr.detectChanges(),setTimeout(()=>{this.renderVisiblePages(),this.currentPage>1&&this.scrollToPage(this.currentPage)},100)}catch(t){console.error("Error loading PDF:",t)}})}loadOutline(){return q(this,null,function*(){if(this.pdfDoc)try{let t=yield this.pdfDoc.getOutline();t&&(this.outline=this.processOutline(t))}catch(t){console.error("Error loading PDF outline:",t)}})}processOutline(t){return t.map(e=>({title:e.title,dest:e.dest,items:e.items?this.processOutline(e.items):[],expanded:!1}))}goToOutlineItem(t){return q(this,null,function*(){if(!(!this.pdfDoc||!t.dest))try{let e;if(typeof t.dest=="string"){let n=yield this.pdfDoc.getDestination(t.dest);if(n){let s=n[0];e=yield this.pdfDoc.getPageIndex(s)}else return}else if(Array.isArray(t.dest)){let n=t.dest[0];e=yield this.pdfDoc.getPageIndex(n)}else return;let i=e+1;this.currentPage=i,this.pageInput=i,this.scrollToPage(i),this.savePage()}catch(e){console.error("Error navigating to outline item:",e)}})}toggleOutlineItem(t,e){e.stopPropagation(),t.expanded=!t.expanded}renderVisiblePages(){return q(this,null,function*(){if(!this.pdfDoc||!this.pdfContainer?.nativeElement)return;let t=this.pdfContainer.nativeElement,e=t.getBoundingClientRect(),i=t.querySelectorAll(".page-wrapper");for(let n=0;n<i.length;n++){let o=i[n].getBoundingClientRect(),l=n+1,d=e.height;o.bottom>e.top-d&&o.top<e.bottom+d&&!this.renderedPages.has(l)&&(yield this.renderPage(l))}})}renderPage(t){return q(this,null,function*(){if(!(!this.pdfDoc||this.renderedPages.has(t)||this.renderingPages.has(t))){this.renderingPages.add(t);try{let e=yield this.pdfDoc.getPage(t),i=document.getElementById(`pdf-page-${t}`);if(!i){this.renderingPages.delete(t);return}let n=i.getContext("2d"),s=this.pdfContainer?.nativeElement?.clientWidth||800,o=e.getViewport({scale:1}),d=(s-40)/o.width*this.zoomLevel,h=e.getViewport({scale:d});i.height=h.height,i.width=h.width,yield e.render({canvasContext:n,viewport:h,canvas:i}).promise,this.renderedPages.add(t)}catch(e){e?.name!=="RenderingCancelledException"&&console.error(`Error rendering page ${t}:`,e)}finally{this.renderingPages.delete(t)}}})}onScroll(){this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.renderVisiblePages(),this.updateCurrentPageFromScroll()},100)}updateCurrentPageFromScroll(){if(!this.pdfContainer?.nativeElement)return;let t=this.pdfContainer.nativeElement,e=t.getBoundingClientRect(),i=e.top+e.height/3,n=t.querySelectorAll(".page-wrapper");for(let s=0;s<n.length;s++){let l=n[s].getBoundingClientRect();if(l.top<=i&&l.bottom>i){let d=s+1;this.currentPage!==d&&(this.currentPage=d,this.pageInput=d,this.savePage(),this.cdr.detectChanges());break}}}scrollToPage(t){if(!this.pdfContainer?.nativeElement)return;let i=this.pdfContainer.nativeElement.querySelector(`[data-page="${t}"]`);i&&i.scrollIntoView({behavior:"auto",block:"start"})}previousPage(){this.currentPage>1&&(this.currentPage--,this.pageInput=this.currentPage,this.scrollToPage(this.currentPage),this.savePage())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.pageInput=this.currentPage,this.scrollToPage(this.currentPage),this.savePage())}goToPage(){let t=Math.floor(this.pageInput);isNaN(t)||t<1?t=1:t>this.totalPages&&(t=this.totalPages),this.pageInput=t,this.currentPage=t,this.scrollToPage(t),this.savePage()}zoomIn(){this.zoomLevel<3&&(this.zoomLevel=Math.min(3,this.zoomLevel+.25),this.reRenderAllPages())}zoomOut(){this.zoomLevel>.5&&(this.zoomLevel=Math.max(.5,this.zoomLevel-.25),this.reRenderAllPages())}reRenderAllPages(){this.renderedPages.clear(),this.cdr.detectChanges(),setTimeout(()=>this.renderVisiblePages(),50)}savePage(){this.settings&&(this.settings.pdfPage=this.currentPage,this.notifySettingsChange())}clearFile(){return q(this,null,function*(){if(this.fileUrl&&this.isImage&&URL.revokeObjectURL(this.fileUrl),this.pdfDoc&&(this.pdfDoc.destroy(),this.pdfDoc=null),this.fileUrl=null,this.pdfData=null,this.currentPage=1,this.pageInput=1,this.totalPages=0,this.pages=[],this.outline=[],this.showToc=!1,this.zoomLevel=1,this.renderedPages.clear(),this.renderingPages.clear(),this.fileInput?.nativeElement&&(this.fileInput.nativeElement.value=""),this.widgetId)try{yield this.fileStorage.deleteFile(this.widgetId)}catch(t){console.error("Error deleting file from IndexedDB:",t)}this.settings&&(this.settings.fileName=null,this.settings.fileType=null,this.settings.pdfPage=null,delete this.settings.fileDataUrl,this.notifySettingsChange())})}notifySettingsChange(){this.settingsChange.emit(this.settings)}static \u0275fac=function(e){return new(e||r)(we(Ws),we(pu),we($e))};static \u0275cmp=oe({type:r,selectors:[["app-image-pdf-viewer"]],viewQuery:function(e,i){if(e&1&&(Le(wF,5),Le(CF,5)),e&2){let n;Ee(n=Se())&&(i.fileInput=n.first),Ee(n=Se())&&(i.pdfContainer=n.first)}},inputs:{settings:"settings",widgetId:"widgetId"},outputs:{settingsChange:"settingsChange"},decls:10,vars:5,consts:[["fileInput",""],["outlineTemplate",""],["pdfContainer",""],["pageWrapper",""],[1,"viewer-container"],["type","file","accept","image/*,.pdf",2,"display","none",3,"change"],["class","empty-state",4,"ngIf"],["class","content-view","alt","Selected image",3,"src",4,"ngIf"],["class","pdf-layout",4,"ngIf"],["class","file-controls",4,"ngIf"],[1,"empty-state"],["mat-raised-button","","color","primary",3,"click"],["alt","Selected image",1,"content-view",3,"src"],[1,"pdf-layout"],["class","toc-sidebar",4,"ngIf"],[1,"pdf-viewer",3,"scroll"],["class","page-wrapper",4,"ngFor","ngForOf"],[1,"toc-sidebar"],[1,"toc-header"],["mat-icon-button","",3,"click"],[1,"toc-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"page-wrapper"],[1,"pdf-canvas",3,"id"],[1,"file-controls"],[4,"ngIf"],["mat-button","",3,"click"],["mat-icon-button","","matTooltip","Table of Contents",3,"active","click",4,"ngIf"],["mat-icon-button","",3,"click","disabled"],["type","number","min","1",1,"page-input",3,"ngModelChange","keydown.enter","blur","ngModel","max"],[1,"page-total"],[1,"separator"],[1,"zoom-level"],["mat-icon-button","","matTooltip","Table of Contents",3,"click"],["class","toc-item",3,"padding-left",4,"ngFor","ngForOf"],[1,"toc-item"],[1,"toc-item-row",3,"click"],["mat-icon-button","","class","expand-btn",3,"click",4,"ngIf"],[1,"toc-title"],["mat-icon-button","",1,"expand-btn",3,"click"]],template:function(e,i){if(e&1){let n=ie();w(0,"div",4)(1,"input",5,0),U("change",function(o){return H(n),W(i.onFileSelected(o))}),E(),X(3,SF,3,0,"div",6)(4,MF,3,0,"div",6)(5,AF,1,1,"img",7)(6,PF,5,2,"div",8)(7,FF,4,1,"div",9),E(),X(8,zF,1,1,"ng-template",null,1,sn)}e&2&&(A(3),R("ngIf",!i.fileUrl&&!i.loading),A(),R("ngIf",i.loading),A(),R("ngIf",i.fileUrl&&i.isImage),A(),R("ngIf",i.fileUrl&&!i.isImage&&i.pdfDoc),A(),R("ngIf",i.fileUrl))},dependencies:[lt,Lt,Vt,as,jt,Xt,Zs,si,dl,cl,Kt,wt,gi,Ei,St,Ht,hC],styles:[".viewer-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;background:transparent;position:relative;color:var(--text-primary);overflow:hidden}.empty-state[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center}.content-view[_ngcontent-%COMP%]{flex:1;width:100%;height:100%;object-fit:contain;border:none;background:#ffffff0d}.pdf-layout[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden}.toc-sidebar[_ngcontent-%COMP%]{width:250px;background:var(--panel-bg, rgba(0, 0, 0, .5));border-right:1px solid var(--glass-border-color, rgba(255, 255, 255, .1));display:flex;flex-direction:column;overflow:hidden}.toc-header[_ngcontent-%COMP%]{padding:8px 12px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--glass-border-color, rgba(255, 255, 255, .1));font-weight:500}.toc-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 0}.toc-item[_ngcontent-%COMP%]{font-size:13px}.toc-item-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px 8px;cursor:pointer;transition:background .2s}.toc-item-row[_ngcontent-%COMP%]:hover{background:#ffffff1a}.expand-btn[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px}.expand-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.toc-title[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pdf-viewer[_ngcontent-%COMP%]{flex:1;overflow:auto;display:flex;flex-direction:column;align-items:center;background:#0000004d;padding:10px;gap:10px}.page-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.pdf-canvas[_ngcontent-%COMP%]{max-width:100%;height:auto;box-shadow:0 2px 10px #0000004d;background:#fff}.file-controls[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:var(--panel-bg);border:var(--glass-border);border-radius:4px;padding:4px 8px;-webkit-backdrop-filter:var(--glass-backdrop);backdrop-filter:var(--glass-backdrop);display:flex;align-items:center;gap:4px}.file-controls[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#fff3}.page-input[_ngcontent-%COMP%]{width:45px;padding:4px;border:1px solid var(--glass-border-color, rgba(255, 255, 255, .2));border-radius:4px;background:#0003;color:var(--text-primary, white);text-align:center;font-size:13px}.page-input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .page-input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.page-total[_ngcontent-%COMP%]{font-size:13px;margin-right:4px}.zoom-level[_ngcontent-%COMP%]{font-size:12px;min-width:40px;text-align:center}.separator[_ngcontent-%COMP%]{margin:0 4px;opacity:.5}"]})};var KC=L0(F_());function HF(r,t){r&1&&(w(0,"div",6),F(1," Saving... "),E())}function WF(r,t){if(r&1&&(w(0,"div",7),F(1),E()),r&2){let e=T(2);A(),Ze(" ",e.errorMessage," ")}}function UF(r,t){if(r&1){let e=ie();wi(0),w(1,"textarea",3),Fe("ngModelChange",function(n){H(e);let s=T();return Oe(s.content,n)||(s.content=n),W(n)}),U("ngModelChange",function(){H(e);let n=T();return W(n.onContentChange())}),F(2,"        "),E(),X(3,HF,2,0,"div",4)(4,WF,2,1,"div",5),Ci()}if(r&2){let e=T();A(),Re("ngModel",e.content),A(2),R("ngIf",e.isSaving),A(),R("ngIf",e.errorMessage)}}function jF(r,t){if(r&1){let e=ie();w(0,"div",8)(1,"button",9),U("click",function(){H(e);let n=T();return W(n.openExistingFile())}),F(2,"Open File"),E(),w(3,"button",9),U("click",function(){H(e);let n=T();return W(n.createNewFile())}),F(4,"New File"),E()()}}var fu=class r{constructor(t){this.cdr=t}settings;content="";fileHandle=null;isSaving=!1;errorMessage="";debouncedAutoSave=(0,KC.debounce)(this.autoSave.bind(this),1e3);openNewFile(){return q(this,null,function*(){return this.openExistingFile()})}createNewFileFromSettings(){return q(this,null,function*(){return this.createNewFile()})}ngOnInit(){this.content=this.settings?.content||"",this.settings?.fileName&&(this.settings.title=this.settings.fileName)}openExistingFile(){return q(this,null,function*(){try{if(window.showOpenFilePicker){let[t]=yield window.showOpenFilePicker({types:[{description:"Text Files",accept:{"text/plain":[".txt"]}}]});this.fileHandle=t,this.settings.title=t.name,this.settings.fileName=t.name,this.isSaving=!0,this.cdr.markForCheck();let e=yield t.getFile();this.content=yield e.text(),this.settings.content=this.content,this.isSaving=!1,this.cdr.markForCheck()}else this.errorMessage="File System Access API is not supported in this browser.",this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}catch(t){console.error("Error opening file:",t),this.errorMessage="Failed to open file",this.isSaving=!1,this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}})}createNewFile(){return q(this,null,function*(){try{if(window.showSaveFilePicker){let t=yield window.showSaveFilePicker({suggestedName:"untitled.txt",types:[{description:"Text Files",accept:{"text/plain":[".txt"]}}]});this.fileHandle=t,this.settings.title=t.name,this.settings.fileName=t.name,this.content="",this.settings.content=this.content,yield this.autoSave()}else this.errorMessage="File System Access API is not supported in this browser.",this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}catch(t){console.error("Error creating file:",t),this.errorMessage="Failed to create file",this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}})}onContentChange(){this.settings&&(this.settings.content=this.content),this.debouncedAutoSave()}autoSave(){return q(this,null,function*(){if(this.fileHandle)try{this.isSaving=!0,this.cdr.markForCheck();let t=yield this.fileHandle.createWritable();yield t.write(this.content),yield t.close(),this.isSaving=!1,this.cdr.markForCheck()}catch(t){console.error("Auto-save failed:",t),this.errorMessage="Auto-save failed",this.isSaving=!1,this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}})}ngOnDestroy(){this.debouncedAutoSave.cancel&&this.debouncedAutoSave.cancel()}static \u0275fac=function(e){return new(e||r)(we($e))};static \u0275cmp=oe({type:r,selectors:[["app-notepad"]],inputs:{settings:"settings"},decls:4,vars:2,consts:[["emptyState",""],[1,"notepad-container"],[4,"ngIf","ngIfElse"],["placeholder","Write your notes here...",1,"notepad-textarea",3,"ngModelChange","ngModel"],["class","save-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"save-indicator"],[1,"error-message"],[1,"empty-state"],[1,"action-btn",3,"click"]],template:function(e,i){if(e&1&&(w(0,"div",1),X(1,UF,5,3,"ng-container",2)(2,jF,5,0,"ng-template",null,0,sn),E()),e&2){let n=Ut(3);A(),R("ngIf",i.fileHandle||i.content)("ngIfElse",n)}},dependencies:[lt,Vt,jt,Xt,si,Kt],styles:[".notepad-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;position:relative;color:var(--text-primary)}.empty-state[_ngcontent-%COMP%]{flex:1;display:flex;gap:8px;align-items:center;justify-content:center}.notepad-textarea[_ngcontent-%COMP%]{flex:1;width:100%;resize:none;border:none;padding:12px;box-sizing:border-box;font-family:inherit;font-size:14px;line-height:1.6;outline:none;background:transparent;color:var(--text-primary)}.action-btn[_ngcontent-%COMP%]{padding:8px 16px;border:var(--glass-border);border-radius:4px;background:#ffffff0d;color:var(--text-primary);cursor:pointer;font-size:14px;transition:all .2s}.action-btn[_ngcontent-%COMP%]:hover{background:#ffffff26;border-color:var(--accent-color)}.save-indicator[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:var(--accent-color);color:#fff;padding:4px 8px;border-radius:4px;font-size:12px}.error-message[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:var(--danger-color);color:#fff;padding:4px 8px;border-radius:4px;font-size:12px}"],changeDetection:0})};var ZC=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({})}return r})();var QC=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye,ZC,Lr]})}return r})();function GF(r,t){if(r&1){let e=ie();wi(0),w(1,"div",3)(2,"button",4),U("click",function(){H(e);let n=T();return W(n.openExistingFile())}),F(3," Open Random Generator File "),E(),w(4,"button",5),U("click",function(){H(e);let n=T();return W(n.createNewFile())}),F(5," New Random Generator File "),E()(),Ci()}}function $F(r,t){r&1&&(w(0,"div",8),F(1," No mappings available. Add mappings in settings. "),E())}function qF(r,t){if(r&1){let e=ie();w(0,"button",17),U("click",function(){let n=H(e).$implicit,s=T(4);return W(s.randomize(n))}),F(1),E()}if(r&2){let e=t.$implicit,i=T(4);R("disabled",!i.hasItems(e)),A(),Ze(" ",e.key||"No Key"," ")}}function YF(r,t){if(r&1&&(wi(0),w(1,"div",13)(2,"div",14),F(3),E(),w(4,"div",15),X(5,qF,2,2,"button",16),E()(),Ci()),r&2){let e=t.$implicit,i=T(3);A(3),Te(e),A(2),R("ngForOf",i.getMappingsByCategory(e))}}function XF(r,t){if(r&1){let e=ie();w(0,"button",17),U("click",function(){let n=H(e).$implicit,s=T(4);return W(s.randomize(n))}),F(1),E()}if(r&2){let e=t.$implicit,i=T(4);R("disabled",!i.hasItems(e)),A(),Ze(" ",e.key||"No Key"," ")}}function KF(r,t){if(r&1&&(w(0,"div",18)(1,"div",15),X(2,XF,2,2,"button",16),E()()),r&2){let e=T(3);A(2),R("ngForOf",e.getUncategorizedMappings())}}function ZF(r,t){if(r&1&&(w(0,"div",19)(1,"strong"),F(2),E(),F(3),E()),r&2){let e=T(3);A(2),Ze("",e.lastKey||"Result",":"),A(),Ze(" ",e.lastResult," ")}}function QF(r,t){if(r&1&&(w(0,"div",9),X(1,YF,6,2,"ng-container",10)(2,KF,3,1,"div",11)(3,ZF,4,2,"div",12),E()),r&2){let e=T(2);A(),R("ngForOf",e.uniqueCategories),A(),R("ngIf",e.getUncategorizedMappings().length>0),A(),R("ngIf",e.lastResult)}}function JF(r,t){if(r&1&&X(0,$F,2,0,"div",6)(1,QF,4,3,"div",7),r&2){let e=T();R("ngIf",!e.mappings||e.mappings.length===0),A(),R("ngIf",e.mappings.length>0)}}var gu=class r{settings={};settingsChange=new fe;mappings=[];lastResult="";lastKey="";initialized=!1;fileHandle=null;saveTimeout;get hasLoadedData(){return this.mappings&&this.mappings.length>0}ngOnInit(){this.settings||(this.settings={}),Array.isArray(this.settings.mappings)||(this.settings.mappings=[]),this.mappings=this.settings.mappings,this.settings.useWeightedSelection===void 0&&(this.settings.useWeightedSelection=!0),this.settings.lastResult&&(this.lastResult=this.settings.lastResult),this.settings.lastKey&&(this.lastKey=this.settings.lastKey),this.applyCategoriesFromSettings(),this.initialized=!0}ngOnChanges(t){t.settings&&(this.mappings=this.settings?.mappings||[],this.applyCategoriesFromSettings())}applyCategoriesFromSettings(){if(this.settings?.mappingCategories&&Array.isArray(this.settings.mappingCategories)){let t=new Map;this.settings.mappingCategories.forEach(e=>{e.key&&e.value&&t.set(e.key,e.value)}),this.mappings.forEach(e=>{t.has(e.key)&&(e.category=t.get(e.key))})}}get uniqueCategories(){return[...new Set(this.mappings.filter(t=>t.category&&t.category.trim()!=="").map(t=>t.category))].sort()}getMappingsByCategory(t){return this.mappings.filter(e=>e.category===t)}getUncategorizedMappings(){return this.mappings.filter(t=>!t.category||t.category.trim()==="")}parseItem(t){let e=/^(\d+)\s*-\s*(\d+)\s+(.+)$/,i=t.match(e);if(i){let n=parseInt(i[1],10),s=parseInt(i[2],10),o=i[3],l=Math.max(1,s-n+1);return{text:o,weight:l}}return{text:t,weight:1}}getItems(t){return t.itemsText?t.itemsText.split(`
`).map(e=>e.trim()).filter(e=>e.length>0):[]}hasItems(t){return this.getItems(t).length>0}randomize(t){let e=this.getItems(t);if(e.length>0){if(this.settings?.useWeightedSelection!==!1){let n=[];e.forEach(o=>{let{text:l,weight:d}=this.parseItem(o);for(let h=0;h<d;h++)n.push(l)});let s=Math.floor(Math.random()*n.length);this.lastResult=n[s]}else{let n=Math.floor(Math.random()*e.length);this.lastResult=e[n]}this.lastKey=t.key,this.settings.lastResult=this.lastResult,this.settings.lastKey=this.lastKey,this.scheduleAutoSave()}}openExistingFile(){return q(this,null,function*(){try{if(window.showOpenFilePicker){let[t]=yield window.showOpenFilePicker({types:[{description:"Random Generator Files",accept:{"application/json":[".json"]}}]});this.fileHandle=t;let i=yield(yield t.getFile()).text(),n=JSON.parse(i);Object.assign(this.settings,n),Array.isArray(this.settings.mappings)||(this.settings.mappings=[]),this.mappings=this.settings.mappings,this.applyCategoriesFromSettings(),this.settingsChange.emit()}else alert("File System Access API is not supported in this browser.")}catch(t){console.error("Error opening file:",t)}})}createNewFile(){return q(this,null,function*(){try{if(window.showSaveFilePicker){let t=yield window.showSaveFilePicker({suggestedName:"untitled_random_generator.json",types:[{description:"Random Generator Files",accept:{"application/json":[".json"]}}]});this.fileHandle=t,Object.keys(this.settings).forEach(e=>delete this.settings[e]),Object.assign(this.settings,{mappings:[],mappingCategories:[],useWeightedSelection:!0}),this.mappings=this.settings.mappings,this.settingsChange.emit(),this.scheduleAutoSave()}else alert("File System Access API is not supported in this browser.")}catch(t){console.error("Error creating file:",t)}})}saveFile(){return q(this,null,function*(){if(this.fileHandle)try{this.saveCategoriesInSettings();let t=yield this.fileHandle.createWritable();yield t.write(JSON.stringify(this.settings,null,2)),yield t.close()}catch(t){console.error("Error saving file:",t)}})}saveCategoriesInSettings(){this.settings.mappingCategories||(this.settings.mappingCategories=[]),this.mappings.forEach(t=>{let e=this.settings.mappingCategories.findIndex(i=>i.key===t.key);t.category?e>=0?this.settings.mappingCategories[e].value=t.category:this.settings.mappingCategories.push({key:t.key,value:t.category}):e>=0&&this.settings.mappingCategories.splice(e,1)})}scheduleAutoSave(){this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout(()=>{this.saveFile(),this.initialized&&this.settingsChange.emit()},1e3)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=oe({type:r,selectors:[["app-random-generator"]],inputs:{settings:"settings"},outputs:{settingsChange:"settingsChange"},features:[Et],decls:4,vars:2,consts:[["loadedState",""],[1,"random-generator"],[4,"ngIf","ngIfElse"],[1,"empty-state"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","accent",3,"click"],["class","empty-message",4,"ngIf"],["class","content-wrapper",4,"ngIf"],[1,"empty-message"],[1,"content-wrapper"],[4,"ngFor","ngForOf"],["class","uncategorized-section",4,"ngIf"],["class","result",4,"ngIf"],[1,"category-section"],[1,"category-header"],[1,"button-grid"],["mat-raised-button","",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","",3,"click","disabled"],[1,"uncategorized-section"],[1,"result"]],template:function(e,i){if(e&1&&(w(0,"div",1),X(1,GF,6,0,"ng-container",2)(2,JF,2,2,"ng-template",null,0,sn),E()),e&2){let n=Ut(3);A(),R("ngIf",!i.hasLoadedData)("ngIfElse",n)}},dependencies:[lt,Lt,Vt,wt,gi,St,QC],styles:[".random-generator[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center;justify-content:center;overflow:hidden;color:var(--text-primary)}.content-wrapper[_ngcontent-%COMP%]{width:100%;padding:12px;display:flex;flex-direction:column;gap:12px;overflow-y:auto;max-height:100%}.button-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:8px}.result[_ngcontent-%COMP%]{text-align:center;padding:16px;background:var(--input-bg);border:var(--glass-border);color:var(--text-primary);border-radius:8px;margin-top:auto;font-weight:500;text-shadow:0 1px 2px rgba(0,0,0,.5);min-height:24px;display:flex;align-items:center;justify-content:center;box-shadow:inset 0 2px 4px #0003}.empty-message[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.9em;text-align:center;padding:16px}.category-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;margin-bottom:8px}.category-header[_ngcontent-%COMP%]{font-weight:600;padding:6px 8px;background:transparent;border-bottom:1px solid rgba(255,255,255,.1);font-size:.85em;color:var(--accent-color);text-transform:uppercase;letter-spacing:1px}.uncategorized-section[_ngcontent-%COMP%]{margin-top:4px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;align-items:center;justify-content:center;color:var(--text-secondary);height:100%}  .mat-mdc-outlined-button{width:100%;height:auto!important;min-height:40px!important;line-height:1.4!important;padding:8px 16px!important;white-space:normal!important;background:#ffffff08!important;border-color:#ffffff26!important;--mdc-outlined-button-label-text-color: var(--text-primary) !important;--mdc-outlined-button-outline-color: rgba(255, 255, 255, .15) !important;border-radius:6px!important;transition:all .2s cubic-bezier(.4,0,.2,1)!important}  .mat-mdc-outlined-button:hover:not([disabled]){background:#ffffff1a!important;border-color:var(--accent-color)!important;transform:translateY(-1px);box-shadow:0 4px 12px #0003;--mdc-outlined-button-outline-color: var(--accent-color) !important}  .mat-mdc-outlined-button:active:not([disabled]){transform:translateY(0);background:#40c4ff1a!important}"]})};var L_=class{_box;_destroyed=new ne;_resizeSubject=new ne;_resizeObserver;_elementObservables=new Map;constructor(t){this._box=t,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Rn(e=>{let i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(ai(e=>e.some(i=>i.target===t)),xm({bufferSize:1,refCount:!0}),ot(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},JC=(()=>{class r{_cleanupErrorListener;_observers=new Map;_ngZone=C(ke);constructor(){typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),this._cleanupErrorListener?.()}observe(e,i){let n=i?.box||"content-box";return this._observers.has(n)||this._observers.set(n,new L_(n)),this._observers.get(n).observe(e)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var eL=["notch"],tL=["matFormFieldNotchedOutline",""],iL=["*"],nL=["textField"],rL=["iconPrefixContainer"],sL=["textPrefixContainer"],oL=["iconSuffixContainer"],aL=["textSuffixContainer"],lL=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],cL=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function dL(r,t){r&1&&re(0,"span",21)}function hL(r,t){if(r&1&&(w(0,"label",20),Ke(1,1),X(2,dL,1,0,"span",21),E()),r&2){let e=T(2);R("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),ye("for",e._control.disableAutomaticLabeling?null:e._control.id),A(2),gt(!e.hideRequiredMarker&&e._control.required?2:-1)}}function uL(r,t){if(r&1&&X(0,hL,3,5,"label",20),r&2){let e=T();gt(e._hasFloatingLabel()?0:-1)}}function pL(r,t){r&1&&re(0,"div",7)}function mL(r,t){}function fL(r,t){if(r&1&&X(0,mL,0,0,"ng-template",13),r&2){T(2);let e=Ut(1);R("ngTemplateOutlet",e)}}function gL(r,t){if(r&1&&(w(0,"div",9),X(1,fL,1,1,null,13),E()),r&2){let e=T();R("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),A(),gt(e._forceDisplayInfixLabel()?-1:1)}}function _L(r,t){r&1&&(w(0,"div",10,2),Ke(2,2),E())}function bL(r,t){r&1&&(w(0,"div",11,3),Ke(2,3),E())}function vL(r,t){}function yL(r,t){if(r&1&&X(0,vL,0,0,"ng-template",13),r&2){T();let e=Ut(1);R("ngTemplateOutlet",e)}}function xL(r,t){r&1&&(w(0,"div",14,4),Ke(2,4),E())}function wL(r,t){r&1&&(w(0,"div",15,5),Ke(2,5),E())}function CL(r,t){r&1&&re(0,"div",16)}function kL(r,t){if(r&1&&(w(0,"div",18),Ke(1,6),E()),r&2){let e=T();R("@transitionMessages",e._subscriptAnimationState)}}function EL(r,t){if(r&1&&(w(0,"mat-hint",22),F(1),E()),r&2){let e=T(2);R("id",e._hintLabelId),A(),Te(e.hintLabel)}}function SL(r,t){if(r&1&&(w(0,"div",19),X(1,EL,2,2,"mat-hint",22),Ke(2,7),re(3,"div",23),Ke(4,8),E()),r&2){let e=T();R("@transitionMessages",e._subscriptAnimationState),A(),gt(e.hintLabel?1:-1)}}var ra=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["mat-label"]]})}return r})(),ak=new te("MatError"),lk=(()=>{class r{id=C(zt).getId("mat-mdc-error-");constructor(){C(new ar("aria-live"),{optional:!0})||C(ve).nativeElement.setAttribute("aria-live","polite")}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(i,n){i&2&&Fn("id",n.id)},inputs:{id:"id"},features:[et([{provide:ak,useExisting:r}])]})}return r})(),ek=(()=>{class r{align="start";id=C(zt).getId("mat-mdc-hint-");static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,n){i&2&&(Fn("id",n.id),ye("align",null),ce("mat-mdc-form-field-hint-end",n.align==="end"))},inputs:{align:"align",id:"id"}})}return r})(),ML=new te("MatPrefix");var AL=new te("MatSuffix");var ck=new te("FloatingLabelParent"),tk=(()=>{class r{_elementRef=C(ve);get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}_floating=!1;get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}_monitorResize=!1;_resizeObserver=C(JC);_ngZone=C(ke);_parent=C(ck);_resizeSubscription=new ei;constructor(){}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return TL(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,n){i&2&&ce("mdc-floating-label--float-above",n.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}return r})();function TL(r){let t=r;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let i=e.scrollWidth;return e.remove(),i}var ik="mdc-line-ripple--active",_u="mdc-line-ripple--deactivating",nk=(()=>{class r{_elementRef=C(ve);_cleanupTransitionEnd;constructor(){let e=C(ke),i=C(xi);e.runOutsideAngular(()=>{this._cleanupTransitionEnd=i.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(_u),e.add(ik)}deactivate(){this._elementRef.nativeElement.classList.add(_u)}_handleTransitionEnd=e=>{let i=this._elementRef.nativeElement.classList,n=i.contains(_u);e.propertyName==="opacity"&&n&&i.remove(ik,_u)};ngOnDestroy(){this._cleanupTransitionEnd()}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}return r})(),rk=(()=>{class r{_elementRef=C(ve);_ngZone=C(ke);open=!1;_notch;constructor(){}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,n){if(i&1&&Le(eL,5),i&2){let s;Ee(s=Se())&&(n._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,n){i&2&&ce("mdc-notched-outline--notched",n.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},attrs:tL,ngContentSelectors:iL,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(i,n){i&1&&(Bt(),re(0,"div",1),w(1,"div",2,0),Ke(3),E(),re(4,"div",3))},encapsulation:2,changeDetection:0})}return r})(),IL={transitionMessages:ls("transitionMessages",[Hs("enter",vn({opacity:1,transform:"translateY(0%)"})),dr("void => enter",[vn({opacity:0,transform:"translateY(-5px)"}),Ir("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},jl=(()=>{class r{value;stateChanges;id;placeholder;ngControl;focused;empty;shouldLabelFloat;required;disabled;errorState;controlType;autofilled;userAriaDescribedBy;disableAutomaticLabeling;static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r})}return r})();var Gl=new te("MatFormField"),DL=new te("MAT_FORM_FIELD_DEFAULT_OPTIONS"),sk="fill",PL="auto",ok="fixed",RL="translateY(-50%)",bu=(()=>{class r{_elementRef=C(ve);_changeDetectorRef=C($e);_dir=C(ri);_platform=C(ht);_idGenerator=C(zt);_defaults=C(DL,{optional:!0});_animationMode=C(Ft,{optional:!0});_textField;_iconPrefixContainer;_textPrefixContainer;_iconSuffixContainer;_textSuffixContainer;_floatingLabel;_notchedOutline;_lineRipple;_formFieldControl;_prefixChildren;_suffixChildren;_errorChildren;_hintChildren;_labelChild=cy(ra);get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Pr(e)}_hideRequiredMarker=!1;color="primary";get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||PL}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}_floatLabel;get appearance(){return this._appearance}set appearance(e){let i=this._appearance,n=e||this._defaults?.appearance||sk;this._appearance=n,this._appearance==="outline"&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdate=!0)}_appearance=sk;get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||ok}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||ok}_subscriptSizing=null;get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}_hintLabel="";_hasIconPrefix=!1;_hasTextPrefix=!1;_hasIconSuffix=!1;_hasTextSuffix=!1;_labelId=this._idGenerator.getId("mat-mdc-form-field-label-");_hintLabelId=this._idGenerator.getId("mat-mdc-hint-");_subscriptAnimationState="";get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}_destroyed=new ne;_isFocused=null;_explicitFormFieldControl;_needsOutlineLabelOffsetUpdate=!1;_previousControl=null;_stateChanges;_valueChanges;_describedByChanges;_injector=C(ft);constructor(){let e=this._defaults;e&&(e.appearance&&(this.appearance=e.appearance),this._hideRequiredMarker=!!e?.hideRequiredMarker,e.color&&(this.color=e.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._describedByChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getLabelId=Tr(()=>this._hasFloatingLabel()?this._labelId:null);getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(e){let i=this._control,n="mat-mdc-form-field-type-";e&&this._elementRef.nativeElement.classList.remove(n+e.controlType),i.controlType&&this._elementRef.nativeElement.classList.add(n+i.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=i.stateChanges.subscribe(()=>{this._updateFocusState(),this._changeDetectorRef.markForCheck()}),this._describedByChanges?.unsubscribe(),this._describedByChanges=i.stateChanges.pipe(Ri([void 0,void 0]),Ot(()=>[i.errorState,i.userAriaDescribedBy]),ym(),ai(([[s,o],[l,d]])=>s!==l||o!==d)).subscribe(()=>this._syncDescribedByIds()),this._valueChanges?.unsubscribe(),i.ngControl&&i.ngControl.valueChanges&&(this._valueChanges=i.ngControl.valueChanges.pipe(ot(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),tn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),rd(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(ot(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel=Tr(()=>!!this._labelChild());_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(e){let i=this._control?this._control.ngControl:null;return i&&i[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let i=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,n=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),n&&e.push(n.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let i=this._iconPrefixContainer?.nativeElement,n=this._textPrefixContainer?.nativeElement,s=this._iconSuffixContainer?.nativeElement,o=this._textSuffixContainer?.nativeElement,l=i?.getBoundingClientRect().width??0,d=n?.getBoundingClientRect().width??0,h=s?.getBoundingClientRect().width??0,u=o?.getBoundingClientRect().width??0,m=this._dir.value==="rtl"?"-1":"1",f=`${l+d}px`,y=`calc(${m} * (${f} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${RL} translateX(${y})
    )`;let v=l+d+h+u;this._elementRef.nativeElement.style.setProperty("--mat-form-field-notch-max-width",`calc(100% - ${v}px)`)}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-form-field"]],contentQueries:function(i,n,s){if(i&1&&(gy(s,n._labelChild,ra,5),Ai(s,jl,5),Ai(s,ML,5),Ai(s,AL,5),Ai(s,ak,5),Ai(s,ek,5)),i&2){_y();let o;Ee(o=Se())&&(n._formFieldControl=o.first),Ee(o=Se())&&(n._prefixChildren=o),Ee(o=Se())&&(n._suffixChildren=o),Ee(o=Se())&&(n._errorChildren=o),Ee(o=Se())&&(n._hintChildren=o)}},viewQuery:function(i,n){if(i&1&&(Le(nL,5),Le(rL,5),Le(sL,5),Le(oL,5),Le(aL,5),Le(tk,5),Le(rk,5),Le(nk,5)),i&2){let s;Ee(s=Se())&&(n._textField=s.first),Ee(s=Se())&&(n._iconPrefixContainer=s.first),Ee(s=Se())&&(n._textPrefixContainer=s.first),Ee(s=Se())&&(n._iconSuffixContainer=s.first),Ee(s=Se())&&(n._textSuffixContainer=s.first),Ee(s=Se())&&(n._floatingLabel=s.first),Ee(s=Se())&&(n._notchedOutline=s.first),Ee(s=Se())&&(n._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,n){i&2&&ce("mat-mdc-form-field-label-always-float",n._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",n._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",n._hasIconSuffix)("mat-form-field-invalid",n._control.errorState)("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-form-field-no-animations",n._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",n.appearance=="fill")("mat-form-field-appearance-outline",n.appearance=="outline")("mat-form-field-hide-placeholder",n._hasFloatingLabel()&&!n._shouldLabelFloat())("mat-focused",n._control.focused)("mat-primary",n.color!=="accent"&&n.color!=="warn")("mat-accent",n.color==="accent")("mat-warn",n.color==="warn")("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[et([{provide:Gl,useExisting:r},{provide:ck,useExisting:r}])],ngContentSelectors:cL,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],["textSuffixContainer",""],["iconSuffixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,n){if(i&1){let s=ie();Bt(lL),X(0,uL,1,1,"ng-template",null,0,sn),w(2,"div",6,1),U("click",function(l){return H(s),W(n._control.onContainerClick(l))}),X(4,pL,1,0,"div",7),w(5,"div",8),X(6,gL,2,2,"div",9)(7,_L,3,0,"div",10)(8,bL,3,0,"div",11),w(9,"div",12),X(10,yL,1,1,null,13),Ke(11),E(),X(12,xL,3,0,"div",14)(13,wL,3,0,"div",15),E(),X(14,CL,1,0,"div",16),E(),w(15,"div",17),X(16,kL,2,1,"div",18)(17,SL,5,2,"div",19),E()}if(i&2){let s;A(2),ce("mdc-text-field--filled",!n._hasOutline())("mdc-text-field--outlined",n._hasOutline())("mdc-text-field--no-label",!n._hasFloatingLabel())("mdc-text-field--disabled",n._control.disabled)("mdc-text-field--invalid",n._control.errorState),A(2),gt(!n._hasOutline()&&!n._control.disabled?4:-1),A(2),gt(n._hasOutline()?6:-1),A(),gt(n._hasIconPrefix?7:-1),A(),gt(n._hasTextPrefix?8:-1),A(2),gt(!n._hasOutline()||n._forceDisplayInfixLabel()?10:-1),A(2),gt(n._hasTextSuffix?12:-1),A(),gt(n._hasIconSuffix?13:-1),A(),gt(n._hasOutline()?-1:14),A(),ce("mat-mdc-form-field-subscript-dynamic-size",n.subscriptSizing==="dynamic"),A(),gt((s=n._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[tk,rk,as,nk,ek],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-moz-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive::-webkit-input-placeholder{opacity:0}.mdc-text-field--disabled:not(.mdc-text-field--no-label) .mdc-text-field__input.mat-mdc-input-disabled-interactive:-ms-input-placeholder{opacity:0}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-sys-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-sys-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 4%, transparent))}.mdc-text-field--outlined{height:56px;overflow:visible;padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}@media(forced-colors: active){.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-sys-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-sys-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-sys-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-sys-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-sys-outline));border-width:var(--mdc-outlined-text-field-outline-width, 1px)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-sys-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-sys-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-sys-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-sys-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width, 2px)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:min(var(--mat-form-field-notch-max-width, 100%),100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-sys-corner-extra-small)))*2)}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none;--mat-form-field-notch-max-width: 100%}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height, 1px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-sys-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-sys-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-sys-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-sys-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height, 2px)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-sys-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-sys-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height, 56px);padding-top:var(--mat-form-field-filled-with-label-container-padding-top, 24px);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom, 8px)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding, 16px);padding-bottom:var(--mat-form-field-container-vertical-padding, 16px)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height, 56px)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height, 56px) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-sys-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-sys-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-sys-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-sys-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-sys-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity, 0)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color, var(--mat-sys-neutral10))}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color, color-mix(in srgb, var(--mat-sys-neutral10) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}@media(forced-colors: active){.mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}}@media(forced-colors: active){.mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}}@media(forced-colors: active){.mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-sys-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-sys-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-sys-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-sys-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-sys-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field-infix:has(textarea[cols]){width:auto}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[IL.transitionMessages]},changeDetection:0})}return r})(),Un=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye,Sd,Ye]})}return r})();var OL=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["ng-component"]],hostAttrs:["cdk-text-field-style-loader",""],decls:0,vars:0,template:function(i,n){},styles:["textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{padding:2px 0 !important;box-sizing:content-box !important;height:auto !important;overflow:hidden !important}textarea.cdk-textarea-autosize-measuring-firefox{padding:2px 0 !important;box-sizing:content-box !important;height:0 !important}@keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{animation:cdk-text-field-autofill-start 0s 1ms}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){animation:cdk-text-field-autofill-end 0s 1ms}"],encapsulation:2,changeDetection:0})}return r})(),hk=Hi({passive:!0}),uk=(()=>{class r{_platform=C(ht);_ngZone=C(ke);_styleLoader=C(ii);_monitoredElements=new Map;constructor(){}monitor(e){if(!this._platform.isBrowser)return V0;this._styleLoader.load(OL);let i=li(e),n=this._monitoredElements.get(i);if(n)return n.subject;let s=new ne,o="cdk-text-field-autofilled",l=d=>{d.animationName==="cdk-text-field-autofill-start"&&!i.classList.contains(o)?(i.classList.add(o),this._ngZone.run(()=>s.next({target:d.target,isAutofilled:!0}))):d.animationName==="cdk-text-field-autofill-end"&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:d.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",l,hk),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",l,hk)}}),s}stopMonitoring(e){let i=li(e),n=this._monitoredElements.get(i);n&&(n.unlisten(),n.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var pk=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({})}return r})();var FL=new te("MAT_INPUT_VALUE_ACCESSOR"),LL=["button","checkbox","file","hidden","image","radio","range","reset","submit"],NL=new te("MAT_INPUT_CONFIG"),vu=(()=>{class r{_elementRef=C(ve);_platform=C(ht);ngControl=C(Br,{optional:!0,self:!0});_autofillMonitor=C(uk);_ngZone=C(ke);_formField=C(Gl,{optional:!0});_renderer=C(xi);_uid=C(zt).getId("mat-input-");_previousNativeValue;_inputValueAccessor;_signalBasedValueAccessor;_previousPlaceholder;_errorStateTracker;_config=C(NL,{optional:!0});_cleanupIosKeyup;_cleanupWebkitWheel;_formFieldDescribedBy;_isServer;_isNativeSelect;_isTextarea;_isInFormField;focused=!1;stateChanges=new ne;controlType="mat-input";autofilled=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=Pr(e),this.focused&&(this.focused=!1,this.stateChanges.next())}_disabled=!1;get id(){return this._id}set id(e){this._id=e||this._uid}_id;placeholder;name;get required(){return this._required??this.ngControl?.control?.hasValidator($o.required)??!1}set required(e){this._required=Pr(e)}_required;get type(){return this._type}set type(e){let i=this._type;this._type=e||"text",this._validateType(),!this._isTextarea&&zm().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._type!==i&&this._ensureWheelDefaultBehavior()}_type="text";get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}userAriaDescribedBy;get value(){return this._signalBasedValueAccessor?this._signalBasedValueAccessor.value():this._inputValueAccessor.value}set value(e){e!==this.value&&(this._signalBasedValueAccessor?this._signalBasedValueAccessor.value.set(e):this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Pr(e)}_readonly=!1;disabledInteractive;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}_neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(e=>zm().has(e));constructor(){let e=C(al,{optional:!0}),i=C(ll,{optional:!0}),n=C(Vd),s=C(FL,{optional:!0,self:!0}),o=this._elementRef.nativeElement,l=o.nodeName.toLowerCase();s?Bs(s.value)?this._signalBasedValueAccessor=s:this._inputValueAccessor=s:this._inputValueAccessor=o,this._previousNativeValue=this.value,this.id=this.id,this._platform.IOS&&this._ngZone.runOutsideAngular(()=>{this._cleanupIosKeyup=this._renderer.listen(o,"keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Lo(n,this.ngControl,i,e,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=l==="select",this._isTextarea=l==="textarea",this._isInFormField=!!this._formField,this.disabledInteractive=this._config?.disabledInteractive||!1,this._isNativeSelect&&(this.controlType=o.multiple?"mat-native-select-multiple":"mat-native-select"),this._signalBasedValueAccessor&&ad(()=>{this._signalBasedValueAccessor.value(),this.stateChanges.next()})}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._cleanupIosKeyup?.(),this._cleanupWebkitWheel?.()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){if(e!==this.focused){if(!this._isNativeSelect&&e&&this.disabled&&this.disabledInteractive){let i=this._elementRef.nativeElement;i.type==="number"?(i.type="text",i.setSelectionRange(0,0),i.type="number"):i.setSelectionRange(0,0)}this.focused=e,this.stateChanges.next()}}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let i=this._elementRef.nativeElement;this._previousPlaceholder=e,e?i.setAttribute("placeholder",e):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){LL.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}else return this.focused&&!this.disabled||!this.empty}setDescribedByIds(e){let i=this._elementRef.nativeElement,n=i.getAttribute("aria-describedby"),s;if(n){let o=this._formFieldDescribedBy||e;s=e.concat(n.split(" ").filter(l=>l&&!o.includes(l)))}else s=e;this._formFieldDescribedBy=e,s.length?i.setAttribute("aria-describedby",s.join(" ")):i.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}_iOSKeyupListener=e=>{let i=e.target;!i.value&&i.selectionStart===0&&i.selectionEnd===0&&(i.setSelectionRange(1,1),i.setSelectionRange(0,0))};_webkitBlinkWheelListener=()=>{};_ensureWheelDefaultBehavior(){this._cleanupWebkitWheel?.(),this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._cleanupWebkitWheel=this._renderer.listen(this._elementRef.nativeElement,"wheel",this._webkitBlinkWheelListener))}_getReadonlyAttribute(){return this._isNativeSelect?null:this.readonly||this.disabled&&this.disabledInteractive?"true":null}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:21,hostBindings:function(i,n){i&1&&U("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),i&2&&(Fn("id",n.id)("disabled",n.disabled&&!n.disabledInteractive)("required",n.required),ye("name",n.name||null)("readonly",n._getReadonlyAttribute())("aria-disabled",n.disabled&&n.disabledInteractive?"true":null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required)("id",n.id),ce("mat-input-server",n._isServer)("mat-mdc-form-field-textarea-control",n._isInFormField&&n._isTextarea)("mat-mdc-form-field-input-control",n._isInFormField)("mat-mdc-input-disabled-interactive",n.disabledInteractive)("mdc-text-field__input",n._isInFormField)("mat-mdc-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly",disabledInteractive:[2,"disabledInteractive","disabledInteractive",ge]},exportAs:["matInput"],features:[et([{provide:jl,useExisting:r}]),at,Et]})}return r})(),sa=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye,Un,Un,pk,Ye]})}return r})();function BL(r,t){if(r&1&&re(0,"img",8),r&2){let e=T().$implicit;R("src",e.image,Ao)("alt",e.label)}}function VL(r,t){if(r&1&&(w(0,"span",9),F(1),E()),r&2){let e=T().$implicit;A(),Te(e.label)}}function zL(r,t){if(r&1){let e=ie();w(0,"button",5),U("click",function(){let n=H(e).$implicit,s=T();return W(s.rollFormula(n.formula))}),X(1,BL,1,2,"img",6)(2,VL,2,1,"span",7),E()}if(r&2){let e=t.$implicit;ye("title",e.label+" ("+e.formula+")"),A(),R("ngIf",e.image),A(),R("ngIf",!e.image)}}function HL(r,t){if(r&1){let e=ie();w(0,"div",10)(1,"input",11),Fe("ngModelChange",function(n){H(e);let s=T();return Oe(s.customDiceInput,n)||(s.customDiceInput=n),W(n)}),U("keydown.enter",function(){H(e);let n=T();return W(n.rollCustomInput())}),E(),w(2,"button",12),U("click",function(){H(e);let n=T();return W(n.rollCustomInput())}),w(3,"mat-icon"),F(4,"casino"),E()()()}if(r&2){let e=T();A(),Re("ngModel",e.customDiceInput)}}function WL(r,t){if(r&1&&(w(0,"div",13)(1,"p",14),F(2),E()()),r&2){let e=T();A(2),Te(e.finalResult)}}var yu=class r{settings;finalResult="";customDiceInput="";standardDice=[{label:"d4",formula:"1d4",image:"/dm-tool/images/d4.png",settingKey:"enableD4"},{label:"d6",formula:"1d6",image:"/dm-tool/images/d6.png",settingKey:"enableD6"},{label:"d8",formula:"1d8",image:"/dm-tool/images/d8.png",settingKey:"enableD8"},{label:"d10",formula:"1d10",image:"/dm-tool/images/d10.png",settingKey:"enableD10"},{label:"d12",formula:"1d12",image:"/dm-tool/images/d12.png",settingKey:"enableD12"},{label:"d20",formula:"1d20",image:"/dm-tool/images/d20.png",settingKey:"enableD20"},{label:"d100",formula:"1d100",image:"/dm-tool/images/d100.png",settingKey:"enableD100"}];ngOnInit(){this.standardDice.forEach(t=>{t.settingKey&&this.settings[t.settingKey]===void 0&&(this.settings[t.settingKey]=!0)}),this.settings.showCustomDiceInput===void 0&&(this.settings.showCustomDiceInput=!0)}get availableButtons(){let t=[];return this.standardDice.forEach(e=>{e.settingKey&&this.settings[e.settingKey]&&t.push(e)}),Array.isArray(this.settings.customButtons)&&this.settings.customButtons.forEach(e=>{t.push({label:e.key,formula:e.value})}),t}rollFormula(t){let e=t.trim(),i=/^(\d+)?[wd](\d+)([+-]\d+)?$/i,n=e.match(i);if(!n){this.finalResult=`Invalid notation: ${t}`;return}let s=n[1]?parseInt(n[1],10):1,o=parseInt(n[2],10),l=n[3]?parseInt(n[3],10):0,d=[];for(let f=0;f<s;f++)d.push(Math.floor(Math.random()*o)+1);let u=d.reduce((f,_)=>f+_,0)+l,m=`Roll: ${t}
[${d.join(", ")}]`;l!==0&&(m+=` ${l>0?"+":""}${l}`),m+=` = ${u}`,this.finalResult=m}rollCustomInput(){this.customDiceInput&&this.rollFormula(this.customDiceInput)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=oe({type:r,selectors:[["app-dice-tool"]],inputs:{settings:"settings"},decls:5,vars:3,consts:[[1,"dice-container"],[1,"dice-grid"],["mat-button","","class","dice-button",3,"click",4,"ngFor","ngForOf"],["class","custom-dice-cell",4,"ngIf"],["class","result-container",4,"ngIf"],["mat-button","",1,"dice-button",3,"click"],["class","dice-image",3,"src","alt",4,"ngIf"],["class","dice-text",4,"ngIf"],[1,"dice-image",3,"src","alt"],[1,"dice-text"],[1,"custom-dice-cell"],["matInput","","placeholder","3d6+2",1,"custom-dice-input",3,"ngModelChange","keydown.enter","ngModel"],["mat-icon-button","",1,"custom-dice-btn",3,"click"],[1,"result-container"],[1,"result-text"]],template:function(e,i){e&1&&(w(0,"div",0)(1,"div",1),X(2,zL,3,3,"button",2)(3,HL,5,1,"div",3),E(),X(4,WL,3,1,"div",4),E()),e&2&&(A(2),R("ngForOf",i.availableButtons),A(),R("ngIf",i.settings.showCustomDiceInput),A(),R("ngIf",i.finalResult))},dependencies:[lt,Lt,Vt,wt,gi,Ei,jt,Xt,si,Kt,Un,sa,vu,St,Ht],styles:[".dice-container[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;box-sizing:border-box;color:var(--text-primary)}.dice-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,52px);gap:4px;justify-content:center;padding:4px;box-sizing:border-box}.dice-button[_ngcontent-%COMP%]{padding:1px;min-width:unset;height:52px;width:52px;line-height:1;border:var(--glass-border);border-radius:4px;display:flex;align-items:center;justify-content:center;background:#ffffff0d;transition:all .2s;overflow:hidden}.dice-button[_ngcontent-%COMP%]:hover{background:#ffffff26;border-color:var(--accent-color);box-shadow:0 0 10px #40c4ff33}.dice-image[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:contain;filter:drop-shadow(0 2px 2px rgba(0,0,0,.5))}.dice-text[_ngcontent-%COMP%]{font-size:11px;font-weight:700;text-align:center;word-break:break-word;line-height:1.1;padding:2px;color:var(--text-primary)}.custom-dice-cell[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px;padding:2px;grid-column:span 2;height:52px;background:var(--input-bg);border:var(--glass-border);border-radius:4px}.custom-dice-input[_ngcontent-%COMP%]{width:50px;padding:4px;font-size:.9em;height:24px;background:transparent;border:none;color:var(--text-primary);text-align:center;flex:1}.custom-dice-input[_ngcontent-%COMP%]:focus{outline:none}.custom-dice-btn[_ngcontent-%COMP%]{width:32px;height:32px;min-width:32px;padding:0;color:var(--accent-color);display:flex;align-items:center;justify-content:center}.custom-dice-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.custom-dice-btn[_ngcontent-%COMP%]:hover{background:#40c4ff1a}.result-container[_ngcontent-%COMP%]{padding:12px;background:var(--panel-bg);border:var(--glass-border);border-radius:4px;margin-top:auto;text-align:center;-webkit-backdrop-filter:var(--glass-backdrop);backdrop-filter:var(--glass-backdrop)}.result-text[_ngcontent-%COMP%]{font-size:.9em;margin:0;font-weight:500;color:var(--text-primary);text-shadow:0 2px 4px rgba(0,0,0,.5);white-space:pre-wrap}"]})};var xu=class r{dbName="dm-tool-audio-db";storeName="audio-files";dbVersion=1;db=null;init(){return q(this,null,function*(){if(!this.db)return new Promise((t,e)=>{let i=indexedDB.open(this.dbName,this.dbVersion);i.onerror=()=>{console.error("Failed to open IndexedDB:",i.error),e(i.error)},i.onsuccess=()=>{this.db=i.result,t()},i.onupgradeneeded=n=>{let s=n.target.result;if(!s.objectStoreNames.contains(this.storeName)){let o=s.createObjectStore(this.storeName,{keyPath:"id"});o.createIndex("widgetId","widgetId",{unique:!1}),o.createIndex("mappingId","mappingId",{unique:!1})}}})})}saveAudioFiles(t,e,i){return q(this,null,function*(){if(yield this.init(),!!this.db)return new Promise((n,s)=>{let o=this.db.transaction([this.storeName],"readwrite"),l=o.objectStore(this.storeName),h=l.index("mappingId").openCursor(IDBKeyRange.only(e));h.onsuccess=u=>{let m=u.target.result;m&&(l.delete(m.primaryKey),m.continue())},o.oncomplete=()=>{let u=this.db.transaction([this.storeName],"readwrite"),m=u.objectStore(this.storeName);i.forEach((f,_)=>{let y={id:`${e}-${_}`,mappingId:e,widgetId:t,fileName:f.fileName,fileDataUrl:f.fileDataUrl};m.put(y)}),u.oncomplete=()=>n(),u.onerror=()=>s(u.error)},o.onerror=()=>s(o.error)})})}getAudioFiles(t){return q(this,null,function*(){return yield this.init(),this.db?new Promise((e,i)=>{let l=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("mappingId").getAll(IDBKeyRange.only(t));l.onsuccess=()=>{let d=l.result.map(h=>({fileName:h.fileName,fileDataUrl:h.fileDataUrl}));e(d)},l.onerror=()=>i(l.error)}):[]})}getAudioFilesForWidget(t){return q(this,null,function*(){return yield this.init(),this.db?new Promise((e,i)=>{let l=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).index("widgetId").getAll(IDBKeyRange.only(t));l.onsuccess=()=>{let d=new Map;l.result.forEach(h=>{d.has(h.mappingId)||d.set(h.mappingId,[]),d.get(h.mappingId).push({fileName:h.fileName,fileDataUrl:h.fileDataUrl})}),e(d)},l.onerror=()=>i(l.error)}):new Map})}deleteAudioFilesForWidget(t){return q(this,null,function*(){if(yield this.init(),!!this.db)return new Promise((e,i)=>{let n=this.db.transaction([this.storeName],"readwrite"),s=n.objectStore(this.storeName),l=s.index("widgetId").openCursor(IDBKeyRange.only(t));l.onsuccess=d=>{let h=d.target.result;h&&(s.delete(h.primaryKey),h.continue())},n.oncomplete=()=>e(),n.onerror=()=>i(n.error)})})}deleteAudioFilesForMapping(t){return q(this,null,function*(){if(yield this.init(),!!this.db)return new Promise((e,i)=>{let n=this.db.transaction([this.storeName],"readwrite"),s=n.objectStore(this.storeName),l=s.index("mappingId").openCursor(IDBKeyRange.only(t));l.onsuccess=d=>{let h=d.target.result;h&&(s.delete(h.primaryKey),h.continue())},n.oncomplete=()=>e(),n.onerror=()=>i(n.error)})})}static \u0275fac=function(e){return new(e||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})};var wu=class r{playbackStates=new Map;progressIntervals=new Map;masterStates=new Map;stateChange$=new is(void 0);fadeDuration=.5;get stateChanges(){return this.stateChange$.asObservable()}getKey(t,e){return`${t}-${e}`}getMasterState(t){return this.masterStates.has(t)||this.masterStates.set(t,{volume:100,muted:!1}),this.masterStates.get(t)}setMasterVolume(t,e){let i=this.getMasterState(t);i.volume=e,i.muted=e===0,this.updateAllVolumesForWidget(t),this.notifyChange()}toggleMasterMute(t){let e=this.getMasterState(t);e.muted=!e.muted,this.updateAllVolumesForWidget(t),this.notifyChange()}setFadeDuration(t){this.fadeDuration=t}getPlaybackState(t,e){return this.playbackStates.get(this.getKey(t,e))}getAllStatesForWidget(t){let e=new Map;return this.playbackStates.forEach((i,n)=>{i.widgetId===t&&e.set(i.mappingId,i)}),e}isPlaying(t,e){return this.playbackStates.get(this.getKey(t,e))?.isPlaying??!1}isPaused(t,e){return this.playbackStates.get(this.getKey(t,e))?.isPaused??!1}getProgress(t,e){let i=this.playbackStates.get(this.getKey(t,e));return!i||!i.duration?0:i.elapsed/i.duration*100}getElapsed(t,e){return this.playbackStates.get(this.getKey(t,e))?.elapsed??0}getDuration(t,e){return this.playbackStates.get(this.getKey(t,e))?.duration??0}play(t,e,i,n,s,o,l){let d=i?.filter(f=>f.fileDataUrl)||[];if(d.length===0){console.warn("No valid audio files to play (missing fileDataUrl)");return}l||this.stopAllForWidget(t);let h=this.getKey(t,e);this.playbackStates.get(h)&&this.cleanupPlayback(h);let m=this.setupPlaylist(t,e,d,n,s,o);m.isPlaying=!0,m.isPaused=!1,this.playbackStates.set(h,m),this.playNext(m)}pause(t,e){let i=this.getKey(t,e),n=this.playbackStates.get(i);!n||!n.audio||(this.fadeDuration>0?this.fadeAudio(n,0,()=>{n.audio.pause(),n.isPlaying=!1,n.isPaused=!0,this.stopProgressTracking(i),this.notifyChange()}):(n.audio.pause(),n.isPlaying=!1,n.isPaused=!0,this.stopProgressTracking(i),this.notifyChange()))}resume(t,e){let i=this.getKey(t,e),n=this.playbackStates.get(i);!n||!n.audio||(this.applyVolume(n),n.audio.play(),n.isPlaying=!0,n.isPaused=!1,this.startProgressTracking(i,n),this.notifyChange())}stop(t,e){let i=this.getKey(t,e);this.cleanupPlayback(i),this.notifyChange()}stopAllForWidget(t){let e=[];this.playbackStates.forEach((i,n)=>{i.widgetId===t&&e.push(n)}),e.forEach(i=>this.cleanupPlayback(i)),this.notifyChange()}stopAll(){this.playbackStates.forEach((t,e)=>{this.cleanupPlayback(e)}),this.playbackStates.clear(),this.notifyChange()}setTrackVolume(t,e,i){let n=this.getKey(t,e),s=this.playbackStates.get(n);s&&(s.volume=i,this.applyVolume(s),this.notifyChange())}toggleLoop(t,e){let i=this.getKey(t,e),n=this.playbackStates.get(i);n&&(n.loop=!n.loop,n.audio&&(n.audio.loop=n.loop),this.notifyChange())}toggleShuffle(t,e){let i=this.getKey(t,e),n=this.playbackStates.get(i);n&&(n.randomOrder=!n.randomOrder,n.randomOrder?n.playOrder=this.getShuffledPlayOrder(n.playlist.length):n.playOrder=Array.from({length:n.playlist.length},(s,o)=>o),this.notifyChange())}next(t,e){let i=this.getKey(t,e),n=this.playbackStates.get(i);!n||n.playlist.length<=1||(n.audio&&(n.audio.pause(),n.audio.currentTime=0),n.currentIndex++,n.currentIndex>=n.playlist.length&&(n.currentIndex=0,n.randomOrder&&(n.playOrder=this.getShuffledPlayOrder(n.playlist.length))),(n.isPlaying||n.isPaused)&&this.playNext(n))}previous(t,e){let i=this.getKey(t,e),n=this.playbackStates.get(i);if(!(!n||n.playlist.length<=1)){if(n.audio&&n.audio.currentTime>3){n.audio.currentTime=0,n.elapsed=0,this.notifyChange();return}n.audio&&(n.audio.pause(),n.audio.currentTime=0),n.currentIndex--,n.currentIndex<0&&(n.currentIndex=n.playlist.length-1),(n.isPlaying||n.isPaused)&&this.playNext(n)}}updateAllVolumesForWidget(t){this.playbackStates.forEach(e=>{e.widgetId===t&&e.audio&&this.applyVolume(e)})}applyVolume(t){if(!t.audio)return;let e=this.getMasterState(t.widgetId),i=t.volume/100,n=e.muted?0:e.volume/100;t.audio.volume=i*n}setupPlaylist(t,e,i,n,s,o){let l=[...i],d=o?this.getShuffledPlayOrder(l.length):Array.from({length:l.length},(h,u)=>u);return{widgetId:t,mappingId:e,currentIndex:0,audio:null,isPlaying:!1,isPaused:!1,playlist:l,playOrder:d,progress:0,duration:0,elapsed:0,volume:n,loop:s,randomOrder:o}}getShuffledPlayOrder(t){let e=Array.from({length:t},(i,n)=>n);for(let i=e.length-1;i>0;i--){let n=Math.floor(Math.random()*(i+1));[e[i],e[n]]=[e[n],e[i]]}return e}playNext(t){if(!t.playlist.length)return;let e=this.getKey(t.widgetId,t.mappingId),i=t.playlist[t.playOrder[t.currentIndex]],n=new Audio(i.fileDataUrl);n.loop=t.loop;let s=this.getMasterState(t.widgetId),o=t.volume/100,l=s.muted?0:s.volume/100;this.fadeDuration>0?n.volume=0:n.volume=o*l,n.addEventListener("loadedmetadata",()=>{t.duration=n.duration||0,t.elapsed=0,this.notifyChange()}),n.addEventListener("ended",()=>{t.currentIndex++,t.currentIndex>=t.playlist.length?t.loop?(t.currentIndex=0,t.randomOrder&&(t.playOrder=this.getShuffledPlayOrder(t.playlist.length)),this.playNext(t)):(t.isPlaying=!1,t.isPaused=!1,t.elapsed=0,this.cleanupPlayback(e),this.notifyChange()):this.playNext(t)}),n.play(),t.audio=n,t.isPlaying=!0,t.isPaused=!1,this.fadeDuration>0&&this.fadeAudio(t,o*l),this.startProgressTracking(e,t),this.notifyChange()}fadeAudio(t,e,i){if(t.fadeTimeout&&clearTimeout(t.fadeTimeout),!t.audio||this.fadeDuration<=0){t.audio&&(t.audio.volume=e),i?.();return}let n=t.audio.volume,s=e-n,o=15,l=this.fadeDuration*1e3/o,d=s/o,h=0,u=()=>{h++,t.audio&&(t.audio.volume=n+d*h),h<o?t.fadeTimeout=window.setTimeout(u,l):(t.audio&&(t.audio.volume=e),i?.())};u()}startProgressTracking(t,e){this.stopProgressTracking(t);let i=window.setInterval(()=>{e.audio&&!e.audio.paused&&e.isPlaying&&(e.elapsed=e.audio.currentTime,this.notifyChange())},100);this.progressIntervals.set(t,i)}stopProgressTracking(t){let e=this.progressIntervals.get(t);e&&(clearInterval(e),this.progressIntervals.delete(t))}cleanupPlayback(t){let e=this.playbackStates.get(t);e&&(e.fadeTimeout&&clearTimeout(e.fadeTimeout),this.stopProgressTracking(t),e.audio&&(e.audio.pause(),e.audio.currentTime=0,e.audio=null),e.isPlaying=!1,e.isPaused=!1,e.elapsed=0,this.playbackStates.delete(t))}notifyChange(){this.stateChange$.next()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})};function GL(r,t){if(r&1&&(w(0,"div",23)(1,"div",24),re(2,"div",25),E()()),r&2){let e=T().$implicit,i=T();A(2),fi("height",i.getProgress(e),"%")}}function $L(r,t){if(r&1){let e=ie();w(0,"div",13)(1,"div",14),F(2),E(),w(3,"div",3),U("mousedown",function(n){let s=H(e).$implicit,o=T();return W(o.startTrackVolumeDrag(n,s))})("touchstart",function(n){let s=H(e).$implicit,o=T();return W(o.startTrackVolumeDrag(n,s))}),re(4,"div",15),E(),w(5,"div",5)(6,"button",16),U("click",function(){let n=H(e).$implicit,s=T();return W(s.togglePlay(n))}),w(7,"mat-icon"),F(8),E()(),w(9,"button",17),U("click",function(){let n=H(e).$implicit,s=T();return W(s.toggleLoop(n))}),w(10,"mat-icon"),F(11,"repeat"),E()(),w(12,"button",18),U("click",function(){let n=H(e).$implicit,s=T();return W(s.stopTrack(n))}),w(13,"mat-icon"),F(14,"stop_circle"),E()(),w(15,"button",19),U("click",function(){let n=H(e).$implicit,s=T();return W(s.toggleShuffle(n))}),w(16,"mat-icon"),F(17,"shuffle"),E()(),w(18,"button",20),U("click",function(){let n=H(e).$implicit,s=T();return W(s.previousTrack(n))}),w(19,"mat-icon"),F(20,"skip_previous"),E()(),w(21,"button",21),U("click",function(){let n=H(e).$implicit,s=T();return W(s.nextTrack(n))}),w(22,"mat-icon"),F(23,"skip_next"),E()()(),w(24,"div",8),F(25),E(),X(26,GL,3,2,"div",22),E()}if(r&2){let e=t.$implicit,i=T();ce("playing",i.isPlaying(e))("paused",i.isPaused(e)),A(),R("matTooltip",e.key),A(),Te(e.key),A(),ce("disabled",!e.files||e.files.length===0),A(),fi("height",e.volume,"%"),A(2),ce("active-play",i.isPlaying(e))("active-pause",i.isPaused(e)),km("matTooltip",i.isPlaying(e)?"Pause":"Play"),R("disabled",!e.files||e.files.length===0),A(2),Te(i.isPlaying(e)?"pause":"play_arrow"),A(),ce("active-loop",e.loop),A(3),R("disabled",!i.isPlaying(e)&&!i.isPaused(e)),A(3),ce("active-shuffle",e.randomOrder),R("disabled",!e.files||e.files.length<=1),A(3),R("disabled",!e.files||e.files.length<=1),A(3),R("disabled",!e.files||e.files.length<=1),A(4),Ze("",i.getTrackVolume(e),"%"),A(),R("ngIf",i.isPlaying(e)||i.isPaused(e))}}function qL(r,t){r&1&&(w(0,"div",26)(1,"mat-icon"),F(2,"settings"),E(),w(3,"span"),F(4,"No Tracks"),E()())}var Cu=class r{constructor(t,e,i,n){this.cdr=t;this.ngZone=e;this.audioStorage=i;this.playbackService=n}settings={};widgetId="";settingsChange=new fe;mappings=[];audioLoaded=!1;masterVolume=100;masterMuted=!1;fadeDuration=.5;isDragging=!1;dragMapping=null;dragType="track";dragElement=null;stateSubscription=null;ngOnInit(){return q(this,null,function*(){if(this.settings||(this.settings={}),Array.isArray(this.settings.mappings)||(this.settings.mappings=[]),this.settings.mappings=this.normalizeMappings(this.settings.mappings),this.mappings=this.settings.mappings,this.masterVolume=this.settings.masterVolume??100,this.masterMuted=this.settings.masterMuted??!1,this.fadeDuration=this.settings.fadeDuration??.5,this.widgetId){let t=this.playbackService.getMasterState(this.widgetId);t.volume===100&&!t.muted?(this.playbackService.setMasterVolume(this.widgetId,this.masterVolume),this.masterMuted&&this.playbackService.toggleMasterMute(this.widgetId)):(this.masterVolume=t.volume,this.masterMuted=t.muted),this.playbackService.setFadeDuration(this.fadeDuration)}this.stateSubscription=this.playbackService.stateChanges.subscribe(()=>{this.cdr.markForCheck()}),yield this.loadAudioFromIndexedDB()})}loadAudioFromIndexedDB(){return q(this,null,function*(){if(!(!this.widgetId||this.audioLoaded))try{let t=yield this.audioStorage.getAudioFilesForWidget(this.widgetId);for(let e of this.mappings){let i=this.getMappingId(e),n=t.get(i);n&&n.length>0&&(e.files=n.map(s=>({fileName:s.fileName,fileDataUrl:s.fileDataUrl})))}this.audioLoaded=!0,this.cdr.markForCheck()}catch(t){console.error("Error loading audio files from IndexedDB:",t)}})}saveAudioToIndexedDB(t){return q(this,null,function*(){if(!this.widgetId)return;let e=this.getMappingId(t);try{if(t.files&&t.files.length>0){let i=t.files.filter(n=>n.fileDataUrl);i.length>0&&(yield this.audioStorage.saveAudioFiles(this.widgetId,e,i))}else yield this.audioStorage.deleteAudioFilesForMapping(e)}catch(i){console.error("Error saving audio files to IndexedDB:",i)}})}ngOnChanges(t){if(t.settings&&this.settings){Array.isArray(this.settings.mappings)||(this.settings.mappings=[]);let e=this.settings.mappings.some(i=>!i.id);this.settings.mappings=this.normalizeMappings(this.settings.mappings),this.mappings=this.settings.mappings,this.masterVolume=this.settings.masterVolume??100,this.masterMuted=this.settings.masterMuted??!1,this.fadeDuration=this.settings.fadeDuration??.5,this.saveAllAudioToIndexedDB(),e&&setTimeout(()=>this.settingsChange.emit(),0)}}saveAllAudioToIndexedDB(){return q(this,null,function*(){if(this.widgetId)for(let t of this.mappings)t.files?.some(e=>e.fileDataUrl)&&(yield this.saveAudioToIndexedDB(t))})}normalizeMappings(t){return t.map(e=>Ue(J({},e),{id:e.id||this.generateUniqueId(),volume:e.volume??100,loop:e.loop??!1,randomOrder:e.randomOrder??!1}))}generateUniqueId(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}getMappingId(t){return t.id||(t.id=this.generateUniqueId()),t.id}isPlaying(t){return this.widgetId?this.playbackService.isPlaying(this.widgetId,this.getMappingId(t)):!1}isPaused(t){return this.widgetId?this.playbackService.isPaused(this.widgetId,this.getMappingId(t)):!1}getProgress(t){return this.widgetId?this.playbackService.getProgress(this.widgetId,this.getMappingId(t)):0}getTimeDisplay(t){if(!this.widgetId)return"--:--";let e=this.playbackService.getElapsed(this.widgetId,this.getMappingId(t)),i=this.playbackService.getDuration(this.widgetId,this.getMappingId(t)),n=s=>{let o=Math.floor(s/60),l=Math.floor(s%60);return`${o}:${l.toString().padStart(2,"0")}`};return`${n(e)}/${n(i)}`}getTrackVolume(t){return t.volume??100}startMasterVolumeDrag(t){t.preventDefault(),this.isDragging=!0,this.dragType="master",this.dragElement=t.target.closest(".fader-well"),this.updateVolumeFromEvent(t),document.addEventListener("mousemove",this.onVolumeDrag),document.addEventListener("mouseup",this.onVolumeDragEnd),document.addEventListener("touchmove",this.onVolumeDrag,{passive:!1}),document.addEventListener("touchend",this.onVolumeDragEnd)}startTrackVolumeDrag(t,e){!e.files||e.files.length===0||(t.preventDefault(),this.isDragging=!0,this.dragType="track",this.dragMapping=e,this.dragElement=t.target.closest(".fader-well"),this.updateVolumeFromEvent(t),document.addEventListener("mousemove",this.onVolumeDrag),document.addEventListener("mouseup",this.onVolumeDragEnd),document.addEventListener("touchmove",this.onVolumeDrag,{passive:!1}),document.addEventListener("touchend",this.onVolumeDragEnd))}onVolumeDrag=t=>{this.isDragging&&(t.preventDefault(),this.ngZone.run(()=>{this.updateVolumeFromEvent(t)}))};onVolumeDragEnd=()=>{document.removeEventListener("mousemove",this.onVolumeDrag),document.removeEventListener("mouseup",this.onVolumeDragEnd),document.removeEventListener("touchmove",this.onVolumeDrag),document.removeEventListener("touchend",this.onVolumeDragEnd),this.ngZone.run(()=>{this.isDragging=!1,this.dragMapping=null,this.dragElement=null,this.saveSettings()})};updateVolumeFromEvent(t){if(!this.dragElement)return;let e=this.dragElement.getBoundingClientRect(),i="touches"in t&&t.touches.length>0?t.touches[0].clientY:t.clientY,n=e.bottom-i,s=Math.max(0,Math.min(100,n/e.height*100));this.dragType==="master"?(this.masterVolume=Math.round(s),this.masterMuted=this.masterVolume===0,this.widgetId&&this.playbackService.setMasterVolume(this.widgetId,this.masterVolume)):this.dragMapping&&(this.dragMapping.volume=Math.round(s),this.widgetId&&this.playbackService.setTrackVolume(this.widgetId,this.getMappingId(this.dragMapping),this.dragMapping.volume)),this.cdr.detectChanges()}onMasterVolumeChange(){this.masterMuted=this.masterVolume===0,this.widgetId&&this.playbackService.setMasterVolume(this.widgetId,this.masterVolume),this.saveSettings()}toggleMasterMute(){this.masterMuted=!this.masterMuted,this.masterMuted?(this.savedMasterVolume=this.masterVolume,this.masterVolume=0):this.masterVolume=this.savedMasterVolume??100,this.widgetId&&this.playbackService.setMasterVolume(this.widgetId,this.masterVolume),this.saveSettings()}savedMasterVolume=100;onTrackVolumeChange(t){this.widgetId&&this.playbackService.setTrackVolume(this.widgetId,this.getMappingId(t),t.volume??100),this.saveSettings()}toggleLoop(t){t.loop=!t.loop,this.widgetId&&this.playbackService.toggleLoop(this.widgetId,this.getMappingId(t)),this.saveSettings()}toggleShuffle(t){t.randomOrder=!t.randomOrder,this.widgetId&&this.playbackService.toggleShuffle(this.widgetId,this.getMappingId(t)),this.saveSettings()}nextTrack(t){this.widgetId&&this.playbackService.next(this.widgetId,this.getMappingId(t))}previousTrack(t){this.widgetId&&this.playbackService.previous(this.widgetId,this.getMappingId(t))}togglePlay(t){this.widgetId&&(this.isPaused(t)?this.playbackService.resume(this.widgetId,this.getMappingId(t)):this.isPlaying(t)?this.playbackService.pause(this.widgetId,this.getMappingId(t)):this.playTrack(t))}stopTrack(t){this.widgetId&&this.playbackService.stop(this.widgetId,this.getMappingId(t))}playTrack(t){!t.files||t.files.length===0||!this.widgetId||this.playbackService.play(this.widgetId,this.getMappingId(t),t.files,t.volume??100,t.loop??!1,t.randomOrder??!1,this.settings?.allowMultiple??!1)}stopAllSounds(){this.widgetId&&this.playbackService.stopAllForWidget(this.widgetId)}saveSettings(){this.settings.mappings=this.mappings,this.settings.masterVolume=this.masterVolume,this.settings.masterMuted=this.masterMuted,this.settings.fadeDuration=this.fadeDuration,this.settingsChange.emit()}ngOnDestroy(){this.stateSubscription&&this.stateSubscription.unsubscribe()}static \u0275fac=function(e){return new(e||r)(we($e),we(ke),we(xu),we(wu))};static \u0275cmp=oe({type:r,selectors:[["app-music-widget"]],inputs:{settings:"settings",widgetId:"widgetId"},outputs:{settingsChange:"settingsChange"},features:[Et],decls:19,vars:10,consts:[[1,"music-widget"],[1,"master-strip"],[1,"channel-label"],[1,"fader-well",3,"mousedown","touchstart"],[1,"volume-fill","master-fill"],[1,"channel-actions"],["mat-icon-button","",1,"action-btn",3,"click","color","matTooltip"],["mat-icon-button","","matTooltip","Stop All",1,"action-btn",3,"click"],[1,"channel-value"],[1,"divider"],[1,"channels-container"],["class","channel-strip",3,"playing","paused",4,"ngFor","ngForOf"],["class","empty-channels",4,"ngIf"],[1,"channel-strip"],[1,"channel-label",3,"matTooltip"],[1,"volume-fill"],["mat-icon-button","",1,"action-btn","play-btn",3,"click","disabled","matTooltip"],["mat-icon-button","","matTooltip","Loop",1,"action-btn","loop-btn",3,"click"],["mat-icon-button","","matTooltip","Stop",1,"action-btn",3,"click","disabled"],["mat-icon-button","","matTooltip","Shuffle",1,"action-btn","shuffle-btn",3,"click","disabled"],["mat-icon-button","","matTooltip","Previous",1,"action-btn",3,"click","disabled"],["mat-icon-button","","matTooltip","Next",1,"action-btn",3,"click","disabled"],["class","mini-progress-well",4,"ngIf"],[1,"mini-progress-well"],[1,"mini-progress-bar"],[1,"mini-progress-fill"],[1,"empty-channels"]],template:function(e,i){e&1&&(w(0,"div",0)(1,"div",1)(2,"div",2),F(3,"MASTER"),E(),w(4,"div",3),U("mousedown",function(s){return i.startMasterVolumeDrag(s)})("touchstart",function(s){return i.startMasterVolumeDrag(s)}),re(5,"div",4),E(),w(6,"div",5)(7,"button",6),U("click",function(){return i.toggleMasterMute()}),w(8,"mat-icon"),F(9),E()(),w(10,"button",7),U("click",function(){return i.stopAllSounds()}),w(11,"mat-icon"),F(12,"stop"),E()()(),w(13,"div",8),F(14),E()(),re(15,"div",9),w(16,"div",10),X(17,$L,27,27,"div",11)(18,qL,5,0,"div",12),E()()),e&2&&(A(5),fi("height",i.masterVolume,"%"),A(2),ce("active",i.masterMuted),km("matTooltip",i.masterMuted?"Unmute":"Mute"),R("color",i.masterMuted?"warn":"primary"),A(2),Te(i.masterMuted?"volume_off":"volume_up"),A(5),Ze("",i.masterVolume,"%"),A(3),R("ngForOf",i.mappings),A(),R("ngIf",!i.mappings||i.mappings.length===0))},dependencies:[lt,Lt,Vt,jt,St,Ht,wt,Ei,Zd,Kd],styles:[".music-widget[_ngcontent-%COMP%]{display:flex;background:var(--panel-bg);-webkit-backdrop-filter:var(--glass-backdrop);backdrop-filter:var(--glass-backdrop);border:var(--glass-border);border-radius:4px;padding:6px;box-sizing:border-box;width:100%;height:100%;overflow:hidden;box-shadow:inset 0 0 20px #00000080}.divider[_ngcontent-%COMP%]{width:1px;background:#ffffff1a;margin:0 8px;align-self:stretch;flex-shrink:0}.master-strip[_ngcontent-%COMP%], .channel-strip[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:50px;min-width:50px;flex-shrink:0;background:var(--header-bg);border:1px solid rgba(255,255,255,.1);border-radius:4px;padding:4px 2px;box-sizing:border-box;box-shadow:0 2px 5px #0003;position:relative;transition:all .2s ease}.channel-strip.playing[_ngcontent-%COMP%]{background:#64ffda0d;border-color:var(--accent-color);box-shadow:0 0 10px var(--accent-hover)}.channel-strip.paused[_ngcontent-%COMP%]{background:#ffffff05;border-color:#ffffff4d}.channel-label[_ngcontent-%COMP%]{font-size:9px;font-weight:700;color:var(--text-secondary);text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-transform:uppercase;margin-bottom:4px;padding:0 2px}.master-strip[_ngcontent-%COMP%]   .channel-label[_ngcontent-%COMP%]{color:var(--accent-color)}.fader-well[_ngcontent-%COMP%]{flex:1;min-height:60px;background:#0006;margin:2px;border-radius:16px;position:relative;border:1px solid rgba(255,255,255,.08);box-shadow:inset 0 2px 8px #0009;overflow:hidden;cursor:ns-resize;-webkit-user-select:none;user-select:none;touch-action:none}.fader-well.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.5}.volume-fill[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,#ffffff26,#ffffff40);border-radius:0 0 15px 15px;transition:height .05s ease-out;pointer-events:none}.master-fill[_ngcontent-%COMP%]{background:linear-gradient(to top,#64ffda33,#64ffda66)}.fader-well[_ngcontent-%COMP%]:active   .volume-fill[_ngcontent-%COMP%]{transition:none}.channel-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px;margin-top:4px}.action-btn[_ngcontent-%COMP%]{width:24px!important;height:24px!important;line-height:24px!important;padding:0!important;background:var(--header-bg)!important;border:1px solid rgba(255,255,255,.1)!important;border-radius:4px!important;transition:all .2s ease!important}.action-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;color:var(--text-secondary)}.action-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:var(--item-hover)!important;border-color:#ffffff4d!important}.action-btn[_ngcontent-%COMP%]:disabled{opacity:.3!important;cursor:not-allowed!important}.action-btn[_ngcontent-%COMP%]:disabled   mat-icon[_ngcontent-%COMP%]{color:var(--text-muted)!important}.active[_ngcontent-%COMP%]{background:#f4433633!important;border-color:var(--danger-color)!important}.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--danger-color)!important}.active-play[_ngcontent-%COMP%]{background:#64ffda1a!important;border-color:var(--accent-color)!important;box-shadow:0 0 8px var(--accent-hover)}.active-play[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--accent-color)!important}.active-pause[_ngcontent-%COMP%]{background:#ff98001a!important;border-color:var(--warning-color)!important}.active-pause[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--warning-color)!important}.active-loop[_ngcontent-%COMP%]{background:#2196f31a!important;border-color:var(--info-color)!important}.active-loop[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--info-color)!important}.active-shuffle[_ngcontent-%COMP%]{background:#9c27b01a!important;border-color:#9c27b0!important}.active-shuffle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#9c27b0!important}.channel-value[_ngcontent-%COMP%]{font-size:9px;font-family:monospace;color:var(--text-muted);text-align:center;margin-top:4px}.channels-container[_ngcontent-%COMP%]{flex:1;display:flex;gap:6px;overflow-x:auto;overflow-y:hidden;padding-bottom:4px;min-height:0}.mini-progress-well[_ngcontent-%COMP%]{position:absolute;right:2px;top:20px;bottom:20px;width:2px;background:var(--item-hover)}.mini-progress-bar[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.mini-progress-fill[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;background:var(--accent-color);box-shadow:0 0 4px var(--accent-color)}.empty-channels[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;color:var(--text-muted);font-size:11px;gap:4px}.empty-channels[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px;opacity:.5}"]})};function V_(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var so=V_();function yk(r){so=r}var Yl={exec:()=>null};function bt(r,t=""){let e=typeof r=="string"?r:r.source,i={replace:(n,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Yi.caret,"$1"),e=e.replace(n,o),i},getRegex:()=>new RegExp(e,t)};return i}var Yi={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},YL=/^(?:[ \t]*(?:\n|$))+/,XL=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,KL=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Kl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,ZL=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,z_=/(?:[*+-]|\d{1,9}[.)])/,xk=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,wk=bt(xk).replace(/bull/g,z_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),QL=bt(xk).replace(/bull/g,z_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),H_=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,JL=/^[^\n]+/,W_=/(?!\s*\])(?:\\.|[^\[\]\\])+/,eN=bt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",W_).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),tN=bt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,z_).getRegex(),Su="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",U_=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,iN=bt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",U_).replace("tag",Su).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ck=bt(H_).replace("hr",Kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Su).getRegex(),nN=bt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ck).getRegex(),j_={blockquote:nN,code:XL,def:eN,fences:KL,heading:ZL,hr:Kl,html:iN,lheading:wk,list:tN,newline:YL,paragraph:Ck,table:Yl,text:JL},fk=bt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Su).getRegex(),rN=Ue(J({},j_),{lheading:QL,table:fk,paragraph:bt(H_).replace("hr",Kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",fk).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Su).getRegex()}),sN=Ue(J({},j_),{html:bt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",U_).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Yl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:bt(H_).replace("hr",Kl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",wk).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),oN=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,aN=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,kk=/^( {2,}|\\)\n(?!\s*$)/,lN=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Mu=/[\p{P}\p{S}]/u,G_=/[\s\p{P}\p{S}]/u,Ek=/[^\s\p{P}\p{S}]/u,cN=bt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,G_).getRegex(),Sk=/(?!~)[\p{P}\p{S}]/u,dN=/(?!~)[\s\p{P}\p{S}]/u,hN=/(?:[^\s\p{P}\p{S}]|~)/u,uN=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Mk=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,pN=bt(Mk,"u").replace(/punct/g,Mu).getRegex(),mN=bt(Mk,"u").replace(/punct/g,Sk).getRegex(),Ak="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",fN=bt(Ak,"gu").replace(/notPunctSpace/g,Ek).replace(/punctSpace/g,G_).replace(/punct/g,Mu).getRegex(),gN=bt(Ak,"gu").replace(/notPunctSpace/g,hN).replace(/punctSpace/g,dN).replace(/punct/g,Sk).getRegex(),_N=bt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Ek).replace(/punctSpace/g,G_).replace(/punct/g,Mu).getRegex(),bN=bt(/\\(punct)/,"gu").replace(/punct/g,Mu).getRegex(),vN=bt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),yN=bt(U_).replace("(?:-->|$)","-->").getRegex(),xN=bt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",yN).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Eu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,wN=bt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Eu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Tk=bt(/^!?\[(label)\]\[(ref)\]/).replace("label",Eu).replace("ref",W_).getRegex(),Ik=bt(/^!?\[(ref)\](?:\[\])?/).replace("ref",W_).getRegex(),CN=bt("reflink|nolink(?!\\()","g").replace("reflink",Tk).replace("nolink",Ik).getRegex(),$_={_backpedal:Yl,anyPunctuation:bN,autolink:vN,blockSkip:uN,br:kk,code:aN,del:Yl,emStrongLDelim:pN,emStrongRDelimAst:fN,emStrongRDelimUnd:_N,escape:oN,link:wN,nolink:Ik,punctuation:cN,reflink:Tk,reflinkSearch:CN,tag:xN,text:lN,url:Yl},kN=Ue(J({},$_),{link:bt(/^!?\[(label)\]\((.*?)\)/).replace("label",Eu).getRegex(),reflink:bt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Eu).getRegex()}),N_=Ue(J({},$_),{emStrongRDelimAst:gN,emStrongLDelim:mN,url:bt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),EN=Ue(J({},N_),{br:bt(kk).replace("{2,}","*").getRegex(),text:bt(N_.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),ku={normal:j_,gfm:rN,pedantic:sN},$l={normal:$_,gfm:N_,breaks:EN,pedantic:kN},SN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},gk=r=>SN[r];function _r(r,t){if(t){if(Yi.escapeTest.test(r))return r.replace(Yi.escapeReplace,gk)}else if(Yi.escapeTestNoEncode.test(r))return r.replace(Yi.escapeReplaceNoEncode,gk);return r}function _k(r){try{r=encodeURI(r).replace(Yi.percentDecode,"%")}catch{return null}return r}function bk(r,t){let e=r.replace(Yi.findPipe,(s,o,l)=>{let d=!1,h=o;for(;--h>=0&&l[h]==="\\";)d=!d;return d?"|":" |"}),i=e.split(Yi.splitPipe),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i.at(-1)?.trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(Yi.slashPipe,"|");return i}function ql(r,t,e){let i=r.length;if(i===0)return"";let n=0;for(;n<i&&r.charAt(i-n-1)===t;)n++;return r.slice(0,i-n)}function MN(r,t){if(r.indexOf(t[1])===-1)return-1;let e=0;for(let i=0;i<r.length;i++)if(r[i]==="\\")i++;else if(r[i]===t[0])e++;else if(r[i]===t[1]&&(e--,e<0))return i;return-1}function vk(r,t,e,i,n){let s=t.href,o=t.title||null,l=r[1].replace(n.other.outputLinkReplace,"$1");if(r[0].charAt(0)!=="!"){i.state.inLink=!0;let d={type:"link",raw:e,href:s,title:o,text:l,tokens:i.inlineTokens(l)};return i.state.inLink=!1,d}return{type:"image",raw:e,href:s,title:o,text:l}}function AN(r,t,e){let i=r.match(e.other.indentCodeCompensation);if(i===null)return t;let n=i[1];return t.split(`
`).map(s=>{let o=s.match(e.other.beginningSpace);if(o===null)return s;let[l]=o;return l.length>=n.length?s.slice(n.length):s}).join(`
`)}var aa=class{options;rules;lexer;constructor(t){this.options=t||so}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let i=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?i:ql(i,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let i=e[0],n=AN(i,e[3]||"",this.rules);return{type:"code",raw:i,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let i=e[2].trim();if(this.rules.other.endingHash.test(i)){let n=ql(i,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(i=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:ql(e[0],`
`)}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let i=ql(e[0],`
`).split(`
`),n="",s="",o=[];for(;i.length>0;){let l=!1,d=[],h;for(h=0;h<i.length;h++)if(this.rules.other.blockquoteStart.test(i[h]))d.push(i[h]),l=!0;else if(!l)d.push(i[h]);else break;i=i.slice(h);let u=d.join(`
`),m=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${u}`:u,s=s?`${s}
${m}`:m;let f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(m,o,!0),this.lexer.state.top=f,i.length===0)break;let _=o.at(-1);if(_?.type==="code")break;if(_?.type==="blockquote"){let y=_,v=y.raw+`
`+i.join(`
`),x=this.blockquote(v);o[o.length-1]=x,n=n.substring(0,n.length-y.raw.length)+x.raw,s=s.substring(0,s.length-y.text.length)+x.text;break}else if(_?.type==="list"){let y=_,v=y.raw+`
`+i.join(`
`),x=this.list(v);o[o.length-1]=x,n=n.substring(0,n.length-_.raw.length)+x.raw,s=s.substring(0,s.length-y.raw.length)+x.raw,i=v.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:o,text:s}}}list(t){let e=this.rules.block.list.exec(t);if(e){let i=e[1].trim(),n=i.length>1,s={type:"list",raw:"",ordered:n,start:n?+i.slice(0,-1):"",loose:!1,items:[]};i=n?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=n?i:"[*+-]");let o=this.rules.other.listItemRegex(i),l=!1;for(;t;){let h=!1,u="",m="";if(!(e=o.exec(t))||this.rules.block.hr.test(t))break;u=e[0],t=t.substring(u.length);let f=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,I=>" ".repeat(3*I.length)),_=t.split(`
`,1)[0],y=!f.trim(),v=0;if(this.options.pedantic?(v=2,m=f.trimStart()):y?v=e[1].length+1:(v=e[2].search(this.rules.other.nonSpaceChar),v=v>4?1:v,m=f.slice(v),v+=e[1].length),y&&this.rules.other.blankLine.test(_)&&(u+=_+`
`,t=t.substring(_.length+1),h=!0),!h){let I=this.rules.other.nextBulletRegex(v),P=this.rules.other.hrRegex(v),B=this.rules.other.fencesBeginRegex(v),N=this.rules.other.headingBeginRegex(v),z=this.rules.other.htmlBeginRegex(v);for(;t;){let j=t.split(`
`,1)[0],Q;if(_=j,this.options.pedantic?(_=_.replace(this.rules.other.listReplaceNesting,"  "),Q=_):Q=_.replace(this.rules.other.tabCharGlobal,"    "),B.test(_)||N.test(_)||z.test(_)||I.test(_)||P.test(_))break;if(Q.search(this.rules.other.nonSpaceChar)>=v||!_.trim())m+=`
`+Q.slice(v);else{if(y||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||B.test(f)||N.test(f)||P.test(f))break;m+=`
`+_}!y&&!_.trim()&&(y=!0),u+=j+`
`,t=t.substring(j.length+1),f=Q.slice(v)}}s.loose||(l?s.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(l=!0));let x=null,S;this.options.gfm&&(x=this.rules.other.listIsTask.exec(m),x&&(S=x[0]!=="[ ] ",m=m.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:u,task:!!x,checked:S,loose:!1,text:m,tokens:[]}),s.raw+=u}let d=s.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let h=0;h<s.items.length;h++)if(this.lexer.state.top=!1,s.items[h].tokens=this.lexer.blockTokens(s.items[h].text,[]),!s.loose){let u=s.items[h].tokens.filter(f=>f.type==="space"),m=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));s.loose=m}if(s.loose)for(let h=0;h<s.items.length;h++)s.items[h].loose=!0;return s}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let i=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:i,raw:e[0],href:n,title:s}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let i=bk(e[1]),n=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(i.length===n.length){for(let l of n)this.rules.other.tableAlignRight.test(l)?o.align.push("right"):this.rules.other.tableAlignCenter.test(l)?o.align.push("center"):this.rules.other.tableAlignLeft.test(l)?o.align.push("left"):o.align.push(null);for(let l=0;l<i.length;l++)o.header.push({text:i[l],tokens:this.lexer.inline(i[l]),header:!0,align:o.align[l]});for(let l of s)o.rows.push(bk(l,o.header.length).map((d,h)=>({text:d,tokens:this.lexer.inline(d),header:!1,align:o.align[h]})));return o}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let i=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:i,tokens:this.lexer.inline(i)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let i=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(i)){if(!this.rules.other.endAngleBracket.test(i))return;let o=ql(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{let o=MN(e[2],"()");if(o>-1){let d=(e[0].indexOf("!")===0?5:4)+e[1].length+o;e[2]=e[2].substring(0,o),e[0]=e[0].substring(0,d).trim(),e[3]=""}}let n=e[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(n);o&&(n=o[1],s=o[3])}else s=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(i)?n=n.slice(1):n=n.slice(1,-1)),vk(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){let n=(i[2]||i[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=e[n.toLowerCase()];if(!s){let o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return vk(i,s,i[0],this.lexer,this.rules)}}emStrong(t,e,i=""){let n=this.rules.inline.emStrongLDelim.exec(t);if(!n||n[3]&&i.match(this.rules.other.unicodeAlphaNumeric))return;if(!(n[1]||n[2]||"")||!i||this.rules.inline.punctuation.exec(i)){let o=[...n[0]].length-1,l,d,h=o,u=0,m=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(m.lastIndex=0,e=e.slice(-1*t.length+o);(n=m.exec(e))!=null;){if(l=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!l)continue;if(d=[...l].length,n[3]||n[4]){h+=d;continue}else if((n[5]||n[6])&&o%3&&!((o+d)%3)){u+=d;continue}if(h-=d,h>0)continue;d=Math.min(d,d+h+u);let f=[...n[0]][0].length,_=t.slice(0,o+n.index+f+d);if(Math.min(o,d)%2){let v=_.slice(1,-1);return{type:"em",raw:_,text:v,tokens:this.lexer.inlineTokens(v)}}let y=_.slice(2,-2);return{type:"strong",raw:_,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let i=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(i),s=this.rules.other.startingSpaceChar.test(i)&&this.rules.other.endingSpaceChar.test(i);return n&&s&&(i=i.substring(1,i.length-1)),{type:"codespan",raw:e[0],text:i}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let i,n;return e[2]==="@"?(i=e[1],n="mailto:"+i):(i=e[1],n=i),{type:"link",raw:e[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let i,n;if(e[2]==="@")i=e[0],n="mailto:"+i;else{let s;do s=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(s!==e[0]);i=e[0],e[1]==="www."?n="http://"+e[0]:n=e[0]}return{type:"link",raw:e[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let i=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:i}}}},Jn=class r{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||so,this.options.tokenizer=this.options.tokenizer||new aa,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:Yi,block:ku.normal,inline:$l.normal};this.options.pedantic?(e.block=ku.pedantic,e.inline=$l.pedantic):this.options.gfm&&(e.block=ku.gfm,this.options.breaks?e.inline=$l.breaks:e.inline=$l.gfm),this.tokenizer.rules=e}static get rules(){return{block:ku,inline:$l}}static lex(t,e){return new r(e).lex(t)}static lexInline(t,e){return new r(e).inlineTokens(t)}lex(t){t=t.replace(Yi.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let i=this.inlineQueue[e];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],i=!1){for(this.options.pedantic&&(t=t.replace(Yi.tabCharGlobal,"    ").replace(Yi.spaceLine,""));t;){let n;if(this.options.extensions?.block?.some(o=>(n=o.call({lexer:this},t,e))?(t=t.substring(n.raw.length),e.push(n),!0):!1))continue;if(n=this.tokenizer.space(t)){t=t.substring(n.raw.length);let o=e.at(-1);n.raw.length===1&&o!==void 0?o.raw+=`
`:e.push(n);continue}if(n=this.tokenizer.code(t)){t=t.substring(n.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+n.raw,o.text+=`
`+n.text,this.inlineQueue.at(-1).src=o.text):e.push(n);continue}if(n=this.tokenizer.fences(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.heading(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.hr(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.blockquote(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.list(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.html(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.def(t)){t=t.substring(n.raw.length);let o=e.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+n.raw,o.text+=`
`+n.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(t)){t=t.substring(n.raw.length),e.push(n);continue}if(n=this.tokenizer.lheading(t)){t=t.substring(n.raw.length),e.push(n);continue}let s=t;if(this.options.extensions?.startBlock){let o=1/0,l=t.slice(1),d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},l),typeof d=="number"&&d>=0&&(o=Math.min(o,d))}),o<1/0&&o>=0&&(s=t.substring(0,o+1))}if(this.state.top&&(n=this.tokenizer.paragraph(s))){let o=e.at(-1);i&&o?.type==="paragraph"?(o.raw+=`
`+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(n),i=s.length!==t.length,t=t.substring(n.raw.length);continue}if(n=this.tokenizer.text(t)){t=t.substring(n.raw.length);let o=e.at(-1);o?.type==="text"?(o.raw+=`
`+n.raw,o.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(n);continue}if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let i=t,n=null;if(this.tokens.links){let l=Object.keys(this.tokens.links);if(l.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)l.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,n.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let s=!1,o="";for(;t;){s||(o=""),s=!1;let l;if(this.options.extensions?.inline?.some(h=>(l=h.call({lexer:this},t,e))?(t=t.substring(l.raw.length),e.push(l),!0):!1))continue;if(l=this.tokenizer.escape(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.tag(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.link(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(l.raw.length);let h=e.at(-1);l.type==="text"&&h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):e.push(l);continue}if(l=this.tokenizer.emStrong(t,i,o)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.codespan(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.br(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.del(t)){t=t.substring(l.raw.length),e.push(l);continue}if(l=this.tokenizer.autolink(t)){t=t.substring(l.raw.length),e.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(t))){t=t.substring(l.raw.length),e.push(l);continue}let d=t;if(this.options.extensions?.startInline){let h=1/0,u=t.slice(1),m;this.options.extensions.startInline.forEach(f=>{m=f.call({lexer:this},u),typeof m=="number"&&m>=0&&(h=Math.min(h,m))}),h<1/0&&h>=0&&(d=t.substring(0,h+1))}if(l=this.tokenizer.inlineText(d)){t=t.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(o=l.raw.slice(-1)),s=!0;let h=e.at(-1);h?.type==="text"?(h.raw+=l.raw,h.text+=l.text):e.push(l);continue}if(t){let h="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return e}},la=class{options;parser;constructor(t){this.options=t||so}space(t){return""}code({text:t,lang:e,escaped:i}){let n=(e||"").match(Yi.notSpaceStart)?.[0],s=t.replace(Yi.endingNewline,"")+`
`;return n?'<pre><code class="language-'+_r(n)+'">'+(i?s:_r(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:_r(s,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){let e=t.ordered,i=t.start,n="";for(let l=0;l<t.items.length;l++){let d=t.items[l];n+=this.listitem(d)}let s=e?"ol":"ul",o=e&&i!==1?' start="'+i+'"':"";return"<"+s+o+`>
`+n+"</"+s+`>
`}listitem(t){let e="";if(t.task){let i=this.checkbox({checked:!!t.checked});t.loose?t.tokens[0]?.type==="paragraph"?(t.tokens[0].text=i+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=i+" "+_r(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):e+=i+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",i="";for(let s=0;s<t.header.length;s++)i+=this.tablecell(t.header[s]);e+=this.tablerow({text:i});let n="";for(let s=0;s<t.rows.length;s++){let o=t.rows[s];i="";for(let l=0;l<o.length;l++)i+=this.tablecell(o[l]);n+=this.tablerow({text:i})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){let e=this.parser.parseInline(t.tokens),i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${_r(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:i}){let n=this.parser.parseInline(i),s=_k(t);if(s===null)return n;t=s;let o='<a href="'+t+'"';return e&&(o+=' title="'+_r(e)+'"'),o+=">"+n+"</a>",o}image({href:t,title:e,text:i}){let n=_k(t);if(n===null)return _r(i);t=n;let s=`<img src="${t}" alt="${i}"`;return e&&(s+=` title="${_r(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:_r(t.text)}},Xl=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},er=class r{options;renderer;textRenderer;constructor(t){this.options=t||so,this.options.renderer=this.options.renderer||new la,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Xl}static parse(t,e){return new r(e).parse(t)}static parseInline(t,e){return new r(e).parseInline(t)}parse(t,e=!0){let i="";for(let n=0;n<t.length;n++){let s=t[n];if(this.options.extensions?.renderers?.[s.type]){let l=s,d=this.options.extensions.renderers[l.type].call({parser:this},l);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){i+=d||"";continue}}let o=s;switch(o.type){case"space":{i+=this.renderer.space(o);continue}case"hr":{i+=this.renderer.hr(o);continue}case"heading":{i+=this.renderer.heading(o);continue}case"code":{i+=this.renderer.code(o);continue}case"table":{i+=this.renderer.table(o);continue}case"blockquote":{i+=this.renderer.blockquote(o);continue}case"list":{i+=this.renderer.list(o);continue}case"html":{i+=this.renderer.html(o);continue}case"paragraph":{i+=this.renderer.paragraph(o);continue}case"text":{let l=o,d=this.renderer.text(l);for(;n+1<t.length&&t[n+1].type==="text";)l=t[++n],d+=`
`+this.renderer.text(l);e?i+=this.renderer.paragraph({type:"paragraph",raw:d,text:d,tokens:[{type:"text",raw:d,text:d,escaped:!0}]}):i+=d;continue}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}parseInline(t,e=this.renderer){let i="";for(let n=0;n<t.length;n++){let s=t[n];if(this.options.extensions?.renderers?.[s.type]){let l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=l||"";continue}}let o=s;switch(o.type){case"escape":{i+=e.text(o);break}case"html":{i+=e.html(o);break}case"link":{i+=e.link(o);break}case"image":{i+=e.image(o);break}case"strong":{i+=e.strong(o);break}case"em":{i+=e.em(o);break}case"codespan":{i+=e.codespan(o);break}case"br":{i+=e.br(o);break}case"del":{i+=e.del(o);break}case"text":{i+=e.text(o);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},oa=class{options;block;constructor(t){this.options=t||so}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?Jn.lex:Jn.lexInline}provideParser(){return this.block?er.parse:er.parseInline}},B_=class{defaults=V_();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=er;Renderer=la;TextRenderer=Xl;Lexer=Jn;Tokenizer=aa;Hooks=oa;constructor(...t){this.use(...t)}walkTokens(t,e){let i=[];for(let n of t)switch(i=i.concat(e.call(this,n)),n.type){case"table":{let s=n;for(let o of s.header)i=i.concat(this.walkTokens(o.tokens,e));for(let o of s.rows)for(let l of o)i=i.concat(this.walkTokens(l.tokens,e));break}case"list":{let s=n;i=i.concat(this.walkTokens(s.items,e));break}default:{let s=n;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let l=s[o].flat(1/0);i=i.concat(this.walkTokens(l,e))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,e)))}}return i}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{let n=J({},i);if(n.async=this.defaults.async||n.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=e.renderers[s.name];o?e.renderers[s.name]=function(...l){let d=s.renderer.apply(this,l);return d===!1&&(d=o.apply(this,l)),d}:e.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=e[s.level];o?o.unshift(s.tokenizer):e[s.level]=[s.tokenizer],s.start&&(s.level==="block"?e.startBlock?e.startBlock.push(s.start):e.startBlock=[s.start]:s.level==="inline"&&(e.startInline?e.startInline.push(s.start):e.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(e.childTokens[s.name]=s.childTokens)}),n.extensions=e),i.renderer){let s=this.defaults.renderer||new la(this.defaults);for(let o in i.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let l=o,d=i.renderer[l],h=s[l];s[l]=(...u)=>{let m=d.apply(s,u);return m===!1&&(m=h.apply(s,u)),m||""}}n.renderer=s}if(i.tokenizer){let s=this.defaults.tokenizer||new aa(this.defaults);for(let o in i.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let l=o,d=i.tokenizer[l],h=s[l];s[l]=(...u)=>{let m=d.apply(s,u);return m===!1&&(m=h.apply(s,u)),m}}n.tokenizer=s}if(i.hooks){let s=this.defaults.hooks||new oa;for(let o in i.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let l=o,d=i.hooks[l],h=s[l];oa.passThroughHooks.has(o)?s[l]=u=>{if(this.defaults.async)return Promise.resolve(d.call(s,u)).then(f=>h.call(s,f));let m=d.call(s,u);return h.call(s,m)}:s[l]=(...u)=>{let m=d.apply(s,u);return m===!1&&(m=h.apply(s,u)),m}}n.hooks=s}if(i.walkTokens){let s=this.defaults.walkTokens,o=i.walkTokens;n.walkTokens=function(l){let d=[];return d.push(o.call(this,l)),s&&(d=d.concat(s.call(this,l))),d}}this.defaults=J(J({},this.defaults),n)}),this}setOptions(t){return this.defaults=J(J({},this.defaults),t),this}lexer(t,e){return Jn.lex(t,e??this.defaults)}parser(t,e){return er.parse(t,e??this.defaults)}parseMarkdown(t){return(i,n)=>{let s=J({},n),o=J(J({},this.defaults),s),l=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&s.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof i>"u"||i===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=t);let d=o.hooks?o.hooks.provideLexer():t?Jn.lex:Jn.lexInline,h=o.hooks?o.hooks.provideParser():t?er.parse:er.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(u=>d(u,o)).then(u=>o.hooks?o.hooks.processAllTokens(u):u).then(u=>o.walkTokens?Promise.all(this.walkTokens(u,o.walkTokens)).then(()=>u):u).then(u=>h(u,o)).then(u=>o.hooks?o.hooks.postprocess(u):u).catch(l);try{o.hooks&&(i=o.hooks.preprocess(i));let u=d(i,o);o.hooks&&(u=o.hooks.processAllTokens(u)),o.walkTokens&&this.walkTokens(u,o.walkTokens);let m=h(u,o);return o.hooks&&(m=o.hooks.postprocess(m)),m}catch(u){return l(u)}}}onError(t,e){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let n="<p>An error occurred:</p><pre>"+_r(i.message+"",!0)+"</pre>";return e?Promise.resolve(n):n}if(e)return Promise.reject(i);throw i}}},ro=new B_;function _t(r,t){return ro.parse(r,t)}_t.options=_t.setOptions=function(r){return ro.setOptions(r),_t.defaults=ro.defaults,yk(_t.defaults),_t};_t.getDefaults=V_;_t.defaults=so;_t.use=function(...r){return ro.use(...r),_t.defaults=ro.defaults,yk(_t.defaults),_t};_t.walkTokens=function(r,t){return ro.walkTokens(r,t)};_t.parseInline=ro.parseInline;_t.Parser=er;_t.parser=er.parse;_t.Renderer=la;_t.TextRenderer=Xl;_t.Lexer=Jn;_t.lexer=Jn.lex;_t.Tokenizer=aa;_t.Hooks=oa;_t.parse=_t;var x8=_t.options,w8=_t.setOptions,C8=_t.use,k8=_t.walkTokens,E8=_t.parseInline;var S8=er.parse,M8=Jn.lex;var Dk=L0(F_());var TN=r=>({article:r,level:0}),IN=(r,t)=>({article:r,level:t});function DN(r,t){r&1&&(w(0,"div",8),F(1,"Saving..."),E())}function PN(r,t){if(r&1&&(w(0,"div",9),F(1),E()),r&2){let e=T();A(),Te(e.errorMessage)}}function RN(r,t){r&1&&cr(0)}function ON(r,t){if(r&1&&(wi(0),X(1,RN,1,0,"ng-container",23),Ci()),r&2){let e=t.$implicit;T(2);let i=Ut(11);A(),R("ngTemplateOutlet",i)("ngTemplateOutletContext",os(2,TN,e))}}function FN(r,t){if(r&1){let e=ie();w(0,"div",29)(1,"textarea",30),Fe("ngModelChange",function(n){H(e);let s=T(3);return Oe(s.currentArticle.content,n)||(s.currentArticle.content=n),W(n)}),U("ngModelChange",function(){H(e);let n=T(3);return W(n.updateArticle())}),E()()}if(r&2){let e=T(3);A(),Re("ngModel",e.currentArticle.content)}}function LN(r,t){if(r&1&&re(0,"div",31),r&2){let e=T(3);R("innerHTML",e.renderedContent,sd)}}function NN(r,t){if(r&1){let e=ie();w(0,"div",24)(1,"div",25)(2,"input",26),Fe("ngModelChange",function(n){H(e);let s=T(2);return Oe(s.currentArticle.title,n)||(s.currentArticle.title=n),W(n)}),U("ngModelChange",function(){H(e);let n=T(2);return W(n.updateArticle())}),E(),w(3,"button",3),U("click",function(){H(e);let n=T(2);return W(n.toggleEditing())}),F(4),E()(),X(5,FN,2,1,"div",27)(6,LN,1,1,"div",28),E()}if(r&2){let e=T(2);A(2),Re("ngModel",e.currentArticle.title),A(2),Ze(" ",e.isEditing?"Preview":"Edit"," "),A(),R("ngIf",e.isEditing),A(),R("ngIf",!e.isEditing)}}function BN(r,t){r&1&&(w(0,"div",32)(1,"p"),F(2,"No article selected. Add an article from the sidebar."),E()())}function VN(r,t){if(r&1){let e=ie();w(0,"div",10)(1,"div",11)(2,"div",12)(3,"button",13),U("click",function(){H(e);let n=T();return W(n.toggleSidebar())}),w(4,"mat-icon"),F(5),E()()(),w(6,"div",14)(7,"div",15)(8,"h3"),F(9,"Articles"),E()(),w(10,"button",16),U("click",function(){H(e);let n=T();return W(n.addArticle())}),F(11,"+"),E(),w(12,"input",17),Fe("ngModelChange",function(n){H(e);let s=T();return Oe(s.searchTerm,n)||(s.searchTerm=n),W(n)}),E(),w(13,"cdk-virtual-scroll-viewport",18)(14,"ul"),X(15,ON,2,4,"ng-container",19),E()()()(),w(16,"div",20),X(17,NN,7,4,"div",21)(18,BN,3,0,"div",22),E()()}if(r&2){let e=T();A(),ce("collapsed",e.sidebarCollapsed),A(4),Te(e.sidebarCollapsed?"chevron_right":"chevron_left"),A(),ce("hidden",e.sidebarCollapsed),A(6),Re("ngModel",e.searchTerm),A(3),R("ngForOf",e.filteredArticles)("ngForTrackBy",e.trackByArticleId),A(2),R("ngIf",e.currentArticle),A(),R("ngIf",!e.currentArticle)}}function zN(r,t){r&1&&(w(0,"div",33)(1,"p"),F(2,"No wiki loaded. Open an existing wiki or create a new one."),E()())}function HN(r,t){r&1&&cr(0)}function WN(r,t){if(r&1&&(wi(0),X(1,HN,1,0,"ng-container",23),Ci()),r&2){let e=t.$implicit,i=T(2).level;T();let n=Ut(11);A(),R("ngTemplateOutlet",n)("ngTemplateOutletContext",od(2,IN,e,i+1))}}function UN(r,t){if(r&1&&(wi(0),X(1,WN,2,5,"ng-container",19),Ci()),r&2){let e=T().article,i=T();A(),R("ngForOf",e.children)("ngForTrackBy",i.trackByArticleId)}}function jN(r,t){if(r&1){let e=ie();w(0,"li",34),U("click",function(){let n=H(e).article,s=T();return W(s.selectArticle(n))}),w(1,"span"),F(2),E(),w(3,"button",35),U("click",function(n){let s=H(e).article,o=T();return W(o.deleteArticle(s,n))}),w(4,"mat-icon"),F(5,"delete"),E()(),w(6,"button",36),U("click",function(n){let s=H(e).article,o=T();return W(o.addSubArticle(s,n))}),w(7,"mat-icon"),F(8,"add"),E()()(),X(9,UN,2,2,"ng-container",37)}if(r&2){let e=t.article,i=t.level,n=T();fi("padding-left",i*16,"px"),ce("active",e.id===(n.currentArticle==null?null:n.currentArticle.id)),A(2),Te(e.title),A(7),R("ngIf",e.children&&e.children.length)}}var Au=class r{constructor(t,e){this.sanitizer=t;this.cdr=e}settings;settingsChange=new fe;wikiData={articles:[]};currentArticle=null;isEditing=!1;fileHandle=null;fileName="";renderedContent="";sidebarCollapsed=!1;searchTerm="";isSaving=!1;errorMessage="";debouncedSaveWiki=(0,Dk.debounce)(this.saveWiki.bind(this),1e3);wikiLinkHandler=t=>{this.handleWikiLink(t.detail)};ngOnInit(){if(this.settings&&this.settings.wikiData)if(this.wikiData=this.settings.wikiData,this.sidebarCollapsed=this.wikiData.sidebarCollapsed??!1,this.isEditing=this.wikiData.isEditing??!1,this.wikiData.currentArticleId){let t=this.findArticleById(this.wikiData.articles,this.wikiData.currentArticleId);t?this.currentArticle=t:this.wikiData.articles.length>0&&(this.currentArticle=this.wikiData.articles[0])}else this.wikiData.articles.length>0&&(this.currentArticle=this.wikiData.articles[0]);this.updateRenderedContent()}findArticleById(t,e){for(let i of t){if(i.id===e)return i;if(i.children){let n=this.findArticleById(i.children,e);if(n)return n}}return null}openExistingWiki(){return q(this,null,function*(){try{if(window.showOpenFilePicker){let[t]=yield window.showOpenFilePicker({types:[{description:"Wiki Files",accept:{"application/json":[".json"]}}]});this.fileHandle=t,this.fileName=t.name,this.isSaving=!0,this.cdr.markForCheck();let i=yield(yield t.getFile()).text();this.wikiData=JSON.parse(i),this.settings&&(this.settings.wikiData=this.wikiData),this.wikiData.articles.length>0&&(this.currentArticle=this.wikiData.articles[0]),this.updateRenderedContent(),this.isSaving=!1,this.cdr.markForCheck()}else this.errorMessage="File System Access API is not supported in this browser.",this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}catch(t){console.error("Error opening wiki file:",t),this.errorMessage="Failed to open wiki file",this.isSaving=!1,this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}})}createNewWiki(){return q(this,null,function*(){try{if(window.showSaveFilePicker){let t=yield window.showSaveFilePicker({suggestedName:"untitled_wiki.json",types:[{description:"Wiki Files",accept:{"application/json":[".json"]}}]});this.fileHandle=t,this.fileName=t.name,this.wikiData={articles:[]},this.settings&&(this.settings.wikiData=this.wikiData),this.currentArticle=null,this.updateRenderedContent(),yield this.saveWiki()}else this.errorMessage="File System Access API is not supported in this browser.",this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}catch(t){console.error("Error creating wiki file:",t),this.errorMessage="Failed to create wiki file",this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}})}saveWiki(){return q(this,null,function*(){if(this.fileHandle)try{this.isSaving=!0,this.cdr.markForCheck();let t=yield this.fileHandle.createWritable();yield t.write(JSON.stringify(this.wikiData,null,2)),yield t.close(),this.isSaving=!1,this.cdr.markForCheck()}catch(t){console.error("Error saving wiki file:",t),this.errorMessage="Failed to save wiki file",this.isSaving=!1,this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3)}})}addArticle(){let t={id:Date.now().toString(),title:"New Article",content:"",children:[]};this.wikiData.articles.push(t),this.currentArticle=t,this.isEditing=!0,this.saveUIState(),this.cdr.markForCheck()}addSubArticle(t,e){e.stopPropagation();let i={id:Date.now().toString(),title:"New Sub-Article",content:"",children:[]};t.children||(t.children=[]),t.children.push(i),this.currentArticle=i,this.isEditing=!0,this.saveUIState(),this.cdr.markForCheck()}deleteArticle(t,e){e&&e.stopPropagation(),this.wikiData.articles=this.removeArticle(this.wikiData.articles,t.id),this.currentArticle?.id===t.id&&(this.currentArticle=this.wikiData.articles.length?this.wikiData.articles[0]:null),this.saveUIState(),this.updateRenderedContent(),this.cdr.markForCheck()}removeArticle(t,e){return t.filter(i=>i.id===e?!1:(i.children&&(i.children=this.removeArticle(i.children,e)),!0))}selectArticle(t){this.currentArticle=t,this.isEditing=!1,this.saveUIState(),this.updateRenderedContent()}updateArticle(){this.updateSettings(),this.isEditing||this.updateRenderedContent(),this.debouncedSaveWiki()}updateSettings(){this.settings&&(this.settings.wikiData=this.wikiData,this.settingsChange.emit())}toggleEditing(){this.isEditing=!this.isEditing,this.saveUIState(),this.isEditing||this.updateRenderedContent(),this.cdr.markForCheck()}toggleSidebar(){this.sidebarCollapsed=!this.sidebarCollapsed,this.saveUIState(),this.cdr.markForCheck()}saveUIState(){this.wikiData.currentArticleId=this.currentArticle?.id,this.wikiData.isEditing=this.isEditing,this.wikiData.sidebarCollapsed=this.sidebarCollapsed,this.updateSettings()}updateRenderedContent(){return q(this,null,function*(){if(this.currentArticle){let t=this.currentArticle.content||"";t=t.replace(/\[\[([^\]]+)\]\]/g,(i,n)=>`<a href="#" class="wiki-link" onclick="event.preventDefault(); window.dispatchEvent(new CustomEvent('wikiLink', { detail: '${n}' }))">${n}</a>`);let e=yield _t.parse(t);this.renderedContent=this.sanitizer.bypassSecurityTrustHtml(e),this.cdr.markForCheck()}})}get filteredArticles(){return this.searchTerm?this.filterArticles(this.wikiData.articles,this.searchTerm):this.wikiData.articles}filterArticles(t,e){return t.reduce((i,n)=>{let s=e.toLowerCase(),o=n.title.toLowerCase().includes(s)||n.content.toLowerCase().includes(s),l=[];return n.children&&(l=this.filterArticles(n.children,e)),(o||l.length>0)&&i.push(Ue(J({},n),{children:l})),i},[])}handleWikiLink(t){let e=this.findArticleByTitle(this.wikiData.articles,t);e?this.selectArticle(e):(this.errorMessage=`Article "${t}" not found.`,this.cdr.markForCheck(),setTimeout(()=>{this.errorMessage="",this.cdr.markForCheck()},3e3))}findArticleByTitle(t,e){for(let i of t){if(i.title===e)return i;if(i.children){let n=this.findArticleByTitle(i.children,e);if(n)return n}}return null}trackByArticleId(t,e){return e.id}ngAfterViewInit(){window.addEventListener("wikiLink",this.wikiLinkHandler)}ngOnDestroy(){window.removeEventListener("wikiLink",this.wikiLinkHandler),this.debouncedSaveWiki.cancel&&this.debouncedSaveWiki.cancel()}static \u0275fac=function(e){return new(e||r)(we(Ws),we($e))};static \u0275cmp=oe({type:r,selectors:[["app-wiki-widget"]],inputs:{settings:"settings"},outputs:{settingsChange:"settingsChange"},decls:12,vars:4,consts:[["recursiveList",""],[1,"wiki-widget"],[1,"wiki-header"],["mat-button","",3,"click"],["class","save-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],["class","wiki-body",4,"ngIf"],["class","empty-wiki",4,"ngIf"],[1,"save-indicator"],[1,"error-message"],[1,"wiki-body"],[1,"wiki-sidebar"],[1,"sidebar-toggle"],["mat-icon-button","",3,"click"],[1,"sidebar-content"],[1,"sidebar-header"],["mat-mini-fab","","color","primary",3,"click"],["type","text","placeholder","Search articles...",1,"search-input",3,"ngModelChange","ngModel"],["itemSize","36",1,"article-viewport"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"wiki-content"],["class","article-container",4,"ngIf"],["class","empty-state",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"article-container"],[1,"article-header"],["type","text","placeholder","Article Title",1,"title-input",3,"ngModelChange","ngModel"],["class","editor-container",4,"ngIf"],["class","preview-container",3,"innerHTML",4,"ngIf"],[1,"editor-container"],["placeholder","Write your article here...",1,"content-editor",3,"ngModelChange","ngModel"],[1,"preview-container",3,"innerHTML"],[1,"empty-state"],[1,"empty-wiki"],[3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-icon-button","","color","primary",3,"click"],[4,"ngIf"]],template:function(e,i){if(e&1){let n=ie();w(0,"div",1)(1,"div",2)(2,"button",3),U("click",function(){return H(n),W(i.openExistingWiki())}),F(3,"Open Wiki"),E(),w(4,"button",3),U("click",function(){return H(n),W(i.createNewWiki())}),F(5,"New Wiki"),E()(),X(6,DN,2,0,"div",4)(7,PN,2,1,"div",5)(8,VN,19,10,"div",6)(9,zN,3,0,"div",7),E(),X(10,jN,10,6,"ng-template",null,0,sn)}e&2&&(A(6),R("ngIf",i.isSaving),A(),R("ngIf",i.errorMessage),A(),R("ngIf",i.fileHandle||i.wikiData.articles.length),A(),R("ngIf",!i.fileHandle&&i.wikiData.articles.length===0))},dependencies:[lt,Lt,Vt,as,jt,Xt,si,Kt,wt,gi,Ei,Px,St,Ht,Za,Fx,Lx],styles:[".wiki-widget[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;position:relative}.wiki-header[_ngcontent-%COMP%]{display:flex;gap:8px;padding:8px;background:var(--header-bg);border-bottom:var(--glass-border);color:var(--text-primary)}.wiki-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--text-primary)!important}.wiki-body[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden;min-height:0}.wiki-sidebar[_ngcontent-%COMP%]{display:flex;background:var(--glass-bg);-webkit-backdrop-filter:var(--glass-backdrop);backdrop-filter:var(--glass-backdrop);border-right:var(--glass-border);transition:width .3s;position:relative;width:200px;color:var(--text-primary)}.wiki-sidebar.collapsed[_ngcontent-%COMP%]{width:40px}.wiki-sidebar.collapsed[_ngcontent-%COMP%]   .sidebar-content[_ngcontent-%COMP%]{display:none}.sidebar-toggle[_ngcontent-%COMP%]{position:absolute;right:0;top:8px;z-index:10;background:transparent;color:var(--text-secondary);border-radius:0 4px 4px 0}.sidebar-toggle[_ngcontent-%COMP%]:hover{color:var(--text-primary);background:var(--accent-color)}.sidebar-content[_ngcontent-%COMP%]{flex:1;padding:8px;width:100%;display:flex;flex-direction:column}.sidebar-content.hidden[_ngcontent-%COMP%]{display:none}.sidebar-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;color:var(--text-primary)}.sidebar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.1em}.search-input[_ngcontent-%COMP%]{width:100%;padding:6px 8px;margin:8px 0;background:var(--input-bg);border:var(--input-border);color:var(--text-primary);border-radius:4px}.search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-color)}.article-viewport[_ngcontent-%COMP%]{height:100%;flex:1;min-height:0}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:8px 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:6px;cursor:pointer;margin:2px 0;height:36px;border-radius:4px;transition:background .2s;color:var(--text-secondary)}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:var(--item-hover);color:var(--text-primary)}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]{background:var(--accent-color);color:#fff}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.wiki-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;background:transparent;min-height:0;color:var(--text-primary)}.article-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}.article-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px;flex-shrink:0}.article-header[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]{flex:1;padding:8px;background:var(--input-bg);border:var(--input-border);color:var(--text-primary);border-radius:4px;font-size:1em}.article-header[_ngcontent-%COMP%]   .title-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-color)}.editor-container[_ngcontent-%COMP%]{flex:1;display:flex;overflow:hidden;padding:8px;min-height:0}.content-editor[_ngcontent-%COMP%]{flex:1;width:100%;resize:none;padding:12px;background:var(--input-bg);border:var(--input-border);color:var(--text-primary);border-radius:4px;font-family:inherit;font-size:14px;line-height:1.6;overflow-y:auto}.content-editor[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-color)}.preview-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;background:var(--glass-bg);border:var(--glass-border);border-radius:4px;margin:8px;color:var(--text-primary)}.empty-state[_ngcontent-%COMP%], .empty-wiki[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;padding:16px;text-align:center;color:var(--text-muted)}.save-indicator[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{position:absolute;top:40px;right:8px;padding:4px 8px;border-radius:4px;font-size:12px;z-index:100;color:#fff}.save-indicator[_ngcontent-%COMP%]{background:var(--accent-color)}.error-message[_ngcontent-%COMP%]{background:var(--danger-color)}"],changeDetection:0})};var GN=["trigger"],$N=["panel"],qN=[[["mat-select-trigger"]],"*"],YN=["mat-select-trigger","*"];function XN(r,t){if(r&1&&(w(0,"span",4),F(1),E()),r&2){let e=T();A(),Te(e.placeholder)}}function KN(r,t){r&1&&Ke(0)}function ZN(r,t){if(r&1&&(w(0,"span",11),F(1),E()),r&2){let e=T(2);A(),Te(e.triggerValue)}}function QN(r,t){if(r&1&&(w(0,"span",5),X(1,KN,1,0)(2,ZN,2,1,"span",11),E()),r&2){let e=T();A(),gt(e.customTrigger?1:2)}}function JN(r,t){if(r&1){let e=ie();w(0,"div",12,1),U("@transformPanel.done",function(n){H(e);let s=T();return W(s._panelDoneAnimatingStream.next(n.toState))})("keydown",function(n){H(e);let s=T();return W(s._handleKeydown(n))}),Ke(2,1),E()}if(r&2){let e=T();uy("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),R("ngClass",e.panelClass)("@transformPanel","showing"),ye("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var eB={transformPanelWrap:ls("transformPanelWrap",[dr("* => void",Ay("@transformPanel",[My()],{optional:!0}))]),transformPanel:ls("transformPanel",[Hs("void",vn({opacity:0,transform:"scale(1, 0.8)"})),dr("void => showing",Ir("120ms cubic-bezier(0, 0, 0.2, 1)",vn({opacity:1,transform:"scale(1, 1)"}))),dr("* => void",Ir("100ms linear",vn({opacity:0})))])};var Pk=new te("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let r=C(ci);return()=>r.scrollStrategies.reposition()}});function tB(r){return()=>r.scrollStrategies.reposition()}var iB=new te("MAT_SELECT_CONFIG"),nB={provide:Pk,deps:[ci],useFactory:tB},rB=new te("MatSelectTrigger"),q_=class{source;value;constructor(t,e){this.source=t,this.value=e}},Tu=(()=>{class r{_viewportRuler=C(Fr);_changeDetectorRef=C($e);_elementRef=C(ve);_dir=C(ri,{optional:!0});_idGenerator=C(zt);_parentFormField=C(Gl,{optional:!0});ngControl=C(Br,{self:!0,optional:!0});_liveAnnouncer=C(fx);_defaultOptions=C(iB,{optional:!0});_initialized=new ne;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let i=this.options.toArray()[e];if(i){let n=this.panel.nativeElement,s=Cx(e,this.options,this.optionGroups),o=i._getHostElement();e===0&&s===1?n.scrollTop=0:n.scrollTop=kx(o.offsetTop,o.offsetHeight,n.scrollTop,n.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new q_(this,e)}_scrollStrategyFactory=C(Pk);_panelOpen=!1;_compareWith=(e,i)=>e===i;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new ne;_errorStateTracker;stateChanges=new ne;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_panelDoneAnimatingStream=new ne;_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;disableRipple=!1;tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator($o.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=wo(()=>{let e=this.options;return e?e.changes.pipe(Ri(e),ns(()=>tn(...e.map(i=>i.onSelectionChange)))):this._initialized.pipe(ns(()=>this.optionSelectionChanges))});openedChange=new fe;_openedStream=this.openedChange.pipe(ai(e=>e),Ot(()=>{}));_closedStream=this.openedChange.pipe(ai(e=>!e),Ot(()=>{}));selectionChange=new fe;valueChange=new fe;constructor(){let e=C(Vd),i=C(al,{optional:!0}),n=C(ll,{optional:!0}),s=C(new ar("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new Lo(e,this.ngControl,n,i,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=s==null?0:parseInt(s)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Bo(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Co(),ot(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(ot(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(ot(this._destroy)).subscribe(e=>{e.added.forEach(i=>i.select()),e.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Ri(null),ot(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),i=this.ngControl;if(e!==this._triggerAriaLabelledBy){let n=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?n.setAttribute("aria-labelledby",e):n.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(this._previousControl!==void 0&&i.disabled!==null&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let i=`${this.id}-panel`;this._trackedModal&&Od(this._trackedModal,"aria-owns",i),Km(e,"aria-owns",i),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;Od(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let i=e.keyCode,n=i===40||i===38||i===37||i===39,s=i===13||i===32,o=this._keyManager;if(!o.isTyping()&&s&&!Wi(e)||(this.multiple||e.altKey)&&n)e.preventDefault(),this.open();else if(!this.multiple){let l=this.selected;o.onKeydown(e);let d=this.selected;d&&l!==d&&this._liveAnnouncer.announce(d.viewValue,1e4)}}_handleOpenKeydown(e){let i=this._keyManager,n=e.keyCode,s=n===40||n===38,o=i.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(!o&&(n===13||n===32)&&i.activeItem&&!Wi(e))e.preventDefault(),i.activeItem._selectViaInteraction();else if(!o&&this._multiple&&n===65&&e.ctrlKey){e.preventDefault();let l=this.options.some(d=>!d.disabled&&!d.selected);this.options.forEach(d=>{d.disabled||(l?d.select():d.deselect())})}else{let l=i.activeItemIndex;i.onKeydown(e),this._multiple&&s&&e.shiftKey&&i.activeItem&&i.activeItemIndex!==l&&i.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(gn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{let i=this._selectOptionByValue(e);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let i=this.options.find(n=>{if(this._selectionModel.isSelected(n))return!1;try{return(n.value!=null||this.canSelectNullableOptions)&&this._compareWith(n.value,e)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof Ja?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new Dd(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=tn(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(ot(e)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),tn(...this.options.map(i=>i._stateChanges)).pipe(ot(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,i){let n=this._selectionModel.isSelected(e);!this.canSelectNullableOptions&&e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(n!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),i&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),i&&this.focus())),n!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((i,n)=>this.sortComparator?this.sortComparator(i,n,e):e.indexOf(i)-e.indexOf(n)),this.stateChanges.next()}}_propagateChanges(e){let i;this.multiple?i=this.selected.map(n=>n.value):i=this.selected?this.selected.value:e,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let i=0;i<this.options.length;i++)if(!this.options.get(i).disabled){e=i;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,i=e?e+" ":"";return this.ariaLabelledby?i+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),i=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-select"]],contentQueries:function(i,n,s){if(i&1&&(Ai(s,rB,5),Ai(s,No,5),Ai(s,af,5)),i&2){let o;Ee(o=Se())&&(n.customTrigger=o.first),Ee(o=Se())&&(n.options=o),Ee(o=Se())&&(n.optionGroups=o)}},viewQuery:function(i,n){if(i&1&&(Le(GN,5),Le($N,5),Le(yf,5)),i&2){let s;Ee(s=Se())&&(n.trigger=s.first),Ee(s=Se())&&(n.panel=s.first),Ee(s=Se())&&(n._overlayDir=s.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(i,n){i&1&&U("keydown",function(o){return n._handleKeydown(o)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),i&2&&(ye("id",n.id)("tabindex",n.disabled?-1:n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-activedescendant",n._getAriaActiveDescendant()),ce("mat-mdc-select-disabled",n.disabled)("mat-mdc-select-invalid",n.errorState)("mat-mdc-select-required",n.required)("mat-mdc-select-empty",n.empty)("mat-mdc-select-multiple",n.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",ge],disableRipple:[2,"disableRipple","disableRipple",ge],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:ti(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ge],placeholder:"placeholder",required:[2,"required","required",ge],multiple:[2,"multiple","multiple",ge],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",ge],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",ti],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",ge]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[et([{provide:jl,useExisting:r},{provide:of,useExisting:r}]),at,Et],ngContentSelectors:YN,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(i,n){if(i&1){let s=ie();Bt(qN),w(0,"div",2,0),U("click",function(){return H(s),W(n.open())}),w(3,"div",3),X(4,XN,2,1,"span",4)(5,QN,3,1,"span",5),E(),w(6,"div",6)(7,"div",7),zi(),w(8,"svg",8),re(9,"path",9),E()()()(),X(10,JN,3,9,"ng-template",10),U("backdropClick",function(){return H(s),W(n.close())})("attach",function(){return H(s),W(n._onAttached())})("detach",function(){return H(s),W(n.close())})}if(i&2){let s=Ut(1);A(3),ye("id",n._valueId),A(),gt(n.empty?4:5),A(6),R("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",n._preferredOverlayOrigin||s)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayWidth",n._overlayWidth)}},dependencies:[Ja,yf,Io],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-form-field-no-animations .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}'],encapsulation:2,data:{animation:[eB.transformPanel]},changeDetection:0})}return r})();var Zl=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({providers:[nB],imports:[ur,lf,Ye,hr,Un,lf,Ye]})}return r})();function sB(r,t){if(r&1&&(w(0,"mat-option",3),F(1),E()),r&2){let e=t.$implicit;R("value",e),A(),Ze(" ",e.role," ")}}function oB(r,t){if(r&1&&(w(0,"span",13),F(1),E()),r&2){let e=T();A(),Ze("Round ",e.currentRound,"")}}function aB(r,t){r&1&&(w(0,"div",25)(1,"mat-icon"),F(2,"close"),E()())}function lB(r,t){if(r&1){let e=ie();w(0,"div",26)(1,"div",27)(2,"div",28)(3,"label"),F(4,"Role"),E(),w(5,"input",29),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.role,n)||(s.role=n),W(n)}),E()(),w(6,"div",30)(7,"div",31)(8,"label"),F(9,"Str"),E(),w(10,"input",32),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.strength,n)||(s.strength=n),W(n)}),E()(),w(11,"div",31)(12,"label"),F(13,"Agi"),E(),w(14,"input",32),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.agility,n)||(s.agility=n),W(n)}),E()(),w(15,"div",31)(16,"label"),F(17,"Wit"),E(),w(18,"input",32),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.wits,n)||(s.wits=n),W(n)}),E()(),w(19,"div",31)(20,"label"),F(21,"Emp"),E(),w(22,"input",32),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.empathy,n)||(s.empathy=n),W(n)}),E()()()(),w(23,"div",33)(24,"label"),F(25,"Skills"),E(),w(26,"input",34),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.skills,n)||(s.skills=n),W(n)}),E()(),w(27,"div",35)(28,"label"),F(29,"Notes"),E(),w(30,"input",36),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.notes,n)||(s.notes=n),W(n)}),E()()()}if(r&2){let e=T().$implicit;A(5),Re("ngModel",e.role),A(5),Re("ngModel",e.strength),A(4),Re("ngModel",e.agility),A(4),Re("ngModel",e.wits),A(4),Re("ngModel",e.empathy),A(4),Re("ngModel",e.skills),A(4),Re("ngModel",e.notes)}}function cB(r,t){if(r&1){let e=ie();w(0,"div",37)(1,"div",38)(2,"label"),F(3,"HP"),E(),w(4,"input",39),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.health,n)||(s.health=n),W(n)}),E()(),w(5,"div",40)(6,"label"),F(7,"Notes"),E(),w(8,"input",41),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.notes,n)||(s.notes=n),W(n)}),E()()()}if(r&2){let e=T().$implicit;A(4),ce("health-zero",e.health!==void 0&&e.health<=0),Re("ngModel",e.health),A(4),Re("ngModel",e.notes)}}function dB(r,t){if(r&1){let e=ie();w(0,"div",14)(1,"div",15)(2,"mat-icon",16),F(3,"drag_indicator"),E(),X(4,aB,3,0,"div",17),w(5,"div",18)(6,"span",19),F(7),E(),w(8,"input",20),Fe("ngModelChange",function(n){let s=H(e).$implicit;return Oe(s.name,n)||(s.name=n),W(n)}),E(),w(9,"div",21)(10,"label"),F(11,"Init"),E(),w(12,"input",22),Fe("ngModelChange",function(n){let s=H(e).$implicit;return Oe(s.initiative,n)||(s.initiative=n),W(n)}),E()(),w(13,"button",23),U("click",function(){let n=H(e).index,s=T();return W(s.removeCombatant(n))}),w(14,"mat-icon"),F(15,"close"),E()()(),X(16,lB,31,7,"div",24)(17,cB,9,4,"ng-template",null,0,sn),E()()}if(r&2){let e=t.$implicit,i=t.index,n=Ut(18),s=T();ce("active",i===s.activeIndex)("defeated",(s.settings==null?null:s.settings.gameMode)!=="mutant_year_zero"&&e.health!==void 0&&e.health<=0),A(4),R("ngIf",(s.settings==null?null:s.settings.gameMode)!=="mutant_year_zero"&&e.health!==void 0&&e.health<=0),A(3),Te(i===s.activeIndex?"\u25B6":""),A(),Re("ngModel",e.name),A(4),Re("ngModel",e.initiative),A(4),R("ngIf",(s.settings==null?null:s.settings.gameMode)==="mutant_year_zero")("ngIfElse",n)}}function hB(r,t){if(r&1){let e=ie();w(0,"button",10),U("click",function(){H(e);let n=T();return W(n.sortByInitiative())}),F(1," Sort "),E()}if(r&2){let e=T();R("disabled",e.combatants.length===0)}}var Y_=class r{constructor(t,e){this.dialogRef=t;this.dialogData=e}selectedTemplate="default";availableTemplates=[];mutantYearZeroTemplates=[{name:"Vollstrecker",role:"Vollstrecker",strength:5,agility:3,wits:2,empathy:2,skills:"Einsch\xFCchtern 3, Pr\xFCgeln 2, Kraftakt 1"},{name:"Schrauber",role:"Schrauber",strength:2,agility:2,wits:5,empathy:3,skills:"Zusammenschustern 3, Begreifen 2, Auskundschaften 1"},{name:"Pirscher",role:"Pirscher",strength:2,agility:5,wits:3,empathy:2,skills:"Pfadfinder 3, Schie\xDFen 2, Schleichen 1"},{name:"Hehler",role:"Hehler",strength:2,agility:2,wits:3,empathy:5,skills:"Aushandeln 3, Manipulieren 2, Bewegen 1"},{name:"Hundef\xFChrer",role:"Hundef\xFChrer",strength:3,agility:4,wits:3,empathy:2,skills:"Abrichten 3, Schie\xDFen 2, Schleichen 1"},{name:"Chronist",role:"Chronist",strength:2,agility:2,wits:4,empathy:4,skills:"Inspirieren 3, Begreifen 2, Heilen 1"},{name:"Boss",role:"Boss",strength:3,agility:3,wits:2,empathy:4,skills:"Befehligen 3, Schie\xDFen 2, Pr\xFCgeln 1"},{name:"Sklave",role:"Sklave",strength:4,agility:4,wits:2,empathy:2,skills:"Absch\xFCtteln 3, Erdulden 2, Pr\xFCgeln 1"},{name:"Keine Rolle",role:"Keine Rolle",strength:3,agility:3,wits:3,empathy:3,skills:"Rang 2 in einer Fertigkeit"}];ngOnInit(){this.availableTemplates=this.dialogData.isMutantYearZero?this.mutantYearZeroTemplates:[]}onCancel(){this.dialogRef.close()}onConfirm(){this.dialogRef.close(this.selectedTemplate)}static \u0275fac=function(e){return new(e||r)(we(Nn),we(Xs))};static \u0275cmp=oe({type:r,selectors:[["app-character-template-dialog"]],decls:15,vars:3,consts:[["mat-dialog-title",""],[1,"full-width"],[3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","",3,"click"],["mat-button","","color","primary",3,"click"]],template:function(e,i){e&1&&(w(0,"h2",0),F(1,"Charakter ausw\xE4hlen"),E(),w(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"mat-label"),F(5,"Template"),E(),w(6,"mat-select",2),Fe("ngModelChange",function(s){return Oe(i.selectedTemplate,s)||(i.selectedTemplate=s),s}),w(7,"mat-option",3),F(8,"Default"),E(),X(9,sB,2,2,"mat-option",4),E()()(),w(10,"mat-dialog-actions",5)(11,"button",6),U("click",function(){return i.onCancel()}),F(12,"Abbrechen"),E(),w(13,"button",7),U("click",function(){return i.onConfirm()}),F(14,"Best\xE4tigen"),E()()),e&2&&(A(6),Re("ngModel",i.selectedTemplate),A(),R("value","default"),A(2),R("ngForOf",i.availableTemplates))},dependencies:[lt,Lt,jt,si,Kt,yn,bs,Wo,vs,wt,gi,Zl,bu,ra,Tu,No,Un],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]})},Iu=class r{constructor(t,e){this.dialog=t;this.cdr=e}settings;combatants=[];activeIndex=0;currentRound=1;get sortedCombatants(){return this.settings?.autoSort?[...this.combatants].sort((t,e)=>(e.initiative||0)-(t.initiative||0)):this.combatants}ngOnInit(){this.settings?.combatants&&(this.combatants=this.settings.combatants,this.activeIndex=this.settings.activeIndex||0,this.currentRound=this.settings.currentRound||1),this.settings||(this.settings={}),this.settings.gameMode=this.settings.gameMode||"general",this.settings.showRoundCounter=this.settings.showRoundCounter??!0,this.settings.autoSort=this.settings.autoSort??!1,this.settings.defaultInitiative=this.settings.defaultInitiative??0}addCombatant(){return q(this,null,function*(){this.dialog.open(Y_,{width:"300px",data:{isMutantYearZero:this.settings?.gameMode==="mutant_year_zero"}}).afterClosed().subscribe(e=>{if(e){let i=this.settings.defaultInitiative!==void 0?this.settings.defaultInitiative:0,n;if(e==="default")n={id:Date.now().toString(),name:"",notes:"",initiative:i},this.settings?.gameMode==="mutant_year_zero"?n=Ue(J({},n),{role:"",strength:0,agility:0,wits:0,empathy:0,skills:""}):n.health=100;else{let s=e;n={id:Date.now().toString(),name:s.name,notes:"",initiative:i,role:s.role,strength:s.strength,agility:s.agility,wits:s.wits,empathy:s.empathy,skills:s.skills}}this.combatants.push(n),this.saveState(),this.cdr.detectChanges()}})})}removeCombatant(t){this.combatants.splice(t,1),this.activeIndex>=this.combatants.length&&(this.activeIndex=Math.max(0,this.combatants.length-1)),this.saveState(),this.cdr.detectChanges()}nextTurn(){this.combatants.length!==0&&(this.activeIndex++,this.activeIndex>=this.combatants.length&&(this.activeIndex=0,this.currentRound++),this.saveState(),this.cdr.detectChanges())}reset(){confirm("Are you sure you want to reset the combat tracker?")&&(this.activeIndex=0,this.currentRound=1,this.saveState(),this.cdr.detectChanges())}sortByInitiative(){this.combatants.sort((t,e)=>(e.initiative||0)-(t.initiative||0)),this.saveState(),this.cdr.detectChanges()}drop(t){t.previousIndex!==t.currentIndex&&(gh(this.combatants,t.previousIndex,t.currentIndex),this.activeIndex===t.previousIndex?this.activeIndex=t.currentIndex:this.activeIndex>t.previousIndex&&this.activeIndex<=t.currentIndex?this.activeIndex--:this.activeIndex<t.previousIndex&&this.activeIndex>=t.currentIndex&&this.activeIndex++,this.saveState(),this.cdr.detectChanges())}saveState(){this.settings&&(this.settings.combatants=this.combatants,this.settings.activeIndex=this.activeIndex,this.settings.currentRound=this.currentRound)}static \u0275fac=function(e){return new(e||r)(we(_s),we($e))};static \u0275cmp=oe({type:r,selectors:[["app-combat-tracker"]],inputs:{settings:"settings"},decls:17,vars:5,consts:[["generalMode",""],[1,"combat-tracker"],[1,"tracker-header"],[1,"header-content"],["class","round-counter",4,"ngIf"],["mat-button","","color","primary",1,"add-btn",3,"click"],[1,"list-container"],["cdkDropList","",1,"combatant-list",3,"cdkDropListDropped"],["class","combatant-card","cdkDrag","",3,"active","defeated",4,"ngFor","ngForOf"],[1,"tracker-controls"],["mat-button","",1,"control-btn",3,"click","disabled"],["mat-button","","class","control-btn",3,"disabled","click",4,"ngIf"],["mat-button","","color","warn",1,"control-btn","reset-btn",3,"click","disabled"],[1,"round-counter"],["cdkDrag","",1,"combatant-card"],[1,"card-content"],["cdkDragHandle","",1,"drag-handle"],["class","defeated-icon",4,"ngIf"],[1,"combatant-header"],[1,"turn-marker"],["placeholder","Name",1,"name-input",3,"ngModelChange","ngModel"],[1,"init-group"],["type","number","placeholder","0",1,"initiative-input",3,"ngModelChange","ngModel"],["mat-icon-button","","color","warn",1,"remove-btn",3,"click"],["class","mutant-mode",4,"ngIf","ngIfElse"],[1,"defeated-icon"],[1,"mutant-mode"],[1,"mutant-row"],[1,"field-group","role-group"],["type","text","placeholder","Role",3,"ngModelChange","ngModel"],[1,"attributes-group"],[1,"attr-input"],["type","number","placeholder","0",3,"ngModelChange","ngModel"],[1,"field-group","skills-group"],["type","text","placeholder","Skills",3,"ngModelChange","ngModel"],[1,"field-group","notes-group"],["type","text","placeholder","Notes",3,"ngModelChange","ngModel"],[1,"general-mode"],[1,"health-section"],["type","number","placeholder","0",1,"health-input",3,"ngModelChange","ngModel"],[1,"notes-section"],["placeholder","Notes",1,"notes-input",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(w(0,"div",1)(1,"div",2)(2,"div",3),X(3,oB,2,1,"span",4),w(4,"button",5),U("click",function(){return i.addCombatant()}),w(5,"mat-icon"),F(6,"add"),E(),F(7," Add "),E()()(),w(8,"div",6)(9,"div",7),U("cdkDropListDropped",function(s){return i.drop(s)}),X(10,dB,19,10,"div",8),E()(),w(11,"div",9)(12,"button",10),U("click",function(){return i.nextTurn()}),F(13," Next Turn "),E(),X(14,hB,2,1,"button",11),w(15,"button",12),U("click",function(){return i.reset()}),F(16," Reset "),E()()()),e&2&&(A(3),R("ngIf",i.settings==null?null:i.settings.showRoundCounter),A(7),R("ngForOf",i.sortedCombatants),A(2),R("disabled",i.combatants.length===0),A(2),R("ngIf",!(i.settings!=null&&i.settings.autoSort)),A(),R("disabled",i.combatants.length===0))},dependencies:[lt,Lt,Vt,jt,Xt,Zs,si,Kt,wt,gi,Ei,St,Ht,yn,vh,cC,bh,_h,Zl,Un],styles:[".combat-tracker[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;box-sizing:border-box;font-size:.9em;color:var(--text-primary)}.tracker-header[_ngcontent-%COMP%]{flex:0 0 auto;padding:8px;border-bottom:var(--glass-border);background:var(--header-bg)}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.round-counter[_ngcontent-%COMP%]{font-weight:500;color:var(--accent-color);font-size:1.1em}.list-container[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;overflow-x:hidden;min-height:0;padding:8px}.combatant-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.combatant-card[_ngcontent-%COMP%]{background:var(--panel-bg);border:var(--glass-border);border-radius:4px;position:relative;width:100%;box-sizing:border-box;transition:all .3s ease;padding:8px;-webkit-backdrop-filter:var(--glass-backdrop);backdrop-filter:var(--glass-backdrop)}.combatant-card.active[_ngcontent-%COMP%]{background:#40c4ff26;border-color:var(--accent-color);box-shadow:0 0 10px #40c4ff33}.combatant-card.defeated[_ngcontent-%COMP%]{opacity:.7;background:#0006;border-color:var(--danger-color)}.card-content[_ngcontent-%COMP%]{position:relative;padding-left:24px}.drag-handle[_ngcontent-%COMP%]{position:absolute;left:-4px;top:50%;transform:translateY(-50%);cursor:move;color:var(--text-secondary);font-size:18px;opacity:.5}.drag-handle[_ngcontent-%COMP%]:hover{opacity:1;color:var(--text-primary)}.defeated-icon[_ngcontent-%COMP%]{position:absolute;right:10px;top:50%;transform:translateY(-50%);color:var(--danger-color);pointer-events:none;opacity:.8}.defeated-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.combatant-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px}.turn-marker[_ngcontent-%COMP%]{width:16px;text-align:center;color:var(--accent-color);font-weight:700}.name-input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{background:var(--input-bg);border:var(--input-border);color:var(--text-primary);border-radius:4px;padding:4px 8px}.name-input[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-color)}.name-input[_ngcontent-%COMP%]{flex:1;min-width:0;font-weight:500}.init-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.init-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8em;color:var(--text-secondary)}.initiative-input[_ngcontent-%COMP%]{width:40px;text-align:center}.mutant-mode[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.mutant-row[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap}.role-group[_ngcontent-%COMP%]{flex:1;min-width:120px;display:flex;align-items:center;gap:4px}.role-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8em;color:var(--text-secondary);white-space:nowrap}.role-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:0}.attributes-group[_ngcontent-%COMP%]{display:flex;gap:6px}.attr-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px}.attr-input[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8em;color:var(--text-secondary)}.attr-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center}.skills-group[_ngcontent-%COMP%], .notes-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.skills-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .notes-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8em;color:var(--text-secondary);white-space:nowrap}.skills-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .notes-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:0}.general-mode[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.health-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.health-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8em;color:var(--text-secondary)}.health-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;text-align:center}.health-section[_ngcontent-%COMP%]   input.health-zero[_ngcontent-%COMP%]{color:var(--danger-color);font-weight:700;border-color:var(--danger-color)}.notes-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.notes-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.8em;color:var(--text-secondary)}.notes-section[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;min-width:0}.tracker-controls[_ngcontent-%COMP%]{display:flex;gap:8px;padding:8px;border-top:var(--glass-border);background:var(--header-bg);justify-content:flex-end}.control-btn[_ngcontent-%COMP%]{color:var(--text-primary);border:1px solid rgba(255,255,255,.2)}.control-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:var(--accent-color);color:#fff}.control-btn.reset-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:var(--danger-color)}.remove-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--text-secondary)}.remove-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:var(--danger-color)}"]})};var uB=["knob"],pB=["valueIndicatorContainer"];function mB(r,t){if(r&1&&(w(0,"div",2,1)(2,"div",5)(3,"span",6),F(4),E()()()),r&2){let e=T();A(4),Te(e.valueIndicatorText)}}var fB=["trackActive"],gB=["*"];function _B(r,t){if(r&1&&re(0,"div"),r&2){let e=t.$implicit,i=t.$index,n=T(3);rn(e===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),fi("transform",n._calcTickMarkTransform(i))}}function bB(r,t){if(r&1&&my(0,_B,1,4,"div",8,py),r&2){let e=T(2);fy(e._tickMarks)}}function vB(r,t){if(r&1&&(w(0,"div",6,1),X(2,bB,2,0),E()),r&2){let e=T();A(2),gt(e._cachedWidth?2:-1)}}function yB(r,t){if(r&1&&re(0,"mat-slider-visual-thumb",7),r&2){let e=T();R("discrete",e.discrete)("thumbPosition",1)("valueIndicatorText",e.startValueIndicatorText)}}var Ne=function(r){return r[r.START=1]="START",r[r.END=2]="END",r}(Ne||{}),ca=function(r){return r[r.ACTIVE=0]="ACTIVE",r[r.INACTIVE=1]="INACTIVE",r}(ca||{}),X_=new te("_MatSlider"),Ok=new te("_MatSliderThumb"),xB=new te("_MatSliderRangeThumb"),Fk=new te("_MatSliderVisualThumb");var wB=(()=>{class r{_cdr=C($e);_ngZone=C(ke);_slider=C(X_);_renderer=C(xi);_listenerCleanups;discrete;thumbPosition;valueIndicatorText;_ripple;_knob;_valueIndicatorContainer;_sliderInput;_sliderInputEl;_hoverRippleRef;_focusRippleRef;_activeRippleRef;_isHovered=!1;_isActive=!1;_isValueIndicatorVisible=!1;_hostElement=C(ve).nativeElement;_platform=C(ht);constructor(){}ngAfterViewInit(){let e=this._slider._getInput(this.thumbPosition);e&&(this._ripple.radius=24,this._sliderInput=e,this._sliderInputEl=this._sliderInput._hostElement,this._ngZone.runOutsideAngular(()=>{let i=this._sliderInputEl,n=this._renderer;this._listenerCleanups=[n.listen(i,"pointermove",this._onPointerMove),n.listen(i,"pointerdown",this._onDragStart),n.listen(i,"pointerup",this._onDragEnd),n.listen(i,"pointerleave",this._onMouseLeave),n.listen(i,"focus",this._onFocus),n.listen(i,"blur",this._onBlur)]}))}ngOnDestroy(){this._listenerCleanups?.forEach(e=>e())}_onPointerMove=e=>{if(this._sliderInput._isFocused)return;let i=this._hostElement.getBoundingClientRect(),n=this._slider._isCursorOnSliderThumb(e,i);this._isHovered=n,n?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)};_onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)};_onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")};_onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")};_onDragStart=e=>{e.button===0&&(this._isActive=!0,this._showActiveRipple())};_onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()};_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(e){return e?.state===Ui.FADING_IN||e?.state===Ui.VISIBLE}_showRipple(e,i){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===Ne.START?Ne.END:Ne.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!i)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:e,centered:!0,persistent:!0})}_hideRipple(e){if(e?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let i=this._getSibling();i._isShowingAnyRipple()||(this._hideValueIndicator(),i._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===Ne.START?Ne.END:Ne.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(i,n){if(i&1&&(Le(Rr,5),Le(uB,5),Le(pB,5)),i&2){let s;Ee(s=Se())&&(n._ripple=s.first),Ee(s=Se())&&(n._knob=s.first),Ee(s=Se())&&(n._valueIndicatorContainer=s.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[et([{provide:Fk,useExisting:r}])],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(i,n){i&1&&(X(0,mB,5,1,"div",2),re(1,"div",3,0)(3,"div",4)),i&2&&(gt(n.discrete?0:-1),A(3),R("matRippleDisabled",!0))},dependencies:[Rr],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0})}return r})(),Lk=(()=>{class r{_ngZone=C(ke);_cdr=C($e);_elementRef=C(ve);_dir=C(ri,{optional:!0});_globalRippleOptions=C(zd,{optional:!0});_trackActive;_thumbs;_input;_inputs;get disabled(){return this._disabled}set disabled(e){this._disabled=e;let i=this._getInput(Ne.END),n=this._getInput(Ne.START);i&&(i.disabled=this._disabled),n&&(n.disabled=this._disabled)}_disabled=!1;get discrete(){return this._discrete}set discrete(e){this._discrete=e,this._updateValueIndicatorUIs()}_discrete=!1;showTickMarks=!1;get min(){return this._min}set min(e){let i=isNaN(e)?this._min:e;this._min!==i&&this._updateMin(i)}_min=0;color;disableRipple=!1;_updateMin(e){let i=this._min;this._min=e,this._isRange?this._updateMinRange({old:i,new:e}):this._updateMinNonRange(e),this._onMinMaxOrStepChange()}_updateMinRange(e){let i=this._getInput(Ne.END),n=this._getInput(Ne.START),s=i.value,o=n.value;n.min=e.new,i.min=Math.max(e.new,n.value),n.max=Math.min(i.max,i.value),n._updateWidthInactive(),i._updateWidthInactive(),e.new<e.old?this._onTranslateXChangeBySideEffect(i,n):this._onTranslateXChangeBySideEffect(n,i),s!==i.value&&this._onValueChange(i),o!==n.value&&this._onValueChange(n)}_updateMinNonRange(e){let i=this._getInput(Ne.END);if(i){let n=i.value;i.min=e,i._updateThumbUIByValue(),this._updateTrackUI(i),n!==i.value&&this._onValueChange(i)}}get max(){return this._max}set max(e){let i=isNaN(e)?this._max:e;this._max!==i&&this._updateMax(i)}_max=100;_updateMax(e){let i=this._max;this._max=e,this._isRange?this._updateMaxRange({old:i,new:e}):this._updateMaxNonRange(e),this._onMinMaxOrStepChange()}_updateMaxRange(e){let i=this._getInput(Ne.END),n=this._getInput(Ne.START),s=i.value,o=n.value;i.max=e.new,n.max=Math.min(e.new,i.value),i.min=n.value,i._updateWidthInactive(),n._updateWidthInactive(),e.new>e.old?this._onTranslateXChangeBySideEffect(n,i):this._onTranslateXChangeBySideEffect(i,n),s!==i.value&&this._onValueChange(i),o!==n.value&&this._onValueChange(n)}_updateMaxNonRange(e){let i=this._getInput(Ne.END);if(i){let n=i.value;i.max=e,i._updateThumbUIByValue(),this._updateTrackUI(i),n!==i.value&&this._onValueChange(i)}}get step(){return this._step}set step(e){let i=isNaN(e)?this._step:e;this._step!==i&&this._updateStep(i)}_step=1;_updateStep(e){this._step=e,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let e=this._getInput(Ne.END),i=this._getInput(Ne.START),n=e.value,s=i.value,o=i.value;e.min=this._min,i.max=this._max,e.step=this._step,i.step=this._step,this._platform.SAFARI&&(e.value=e.value,i.value=i.value),e.min=Math.max(this._min,i.value),i.max=Math.min(this._max,e.value),i._updateWidthInactive(),e._updateWidthInactive(),e.value<o?this._onTranslateXChangeBySideEffect(i,e):this._onTranslateXChangeBySideEffect(e,i),n!==e.value&&this._onValueChange(e),s!==i.value&&this._onValueChange(i)}_updateStepNonRange(){let e=this._getInput(Ne.END);if(e){let i=e.value;e.step=this._step,this._platform.SAFARI&&(e.value=e.value),e._updateThumbUIByValue(),i!==e.value&&this._onValueChange(e)}}displayWith=e=>`${e}`;_tickMarks;_noopAnimations;_dirChangeSubscription;_resizeObserver;_cachedWidth;_cachedLeft;_rippleRadius=24;startValueIndicatorText="";endValueIndicatorText="";_endThumbTransform;_startThumbTransform;_isRange=!1;_isRtl=!1;_hasViewInitialized=!1;_tickMarkTrackWidth=0;_hasAnimation=!1;_resizeTimer=null;_platform=C(ht);constructor(){C(ii).load(Qn);let e=C(Ft,{optional:!0});this._noopAnimations=e==="NoopAnimations",this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl")}_knobRadius=8;_inputPadding;ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let e=this._getInput(Ne.END),i=this._getInput(Ne.START);this._isRange=!!e&&!!i,this._cdr.detectChanges();let n=this._getThumb(Ne.END);this._rippleRadius=n._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(e,i):this._initUINonRange(e),this._updateTrackUI(e),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(e){e.initProps(),e.initUI(),this._updateValueIndicatorUI(e),this._hasViewInitialized=!0,e._updateThumbUIByValue()}_initUIRange(e,i){e.initProps(),e.initUI(),i.initProps(),i.initUI(),e._updateMinMax(),i._updateMinMax(),e._updateStaticStyles(),i._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,e._updateThumbUIByValue(),i._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir?.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let e=this._getInput(Ne.END),i=this._getInput(Ne.START);e._setIsLeftThumb(),i._setIsLeftThumb(),e.translateX=e._calcTranslateXByValue(),i.translateX=i._calcTranslateXByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateWidthInactive(),i._updateWidthInactive(),e._updateThumbUIByValue(),i._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(Ne.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(Ne.START)._isActive||this._getThumb(Ne.END)._isActive}_getValue(e=Ne.END){let i=this._getInput(e);return i?i.value:this.min}_skipUpdate(){return!!(this._getInput(Ne.START)?._skipUIUpdate||this._getInput(Ne.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(e){let i=this._trackActive.nativeElement.style;i.left=e.left,i.right=e.right,i.transformOrigin=e.transformOrigin,i.transform=e.transform}_calcTickMarkTransform(e){let i=e*(this._tickMarkTrackWidth/(this._tickMarks.length-1));return`translateX(${this._isRtl?this._cachedWidth-6-i:i}px`}_onTranslateXChange(e){this._hasViewInitialized&&(this._updateThumbUI(e),this._updateTrackUI(e),this._updateOverlappingThumbUI(e))}_onTranslateXChangeBySideEffect(e,i){this._hasViewInitialized&&(e._updateThumbUIByValue(),i._updateThumbUIByValue())}_onValueChange(e){this._hasViewInitialized&&(this._updateValueIndicatorUI(e),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let e=this._getInput(Ne.END),i=this._getInput(Ne.START);e._updateThumbUIByValue(),i._updateThumbUIByValue(),e._updateStaticStyles(),i._updateStaticStyles(),e._updateMinMax(),i._updateMinMax(),e._updateWidthInactive(),i._updateWidthInactive()}else{let e=this._getInput(Ne.END);e&&e._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_thumbsOverlap=!1;_areThumbsOverlapping(){let e=this._getInput(Ne.START),i=this._getInput(Ne.END);return!e||!i?!1:i.translateX-e.translateX<20}_updateOverlappingThumbClassNames(e){let i=e.getSibling(),n=this._getThumb(e.thumbPosition);this._getThumb(i.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),n._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(e){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(e))}_updateThumbUI(e){if(this._skipUpdate())return;let i=this._getThumb(e.thumbPosition===Ne.END?Ne.END:Ne.START);i._hostElement.style.transform=`translateX(${e.translateX}px)`}_updateValueIndicatorUI(e){if(this._skipUpdate())return;let i=this.displayWith(e.value);if(this._hasViewInitialized?e._valuetext.set(i):e._hostElement.setAttribute("aria-valuetext",i),this.discrete){e.thumbPosition===Ne.START?this.startValueIndicatorText=i:this.endValueIndicatorText=i;let n=this._getThumb(e.thumbPosition);i.length<3?n._hostElement.classList.add("mdc-slider__thumb--short-value"):n._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let e=this._getInput(Ne.END),i=this._getInput(Ne.START);e&&this._updateValueIndicatorUI(e),i&&this._updateValueIndicatorUI(i)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let e=this._step&&this._step>0?this._step:1,n=(Math.floor(this.max/e)*e-this.min)/(this.max-this.min);this._tickMarkTrackWidth=(this._cachedWidth-6)*n}_updateTrackUI(e){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(e):this._updateTrackUINonRange(e))}_updateTrackUIRange(e){let i=e.getSibling();if(!i||!this._cachedWidth)return;let n=Math.abs(i.translateX-e.translateX)/this._cachedWidth;e._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-i.translateX}px`,transformOrigin:"right",transform:`scaleX(${n})`}):this._setTrackActiveStyles({left:`${i.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${n})`})}_updateTrackUINonRange(e){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-e.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${e.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let e=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(e):this._updateTickMarkUINonRange(e)}_updateTickMarkUINonRange(e){let i=this._getValue(),n=Math.max(Math.round((i-this.min)/e),0)+1,s=Math.max(Math.round((this.max-i)/e),0)-1;this._isRtl?n++:s++,this._tickMarks=Array(n).fill(ca.ACTIVE).concat(Array(s).fill(ca.INACTIVE))}_updateTickMarkUIRange(e){let i=this._getValue(),n=this._getValue(Ne.START),s=Math.max(Math.round((n-this.min)/e),0),o=Math.max(Math.round((i-n)/e)+1,0),l=Math.max(Math.round((this.max-i)/e),0);this._tickMarks=Array(s).fill(ca.INACTIVE).concat(Array(o).fill(ca.ACTIVE),Array(l).fill(ca.INACTIVE))}_getInput(e){if(e===Ne.END&&this._input)return this._input;if(this._inputs?.length)return e===Ne.START?this._inputs.first:this._inputs.last}_getThumb(e){return e===Ne.END?this._thumbs?.last:this._thumbs?.first}_setTransition(e){this._hasAnimation=!this._platform.IOS&&e&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(e,i){let n=i.width/2,s=i.x+n,o=i.y+n,l=e.clientX-s,d=e.clientY-o;return Math.pow(l,2)+Math.pow(d,2)<Math.pow(n,2)}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-slider"]],contentQueries:function(i,n,s){if(i&1&&(Ai(s,Ok,5),Ai(s,xB,4)),i&2){let o;Ee(o=Se())&&(n._input=o.first),Ee(o=Se())&&(n._inputs=o)}},viewQuery:function(i,n){if(i&1&&(Le(fB,5),Le(Fk,5)),i&2){let s;Ee(s=Se())&&(n._trackActive=s.first),Ee(s=Se())&&(n._thumbs=s)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(i,n){i&2&&(rn("mat-"+(n.color||"primary")),ce("mdc-slider--range",n._isRange)("mdc-slider--disabled",n.disabled)("mdc-slider--discrete",n.discrete)("mdc-slider--tick-marks",n.showTickMarks)("_mat-animation-noopable",n._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",ge],discrete:[2,"discrete","discrete",ge],showTickMarks:[2,"showTickMarks","showTickMarks",ge],min:[2,"min","min",ti],color:"color",disableRipple:[2,"disableRipple","disableRipple",ge],max:[2,"max","max",ti],step:[2,"step","step",ti],displayWith:"displayWith"},exportAs:["matSlider"],features:[et([{provide:X_,useExisting:r}]),at],ngContentSelectors:gB,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(i,n){i&1&&(Bt(),Ke(0),w(1,"div",2),re(2,"div",3),w(3,"div",4),re(4,"div",5,0),E(),X(6,vB,3,1,"div",6),E(),X(7,yB,1,3,"mat-slider-visual-thumb",7),re(8,"mat-slider-visual-thumb",7)),i&2&&(A(6),gt(n.showTickMarks?6:-1),A(),gt(n._isRange?7:-1),A(),R("discrete",n.discrete)("thumbPosition",2)("valueIndicatorText",n.endValueIndicatorText))},dependencies:[wB],styles:['.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height, 4px)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-sys-corner-full));height:var(--mdc-slider-active-track-height, 4px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 4px))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-sys-primary));border-top-width:var(--mdc-slider-active-track-height, 4px)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-sys-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-sys-surface-variant));height:var(--mdc-slider-inactive-track-height, 4px);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-sys-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-sys-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform, translateX(-50%) rotate(-45deg))}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-sys-on-primary));width:var(--mat-slider-value-indicator-width, 28px);height:var(--mat-slider-value-indicator-height, 28px);padding:var(--mat-slider-value-indicator-padding, 0);opacity:var(--mat-slider-value-indicator-opacity, 1);border-radius:var(--mat-slider-value-indicator-border-radius, 50% 50% 50% 0)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display, none);border-top-color:var(--mdc-slider-label-container-color, var(--mat-sys-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media(forced-colors: active){.mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width, 28px);transform:var(--mat-slider-value-indicator-text-transform, rotate(45deg));font-family:var(--mdc-slider-label-label-text-font, var(--mat-sys-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-sys-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-sys-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-sys-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-sys-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-width:calc(var(--mdc-slider-handle-height, 20px)/2) calc(var(--mdc-slider-handle-width, 20px)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-sys-level1));background-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-handle-color, var(--mat-sys-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-sys-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-sys-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-sys-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-sys-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-sys-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size, 2px);height:var(--mdc-slider-with-tick-marks-container-size, 2px);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-sys-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-sys-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-sys-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.38);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-sys-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-sys-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 5%, transparent))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-primary) 20%, transparent))}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return r})();var CB={provide:Vr,useExisting:Mi(()=>K_),multi:!0};var K_=(()=>{class r{_ngZone=C(ke);_elementRef=C(ve);_cdr=C($e);_slider=C(X_);_platform=C(ht);_listenerCleanups;get value(){return ti(this._hostElement.value,0)}set value(e){e=isNaN(e)?0:e;let i=e+"";if(!this._hasSetInitialValue){this._initialValue=i;return}this._isActive||this._setValue(i)}_setValue(e){this._hostElement.value=e,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}valueChange=new fe;dragStart=new fe;dragEnd=new fe;get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(e){this._translateX=e}_translateX;thumbPosition=Ne.END;get min(){return ti(this._hostElement.min,0)}set min(e){this._hostElement.min=e+"",this._cdr.detectChanges()}get max(){return ti(this._hostElement.max,0)}set max(e){this._hostElement.max=e+"",this._cdr.detectChanges()}get step(){return ti(this._hostElement.step,0)}set step(e){this._hostElement.step=e+"",this._cdr.detectChanges()}get disabled(){return ge(this._hostElement.disabled)}set disabled(e){this._hostElement.disabled=e,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_hostElement=this._elementRef.nativeElement;_valuetext=_n("");_knobRadius=8;_tickMarkOffset=3;_isActive=!1;_isFocused=!1;_setIsFocused(e){this._isFocused=e}_hasSetInitialValue=!1;_initialValue;_formControl;_destroyed=new ne;_skipUIUpdate=!1;_onChangeFn;_onTouchedFn=()=>{};_isControlInitialized=!1;constructor(){let e=C(xi);this._ngZone.runOutsideAngular(()=>{this._listenerCleanups=[e.listen(this._hostElement,"pointerdown",this._onPointerDown.bind(this)),e.listen(this._hostElement,"pointermove",this._onPointerMove.bind(this)),e.listen(this._hostElement,"pointerup",this._onPointerUp.bind(this))]})}ngOnDestroy(){this._listenerCleanups.forEach(e=>e()),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(e){if(!(this.disabled||e.button!==0)){if(this._platform.IOS){let i=this._slider._isCursorOnSliderThumb(e,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=i,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(e,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(e),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(e){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(e)},0)}_fixValue(e){let i=e.clientX-this._slider._cachedLeft,n=this._slider._cachedWidth,s=this._slider.step===0?1:this._slider.step,o=Math.floor((this._slider.max-this._slider.min)/s),l=this._slider._isRtl?1-i/n:i/n,h=Math.round(l*o)/o*(this._slider.max-this._slider.min)+this._slider.min,u=Math.round(h/s)*s,m=this.value;if(u===m){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation});return}this.value=u,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(e,{withAnimation:this._slider._hasAnimation})}_onPointerMove(e){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(e)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(e){let i=this._tickMarkOffset,n=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(e,n),i)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(e){return e.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(e){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(e)}_updateThumbUIByPointerEvent(e,i){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(e)),this._updateThumbUI(i)}_updateThumbUI(e){this._slider._setTransition(!!e?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(e){(this._isControlInitialized||e!==null)&&(this.value=e)}registerOnChange(e){this._onChangeFn=e,this._isControlInitialized=!0}registerOnTouched(e){this._onTouchedFn=e}setDisabledState(e){this.disabled=e}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(i,n){i&1&&U("change",function(){return n._onChange()})("input",function(){return n._onInput()})("blur",function(){return n._onBlur()})("focus",function(){return n._onFocus()}),i&2&&ye("aria-valuetext",n._valuetext())},inputs:{value:[2,"value","value",ti]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[et([CB,{provide:Ok,useExisting:r}]),at]})}return r})();var Nk=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye,Or]})}return r})();var Du=class r{settings;currentHour=12;DAY_COLOR="#FFD700";NIGHT_COLOR="#0d1117";ngOnInit(){this.settings?.hour!==void 0&&(this.currentHour=this.settings.hour)}onTimeChange(){this.settings&&(this.settings.hour=this.currentHour)}formatTime(){return`${this.currentHour.toString().padStart(2,"0")}:00`}getCurrentBackgroundColor(){let t=this.currentHour;if(t>=20||t<5)return this.NIGHT_COLOR;if(t>=5&&t<8){let e=(t-5)/3;return this.interpolateColor(this.NIGHT_COLOR,this.DAY_COLOR,e)}if(t>=8&&t<17)return this.DAY_COLOR;if(t>=17&&t<20){let e=(t-17)/3;return this.interpolateColor(this.DAY_COLOR,this.NIGHT_COLOR,e)}return this.DAY_COLOR}getTextColor(){let t=this.getCurrentBackgroundColor();return this.isColorDark(t)?"#FFFFFF":"#000000"}interpolateColor(t,e,i){let n=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),o=parseInt(t.slice(5,7),16),l=parseInt(e.slice(1,3),16),d=parseInt(e.slice(3,5),16),h=parseInt(e.slice(5,7),16),u=Math.round(n+(l-n)*i),m=Math.round(s+(d-s)*i),f=Math.round(o+(h-o)*i);return`#${u.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}${f.toString(16).padStart(2,"0")}`}isColorDark(t){let e=parseInt(t.slice(1,3),16),i=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16);return(.299*e+.587*i+.114*n)/255<.5}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=oe({type:r,selectors:[["app-daytime-tracker"]],inputs:{settings:"settings"},decls:17,vars:11,consts:[[1,"daytime-tracker"],[1,"main-row"],[1,"time-icon"],[1,"slider-container"],[1,"time-periods"],[1,"period","night",2,"width","25%"],[1,"period","dawn",2,"width","12.5%"],[1,"period","day",2,"width","37.5%"],[1,"period","dusk",2,"width","12.5%"],[1,"period","night",2,"width","12.5%"],[1,"time-slider",3,"min","max","step","discrete","showTickMarks"],["matSliderThumb","",3,"ngModelChange","ngModel"],[1,"current-time"]],template:function(e,i){e&1&&(w(0,"div",0)(1,"div",1)(2,"mat-icon",2),F(3,"wb_sunny"),E(),w(4,"div",3)(5,"div",4),re(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),E(),w(11,"mat-slider",10)(12,"input",11),Fe("ngModelChange",function(s){return Oe(i.currentHour,s)||(i.currentHour=s),s}),U("ngModelChange",function(){return i.onTimeChange()}),E()()(),w(13,"span",12),F(14),E(),w(15,"mat-icon",2),F(16,"bedtime"),E()()()),e&2&&(A(11),R("min",0)("max",23)("step",1)("discrete",!0)("showTickMarks",!0),A(),Re("ngModel",i.currentHour),A(),fi("background-color",i.getCurrentBackgroundColor())("color",i.getTextColor()),A(),Ze(" ",i.formatTime()," "))},dependencies:[lt,jt,Xt,si,Kt,Nk,Lk,K_,St,Ht],styles:[".daytime-tracker[_ngcontent-%COMP%]{padding:8px;border-radius:4px;background:transparent;color:var(--text-primary)}.main-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;height:32px}.slider-container[_ngcontent-%COMP%]{position:relative;flex:1;min-width:0}.time-periods[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);left:0;right:0;height:10px;display:flex;z-index:0;pointer-events:none;border-radius:5px;overflow:hidden;opacity:.8;box-shadow:0 1px 3px #0000004d}.period[_ngcontent-%COMP%]{height:100%}.period.night[_ngcontent-%COMP%]{background:#0d1117}.period.dawn[_ngcontent-%COMP%]{background:linear-gradient(90deg,#0d1117,gold)}.period.day[_ngcontent-%COMP%]{background:gold}.period.dusk[_ngcontent-%COMP%]{background:linear-gradient(90deg,gold,#0d1117)}.time-slider[_ngcontent-%COMP%]{flex:1;width:100%;z-index:1}.time-icon[_ngcontent-%COMP%]{color:var(--text-primary);font-size:20px;width:20px;height:20px;line-height:20px;opacity:.8}.current-time[_ngcontent-%COMP%]{font-weight:500;padding:4px 8px;border-radius:4px;font-size:.9em;transition:background-color .3s ease,color .3s ease;min-width:52px;text-align:center;box-shadow:0 2px 4px #0003}[_nghost-%COMP%]{--mdc-slider-track-active-color: transparent;--mdc-slider-active-track-color: transparent;--mdc-slider-handle-color: var(--text-primary);--mdc-slider-focus-handle-color: var(--accent-color);--mdc-slider-hover-handle-color: var(--text-primary)}[_nghost-%COMP%]     .mat-mdc-slider-thumb-container, [_nghost-%COMP%]     .mdc-slider__thumb-container{top:50%!important;transform:translateY(-50%)!important}[_nghost-%COMP%]     .mat-mdc-slider-track-container, [_nghost-%COMP%]     .mdc-slider__track-container{top:50%!important;transform:translateY(-50%)!important}[_nghost-%COMP%]     .mat-mdc-slider-track-active, [_nghost-%COMP%]     .mdc-slider__track--active{display:none!important;background:none!important;background-color:transparent!important;box-shadow:none!important}[_nghost-%COMP%]     .mdc-slider__thumb-knn{background-color:var(--text-primary)!important;border:2px solid var(--glass-bg)!important}"]})};var Pu=class r{constructor(t,e){this.el=t;this.renderer=e}resizableWidth=300;resizableHeight=200;resizeEnd=new fe;dragging=!1;currentHandle="";startX=0;startY=0;startWidth=0;startHeight=0;startLeft=0;startTop=0;handleSize=6;viewportWidth=window.innerWidth;viewportHeight=window.innerHeight;onWindowResize(){this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight}ngOnInit(){this.initializeElement(),this.createHandles()}ngOnChanges(t){t.resizableWidth&&this.renderer.setStyle(this.el.nativeElement,"width",this.resizableWidth+"px"),t.resizableHeight&&this.renderer.setStyle(this.el.nativeElement,"height",this.resizableHeight+"px")}initializeElement(){this.renderer.setStyle(this.el.nativeElement,"width",this.resizableWidth+"px"),this.renderer.setStyle(this.el.nativeElement,"height",this.resizableHeight+"px"),this.renderer.setStyle(this.el.nativeElement,"position","absolute")}createHandles(){[{position:"n",cursor:"ns-resize",top:"0",left:"0",right:"0",height:`${this.handleSize}px`},{position:"s",cursor:"ns-resize",bottom:"0",left:"0",right:"0",height:`${this.handleSize}px`},{position:"e",cursor:"ew-resize",top:"0",right:"0",bottom:"0",width:`${this.handleSize}px`},{position:"w",cursor:"ew-resize",top:"0",left:"0",bottom:"0",width:`${this.handleSize}px`},{position:"ne",cursor:"ne-resize",top:"0",right:"0",width:`${this.handleSize}px`,height:`${this.handleSize}px`},{position:"nw",cursor:"nw-resize",top:"0",left:"0",width:`${this.handleSize}px`,height:`${this.handleSize}px`},{position:"se",cursor:"se-resize",bottom:"0",right:"0",width:`${this.handleSize}px`,height:`${this.handleSize}px`},{position:"sw",cursor:"sw-resize",bottom:"0",left:"0",width:`${this.handleSize}px`,height:`${this.handleSize}px`}].forEach(e=>{let i=this.renderer.createElement("div");this.renderer.addClass(i,"resize-handle"),this.renderer.addClass(i,`resize-handle-${e.position}`),Object.entries(e).forEach(([n,s])=>{n!=="position"&&this.renderer.setStyle(i,n,s)}),this.renderer.setStyle(i,"position","absolute"),this.renderer.setStyle(i,"z-index","1000"),this.renderer.listen(i,"mousedown",n=>{this.onMouseDown(n,e.position)}),this.renderer.appendChild(this.el.nativeElement,i)})}onMouseDown(t,e){t.preventDefault(),t.stopPropagation(),this.dragging=!0,this.currentHandle=e,this.startX=t.clientX,this.startY=t.clientY,this.startWidth=this.el.nativeElement.offsetWidth,this.startHeight=this.el.nativeElement.offsetHeight,this.startLeft=this.el.nativeElement.offsetLeft,this.startTop=this.el.nativeElement.offsetTop,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}onMouseMove=t=>{if(!this.dragging)return;let e=t.clientX-this.startX,i=t.clientY-this.startY,n=this.startWidth,s=this.startHeight,o=this.startLeft,l=this.startTop;switch(this.currentHandle){case"e":n=this.startWidth+e;break;case"w":n=this.startWidth-e,o=this.startLeft+e;break;case"n":s=this.startHeight-i,l=this.startTop+i;break;case"s":s=this.startHeight+i;break;case"ne":n=this.startWidth+e,s=this.startHeight-i,l=this.startTop+i;break;case"nw":n=this.startWidth-e,s=this.startHeight-i,o=this.startLeft+e,l=this.startTop+i;break;case"se":n=this.startWidth+e,s=this.startHeight+i;break;case"sw":n=this.startWidth-e,s=this.startHeight+i,o=this.startLeft+e;break}let d=100,h=100,u=this.viewportWidth,m=this.viewportHeight;if(["w","nw","sw"].includes(this.currentHandle)&&o<0){let f=-o;o=0,n-=f}if(["n","ne","nw"].includes(this.currentHandle)&&l<0){let f=-l;l=0,s-=f}if(o+n>u)if(["e","ne","se"].includes(this.currentHandle))n=u-o;else{let _=o+n-u;_>0&&(n-=_)}if(l+s>m)if(["s","se","sw"].includes(this.currentHandle))s=m-l;else{let _=l+s-m;_>0&&(s-=_)}n>=d&&n<=u&&(this.renderer.setStyle(this.el.nativeElement,"width",`${n}px`),["w","nw","sw"].includes(this.currentHandle)&&this.renderer.setStyle(this.el.nativeElement,"left",`${o}px`)),s>=h&&s<=m&&(this.renderer.setStyle(this.el.nativeElement,"height",`${s}px`),["n","ne","nw"].includes(this.currentHandle)&&this.renderer.setStyle(this.el.nativeElement,"top",`${l}px`))};onMouseUp=()=>{if(this.dragging){this.dragging=!1;let t=this.el.nativeElement.offsetWidth,e=this.el.nativeElement.offsetHeight;this.resizeEnd.emit({width:t,height:e}),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)}};static \u0275fac=function(e){return new(e||r)(we(ve),we(xi))};static \u0275dir=_e({type:r,selectors:[["","appResizable",""]],hostBindings:function(e,i){e&1&&U("resize",function(s){return i.onWindowResize(s)},!1,Vs)},inputs:{resizableWidth:"resizableWidth",resizableHeight:"resizableHeight"},outputs:{resizeEnd:"resizeEnd"},features:[Et]})};var EB=["determinateSpinner"];function SB(r,t){if(r&1&&(zi(),w(0,"svg",11),re(1,"circle",12),E()),r&2){let e=T();ye("viewBox",e._viewBox()),A(),fi("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),ye("r",e._circleRadius())}}var MB=new te("mat-progress-spinner-default-options",{providedIn:"root",factory:AB});function AB(){return{diameter:Bk}}var Bk=100,TB=10,Vk=(()=>{class r{_elementRef=C(ve);_noopAnimations;get color(){return this._color||this._defaultColor}set color(e){this._color=e}_color;_defaultColor="primary";_determinateCircle;constructor(){let e=C(Ft,{optional:!0}),i=C(MB);this._noopAnimations=e==="NoopAnimations"&&!!i&&!i._forceAnimations,this.mode=this._elementRef.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",i&&(i.color&&(this.color=this._defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}mode;get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}_value=0;get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}_diameter=Bk;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_strokeWidth;_circleRadius(){return(this.diameter-TB)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(i,n){if(i&1&&Le(EB,5),i&2){let s;Ee(s=Se())&&(n._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(i,n){i&2&&(ye("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",n.mode==="determinate"?n.value:null)("mode",n.mode),rn("mat-"+n.color),fi("width",n.diameter,"px")("height",n.diameter,"px")("--mdc-circular-progress-size",n.diameter+"px")("--mdc-circular-progress-active-indicator-width",n.diameter+"px"),ce("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate",n.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[2,"value","value",ti],diameter:[2,"diameter","diameter",ti],strokeWidth:[2,"strokeWidth","strokeWidth",ti]},exportAs:["matProgressSpinner"],features:[at],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(i,n){if(i&1&&(X(0,SB,2,8,"ng-template",null,0,sn),w(2,"div",2,1),zi(),w(4,"svg",3),re(5,"circle",4),E()(),id(),w(6,"div",5)(7,"div",6)(8,"div",7),cr(9,8),E(),w(10,"div",9),cr(11,8),E(),w(12,"div",10),cr(13,8),E()()()),i&2){let s=Ut(1);A(4),ye("viewBox",n._viewBox()),A(),fi("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),ye("r",n._circleRadius()),A(4),R("ngTemplateOutlet",s),A(2),R("ngTemplateOutlet",s),A(2),R("ngTemplateOutlet",s)}},dependencies:[as],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return r})();var zk=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye]})}return r})();var Ru=class r{constructor(t){this.http=t}apiUrl="https://api.openai.com/v1/chat/completions";chat(t,e,i,n){let s=new Dr().set("Content-Type","application/json").set("Authorization",`Bearer ${t}`),o={model:i,messages:e};return n!=null&&(o.temperature=n),this.http.post(this.apiUrl,o,{headers:s}).pipe(Zc(l=>(console.error("API Error:",l),Yc(()=>new Error(l.error?.error?.message||"An error occurred")))))}static \u0275fac=function(e){return new(e||r)(Je(Na))};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})};var PB=["messageInput"],RB=["chatHistory"],OB=(r,t,e)=>({"user-message":r,"assistant-message":t,"system-message":e});function FB(r,t){if(r&1&&(w(0,"div",12)(1,"strong"),F(2),E(),F(3,"\xA0 "),re(4,"span",13),E()),r&2){let e=t.$implicit,i=T();R("ngClass",vy(3,OB,e.role==="user",e.role==="assistant",e.role==="system")),A(2),Ze("",e.role==="user"?"You":"Assistant",":"),A(2),R("innerHTML",i.formatMessage(e.content),sd)}}function LB(r,t){r&1&&(w(0,"div",14),re(1,"mat-spinner",15),w(2,"span"),F(3,"Thinking..."),E()())}function NB(r,t){if(r&1&&(w(0,"div",16),F(1),E()),r&2){let e=T();A(),Ze(" ",e.errorMessage," ")}}var Ou=class r{constructor(t,e){this.openAIService=t;this.cdr=e}settings;messageInput;chatHistory;conversation=[];newMessage="";wikiContext="";isLoading=!1;errorMessage="";refreshInterval;ngOnInit(){this.refreshWikiContext(),this.settings?.conversation&&(this.conversation=this.settings.conversation,setTimeout(()=>{this.chatHistory&&(this.chatHistory.nativeElement.scrollTop=this.chatHistory.nativeElement.scrollHeight)})),this.refreshInterval=setInterval(()=>{this.refreshWikiContext()},5e3)}ngOnDestroy(){this.refreshInterval&&clearInterval(this.refreshInterval)}findWikiWidget(){return(window.workspace?.widgets||[]).find(e=>e.type==="WIKI_WIDGET")}getAllArticles(t){let e=[];for(let i of t)e.push(i),i.children&&i.children.length>0&&(e=e.concat(this.getAllArticles(i.children)));return e}refreshWikiContext(){let e=this.findWikiWidget()?.settings?.wikiData?.articles;e&&Array.isArray(e)?this.wikiContext=this.formatWikiArticles(e):this.wikiContext=""}formatWikiArticles(t,e=""){let i="";for(let n of t)n.title&&n.content&&(i+=`${e}${n.title}
\`\`\`
${n.content.trim()}
\`\`\`

`),n.children&&Array.isArray(n.children)&&n.children.length>0&&(i+=this.formatWikiArticles(n.children,`${e}  `));return i}handleKeyDown(t){t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),this.sendMessage())}formatMessage(t){return t.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/\n/g,"<br>")}clearChat(){this.conversation=[],this.errorMessage="",this.settings&&(this.settings.conversation=this.conversation)}sendMessage(){return q(this,null,function*(){if(!this.newMessage.trim()||this.isLoading)return;if(!this.settings?.apiKey||!this.settings?.model){this.errorMessage="Please configure API key and model in settings";return}this.errorMessage="";let t=[];this.settings.prompt&&t.push({role:"system",content:this.settings.prompt}),this.wikiContext&&t.push({role:"system",content:`Here is the wiki context to consider in your responses:

${this.wikiContext}`}),t.push(...this.conversation),t.push({role:"user",content:this.newMessage}),this.conversation.push({role:"user",content:this.newMessage}),this.settings&&(this.settings.conversation=this.conversation);let e=this.newMessage;this.newMessage="",this.isLoading=!0;try{let i=yield this.openAIService.chat(this.settings.apiKey,t,this.settings.model,this.settings.temperature).toPromise();if(i?.choices?.[0]?.message){let n=i.choices[0].message;this.conversation.push({role:"assistant",content:n.content}),this.settings&&(this.settings.conversation=this.conversation),this.cdr.markForCheck(),setTimeout(()=>{this.chatHistory&&(this.chatHistory.nativeElement.scrollTop=this.chatHistory.nativeElement.scrollHeight)})}}catch(i){this.errorMessage=i.message||"Failed to get response",this.conversation=this.conversation.filter(n=>n.content!==e),this.settings&&(this.settings.conversation=this.conversation),this.cdr.markForCheck()}finally{this.isLoading=!1,this.cdr.markForCheck()}})}static \u0275fac=function(e){return new(e||r)(we(Ru),we($e))};static \u0275cmp=oe({type:r,selectors:[["app-llm-chat"]],viewQuery:function(e,i){if(e&1&&(Le(PB,5),Le(RB,5)),e&2){let n;Ee(n=Se())&&(i.messageInput=n.first),Ee(n=Se())&&(i.chatHistory=n.first)}},inputs:{settings:"settings"},decls:17,vars:6,consts:[["chatHistory",""],["messageInput",""],[1,"llm-chat"],[1,"chat-history"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],["class","loading-message",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"chat-controls"],["mat-icon-button","","matTooltip","Clear chat",3,"click","disabled"],[1,"input-container"],["placeholder","Type your message...","rows","1",3,"ngModelChange","keydown","ngModel"],["mat-icon-button","","color","primary",3,"click","disabled"],[1,"message",3,"ngClass"],[3,"innerHTML"],[1,"loading-message"],["diameter","20"],[1,"error-message"]],template:function(e,i){if(e&1){let n=ie();w(0,"div",2)(1,"div",3,0),X(3,FB,5,7,"div",4)(4,LB,4,0,"div",5),E(),X(5,NB,2,1,"div",6),w(6,"div",7)(7,"button",8),U("click",function(){return H(n),W(i.clearChat())}),w(8,"mat-icon"),F(9,"delete"),E()(),w(10,"div",9)(11,"textarea",10,1),Fe("ngModelChange",function(o){return H(n),Oe(i.newMessage,o)||(i.newMessage=o),W(o)}),U("keydown",function(o){return H(n),W(i.handleKeyDown(o))}),F(13,"          "),E()(),w(14,"button",11),U("click",function(){return H(n),W(i.sendMessage())}),w(15,"mat-icon"),F(16,"send"),E()()()()}e&2&&(A(3),R("ngForOf",i.conversation),A(),R("ngIf",i.isLoading),A(),R("ngIf",i.errorMessage),A(2),R("disabled",i.isLoading||i.conversation.length===0),A(4),Re("ngModel",i.newMessage),A(3),R("disabled",i.isLoading||!i.newMessage.trim()))},dependencies:[lt,Io,Lt,Vt,jt,Xt,si,Kt,wt,Ei,St,Ht,sa,zk,Vk],styles:[".llm-chat[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;color:var(--text-primary)}.chat-history[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px;margin-bottom:8px;font-size:14px}.message[_ngcontent-%COMP%]{margin:8px 0;padding:8px 12px;border-radius:8px;white-space:pre-wrap;line-height:1.5;-webkit-backdrop-filter:var(--glass-backdrop);backdrop-filter:var(--glass-backdrop);border:var(--glass-border)}.user-message[_ngcontent-%COMP%]{background:#40c4ff26;border-color:var(--accent-color);margin-left:15%;border-bottom-right-radius:2px}.assistant-message[_ngcontent-%COMP%]{background:var(--panel-bg);margin-right:15%;border-bottom-left-radius:2px}.system-message[_ngcontent-%COMP%]{background:#ffffff0d;font-style:italic;text-align:center;margin:8px 15%;font-size:.9em;color:var(--text-secondary)}.loading-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px;color:var(--text-secondary);font-style:italic}.chat-controls[_ngcontent-%COMP%]{display:flex;align-items:flex-end;gap:8px;padding:0 8px 8px}.input-container[_ngcontent-%COMP%]{flex:1;background:var(--input-bg);border:var(--input-border);border-radius:20px;padding:8px 12px;display:flex;align-items:center}.input-container[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;color:var(--text-primary);font-family:inherit;font-size:14px;resize:none;outline:none;max-height:100px;line-height:1.4}.error-message[_ngcontent-%COMP%]{color:#fff;padding:8px;margin:8px;background:var(--danger-color);border-radius:4px;font-size:.9em}  .mat-mdc-progress-spinner circle,   .mat-spinner circle{stroke:var(--accent-color)!important}"]})};var BB=["button"],VB=["*"];function zB(r,t){if(r&1&&(w(0,"div",2),re(1,"mat-pseudo-checkbox",6),E()),r&2){let e=T();A(),R("disabled",e.disabled)}}var Hk=new te("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:HB});function HB(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var Wk=new te("MatButtonToggleGroup"),WB={provide:Vr,useExisting:Mi(()=>Z_),multi:!0},Fu=class{source;value;constructor(t,e){this.source=t,this.value=e}},Z_=(()=>{class r{_changeDetector=C($e);_dir=C(ri,{optional:!0});_multiple=!1;_disabled=!1;_disabledInteractive=!1;_selectionModel;_rawValue;_controlValueAccessorChangeFn=()=>{};_onTouched=()=>{};_buttonToggles;appearance;get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}_name=C(zt).getId("mat-button-toggle-group-");vertical;get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(i=>i.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}valueChange=new fe;get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}change=new fe;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}_hideSingleSelectionIndicator;get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}_hideMultipleSelectionIndicator;constructor(){let e=C(Hk,{optional:!0});this.appearance=e&&e.appearance?e.appearance:"standard",this.hideSingleSelectionIndicator=e?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=e?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new Bo(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled)return;let n=e.target.id,s=this._buttonToggles.toArray().findIndex(l=>l.buttonId===n),o=null;switch(e.keyCode){case 32:case 13:o=this._buttonToggles.get(s)||null;break;case 38:o=this._getNextButton(s,-1);break;case 37:o=this._getNextButton(s,this.dir==="ltr"?-1:1);break;case 40:o=this._getNextButton(s,1);break;case 39:o=this._getNextButton(s,this.dir==="ltr"?1:-1);break;default:return}o&&(e.preventDefault(),o._onButtonClick(),o.focus())}_emitChangeEvent(e){let i=new Fu(e,this.value);this._rawValue=i.value,this._controlValueAccessorChangeFn(i.value),this.change.emit(i)}_syncButtonToggle(e,i,n=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?i?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(e,n)):this._updateModelValue(e,n)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(i=>e.value!=null&&i===e.value):e.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){let i=this._buttonToggles.get(e);if(!i.disabled){i.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(e,i){let n=this._buttonToggles;for(let s=1;s<=n.length;s++){let o=(e+i*s+n.length)%n.length,l=n.get(o);if(l&&!l.disabled)return l}return null}_setSelectionByValue(e){if(this._rawValue=e,!this._buttonToggles)return;let i=this._buttonToggles.toArray();if(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(n=>this._selectValue(n,i))):(this._clearSelection(),this._selectValue(e,i)),!this.multiple&&i.every(n=>n.tabIndex===-1)){for(let n of i)if(!n.disabled){n.tabIndex=0;break}}}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e,i){for(let n of i)if(n.value===e){n.checked=!0,this._selectionModel.select(n),this.multiple||(n.tabIndex=0);break}}_updateModelValue(e,i){i&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static \u0275fac=function(i){return new(i||r)};static \u0275dir=_e({type:r,selectors:[["mat-button-toggle-group"]],contentQueries:function(i,n,s){if(i&1&&Ai(s,Lu,5),i&2){let o;Ee(o=Se())&&(n._buttonToggles=o)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(i,n){i&1&&U("keydown",function(o){return n._keydown(o)}),i&2&&(ye("role",n.multiple?"group":"radiogroup")("aria-disabled",n.disabled),ce("mat-button-toggle-vertical",n.vertical)("mat-button-toggle-group-appearance-standard",n.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",ge],value:"value",multiple:[2,"multiple","multiple",ge],disabled:[2,"disabled","disabled",ge],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ge],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",ge],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",ge]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[et([WB,{provide:Wk,useExisting:r}]),at]})}return r})(),Lu=(()=>{class r{_changeDetectorRef=C($e);_elementRef=C(ve);_focusMonitor=C(hs);_idGenerator=C(zt);_animationMode=C(Ft,{optional:!0});_checked=!1;ariaLabel;ariaLabelledby=null;_buttonElement;buttonToggleGroup;get buttonId(){return`${this.id}-button`}id;name;value;get tabIndex(){return this._tabIndex}set tabIndex(e){e!==this._tabIndex&&(this._tabIndex=e,this._markForCheck())}_tabIndex;disableRipple;get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}_appearance;get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}_disabled=!1;get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new fe;constructor(){C(ii).load(Qn);let e=C(Wk,{optional:!0}),i=C(new ar("tabindex"),{optional:!0})||"",n=C(Hk,{optional:!0});this._tabIndex=parseInt(i)||0,this.buttonToggleGroup=e,this.appearance=n&&n.appearance?n.appearance:"standard",this.disabledInteractive=n?.disabledInteractive??!1}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||this._idGenerator.getId("mat-button-toggle-"),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._animationMode!=="NoopAnimations"&&this._elementRef.nativeElement.classList.add("mat-button-toggle-animations-enabled"),this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;let e=this.isSingleSelector()?!0:!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let i=this.buttonToggleGroup._buttonToggles.find(n=>n.tabIndex===0);i&&(i.tabIndex=-1),this.tabIndex=0}this.change.emit(new Fu(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-button-toggle"]],viewQuery:function(i,n){if(i&1&&Le(BB,5),i&2){let s;Ee(s=Se())&&(n._buttonElement=s.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(i,n){i&1&&U("focus",function(){return n.focus()}),i&2&&(ye("aria-label",null)("aria-labelledby",null)("id",n.id)("name",null),ce("mat-button-toggle-standalone",!n.buttonToggleGroup)("mat-button-toggle-checked",n.checked)("mat-button-toggle-disabled",n.disabled)("mat-button-toggle-disabled-interactive",n.disabledInteractive)("mat-button-toggle-appearance-standard",n.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",ge],appearance:"appearance",checked:[2,"checked","checked",ge],disabled:[2,"disabled","disabled",ge],disabledInteractive:[2,"disabledInteractive","disabledInteractive",ge]},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[at],ngContentSelectors:VB,decls:7,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-checkbox-wrapper"],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"],["state","checked","aria-hidden","true","appearance","minimal",3,"disabled"]],template:function(i,n){if(i&1){let s=ie();Bt(),w(0,"button",1,0),U("click",function(){return H(s),W(n._onButtonClick())}),X(2,zB,2,1,"div",2),w(3,"span",3),Ke(4),E()(),re(5,"span",4)(6,"span",5)}if(i&2){let s=Ut(1);R("id",n.buttonId)("disabled",n.disabled&&!n.disabledInteractive||null),ye("role",n.isSingleSelector()?"radio":"button")("tabindex",n.disabled&&!n.disabledInteractive?-1:n.tabIndex)("aria-pressed",n.isSingleSelector()?null:n.checked)("aria-checked",n.isSingleSelector()?n.checked:null)("name",n._getButtonName())("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-disabled",n.disabled&&n.disabledInteractive?"true":null),A(2),gt(n.buttonToggleGroup&&(!n.buttonToggleGroup.multiple&&!n.buttonToggleGroup.hideSingleSelectionIndicator||n.buttonToggleGroup.multiple&&!n.buttonToggleGroup.hideMultipleSelectionIndicator)?2:-1),A(4),R("matRippleTrigger",s)("matRippleDisabled",n.disableRipple||n.disabled)}},dependencies:[Rr,sf],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}@media(forced-colors: active){.mat-button-toggle-standalone,.mat-button-toggle-group{outline:solid 1px}}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}@media(forced-colors: active){.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checkbox-wrapper{display:inline-block;justify-content:flex-start;align-items:center;width:0;height:18px;line-height:18px;overflow:hidden;box-sizing:border-box;position:absolute;top:50%;left:16px;transform:translate3d(0, -50%, 0)}[dir=rtl] .mat-button-toggle-checkbox-wrapper{left:auto;right:16px}.mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:12px}[dir=rtl] .mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:auto;right:12px}.mat-button-toggle-checked .mat-button-toggle-checkbox-wrapper{width:18px}.mat-button-toggle-animations-enabled .mat-button-toggle-checkbox-wrapper{transition:width 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-checkbox-wrapper{transition:none}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-sys-on-surface));background-color:var(--mat-standard-button-toggle-background-color, transparent);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-sys-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-sys-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-state-background-color, transparent)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-sys-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height, 40px)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}@media(forced-colors: active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-animations-enabled .mat-button-toggle-button{transition:padding 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-button{transition:none}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:30px}[dir=rtl] .mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:0;padding-right:30px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full));border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-sys-corner-full))}"],encapsulation:2,changeDetection:0})}return r})(),Uk=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[Ye,Or,Lu,Ye]})}return r})();var jr=r=>Number.isFinite(r)&&!Number.isNaN(r),Nu=r=>typeof r=="object"&&r!==null;var jB=r=>typeof r=="function",Jl=r=>Nu(r)&&jr(r.col)&&jr(r.row),GB=r=>Nu(r)&&jr(r.x)&&jr(r.y),Bu=r=>Array.isArray(r)&&jr(r[0])&&jr(r[1]),Wu=(r,t)=>t+r*(t&1)>>1;function $B(r,t){return(r%t+t)%t}var qB=(r,t)=>$B(r+t,8),Vu=([r,t,e=-r-t])=>({q:r,r:t,s:e});function ec({q:r,r:t,s:e}){let i=jr(r),n=jr(t),s=jr(e);if(i&&n&&s)return{q:r,r:t,s:e};if(i&&n)return{q:r,r:t,s:-r-t};if(i&&s)return{q:r,r:-r-e,s:e};if(n&&s)return{q:-t-e,r:t,s:e};throw new TypeError(`Can't determine three cube coordinates from less than two coordinates. Received: { q: ${r}, r: ${t}, s: ${e} }.`)}var Cn=(r=>(r.FLAT="FLAT",r.POINTY="POINTY",r))(Cn||{});function YB(r,t){if(Nu(r)&&r.xRadius>0&&r.yRadius>0)return r;if(Nu(r)&&r.width>0&&r.height>0){let{width:e,height:i}=r;return t===Cn.POINTY?{xRadius:e/Math.sqrt(3),yRadius:i/2}:{xRadius:e/2,yRadius:i/Math.sqrt(3)}}if(r>0)return{xRadius:r,yRadius:r};throw new TypeError(`Invalid dimensions: ${JSON.stringify(r)}. Dimensions must be expressed as an Ellipse ({ xRadius: number, yRadius: number }), a Rectangle ({ width: number, height: number }) or a number.`)}function XB(r,t){if(GB(r))return r;if(!t)throw new TypeError(`Supply a bounding box ({ width: number, height: number }). Received: ${JSON.stringify(t)}`);if(r==="topLeft")return{x:t.width*-.5,y:t.height*-.5};throw new TypeError(`Invalid origin: ${JSON.stringify(r)}. Origin must be expressed as a Point ({ x: number, y: number }) or the string 'topLeft'.`)}var tc=class{static get settings(){let{dimensions:t,orientation:e,origin:i,offset:n}=this.prototype;return{dimensions:t,orientation:e,origin:i,offset:n}}get center(){let{width:t,height:e,x:i,y:n}=this;return{x:t/2-i,y:e/2-n}}get col(){return Q_(this).col}get corners(){let{orientation:t,width:e,height:i,x:n,y:s}=this;return t===Cn.POINTY?KB(e,i,n,s):ZB(e,i,n,s)}get dimensions(){return Ql.dimensions}get height(){let{orientation:t,dimensions:{yRadius:e}}=this;return t===Cn.POINTY?e*2:e*Math.sqrt(3)}get isFlat(){return this.orientation===Cn.FLAT}get isPointy(){return this.orientation===Cn.POINTY}get orientation(){return Ql.orientation}get origin(){return Ql.origin}get offset(){return Ql.offset}get row(){return Q_(this).row}get width(){let{orientation:t,dimensions:{xRadius:e}}=this;return t===Cn.POINTY?e*Math.sqrt(3):e*2}get x(){return jk(this).x}get y(){return jk(this).y}get s(){return-this.q-this.r}q;r;constructor(t=[0,0]){let{q:e,r:i}=zu(this,t);this.q=e,this.r=i}clone(t=this){return new this.constructor(t)}equals(t){return QB(this,Jl(t)?Xk(this,t):t)}toString(){return`${this.constructor.name}(${this.q},${this.r})`}translate(t){return iV(this,t)}},Ql={dimensions:{xRadius:1,yRadius:1},orientation:Cn.POINTY,origin:{x:0,y:0},offset:-1},KB=(r,t,e,i)=>[{x:e+r*.5,y:i-t*.25},{x:e+r*.5,y:i+t*.25},{x:e,y:i+t*.5},{x:e-r*.5,y:i+t*.25},{x:e-r*.5,y:i-t*.25},{x:e,y:i-t*.5}],ZB=(r,t,e,i)=>[{x:e+r*.25,y:i-t*.5},{x:e+r*.5,y:i},{x:e+r*.25,y:i+t*.5},{x:e-r*.25,y:i+t*.5},{x:e-r*.5,y:i},{x:e-r*.25,y:i-t*.5}];function nb(r){let{dimensions:t,orientation:e,origin:i,offset:n}=J(J({},Ql),r);return class extends tc{get dimensions(){return YB(t,e)}get orientation(){return e}get origin(){return XB(i,this)}get offset(){return n}}}function QB(r,t){if(Jl(r)&&Jl(t))return r.col===t.col&&r.row===t.row;if(Object.hasOwn(r,"col")||Object.hasOwn(t,"col"))throw new Error(`Can't compare coordinates where one are offset coordinates. Either pass two offset coordinates or two axial/cube coordinates. Received: ${JSON.stringify(r)} and ${JSON.stringify(t)}`);let e=Bu(r)?Vu(r):r,i=Bu(t)?Vu(t):t;return e.q===i.q&&e.r===i.r}var JB=(r,t,e)=>({col:r+Wu(e,t),row:t}),eV=(r,t,e)=>({col:r,row:t+Wu(e,r)}),Q_=({q:r,r:t,offset:e,isPointy:i})=>i?JB(r,t,e):eV(r,t,e),jk=({orientation:r,dimensions:{xRadius:t,yRadius:e},origin:{x:i,y:n},q:s,r:o})=>r===Cn.POINTY?{x:t*Math.sqrt(3)*(s+o/2)-i,y:e*3/2*o-n}:{x:t*3/2*s-i,y:e*Math.sqrt(3)*(o+s/2)-n},qk=(r,t,e)=>{let i=r-Wu(e,t),n=t,s=-i-n;return{q:i,r:n,s}},Yk=(r,t,e)=>{let i=r,n=t-Wu(e,r),s=-i-n;return{q:i,r:n,s}},Xk=({offset:r,orientation:t},{col:e,row:i})=>t===Cn.POINTY?qk(e,i,r):Yk(e,i,r),J_=r=>{let{q:t,r:e,s:i}=ec(r),n=Math.round(t),s=Math.round(e),o=Math.round(i),l=Math.abs(t-n),d=Math.abs(e-s),h=Math.abs(i-o);return l>d&&l>h?n=-s-o:d>h?s=-n-o:o=-n-s,{q:n,r:s,s:o}},tV=({dimensions:{xRadius:r,yRadius:t},origin:e,orientation:i},{x:n,y:s})=>(n+=e.x,s+=e.y,i===Cn.POINTY?J_({q:Math.sqrt(3)*n/(3*r)-s/(3*t),r:2/3*(s/t)}):J_({q:2/3*(n/r),r:Math.sqrt(3)*s/(3*t)-n/(3*r)}));function zu(r,t){return Bu(t)?Vu(t):Jl(t)?Xk(r,t):ec(t)}function iV(r,t){let{q:e,r:i,s:n}=ec(r),{q:s,r:o,s:l}=ec(t),d={q:e+s,r:i+o,s:n+l};return r instanceof tc?r.clone(d):d}function eb(r,t,e){let{q:i,r:n,s}=zu(r,t),{q:o,r:l,s:d}=zu(r,e);return Math.max(Math.abs(i-o),Math.abs(n-l),Math.abs(s-d))}var kn=(r=>(r[r.N=0]="N",r[r.NE=1]="NE",r[r.E=2]="E",r[r.SE=3]="SE",r[r.S=4]="S",r[r.SW=5]="SW",r[r.W=6]="W",r[r.NW=7]="NW",r))(kn||{}),nV=[null,{q:1,r:-1},{q:1,r:0},{q:0,r:1},null,{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],rV=[{q:0,r:-1},{q:1,r:-1},null,{q:1,r:0},{q:0,r:1},{q:-1,r:1},null,{q:-1,r:0}],sV=({offset:r,q:t,r:e,col:i,row:n},s)=>{if(s===kn.S||s===kn.N){let l=s===kn.S?n+1:n-1;return qk(i,l,r)}let o=nV[s];return{q:t+o.q,r:e+o.r}},oV=({offset:r,q:t,r:e,col:i,row:n},s)=>{if(s===kn.E||s===kn.W){let l=s===kn.E?i+1:i-1;return Yk(l,n,r)}let o=rV[s];return{q:t+o.q,r:e+o.r}},tb=(r,t)=>r.clone(r.isPointy?sV(r,t):oV(r,t));function ib(r){return Array.isArray(r)?function(t,e){let i=[],n=e;for(let s of r)for(let o of s(t,n))i.push(n=o);return i}:r}function Hu(r){return aV(r)?lV(r):cV(r)}function aV(r){return r.direction in kn}function lV({start:r,direction:t,length:e}){return function(i,n){let s=[],o=i(r??n);!r&&n&&(o=tb(o,t));for(let l=0;l<e;l++)s.push(o),o=tb(o,t);return s}}function cV({start:r,stop:t}){return function(e,i){let n=[],s=e(r??i),o=Gk(s),l=Gk(zu(s,t)),d=dV(o,l),h=eb(s,s,t),u=1/Math.max(h,1),m=!r&&i?1:0;for(m;m<=h;m++){let f=J_(d(u*m));n.push(e(f))}return n}}function Gk({q:r,r:t,s:e}){return{q:r+1e-6,r:t+1e-6,s:e+-2e-6}}function dV(r,t){return e=>{let i=r.q*(1-e)+t.q*e,n=r.r*(1-e)+t.r*e;return{q:i,r:n}}}function hV(r,t,{includeSource:e=!0}={}){return function(i,n){let s=[];for(let o of ib(r)(i,n)){e&&s.push(o);for(let l of ib(t)(i,o))s.push(l)}return s}}function Kk(r,t){return function(e,i){let{width:n,height:s,start:o,direction:l=kn.E}=t?uV(r,t,e()):r,d=o??i??[0,0],h=hV(Hu({start:d,direction:qB(l,2),length:s}),Hu({direction:l,length:n-1}))(e,d);return!o&&i?h.slice(1):h}}function uV(r,t,{isPointy:e,offset:i}){let{col:n,row:s}=$k(r,e,i),{col:o,row:l}=$k(t,e,i),d=n<o?"A":"B",h=s<l?"A":"B",u=d+h,{swapWidthHeight:m,direction:f}=pV[u],_=Math.abs(n-o)+1,y=Math.abs(s-l)+1;return{width:m?y:_,height:m?_:y,start:r,direction:f}}function $k(r,t,e){if(Jl(r))return r;let{q:i,r:n}=Bu(r)?Vu(r):ec(r);return Q_({q:i,r:n,isPointy:t,offset:e})}var pV={AA:{swapWidthHeight:!1,direction:kn.E},AB:{swapWidthHeight:!0,direction:kn.N},BA:{swapWidthHeight:!0,direction:kn.S},BB:{swapWidthHeight:!1,direction:kn.W}};var ic=class r{static fromIterable(t){let e=t[Symbol.iterator]().next().value;if(!e)throw new TypeError(`Can't create grid from empty iterable: ${JSON.stringify(t)}`);return new r(e.constructor,t)}static fromJSON({hexSettings:t,coordinates:e},i){if(i){let s=e.map(i),o=s.length>0?s[0].constructor:i({q:0,r:0},0,[{q:0,r:0}]).constructor;return new r(o,s)}let n=nb(t);return new r(n,e.map(s=>new n(s)))}get size(){return this.#t.size}get pixelWidth(){if(this.size===0)return 0;let{isPointy:t,width:e}=this.hexPrototype,i=this.toArray(),{0:n,length:s,[s-1]:o}=t?i.sort((l,d)=>d.s-l.s||l.q-d.q):i.sort((l,d)=>l.q-d.q);return o.x-n.x+e}get pixelHeight(){if(this.size===0)return 0;let{isPointy:t,height:e}=this.hexPrototype,i=this.toArray(),{0:n,length:s,[s-1]:o}=t?i.sort((l,d)=>l.r-d.r):i.sort((l,d)=>d.s-l.s||l.r-d.r);return o.y-n.y+e}[Symbol.iterator](){return this.#t.values()}get hexPrototype(){return this.#e.prototype}#e;#t=new Map;constructor(t,e=[]){if(t instanceof r){this.#e=t.#e,this.setHexes(t);return}this.#e=t,this.setHexes(this.#i(e))}createHex(t){return new this.#e(t)}getHex(t){let e=this.createHex(t);return this.#t.get(e.toString())}hasHex(t){return this.#t.has(t.toString())}setHexes(t){for(let e of t){let i=e instanceof tc?e:new this.#e(e);this.#n(i)}return this}filter(t){let e=new r(this.#e);for(let i of this)t(i)&&e.#n(i);return e}map(t){let e=new r(this.#e);for(let i of this)e.#n(t(i));return e}traverse(t,{bail:e=!1}={}){let i=new r(this.#e);for(let n of this.#i(t)){let s=this.getHex(n);if(s)i.#n(s);else if(e)return i}return i}forEach(t){for(let e of this)t(e);return this}reduce(t,e){if(e===void 0){let n,s,o;for(let l of this)s=o,o=l,s&&(n=t(s,o));return n}let i=e;for(let n of this)i=t(i,n);return i}toArray(){return Array.from(this)}toJSON(){let{dimensions:t,orientation:e,origin:i,offset:n}=this.hexPrototype;return{hexSettings:{dimensions:t,orientation:e,origin:i,offset:n},coordinates:this.toArray()}}toString(){return`${this.constructor.name}(${this.size})`}pointToHex(t,{allowOutside:e=!0}={}){let i=tV(this.hexPrototype,t),n=this.getHex(i);return e?n??this.createHex(i):n}distance(t,e,{allowOutside:i=!0}={}){if(i)return eb(this.hexPrototype,t,e);let n=this.getHex(t),s=this.getHex(e);if(!(!n||!s))return eb(this.hexPrototype,n,s)}neighborOf(t,e,{allowOutside:i=!0}={}){let n=tb(this.createHex(t),e),s=this.getHex(n);return i?s??n:s}#n(t){this.#t.set(t.toString(),t)}#i(t){return this.#o(t)?this.#s(t):Array.isArray(t)&&this.#o(t[0])?this.#s(ib(t)):t}#o(t){return jB(t)}#s(t){return t(this.createHex.bind(this))}};function mV(r,t){if(r&1){let e=ie();w(0,"div",18)(1,"label"),F(2,"Brush"),E(),w(3,"input",19),Fe("ngModelChange",function(n){H(e);let s=T();return Oe(s.paintColor,n)||(s.paintColor=n),W(n)}),E(),w(4,"button",20),U("click",function(){H(e);let n=T();return W(n.toggleEraser())}),w(5,"mat-icon"),F(6,"cleaning_services"),E()()()}if(r&2){let e=T();A(3),Re("ngModel",e.paintColor),A(),ce("active",e.isEraser)}}function fV(r,t){if(r&1){let e=ie();w(0,"div",18)(1,"label"),F(2,"Path Color"),E(),w(3,"input",19),Fe("ngModelChange",function(n){H(e);let s=T();return Oe(s.pathColor,n)||(s.pathColor=n),W(n)}),E()()}if(r&2){let e=T();A(3),Re("ngModel",e.pathColor)}}function gV(r,t){if(r&1&&(w(0,"span",21),F(1),E()),r&2){let e=T();A(),Ze(" ",e.isEraser?"Click & drag to erase":"Click & drag to paint"," ")}}function _V(r,t){if(r&1&&(w(0,"span",21),F(1),E()),r&2){let e=T();A(),Ze(" ",e.pathStartHex?"Click end hex":"Click start hex"," ")}}function bV(r,t){if(r&1&&(zi(),w(0,"text",25),F(1),E()),r&2){let e=T().$implicit,i=T();ye("x",e.centerX)("y",e.centerY),A(),Ze(" ",e.label||(i.settings.showCoordinates?e.q+","+e.r:"")," ")}}function vV(r,t){if(r&1){let e=ie();zi(),w(0,"g",22),U("mousedown",function(n){let s=H(e).$implicit,o=T();return W(o.onHexMouseDown(s,n))})("mouseenter",function(){let n=H(e).$implicit,s=T();return W(s.onHexMouseEnter(n))})("click",function(){let n=H(e).$implicit,s=T();return W(s.onHexClick(n))}),re(1,"polygon",23),X(2,bV,2,3,"text",24),E()}if(r&2){let e=t.$implicit,i=T();ce("selected",(i.selectedHex==null?null:i.selectedHex.q)===e.q&&(i.selectedHex==null?null:i.selectedHex.r)===e.r)("path-start",(i.pathStartHex==null?null:i.pathStartHex.q)===e.q&&(i.pathStartHex==null?null:i.pathStartHex.r)===e.r),A(),ye("points",e.points)("fill",e.color),A(),R("ngIf",e.label||i.settings.showCoordinates)}}function yV(r,t){if(r&1){let e=ie();zi(),w(0,"g",26),U("click",function(n){let s=H(e).$implicit,o=T();return W(o.onPathClick(s,n))}),re(1,"path",27)(2,"path",28),E()}if(r&2){let e=t.$implicit;A(),ye("d",e.svgPath)("stroke",e.color),A(),ye("d",e.svgPath)}}function xV(r,t){if(r&1&&(zi(),re(0,"line",29)),r&2){let e=T();ye("x1",e.pathStartHex.centerX)("y1",e.pathStartHex.centerY)("x2",e.previewEndHex.centerX)("y2",e.previewEndHex.centerY)("stroke",e.pathColor)}}function wV(r,t){if(r&1){let e=ie();w(0,"div",30)(1,"div",31)(2,"span"),F(3),E(),w(4,"button",32),U("click",function(){H(e);let n=T();return W(n.cancelEdit())}),w(5,"mat-icon"),F(6,"close"),E()()(),w(7,"div",33)(8,"div",34)(9,"label"),F(10,"Color"),E(),w(11,"input",35),Fe("ngModelChange",function(n){H(e);let s=T();return Oe(s.editColor,n)||(s.editColor=n),W(n)}),E()(),w(12,"div",34)(13,"label"),F(14,"Label"),E(),w(15,"input",36),Fe("ngModelChange",function(n){H(e);let s=T();return Oe(s.editLabel,n)||(s.editLabel=n),W(n)}),E()()(),w(16,"div",37)(17,"button",38),U("click",function(){H(e);let n=T();return W(n.clearHex())}),F(18,"Clear"),E(),w(19,"button",39),U("click",function(){H(e);let n=T();return W(n.saveHexEdit())}),F(20,"Save"),E()()()}if(r&2){let e=T();A(3),by("Edit Hex (",e.selectedHex.q,", ",e.selectedHex.r,")"),A(8),Re("ngModel",e.editColor),A(4),Re("ngModel",e.editLabel)}}function CV(r,t){if(r&1){let e=ie();w(0,"div",30)(1,"div",31)(2,"span"),F(3,"Edit Path"),E(),w(4,"button",32),U("click",function(){H(e);let n=T();return W(n.cancelPathEdit())}),w(5,"mat-icon"),F(6,"close"),E()()(),w(7,"div",33)(8,"div",34)(9,"label"),F(10,"Path Color"),E(),w(11,"input",35),Fe("ngModelChange",function(n){H(e);let s=T();return Oe(s.editPathColor,n)||(s.editPathColor=n),W(n)}),E()()(),w(12,"div",37)(13,"button",40),U("click",function(){H(e);let n=T();return W(n.deletePath())}),w(14,"mat-icon"),F(15,"delete"),E(),F(16," Delete "),E(),w(17,"button",39),U("click",function(){H(e);let n=T();return W(n.savePathEdit())}),F(18,"Save"),E()()()}if(r&2){let e=T();A(11),Re("ngModel",e.editPathColor)}}var Uu=class r{settings;settingsChange=new fe;renderedHexes=[];renderedPaths=[];svgWidth=0;svgHeight=0;editMode="select";selectedHex=null;editColor="";editLabel="";paintColor="#22c55e";isEraser=!1;isPainting=!1;paintedHexesInStroke=new Set;pathColor="#f59e0b";pathStartHex=null;previewEndHex=null;selectedPath=null;editPathColor="";gridInstance=null;HexClass=null;onDocumentMouseUp(){this.isPainting&&this.onMouseUp()}ngOnInit(){this.initializeDefaults(),this.rebuildGrid()}ngOnChanges(t){t.settings&&!t.settings.firstChange&&this.rebuildGrid()}initializeDefaults(){this.settings||(this.settings={}),this.settings.gridWidth=this.settings.gridWidth??10,this.settings.gridHeight=this.settings.gridHeight??8,this.settings.hexSize=this.settings.hexSize??30,this.settings.defaultColor=this.settings.defaultColor??"#374151",this.settings.showCoordinates=this.settings.showCoordinates??!1,this.settings.hexes=this.settings.hexes??[],this.settings.paths=this.settings.paths??[]}rebuildGrid(){this.initializeDefaults(),this.HexClass=nb({dimensions:this.settings.hexSize,orientation:Cn.POINTY,origin:"topLeft"}),this.gridInstance=new ic(this.HexClass,Kk({width:this.settings.gridWidth,height:this.settings.gridHeight})),this.renderedHexes=[];let t=0,e=0;this.gridInstance.forEach(i=>{let n=i.corners.map(l=>`${l.x},${l.y}`).join(" "),s=this.settings.hexes.find(l=>l.q===i.q&&l.r===i.r),o={q:i.q,r:i.r,points:n,centerX:i.x,centerY:i.y,color:s?.color??this.settings.defaultColor,label:s?.label??""};this.renderedHexes.push(o),i.corners.forEach(l=>{l.x>t&&(t=l.x),l.y>e&&(e=l.y)})}),this.svgWidth=Math.ceil(t)+10,this.svgHeight=Math.ceil(e)+10,this.rebuildPaths()}rebuildPaths(){this.renderedPaths=[];for(let t of this.settings.paths){let e=this.buildSvgPath(t.points);e&&this.renderedPaths.push({id:t.id,svgPath:e,color:t.color})}}buildSvgPath(t){if(t.length<2)return null;let e=[];for(let i=0;i<t.length;i++){let n=this.renderedHexes.find(s=>s.q===t[i].q&&s.r===t[i].r);n&&(i===0?e.push(`M ${n.centerX} ${n.centerY}`):e.push(`L ${n.centerX} ${n.centerY}`))}return e.join(" ")}onModeChange(){this.selectedHex=null,this.pathStartHex=null,this.previewEndHex=null,this.selectedPath=null,this.isPainting=!1}toggleEraser(){this.isEraser=!this.isEraser}onHexMouseDown(t,e){this.editMode==="paint"&&(e.preventDefault(),this.isPainting=!0,this.paintedHexesInStroke.clear(),this.paintHex(t))}onHexMouseEnter(t){this.editMode==="paint"&&this.isPainting&&this.paintHex(t)}onMouseUp(){this.isPainting&&(this.isPainting=!1,this.paintedHexesInStroke.size>0&&this.settingsChange.emit(),this.paintedHexesInStroke.clear())}paintHex(t){let e=`${t.q},${t.r}`;if(this.paintedHexesInStroke.has(e))return;this.paintedHexesInStroke.add(e);let i=this.isEraser?this.settings.defaultColor:this.paintColor,n=this.renderedHexes.findIndex(h=>h.q===t.q&&h.r===t.r);n!==-1&&(this.renderedHexes[n].color=i);let s=this.settings.hexes.findIndex(h=>h.q===t.q&&h.r===t.r),o=i===this.settings.defaultColor,l=s!==-1?this.settings.hexes[s]:null,d=l?.label&&l.label!=="";if(o&&!d)s!==-1&&this.settings.hexes.splice(s,1);else{let h={q:t.q,r:t.r,color:i,label:l?.label??""};s!==-1?this.settings.hexes[s]=h:this.settings.hexes.push(h)}}onHexClick(t){this.editMode==="select"?this.handleSelectModeClick(t):this.editMode==="path"&&this.handlePathModeClick(t)}handleSelectModeClick(t){if(this.selectedPath=null,this.selectedHex?.q===t.q&&this.selectedHex?.r===t.r){this.selectedHex=null;return}this.selectedHex=t,this.editColor=t.color,this.editLabel=t.label}handlePathModeClick(t){if(!this.pathStartHex)this.pathStartHex=t,this.previewEndHex=null;else{if(t.q===this.pathStartHex.q&&t.r===this.pathStartHex.r){this.pathStartHex=null,this.previewEndHex=null;return}this.createPath(this.pathStartHex,t),this.pathStartHex=null,this.previewEndHex=null}}createPath(t,e){if(!this.gridInstance||!this.HexClass)return;let i=new this.HexClass({q:t.q,r:t.r}),n=new this.HexClass({q:e.q,r:e.r}),s=Hu({start:i,stop:n}),o=new ic(this.HexClass,s),l=[];o.forEach(h=>{l.push({q:h.q,r:h.r})});let d={id:Date.now().toString(),points:l,color:this.pathColor};this.settings.paths.push(d),this.rebuildPaths(),this.settingsChange.emit()}onPathClick(t,e){e.stopPropagation(),this.editMode==="select"&&(this.selectedHex=null,this.selectedPath=t,this.editPathColor=t.color)}savePathEdit(){if(!this.selectedPath)return;let t=this.settings.paths.findIndex(e=>e.id===this.selectedPath.id);if(t!==-1){this.settings.paths[t].color=this.editPathColor;let e=this.renderedPaths.findIndex(i=>i.id===this.selectedPath.id);e!==-1&&(this.renderedPaths[e].color=this.editPathColor),this.settingsChange.emit()}this.selectedPath=null}deletePath(){if(!this.selectedPath)return;let t=this.settings.paths.findIndex(e=>e.id===this.selectedPath.id);t!==-1&&(this.settings.paths.splice(t,1),this.rebuildPaths(),this.settingsChange.emit()),this.selectedPath=null}cancelPathEdit(){this.selectedPath=null}saveHexEdit(){if(!this.selectedHex)return;let{q:t,r:e}=this.selectedHex,i=this.settings.hexes.findIndex(o=>o.q===t&&o.r===e);if(this.editColor===this.settings.defaultColor&&this.editLabel==="")i!==-1&&this.settings.hexes.splice(i,1);else{let o={q:t,r:e,color:this.editColor,label:this.editLabel};i!==-1?this.settings.hexes[i]=o:this.settings.hexes.push(o)}let s=this.renderedHexes.findIndex(o=>o.q===t&&o.r===e);s!==-1&&(this.renderedHexes[s].color=this.editColor,this.renderedHexes[s].label=this.editLabel),this.settingsChange.emit(),this.selectedHex=null}clearHex(){this.editColor=this.settings.defaultColor,this.editLabel="",this.saveHexEdit()}cancelEdit(){this.selectedHex=null}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=oe({type:r,selectors:[["app-hex-map"]],hostBindings:function(e,i){e&1&&U("mouseup",function(){return i.onDocumentMouseUp()},!1,ay)},inputs:{settings:"settings"},outputs:{settingsChange:"settingsChange"},features:[Et],decls:32,vars:14,consts:[[1,"hex-map-container"],[1,"toolbar"],[3,"ngModelChange","change","ngModel"],["value","select"],[1,"toggle-label"],["value","paint"],["value","path"],[1,"toolbar-divider"],["class","color-picker-group",4,"ngIf"],["class","mode-hint",4,"ngIf"],[1,"svg-container",3,"mouseup","mouseleave"],[1,"hex-grid-svg"],[1,"hex-layer"],["class","hex-cell",3,"selected","path-start","mousedown","mouseenter","click",4,"ngFor","ngForOf"],[1,"paths-layer"],["class","path-group",3,"click",4,"ngFor","ngForOf"],["stroke-width","3","stroke-dasharray","8,4","class","preview-line",4,"ngIf"],["class","edit-panel",4,"ngIf"],[1,"color-picker-group"],["type","color",1,"toolbar-color-input",3,"ngModelChange","ngModel"],["mat-icon-button","","matTooltip","Eraser",1,"eraser-btn",3,"click"],[1,"mode-hint"],[1,"hex-cell",3,"mousedown","mouseenter","click"],[1,"hex-polygon"],["class","hex-label","text-anchor","middle","dominant-baseline","central",4,"ngIf"],["text-anchor","middle","dominant-baseline","central",1,"hex-label"],[1,"path-group",3,"click"],["fill","none",1,"hex-path"],["stroke","transparent","stroke-width","16","fill","none",1,"path-hitarea"],["stroke-width","3","stroke-dasharray","8,4",1,"preview-line"],[1,"edit-panel"],[1,"edit-header"],["mat-icon-button","",3,"click"],[1,"edit-fields"],[1,"field-group"],["type","color",1,"color-input",3,"ngModelChange","ngModel"],["type","text","placeholder","Enter label",1,"label-input",3,"ngModelChange","ngModel"],[1,"edit-actions"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"]],template:function(e,i){e&1&&(w(0,"div",0)(1,"div",1)(2,"mat-button-toggle-group",2),Fe("ngModelChange",function(s){return Oe(i.editMode,s)||(i.editMode=s),s}),U("change",function(){return i.onModeChange()}),w(3,"mat-button-toggle",3)(4,"mat-icon"),F(5,"touch_app"),E(),w(6,"span",4),F(7,"Select"),E()(),w(8,"mat-button-toggle",5)(9,"mat-icon"),F(10,"brush"),E(),w(11,"span",4),F(12,"Paint"),E()(),w(13,"mat-button-toggle",6)(14,"mat-icon"),F(15,"timeline"),E(),w(16,"span",4),F(17,"Path"),E()()(),re(18,"div",7),X(19,mV,7,3,"div",8)(20,fV,4,1,"div",8)(21,gV,2,1,"span",9)(22,_V,2,1,"span",9),E(),w(23,"div",10),U("mouseup",function(){return i.onMouseUp()})("mouseleave",function(){return i.onMouseUp()}),zi(),w(24,"svg",11)(25,"g",12),X(26,vV,3,7,"g",13),E(),w(27,"g",14),X(28,yV,3,3,"g",15),E(),X(29,xV,1,5,"line",16),E()(),X(30,wV,21,4,"div",17)(31,CV,19,1,"div",17),E()),e&2&&(A(2),Re("ngModel",i.editMode),A(17),R("ngIf",i.editMode==="paint"),A(),R("ngIf",i.editMode==="path"),A(),R("ngIf",i.editMode==="paint"),A(),R("ngIf",i.editMode==="path"),A(2),ce("paint-mode",i.editMode==="paint"),ye("width",i.svgWidth)("height",i.svgHeight),A(2),R("ngForOf",i.renderedHexes),A(2),R("ngForOf",i.renderedPaths),A(),R("ngIf",i.pathStartHex&&i.previewEndHex),A(),R("ngIf",i.selectedHex&&i.editMode==="select"),A(),R("ngIf",i.selectedPath))},dependencies:[lt,Lt,Vt,jt,Xt,si,Kt,wt,gi,Ei,St,Ht,Uk,Z_,Lu],styles:[".hex-map-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;position:relative;overflow:hidden}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:8px 12px;background:var(--panel-bg, rgba(20, 25, 40, .7));border-bottom:var(--glass-border, 1px solid rgba(255, 255, 255, .1));flex-shrink:0;flex-wrap:wrap}.toolbar[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{border:1px solid rgba(255,255,255,.2);border-radius:4px}.toolbar[_ngcontent-%COMP%]     .mat-button-toggle{background:transparent;color:var(--text-secondary, rgba(255, 255, 255, .7))}.toolbar[_ngcontent-%COMP%]     .mat-button-toggle-checked{background:var(--accent-color, #40c4ff)!important;color:#000!important}.toolbar[_ngcontent-%COMP%]     .mat-button-toggle-button{display:flex;align-items:center;gap:4px;padding:0 12px;height:36px}.toggle-label[_ngcontent-%COMP%]{font-size:12px;font-weight:500}.toolbar-divider[_ngcontent-%COMP%]{width:1px;height:24px;background:#fff3}.color-picker-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.color-picker-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary, rgba(255, 255, 255, .7))}.toolbar-color-input[_ngcontent-%COMP%]{width:32px;height:32px;border:1px solid rgba(255,255,255,.2);border-radius:4px;background:transparent;cursor:pointer;padding:2px}.eraser-btn[_ngcontent-%COMP%]{width:32px;height:32px;color:var(--text-secondary, rgba(255, 255, 255, .7))}.eraser-btn.active[_ngcontent-%COMP%]{background:var(--accent-color, #40c4ff);color:#000}.mode-hint[_ngcontent-%COMP%]{font-size:12px;color:var(--accent-color, #40c4ff);font-style:italic}.svg-container[_ngcontent-%COMP%]{flex:1;overflow:auto}.hex-grid-svg[_ngcontent-%COMP%]{min-width:fit-content;min-height:fit-content}.hex-grid-svg.paint-mode[_ngcontent-%COMP%]{cursor:crosshair}.hex-cell[_ngcontent-%COMP%]{cursor:pointer;transition:filter .15s ease}.hex-cell[_ngcontent-%COMP%]:hover   .hex-polygon[_ngcontent-%COMP%]{filter:brightness(1.3)}.hex-cell.selected[_ngcontent-%COMP%]   .hex-polygon[_ngcontent-%COMP%]{stroke:var(--accent-color, #40c4ff);stroke-width:3px}.hex-cell.path-start[_ngcontent-%COMP%]   .hex-polygon[_ngcontent-%COMP%]{stroke:#4ade80;stroke-width:3px}.hex-polygon[_ngcontent-%COMP%]{stroke:#ffffff4d;stroke-width:1px;transition:filter .15s ease}.hex-label[_ngcontent-%COMP%]{fill:var(--text-primary, #ffffff);font-size:10px;font-weight:500;pointer-events:none;-webkit-user-select:none;user-select:none}.path-group[_ngcontent-%COMP%]{cursor:pointer}.hex-path[_ngcontent-%COMP%]{stroke-width:4px;stroke-linecap:round;stroke-linejoin:round;filter:drop-shadow(0 2px 4px rgba(0,0,0,.5));transition:stroke-width .15s ease}.path-group[_ngcontent-%COMP%]:hover   .hex-path[_ngcontent-%COMP%]{stroke-width:6px}.preview-line[_ngcontent-%COMP%]{pointer-events:none;opacity:.7}.edit-panel[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px;background:var(--panel-bg, rgba(20, 25, 40, .9));border:var(--glass-border, 1px solid rgba(255, 255, 255, .1));border-radius:8px;padding:12px;min-width:200px;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);z-index:10}.edit-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;color:var(--text-primary, #ffffff);font-weight:500}.edit-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:24px;height:24px;line-height:24px}.edit-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:11px;color:var(--text-secondary, rgba(255, 255, 255, .7));text-transform:uppercase}.color-input[_ngcontent-%COMP%]{width:100%;height:36px;border:1px solid rgba(255,255,255,.2);border-radius:4px;background:var(--input-bg, rgba(0, 0, 0, .3));cursor:pointer;padding:2px}.color-input[_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{padding:2px}.color-input[_ngcontent-%COMP%]::-webkit-color-swatch{border-radius:2px;border:none}.label-input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid rgba(255,255,255,.2);border-radius:4px;background:var(--input-bg, rgba(0, 0, 0, .3));color:var(--text-primary, #ffffff);font-size:13px;box-sizing:border-box}.label-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--accent-color, #40c4ff)}.label-input[_ngcontent-%COMP%]::placeholder{color:var(--text-muted, rgba(255, 255, 255, .4))}.edit-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:12px}.edit-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;margin-right:4px}"]})};var kV=["input"],EV=["label"],SV=["*"],MV=new te("mat-checkbox-default-options",{providedIn:"root",factory:Qk});function Qk(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var Fi=function(r){return r[r.Init=0]="Init",r[r.Checked=1]="Checked",r[r.Unchecked=2]="Unchecked",r[r.Indeterminate=3]="Indeterminate",r}(Fi||{}),AV={provide:Vr,useExisting:Mi(()=>ju),multi:!0},rb=class{source;checked},Zk=Qk(),ju=(()=>{class r{_elementRef=C(ve);_changeDetectorRef=C($e);_ngZone=C(ke);_animationMode=C(Ft,{optional:!0});_options=C(MV,{optional:!0});focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let i=new rb;return i.source=this,i.checked=e,i}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"};ariaLabel="";ariaLabelledby=null;ariaDescribedby;ariaExpanded;ariaControls;ariaOwns;_uniqueId;id;get inputId(){return`${this.id||this._uniqueId}-input`}required;labelPosition="after";name=null;change=new fe;indeterminateChange=new fe;value;disableRipple;_inputElement;_labelElement;tabIndex;color;disabledInteractive;_onTouched=()=>{};_currentAnimationClass="";_currentCheckState=Fi.Init;_controlValueAccessorChangeFn=()=>{};_validatorChangeFn=()=>{};constructor(){C(ii).load(Qn);let e=C(new ar("tabindex"),{optional:!0});this._options=this._options||Zk,this.color=this._options.color||Zk.color,this.tabIndex=e==null?0:parseInt(e)||0,this.id=this._uniqueId=C(zt).getId("mat-mdc-checkbox-"),this.disabledInteractive=this._options?.disabledInteractive??!1}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}_checked=!1;get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}_disabled=!1;get indeterminate(){return this._indeterminate}set indeterminate(e){let i=e!=this._indeterminate;this._indeterminate=e,i&&(this._indeterminate?this._transitionCheckState(Fi.Indeterminate):this._transitionCheckState(this.checked?Fi.Checked:Fi.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_indeterminate=!1;_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let i=this._currentCheckState,n=this._getAnimationTargetElement();if(!(i===e||!n)&&(this._currentAnimationClass&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(i,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);let s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?Fi.Checked:Fi.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&e==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,i){if(this._animationMode==="NoopAnimations")return"";switch(e){case Fi.Init:if(i===Fi.Checked)return this._animationClasses.uncheckedToChecked;if(i==Fi.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case Fi.Unchecked:return i===Fi.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case Fi.Checked:return i===Fi.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case Fi.Indeterminate:return i===Fi.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let i=this._inputElement;i&&(i.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=oe({type:r,selectors:[["mat-checkbox"]],viewQuery:function(i,n){if(i&1&&(Le(kV,5),Le(EV,5)),i&2){let s;Ee(s=Se())&&(n._inputElement=s.first),Ee(s=Se())&&(n._labelElement=s.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(i,n){i&2&&(Fn("id",n.id),ye("tabindex",null)("aria-label",null)("aria-labelledby",null),rn(n.color?"mat-"+n.color:"mat-accent"),ce("_mat-animation-noopable",n._animationMode==="NoopAnimations")("mdc-checkbox--disabled",n.disabled)("mat-mdc-checkbox-disabled",n.disabled)("mat-mdc-checkbox-checked",n.checked)("mat-mdc-checkbox-disabled-interactive",n.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],ariaExpanded:[2,"aria-expanded","ariaExpanded",ge],ariaControls:[0,"aria-controls","ariaControls"],ariaOwns:[0,"aria-owns","ariaOwns"],id:"id",required:[2,"required","required",ge],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",ge],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:ti(e)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",ge],checked:[2,"checked","checked",ge],disabled:[2,"disabled","disabled",ge],indeterminate:[2,"indeterminate","indeterminate",ge]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[et([AV,{provide:ws,useExisting:r,multi:!0}]),at,Et],ngContentSelectors:SV,decls:15,vars:23,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(i,n){if(i&1){let s=ie();Bt(),w(0,"div",3),U("click",function(l){return H(s),W(n._preventBubblingFromLabel(l))}),w(1,"div",4,0)(3,"div",5),U("click",function(){return H(s),W(n._onTouchTargetClick())}),E(),w(4,"input",6,1),U("blur",function(){return H(s),W(n._onBlur())})("click",function(){return H(s),W(n._onInputClick())})("change",function(l){return H(s),W(n._onInteractionEvent(l))}),E(),re(6,"div",7),w(7,"div",8),zi(),w(8,"svg",9),re(9,"path",10),E(),id(),re(10,"div",11),E(),re(11,"div",12),E(),w(12,"label",13,2),Ke(14),E()()}if(i&2){let s=Ut(2);R("labelPosition",n.labelPosition),A(4),ce("mdc-checkbox--selected",n.checked),R("checked",n.checked)("indeterminate",n.indeterminate)("disabled",n.disabled&&!n.disabledInteractive)("id",n.inputId)("required",n.required)("tabIndex",n.disabled&&!n.disabledInteractive?-1:n.tabIndex),ye("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby)("aria-checked",n.indeterminate?"mixed":null)("aria-controls",n.ariaControls)("aria-disabled",n.disabled&&n.disabledInteractive?!0:null)("aria-expanded",n.ariaExpanded)("aria-owns",n.ariaOwns)("name",n.name)("value",n.value),A(7),R("matRippleTrigger",s)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0),A(),R("for",n.inputId)}},dependencies:[Rr,Sx],styles:['.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover>.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:hover>.mat-mdc-checkbox-ripple>.mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control+.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}@media(forced-colors: active){.mdc-checkbox--disabled{opacity:.5}}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox .mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox .mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display, block)}.mat-mdc-checkbox .mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return r})();var Jk=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=Ce({type:r});static \u0275inj=xe({imports:[ju,Ye,Ye]})}return r})();function IV(r,t){if(r&1&&(w(0,"mat-error"),F(1),E()),r&2){let e=T(2).$implicit,i=T();A(),Ze(" ",i.fieldErrors[e.key]," ")}}function DV(r,t){if(r&1){let e=ie();w(0,"mat-form-field",13)(1,"mat-label"),F(2),E(),w(3,"input",14),Fe("ngModelChange",function(n){H(e);let s=T().$implicit,o=T();return Oe(o.settings[s.key],n)||(o.settings[s.key]=n),W(n)}),U("ngModelChange",function(){H(e);let n=T().$implicit,s=T();return W(s.validateField(n))}),E(),X(4,IV,2,1,"mat-error",15),E()}if(r&2){let e=T().$implicit,i=T();A(2),Te(e.label),A(),Re("ngModel",i.settings[e.key]),R("placeholder",i.getTextFieldPlaceholder(e))("required",e.required||!1),A(),R("ngIf",i.fieldErrors[e.key])}}function PV(r,t){if(r&1&&(w(0,"mat-error"),F(1),E()),r&2){let e=T(2).$implicit,i=T();A(),Ze(" ",i.fieldErrors[e.key]," ")}}function RV(r,t){if(r&1){let e=ie();w(0,"mat-form-field",13)(1,"mat-label"),F(2),E(),w(3,"input",16),Fe("ngModelChange",function(n){H(e);let s=T().$implicit,o=T();return Oe(o.settings[s.key],n)||(o.settings[s.key]=n),W(n)}),U("ngModelChange",function(){H(e);let n=T().$implicit,s=T();return W(s.validateField(n))}),E(),X(4,PV,2,1,"mat-error",15),E()}if(r&2){let e=T().$implicit,i=T();A(2),Te(e.label),A(),Re("ngModel",i.settings[e.key]),R("min",i.getNumberFieldMin(e))("max",i.getNumberFieldMax(e))("required",e.required||!1),A(),R("ngIf",i.fieldErrors[e.key])}}function OV(r,t){if(r&1){let e=ie();w(0,"mat-checkbox",17),Fe("ngModelChange",function(n){H(e);let s=T().$implicit,o=T();return Oe(o.settings[s.key],n)||(o.settings[s.key]=n),W(n)}),U("ngModelChange",function(){H(e);let n=T().$implicit,s=T();return W(s.validateField(n))}),F(1),E()}if(r&2){let e=T().$implicit,i=T();Re("ngModel",i.settings[e.key]),R("required",e.required||!1),A(),Ze(" ",e.label," ")}}function FV(r,t){if(r&1&&(w(0,"mat-option",20),F(1),E()),r&2){let e=t.$implicit;R("value",e.value),A(),Ze(" ",e.label," ")}}function LV(r,t){if(r&1&&(w(0,"mat-error"),F(1),E()),r&2){let e=T(2).$implicit,i=T();A(),Ze(" ",i.fieldErrors[e.key]," ")}}function NV(r,t){if(r&1){let e=ie();w(0,"mat-form-field",13)(1,"mat-label"),F(2),E(),w(3,"mat-select",18),Fe("ngModelChange",function(n){H(e);let s=T().$implicit,o=T();return Oe(o.settings[s.key],n)||(o.settings[s.key]=n),W(n)}),U("ngModelChange",function(){H(e);let n=T().$implicit,s=T();return W(s.validateField(n))}),X(4,FV,2,2,"mat-option",19),E(),X(5,LV,2,1,"mat-error",15),E()}if(r&2){let e=T().$implicit,i=T();A(2),Te(e.label),A(),Re("ngModel",i.settings[e.key]),R("required",e.required||!1),A(),R("ngForOf",i.getSelectOptions(e)),A(),R("ngIf",i.fieldErrors[e.key])}}function BV(r,t){if(r&1&&(w(0,"mat-error"),F(1),E()),r&2){let e=T(2).$implicit,i=T();A(),Ze(" ",i.fieldErrors[e.key]," ")}}function VV(r,t){if(r&1){let e=ie();w(0,"mat-form-field",13)(1,"mat-label"),F(2),E(),w(3,"textarea",21),Fe("ngModelChange",function(n){H(e);let s=T().$implicit,o=T();return Oe(o.settings[s.key],n)||(o.settings[s.key]=n),W(n)}),U("ngModelChange",function(){H(e);let n=T().$implicit,s=T();return W(s.validateField(n))}),F(4,"            "),E(),X(5,BV,2,1,"mat-error",15),E()}if(r&2){let e=T().$implicit,i=T();A(2),Te(e.label),A(),Re("ngModel",i.settings[e.key]),R("placeholder",i.getTextFieldPlaceholder(e))("required",e.required||!1)("rows",5),A(2),R("ngIf",i.fieldErrors[e.key])}}function zV(r,t){if(r&1&&(w(0,"mat-error",25),F(1),E()),r&2){let e=T(2).$implicit,i=T();A(),Ze(" ",i.fieldErrors[e.key]," ")}}function HV(r,t){if(r&1){let e=ie();w(0,"div",22)(1,"label"),F(2),E(),w(3,"input",23),U("change",function(n){H(e);let s=T().$implicit,o=T();return W(o.onFileSelected(n,s.key))}),E(),X(4,zV,2,1,"mat-error",24),E()}if(r&2){let e=T().$implicit,i=T();A(2),Te(e.label),A(),R("accept",i.getFileAccept(e))("multiple",i.getFileMultiple(e))("required",e.required||!1),A(),R("ngIf",i.fieldErrors[e.key])}}function WV(r,t){if(r&1&&(w(0,"label"),F(1),E()),r&2){let e=T(2).$implicit;A(),Te(e.label)}}function UV(r,t){if(r&1&&(w(0,"div",26),X(1,WV,2,1,"label",15),w(2,"div",27),F(3),E()()),r&2){let e=T().$implicit,i=T();A(),R("ngIf",e.label),A(2),Te(i.settings[e.key]||"(No file selected)")}}function jV(r,t){if(r&1){let e=ie();w(0,"div",28)(1,"button",29),U("click",function(){H(e);let n=T().$implicit,s=T();return W(s.onFileButtonClick(n))}),w(2,"mat-icon"),F(3,"folder_open"),E(),w(4,"span"),F(5),E()(),re(6,"input",30,0),E()}if(r&2){let e=T().$implicit,i=T();A(5),Te(i.getFileButtonText(e)),A(),R("accept",i.getFileButtonAccept(e))}}function GV(r,t){if(r&1){let e=ie();w(0,"mat-form-field",41)(1,"mat-label"),F(2),E(),w(3,"input",35),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.value,n)||(s.value=n),W(n)}),U("ngModelChange",function(){H(e);let n=T(3).$implicit,s=T();return W(s.validateField(n))}),E()()}if(r&2){let e=T().$implicit,i=T(2).$implicit,n=T();A(2),Te(n.getMappingValueLabel(i)),A(),Re("ngModel",e.value)}}function $V(r,t){if(r&1&&(w(0,"div",48)(1,"mat-icon",49),F(2,"music_note"),E(),w(3,"span"),F(4),E()()),r&2){let e=T(2).$implicit,i=T(3);A(4),Te(i.getFileNames(e))}}function qV(r,t){if(r&1){let e=ie();w(0,"div",42)(1,"div",43)(2,"mat-checkbox",44),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.useFolderMode,n)||(s.useFolderMode=n),W(n)}),U("ngModelChange",function(){H(e);let n=T().index,s=T(2).$implicit,o=T();return W(o.toggleFolderMode(s,n))}),F(3," Select folder "),E()(),w(4,"button",45),U("click",function(){H(e);let n=T().index,s=T(2).$implicit,o=T();return W(o.triggerFileInput(s.key,n))}),w(5,"mat-icon"),F(6,"upload_file"),E(),w(7,"span"),F(8,"Select Files"),E()(),w(9,"input",46),U("change",function(n){H(e);let s=T().index,o=T(2).$implicit,l=T();return W(l.onMappingFileSelected(n,o.key,s))}),E(),X(10,$V,5,1,"div",47),E()}if(r&2){let e=T(),i=e.$implicit,n=e.index,s=T(2).$implicit,o=T();A(2),Re("ngModel",i.useFolderMode),A(7),R("accept",o.getMappingFileAccept(s))("multiple",o.getMappingFileMultiple(s)||i.useFolderMode),ye("webkitdirectory",i.useFolderMode?"":null)("data-field-key",s.key)("data-mapping-index",n),A(),R("ngIf",i.files&&i.files.length>0)}}function YV(r,t){if(r&1){let e=ie();w(0,"mat-checkbox",50),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.value,n)||(s.value=n),W(n)}),U("ngModelChange",function(){H(e);let n=T(3).$implicit,s=T();return W(s.validateField(n))}),F(1),E()}if(r&2){let e=T().$implicit,i=T(2).$implicit,n=T();Re("ngModel",e.value),A(),Ze(" ",n.getMappingValueLabel(i)," ")}}function XV(r,t){if(r&1){let e=ie();w(0,"mat-form-field",41)(1,"mat-label"),F(2),E(),w(3,"textarea",51),Fe("ngModelChange",function(n){H(e);let s=T().$implicit;return Oe(s.itemsText,n)||(s.itemsText=n),W(n)}),U("ngModelChange",function(){H(e);let n=T(3).$implicit,s=T();return W(s.validateField(n))}),F(4,"                  "),E()()}if(r&2){let e=T().$implicit,i=T(2).$implicit,n=T();A(2),Te(n.getMappingValueLabel(i)),A(),Re("ngModel",e.itemsText)}}function KV(r,t){if(r&1){let e=ie();w(0,"div",33)(1,"mat-form-field",34)(2,"mat-label"),F(3),E(),w(4,"input",35),Fe("ngModelChange",function(n){let s=H(e).$implicit;return Oe(s.key,n)||(s.key=n),W(n)}),U("ngModelChange",function(){H(e);let n=T(2).$implicit,s=T();return W(s.validateField(n))}),E()(),wi(5,36),X(6,GV,4,2,"mat-form-field",37)(7,qV,11,7,"div",38)(8,YV,2,2,"mat-checkbox",39)(9,XV,5,2,"mat-form-field",37),Ci(),w(10,"button",40),U("click",function(){let n=H(e).index,s=T(2).$implicit,o=T();return W(o.removeMapping(s.key,n))}),w(11,"mat-icon"),F(12,"delete"),E()()()}if(r&2){let e=t.$implicit,i=T(2).$implicit,n=T();A(3),Te(n.getMappingKeyLabel(i)),A(),Re("ngModel",e.key),A(),R("ngSwitch",n.getMappingValueType(i)),A(),R("ngSwitchCase","text"),A(),R("ngSwitchCase","file"),A(),R("ngSwitchCase","checkbox"),A(),R("ngSwitchCase","textarea")}}function ZV(r,t){if(r&1){let e=ie();w(0,"div",31)(1,"h3"),F(2),E(),X(3,KV,13,7,"div",32),w(4,"button",5),U("click",function(){H(e);let n=T().$implicit,s=T();return W(s.addMapping(n.key))}),w(5,"mat-icon"),F(6,"add"),E(),F(7," Add Item "),E()()}if(r&2){let e=T().$implicit,i=T();A(2),Te(e.label),A(),R("ngForOf",i.getMappingArray(e.key))}}function QV(r,t){if(r&1&&(wi(0),X(1,DV,5,5,"mat-form-field",7)(2,RV,5,6,"mat-form-field",7)(3,OV,2,3,"mat-checkbox",8)(4,NV,6,5,"mat-form-field",7)(5,VV,6,6,"mat-form-field",7)(6,HV,5,5,"div",9)(7,UV,4,2,"div",10)(8,jV,8,2,"div",11)(9,ZV,8,2,"div",12),Ci()),r&2){let e=t.$implicit;A(),R("ngIf",e.type==="text"),A(),R("ngIf",e.type==="number"),A(),R("ngIf",e.type==="checkbox"),A(),R("ngIf",e.type==="select"),A(),R("ngIf",e.type==="textarea"),A(),R("ngIf",e.type==="file"),A(),R("ngIf",e.type==="readonly-text"),A(),R("ngIf",e.type==="file-button"),A(),R("ngIf",e.type==="mapping")}}var Gu=class r{constructor(t,e){this.dialogRef=t;this.config=e.config,this.settings=J({},e.settings),this.initializeDefaultValues(),this.validateAllFields()}config;settings;fieldErrors={};isTextFieldConfig(t){return t.type==="text"}isNumberFieldConfig(t){return t.type==="number"}isSelectFieldConfig(t){return t.type==="select"}isFileFieldConfig(t){return t.type==="file"}isMappingFieldConfig(t){return t.type==="mapping"}isReadonlyTextFieldConfig(t){return t.type==="readonly-text"}isFileButtonFieldConfig(t){return t.type==="file-button"}getTextFieldPlaceholder(t){return this.isTextFieldConfig(t)&&t.placeholder||""}getNumberFieldMin(t){return this.isNumberFieldConfig(t)?t.min??null:null}getNumberFieldMax(t){return this.isNumberFieldConfig(t)?t.max??null:null}getSelectOptions(t){return this.isSelectFieldConfig(t)?t.options:[]}getFileAccept(t){return this.isFileFieldConfig(t)&&t.accept||"*"}getFileMultiple(t){return this.isFileFieldConfig(t)&&t.multiple||!1}getMappingKeyLabel(t){return this.isMappingFieldConfig(t)?t.mappingConfig.keyLabel:""}getMappingValueType(t){return this.isMappingFieldConfig(t)?t.mappingConfig.valueType:"text"}getMappingValueLabel(t){return this.isMappingFieldConfig(t)?t.mappingConfig.valueLabel:""}getMappingFileAccept(t){return this.isMappingFieldConfig(t)&&t.mappingConfig.fileAccept||"*"}getMappingFileMultiple(t){return this.isMappingFieldConfig(t)&&t.mappingConfig.multiple||!1}getMappingDirectory(t){return this.isMappingFieldConfig(t)&&t.mappingConfig.directory||!1}getMappingArray(t){return this.settings[t]||[]}initializeDefaultValues(){this.config.fields.forEach(t=>{t.defaultValue!==void 0&&this.settings[t.key]===void 0&&(this.settings[t.key]=t.defaultValue),t.type==="mapping"&&!Array.isArray(this.settings[t.key])&&(this.settings[t.key]=[])})}validateField(t){t.required&&!this.settings[t.key]?this.fieldErrors[t.key]=`${t.label} is required`:delete this.fieldErrors[t.key]}validateAllFields(){this.config.fields.forEach(t=>{this.validateField(t)})}isValid(){return this.validateAllFields(),Object.keys(this.fieldErrors).length===0}onFileSelected(t,e){let i=t.target;if(i.files&&i.files[0]){let n=i.files[0],s=new FileReader;s.onload=()=>{this.settings[e]={fileName:n.name,fileDataUrl:s.result},this.validateField(this.config.fields.find(o=>o.key===e))},s.readAsDataURL(n)}}onMappingFileSelected(t,e,i){let s=t.target.files;if(!s||s.length===0)return;let o=[],l=0;for(let d=0;d<s.length;d++){let h=s[d],u=new FileReader;u.onload=()=>{if(o.push({fileName:h.name,fileDataUrl:u.result}),l++,l===s.length){this.settings[e][i]=Ue(J({},this.settings[e][i]),{files:o});let m=this.config.fields.find(f=>f.key===e);m&&this.validateField(m)}},u.readAsDataURL(h)}}addMapping(t){Array.isArray(this.settings[t])||(this.settings[t]=[]),this.settings[t].push({key:"",value:"",useFolderMode:!1});let e=this.config.fields.find(i=>i.key===t);e&&this.validateField(e)}removeMapping(t,e){this.settings[t].splice(e,1);let i=this.config.fields.find(n=>n.key===t);i&&this.validateField(i)}toggleFolderMode(t,e){let i=this.settings[t.key][e];i&&i.useFolderMode===!1&&(i.files=[])}triggerFileInput(t,e){let i=`input[data-field-key="${t}"][data-mapping-index="${e}"]`,n=document.querySelector(i);n&&n.click()}save(){this.validateAllFields(),this.isValid()&&this.dialogRef.close(this.settings)}getFileNames(t){return t.files&&Array.isArray(t.files)?t.files.map(e=>e.fileName).join(", "):""}getFileButtonText(t){return this.isFileButtonFieldConfig(t)&&t.buttonText||"Select File"}getFileButtonAccept(t){return this.isFileButtonFieldConfig(t)&&t.accept||"*"}onFileButtonClick(t){if(t.key==="openFileButton")this.settings._openFilePickerRequested=!0,this.dialogRef.close(this.settings);else if(t.key==="createFileButton")this.settings._createFilePickerRequested=!0,this.dialogRef.close(this.settings);else{let e=this.config.fields.indexOf(t),n=document.querySelectorAll('.file-button-field input[type="file"]')[e];n&&(n.onchange=s=>q(this,null,function*(){yield this.onFileButtonSelected(s,t)}),n.click())}}onFileButtonSelected(t,e){return q(this,null,function*(){let i=t.target;if(i.files&&i.files[0])try{this.settings._filePickerRequested=!0,this.dialogRef.close(this.settings)}catch(n){console.error("Error selecting file:",n)}})}static \u0275fac=function(e){return new(e||r)(we(Nn),we(Xs))};static \u0275cmp=oe({type:r,selectors:[["app-base-settings-dialog"]],decls:10,vars:3,consts:[["fileInput",""],["mat-dialog-title",""],[1,"settings-form"],[4,"ngFor","ngForOf"],["align","end"],["mat-button","",3,"click"],["mat-button","","color","primary",3,"click","disabled"],["class","full-width","appearance","outline",4,"ngIf"],["class","full-width",3,"ngModel","required","ngModelChange",4,"ngIf"],["class","file-field",4,"ngIf"],["class","readonly-field",4,"ngIf"],["class","file-button-field",4,"ngIf"],["class","mapping-field glass-panel",4,"ngIf"],["appearance","outline",1,"full-width"],["matInput","",3,"ngModelChange","ngModel","placeholder","required"],[4,"ngIf"],["matInput","","type","number",3,"ngModelChange","ngModel","min","max","required"],[1,"full-width",3,"ngModelChange","ngModel","required"],[3,"ngModelChange","ngModel","required"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","",3,"ngModelChange","ngModel","placeholder","required","rows"],[1,"file-field"],["type","file",3,"change","accept","multiple","required"],["class","field-error",4,"ngIf"],[1,"field-error"],[1,"readonly-field"],[1,"readonly-text"],[1,"file-button-field"],["mat-button","",1,"file-button",3,"click"],["type","file",2,"display","none",3,"accept"],[1,"mapping-field","glass-panel"],["class","mapping-item",4,"ngFor","ngForOf"],[1,"mapping-item"],["appearance","outline",1,"mapping-key"],["matInput","",3,"ngModelChange","ngModel"],[3,"ngSwitch"],["class","mapping-value","appearance","outline",4,"ngSwitchCase"],["class","mapping-file",4,"ngSwitchCase"],["class","mapping-value",3,"ngModel","ngModelChange",4,"ngSwitchCase"],["mat-icon-button","","color","warn",3,"click"],["appearance","outline",1,"mapping-value"],[1,"mapping-file"],[1,"file-selection-toggle"],[1,"folder-toggle",3,"ngModelChange","ngModel"],["mat-button","",1,"file-input-button",3,"click"],["type","file",2,"display","none",3,"change","accept","multiple"],["class","file-names-display",4,"ngIf"],[1,"file-names-display"],[1,"file-icon"],[1,"mapping-value",3,"ngModelChange","ngModel"],["matInput","","rows","3",3,"ngModelChange","ngModel"]],template:function(e,i){e&1&&(w(0,"h2",1),F(1),E(),w(2,"mat-dialog-content")(3,"div",2),X(4,QV,10,9,"ng-container",3),E()(),w(5,"mat-dialog-actions",4)(6,"button",5),U("click",function(){return i.dialogRef.close()}),F(7,"Cancel"),E(),w(8,"button",6),U("click",function(){return i.save()}),F(9," Save "),E()()),e&2&&(A(),Te(i.config.title),A(3),R("ngForOf",i.config.fields),A(4),R("disabled",!i.isValid()))},dependencies:[lt,Lt,Vt,dd,hd,jt,Xt,Zs,si,Ff,dl,cl,Kt,yn,bs,Wo,vs,Un,bu,ra,lk,sa,vu,Zl,Tu,No,Jk,ju,wt,gi,Ei,St,Ht],styles:["h2[mat-dialog-title][_ngcontent-%COMP%]{color:var(--text-primary);margin:0 0 16px;font-size:20px}.settings-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px 0;min-width:300px;color:var(--text-primary)}.full-width[_ngcontent-%COMP%]{width:100%}.file-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:8px;background:var(--input-bg);border:var(--glass-border);border-radius:8px;color:var(--text-primary)}.file-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);font-weight:500}.readonly-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:8px;background:var(--input-bg);border:var(--glass-border);border-radius:8px;color:var(--text-primary)}.readonly-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;color:var(--text-secondary);font-weight:500}.readonly-text[_ngcontent-%COMP%]{padding:8px;color:var(--accent-color);font-family:monospace}.file-button-field[_ngcontent-%COMP%]{padding:8px}.file-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;gap:8px;justify-content:flex-start;border:var(--glass-border);background:var(--input-bg);color:var(--text-primary)}.file-button[_ngcontent-%COMP%]:hover{background:var(--header-bg);border-color:var(--accent-color)}.mapping-field[_ngcontent-%COMP%]{border:var(--glass-border);padding:16px;border-radius:8px;background:var(--panel-bg);margin-top:8px}.mapping-field[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:var(--accent-color);font-size:14px;text-transform:uppercase;letter-spacing:.5px;border-bottom:1px solid rgba(255,255,255,.1);padding-bottom:8px;margin-bottom:12px}.mapping-item[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-start;margin-bottom:12px;padding:12px;background:var(--panel-bg);border-radius:6px;border:1px solid rgba(255,255,255,.05)}.mapping-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.mapping-key[_ngcontent-%COMP%]{width:30%}.mapping-value[_ngcontent-%COMP%]{flex:1}.mapping-file[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:8px}.file-selection-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;padding:4px 0}.folder-toggle[_ngcontent-%COMP%]{font-size:12px}.file-names-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 10px;background:#64ffda1a;border-radius:4px;border:1px solid rgba(100,255,218,.2);font-size:12px;color:var(--accent-color)}.file-icon[_ngcontent-%COMP%]{font-size:14px;height:14px;width:14px;opacity:.8}.file-input-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;background:var(--header-bg);border:1px solid rgba(255,255,255,.2);color:var(--text-primary);font-size:12px;padding:6px 12px;width:100%;justify-content:center}.file-input-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}.field-error[_ngcontent-%COMP%]{color:var(--danger-color);font-size:12px;margin-top:4px}  .mat-mdc-form-field{--mdc-filled-text-field-container-color: var(--input-bg);--mdc-filled-text-field-focus-active-indicator-color: var(--accent-color);--mdc-filled-text-field-active-indicator-color: var(--accent-color);--mdc-filled-text-field-caret-color: var(--accent-color)}  .mat-mdc-text-field-wrapper{background-color:var(--input-bg)!important}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{caret-color:var(--accent-color)!important}  input::placeholder,   textarea::placeholder{color:var(--text-muted)!important;opacity:1!important}"]})};var $u=class r{constructor(t){this.dialog=t}openSettings(t,e){return this.dialog.open(Gu,{width:"500px",data:{config:t,settings:e}}).afterClosed()}static \u0275fac=function(e){return new(e||r)(Je(_s))};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})};var e3=["notepad"];function t3(r,t){if(r&1){let e=ie();w(0,"button",5),U("click",function(n){H(e);let s=T();return W(s.openSettings(n))}),w(1,"mat-icon"),F(2,"settings"),E()()}}function i3(r,t){if(r&1){let e=ie();w(0,"app-image-pdf-viewer",12),U("settingsChange",function(){H(e);let n=T();return W(n.onSettingsChange())}),E()}if(r&2){let e=T();R("settings",e.widgetData.settings)("widgetId",e.widgetData.id)}}function n3(r,t){if(r&1&&re(0,"app-notepad",13,0),r&2){let e=T();R("settings",e.widgetData.settings)}}function r3(r,t){if(r&1){let e=ie();w(0,"app-random-generator",14),U("settingsChange",function(){H(e);let n=T();return W(n.onSettingsChange())}),E()}if(r&2){let e=T();R("settings",e.widgetData.settings)}}function s3(r,t){if(r&1&&re(0,"app-dice-tool",13),r&2){let e=T();R("settings",e.widgetData.settings)}}function o3(r,t){if(r&1){let e=ie();w(0,"app-music-widget",12),U("settingsChange",function(){H(e);let n=T();return W(n.onSettingsChange())}),E()}if(r&2){let e=T();R("settings",e.widgetData.settings)("widgetId",e.widgetData.id)}}function a3(r,t){if(r&1){let e=ie();w(0,"app-wiki-widget",14),U("settingsChange",function(){H(e);let n=T();return W(n.onSettingsChange())}),E()}if(r&2){let e=T();R("settings",e.widgetData.settings)}}function l3(r,t){if(r&1&&re(0,"app-combat-tracker",13),r&2){let e=T();R("settings",e.widgetData.settings)}}function c3(r,t){if(r&1&&re(0,"app-daytime-tracker",13),r&2){let e=T();R("settings",e.widgetData.settings)}}function d3(r,t){if(r&1&&re(0,"app-llm-chat",13),r&2){let e=T();R("settings",e.widgetData.settings)}}function h3(r,t){if(r&1){let e=ie();w(0,"app-hex-map",14),U("settingsChange",function(){H(e);let n=T();return W(n.onSettingsChange())}),E()}if(r&2){let e=T();R("settings",e.widgetData.settings)}}var qu=class r{constructor(t,e){this.settingsService=t;this.elementRef=e}widgetData;closeEvent=new fe;update=new fe;notepadComponent;isMaximized=!1;previousPosition;previousSize;viewportWidth=window.innerWidth;viewportHeight=window.innerHeight;TAB_BAR_HEIGHT=52;onResize(){this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.isMaximized||this.ensureWidgetIsVisible()}get hasSettings(){return!!this.getWidgetSettingsConfig(this.widgetData.type)}getTitle(t){return this.widgetData.settings?.title?this.widgetData.settings.title:{IMAGE_PDF:"Image/PDF Viewer",NOTEPAD:"Notepad",RANDOM_GENERATOR:"Random Generator",DICE_TOOL:"Dice Tool",MUSIC_WIDGET:"Music Widget",WIKI_WIDGET:"Wiki",COMBAT_TRACKER:"Combat Tracker",DAYTIME_TRACKER:"Daytime Tracker",LLM_CHAT:"LLM Chat",HEX_MAP:"Hex Map"}[t]||"Widget"}openSettings(t){t.stopPropagation();let e=this.getWidgetSettingsConfig(this.widgetData.type);e&&this.settingsService.openSettings(e,this.widgetData.settings).subscribe(i=>q(this,null,function*(){i&&this.notepadComponent?(i._openFilePickerRequested&&(delete i._openFilePickerRequested,yield this.notepadComponent.openNewFile(),i.fileName=this.widgetData.settings.fileName),i._createFilePickerRequested&&(delete i._createFilePickerRequested,yield this.notepadComponent.createNewFileFromSettings(),i.fileName=this.widgetData.settings.fileName),this.widgetData.settings=i,this.update.emit()):i&&(this.widgetData.settings=i,this.update.emit())}))}getWidgetSettingsConfig(t){switch(t){case"DICE_TOOL":return{title:"Dice Tool Settings",fields:[{key:"enableD4",type:"checkbox",label:"Enable d4",defaultValue:!0},{key:"enableD6",type:"checkbox",label:"Enable d6",defaultValue:!0},{key:"enableD8",type:"checkbox",label:"Enable d8",defaultValue:!0},{key:"enableD10",type:"checkbox",label:"Enable d10",defaultValue:!0},{key:"enableD12",type:"checkbox",label:"Enable d12",defaultValue:!0},{key:"enableD20",type:"checkbox",label:"Enable d20",defaultValue:!0},{key:"enableD100",type:"checkbox",label:"Enable d100",defaultValue:!0},{key:"customButtons",type:"mapping",label:"Custom Dice Buttons",mappingConfig:{keyLabel:'Button Label (e.g. "Fireball", "Attack")',valueType:"text",valueLabel:'Formula (e.g. "8d6", "1d20+5")'}},{key:"showCustomDiceInput",type:"checkbox",label:"Show Manual Input Field"}]};case"NOTEPAD":return{title:"Notepad Settings",fields:[{key:"fileName",type:"readonly-text",label:"Current File"},{key:"openFileButton",type:"file-button",label:"Open Different File",buttonText:"Open File",accept:"text/plain"},{key:"createFileButton",type:"file-button",label:"Create New File",buttonText:"Create New File",accept:"text/plain"}]};case"MUSIC_WIDGET":return{title:"Music Widget Settings",fields:[{key:"allowMultiple",type:"checkbox",label:"Allow multiple simultaneous playback"},{key:"fadeDuration",type:"number",label:"Fade duration (seconds)",defaultValue:.5},{key:"mappings",type:"mapping",label:"Sound Tracks",mappingConfig:{keyLabel:"Label",valueType:"file",valueLabel:"Audio Files",fileAccept:"audio/*",multiple:!0}}]};case"RANDOM_GENERATOR":return{title:"Random Generator Settings",fields:[{key:"useWeightedSelection",type:"checkbox",label:"Use weighted selection and hide number prefixes",defaultValue:!0},{key:"mappings",type:"mapping",label:"Random Lists",mappingConfig:{keyLabel:"List Name",valueType:"textarea",valueLabel:"Items (one per line)"}},{key:"mappingCategories",type:"mapping",label:"Categorize Lists (Optional)",mappingConfig:{keyLabel:"List Name (must match above)",valueType:"text",valueLabel:"Category (leave empty for no category)"}}]};case"COMBAT_TRACKER":return{title:"Combat Tracker Settings",fields:[{key:"gameMode",type:"select",label:"Game Mode",options:[{value:"general",label:"General"},{value:"mutant_year_zero",label:"Mutant Year Zero"}],defaultValue:"general"},{key:"showRoundCounter",type:"checkbox",label:"Show round counter"},{key:"autoSort",type:"checkbox",label:"Automatically sort by initiative"},{key:"defaultInitiative",type:"number",label:"Default Initiative",defaultValue:0}]};case"WIKI_WIDGET":return{title:"Wiki Settings",fields:[{key:"autoSave",type:"checkbox",label:"Auto-save changes"},{key:"defaultView",type:"select",label:"Default View",options:[{value:"edit",label:"Edit Mode"},{value:"preview",label:"Preview Mode"}]}]};case"LLM_CHAT":return{title:"LLM Chat Settings",fields:[{key:"apiKey",type:"text",label:"API Key",placeholder:"Enter your API Key",required:!0},{key:"model",type:"text",label:"Model",placeholder:"Enter the model name",required:!0,defaultValue:"gpt-5-mini-2025-08-07"},{key:"temperature",type:"number",label:"Temperature (leave empty for default)",required:!1,min:0,max:2},{key:"prompt",type:"textarea",label:"Prompt",placeholder:"Enter your prompt here",required:!0,defaultValue:"You are an very experience DM. I'm running a mutant year zero campaign. My current campaign notes include details about people, locations, scenes and more. I'm looking for fresh ideas to enhance the story. Please help me the during my dm session, which I am currently holding, with questions where i might need inspiration or have other questions."}]};case"HEX_MAP":return{title:"Hex Map Settings",fields:[{key:"gridWidth",type:"number",label:"Grid Width (columns)",defaultValue:10},{key:"gridHeight",type:"number",label:"Grid Height (rows)",defaultValue:8},{key:"hexSize",type:"number",label:"Hex Size (pixels)",defaultValue:30},{key:"defaultColor",type:"text",label:"Default Hex Color",placeholder:"#374151",defaultValue:"#374151"},{key:"showCoordinates",type:"checkbox",label:"Show coordinates in empty hexes"}]};default:return null}}onDragEnd(t){let e=t.distance,i=this.widgetData.position.x+e.x,n=this.widgetData.position.y+e.y,s=this.widgetData.size.width,o=this.widgetData.size.height,l=Math.max(0,Math.min(i,this.viewportWidth-s)),d=Math.max(this.TAB_BAR_HEIGHT,Math.min(n,this.viewportHeight-o));this.widgetData.position={x:l,y:d},this.update.emit()}onResizeEnd(t){this.widgetData.size=t,this.ensureWidgetIsVisible(),this.update.emit()}ensureWidgetIsVisible(){let t=this.widgetData.size.width,e=this.widgetData.size.height,i=this.widgetData.position.x,n=this.widgetData.position.y,s=t,o=e;t>this.viewportWidth&&(s=this.viewportWidth),e>this.viewportHeight-this.TAB_BAR_HEIGHT&&(o=this.viewportHeight-this.TAB_BAR_HEIGHT),(s!==t||o!==e)&&(this.widgetData.size={width:s,height:o});let l=Math.max(0,Math.min(i,this.viewportWidth-s)),d=Math.max(this.TAB_BAR_HEIGHT,Math.min(n,this.viewportHeight-o));(l!==i||d!==n)&&(this.widgetData.position={x:l,y:d}),this.update.emit()}toggleMaximize(t){t.stopPropagation(),this.isMaximized?(this.widgetData.position=J({},this.previousPosition),this.widgetData.size=J({},this.previousSize),this.ensureWidgetIsVisible()):(this.previousPosition=J({},this.widgetData.position),this.previousSize=J({},this.widgetData.size),this.widgetData.position={x:0,y:this.TAB_BAR_HEIGHT},this.widgetData.size={width:this.viewportWidth,height:this.viewportHeight-this.TAB_BAR_HEIGHT}),this.isMaximized=!this.isMaximized,this.update.emit()}close(t){t.stopPropagation(),this.closeEvent.emit()}onSettingsChange(){this.update.emit()}static \u0275fac=function(e){return new(e||r)(we($u),we(ve))};static \u0275cmp=oe({type:r,selectors:[["app-widget-container"]],viewQuery:function(e,i){if(e&1&&Le(e3,5),e&2){let n;Ee(n=Se())&&(i.notepadComponent=n.first)}},hostBindings:function(e,i){e&1&&U("resize",function(s){return i.onResize(s)},!1,Vs)},inputs:{widgetData:"widgetData"},outputs:{closeEvent:"closeEvent",update:"update"},decls:24,vars:19,consts:[["notepad",""],["cdkDrag","","appResizable","",1,"widget-container",3,"cdkDragEnded","resizeEnd","cdkDragFreeDragPosition","resizableWidth","resizableHeight"],["cdkDragHandle","",1,"widget-header"],[1,"title"],[1,"controls"],["mat-icon-button","",3,"click"],["mat-icon-button","",3,"click",4,"ngIf"],[1,"widget-content"],[3,"ngSwitch"],[3,"settings","widgetId","settingsChange",4,"ngSwitchCase"],[3,"settings",4,"ngSwitchCase"],[3,"settings","settingsChange",4,"ngSwitchCase"],[3,"settingsChange","settings","widgetId"],[3,"settings"],[3,"settingsChange","settings"]],template:function(e,i){e&1&&(w(0,"div",1),U("cdkDragEnded",function(s){return i.onDragEnd(s)})("resizeEnd",function(s){return i.onResizeEnd(s)}),w(1,"div",2)(2,"span",3),F(3),E(),w(4,"div",4)(5,"button",5),U("click",function(s){return i.toggleMaximize(s)}),w(6,"mat-icon"),F(7),E()(),X(8,t3,3,0,"button",6),w(9,"button",5),U("click",function(s){return i.close(s)}),w(10,"mat-icon"),F(11,"close"),E()()()(),w(12,"div",7),wi(13,8),X(14,i3,1,2,"app-image-pdf-viewer",9)(15,n3,2,1,"app-notepad",10)(16,r3,1,1,"app-random-generator",11)(17,s3,1,1,"app-dice-tool",10)(18,o3,1,2,"app-music-widget",9)(19,a3,1,1,"app-wiki-widget",11)(20,l3,1,1,"app-combat-tracker",10)(21,c3,1,1,"app-daytime-tracker",10)(22,d3,1,1,"app-llm-chat",10)(23,h3,1,1,"app-hex-map",11),Ci(),E()()),e&2&&(ce("maximized",i.isMaximized),R("cdkDragFreeDragPosition",i.widgetData.position)("resizableWidth",i.widgetData.size.width)("resizableHeight",i.widgetData.size.height),A(3),Te(i.getTitle(i.widgetData.type)),A(4),Te(i.isMaximized?"fullscreen_exit":"fullscreen"),A(),R("ngIf",i.hasSettings),A(5),R("ngSwitch",i.widgetData.type),A(),R("ngSwitchCase","IMAGE_PDF"),A(),R("ngSwitchCase","NOTEPAD"),A(),R("ngSwitchCase","RANDOM_GENERATOR"),A(),R("ngSwitchCase","DICE_TOOL"),A(),R("ngSwitchCase","MUSIC_WIDGET"),A(),R("ngSwitchCase","WIKI_WIDGET"),A(),R("ngSwitchCase","COMBAT_TRACKER"),A(),R("ngSwitchCase","DAYTIME_TRACKER"),A(),R("ngSwitchCase","LLM_CHAT"),A(),R("ngSwitchCase","HEX_MAP"))},dependencies:[lt,Vt,dd,hd,wt,Ei,St,Ht,vh,bh,_h,mu,fu,gu,yu,Cu,Au,Iu,Du,Pu,Ou,Uu],styles:[".widget-container[_ngcontent-%COMP%]{border-radius:8px;position:absolute;background:var(--glass-bg);border:var(--glass-border);box-shadow:var(--glass-shadow);backdrop-filter:var(--glass-backdrop);-webkit-backdrop-filter:var(--glass-backdrop);color:var(--text-primary);display:flex;flex-direction:column;overflow:hidden;z-index:2}.widget-container.cdk-drag-dragging[_ngcontent-%COMP%]{cursor:grabbing}.widget-container.maximized[_ngcontent-%COMP%]{z-index:9999}.widget-header[_ngcontent-%COMP%]{background:var(--header-bg);border-bottom:var(--glass-border);color:var(--text-primary);padding:2px 4px;display:flex;justify-content:space-between;align-items:center;cursor:grab;user-select:none;-webkit-user-select:none;height:28px}.widget-header[_ngcontent-%COMP%]:active{cursor:grabbing}.widget-header[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]{width:24px;height:24px;padding:0;display:flex;align-items:center;justify-content:center;line-height:24px;color:var(--text-secondary)}.widget-header[_ngcontent-%COMP%]   .mat-mdc-icon-button[_ngcontent-%COMP%]:hover{color:var(--text-primary)}.widget-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px}.controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2px}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--text-secondary);border-radius:4px;transition:all .2s ease}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--accent-color);color:#fff}.widget-content[_ngcontent-%COMP%]{flex:1;overflow:auto;padding:8px;color:var(--text-primary)}.widget-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px;height:8px}.widget-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ffffff1a;border-radius:4px}.widget-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.title[_ngcontent-%COMP%]{margin-right:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:13px;font-weight:500;line-height:24px;color:var(--text-primary);text-shadow:0 1px 2px rgba(0,0,0,.3)}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:8px;background:var(--glass-bg);-webkit-backdrop-filter:var(--glass-backdrop);backdrop-filter:var(--glass-backdrop);border:1px solid rgba(255,255,255,.3);box-shadow:0 10px 20px #0006}.cdk-drag-preview[_ngcontent-%COMP%]   .widget-header[_ngcontent-%COMP%]{background:var(--header-bg)}"]})};var Yu=class r{widgetsKey="dm-tool-widgets";tabsKey="dm-tool-tabs";activeTabKey="dm-tool-active-tab";saveWidgets(t){localStorage.setItem(this.widgetsKey,JSON.stringify(t))}loadWidgets(){let t=localStorage.getItem(this.widgetsKey);return t?JSON.parse(t):[]}saveTabs(t,e){try{let i=JSON.parse(JSON.stringify(t));for(let n of i)for(let s of n.widgets)s.type==="MUSIC_WIDGET"&&s.settings?.mappings&&(s.settings.mappings=s.settings.mappings.map(o=>Ue(J({},o),{files:o.files?.map(l=>({fileName:l.fileName}))})));localStorage.setItem(this.tabsKey,JSON.stringify(i)),localStorage.setItem(this.activeTabKey,e)}catch(i){console.error("Error saving tabs to localStorage:",i)}}loadTabs(){let t=localStorage.getItem(this.tabsKey),e=localStorage.getItem(this.activeTabKey),i=t?JSON.parse(t):[];if(i.length===0){let s=this.loadWidgets(),o={id:Date.now().toString(),name:"Main Tab",widgets:s};i.push(o)}let n=e&&i.some(s=>s.id===e)?e:i.length>0?i[0].id:"";return{tabs:i,activeTabId:n}}static \u0275fac=function(e){return new(e||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})};var Xu=class r{workspaceSubject=new is({tabs:[],activeTabId:"",widgets:[]});workspace$=this.workspaceSubject.asObservable();updateWorkspace(t,e){let n=t.find(s=>s.id===e)?.widgets||[];this.workspaceSubject.next({tabs:t,activeTabId:e,widgets:n})}getWidget(t){return this.workspaceSubject.value.tabs.find(i=>i.id===this.workspaceSubject.value.activeTabId)?.widgets.find(i=>i.type===t)}getAllWidgets(){return this.workspaceSubject.value.tabs.find(e=>e.id===this.workspaceSubject.value.activeTabId)?.widgets||[]}static \u0275fac=function(e){return new(e||r)};static \u0275prov=se({token:r,factory:r.\u0275fac,providedIn:"root"})};var m3=r=>({"background-image":r});function f3(r,t){if(r&1&&(w(0,"span",12),F(1),E()),r&2){let e=T().$implicit;A(),Te(e.name)}}function g3(r,t){if(r&1){let e=ie();w(0,"input",13),Fe("ngModelChange",function(n){H(e);let s=T(2);return Oe(s.tempTabName,n)||(s.tempTabName=n),W(n)}),U("blur",function(){H(e);let n=T(2);return W(n.finishEditingTab())})("keydown.enter",function(){H(e);let n=T(2);return W(n.finishEditingTab())})("keydown.escape",function(){H(e);let n=T(2);return W(n.editingTabId=null)})("click",function(n){return H(e),W(n.stopPropagation())}),E()}if(r&2){let e=T().$implicit,i=T();R("id","tab-name-input-"+e.id),Re("ngModel",i.tempTabName)}}function _3(r,t){if(r&1){let e=ie();w(0,"button",14),U("click",function(n){H(e);let s=T().$implicit,o=T();return W(o.removeTab(s.id,n))}),w(1,"mat-icon"),F(2,"close"),E()()}}function b3(r,t){if(r&1){let e=ie();w(0,"div",8),U("click",function(){let n=H(e).$implicit,s=T();return W(s.switchTab(n.id))})("dblclick",function(n){let s=H(e).$implicit,o=T();return W(o.startEditingTab(s.id,n))}),X(1,f3,2,1,"span",9)(2,g3,1,2,"input",10)(3,_3,3,0,"button",11),E()}if(r&2){let e=t.$implicit,i=T();ce("active",e.id===i.activeTabId)("editing",i.editingTabId===e.id),A(),R("ngIf",i.editingTabId!==e.id),A(),R("ngIf",i.editingTabId===e.id),A(),R("ngIf",i.tabs.length>1&&i.editingTabId!==e.id)}}function v3(r,t){if(r&1){let e=ie();wi(0),w(1,"app-widget-container",15),U("closeEvent",function(){let n=H(e).$implicit,s=T();return W(s.removeWidget(n.id))})("update",function(){H(e);let n=T();return W(n.saveWidgets())}),E(),Ci()}if(r&2){let e=t.$implicit;A(),R("widgetData",e)}}var Ku=class r{constructor(t,e,i,n){this.dialog=t;this.widgetStorage=e;this.workspaceService=i;this.cdr=n}tabs=[];activeTabId="";backgrounds=["/dm-tool/backgrounds/glass.png","/dm-tool/backgrounds/glass_dragon.png","/dm-tool/backgrounds/glass_zombie.png"];currentBackgroundIndex=0;editingTabId=null;tempTabName="";get widgets(){return this.tabs.find(e=>e.id===this.activeTabId)?.widgets||[]}get currentBackground(){return this.backgrounds[this.currentBackgroundIndex]}ngOnInit(){let{tabs:t,activeTabId:e}=this.widgetStorage.loadTabs();this.tabs=t,this.activeTabId=e,this.workspaceService.updateWorkspace(this.tabs,this.activeTabId)}openWidgetSelector(){this.dialog.open(Yd,{width:"680px"}).afterClosed().subscribe(e=>{e&&(e.action==="add"&&e.type?this.addWidget(e.type):e.action==="reset"&&this.resetWorkspace(),this.cdr.markForCheck())})}addWidget(t){let e=this.tabs.find(n=>n.id===this.activeTabId);if(!e)return;let i={id:Date.now().toString(),type:t,position:{x:100,y:100},size:{width:300,height:200},settings:{}};e.widgets.push(i),this.saveTabs()}removeWidget(t){let e=this.tabs.find(i=>i.id===this.activeTabId);e&&(e.widgets=e.widgets.filter(i=>i.id!==t),this.saveTabs(),this.cdr.markForCheck())}resetWorkspace(){let t=this.tabs.find(e=>e.id===this.activeTabId);t&&(t.widgets=[],this.saveTabs(),this.cdr.markForCheck())}saveTabs(){this.widgetStorage.saveTabs(this.tabs,this.activeTabId),this.workspaceService.updateWorkspace(this.tabs,this.activeTabId)}saveWidgets(){this.saveTabs()}addTab(){let t={id:Date.now().toString(),name:`Tab ${this.tabs.length+1}`,widgets:[]};this.tabs.push(t),this.activeTabId=t.id,this.saveTabs(),this.cdr.markForCheck()}switchTab(t){this.activeTabId=t,this.saveTabs(),this.cdr.markForCheck()}removeTab(t,e){e&&e.stopPropagation(),!(this.tabs.length<=1)&&(this.tabs=this.tabs.filter(i=>i.id!==t),this.activeTabId===t&&(this.activeTabId=this.tabs[0].id),this.saveTabs(),this.cdr.markForCheck())}startEditingTab(t,e){e.stopPropagation();let i=this.tabs.find(n=>n.id===t);i&&(this.editingTabId=t,this.tempTabName=i.name,this.cdr.markForCheck(),setTimeout(()=>{let n=document.getElementById(`tab-name-input-${t}`);n&&n.focus()},0))}finishEditingTab(){if(this.editingTabId){let t=this.tabs.find(e=>e.id===this.editingTabId);t&&this.tempTabName.trim()&&(t.name=this.tempTabName.trim(),this.saveTabs())}this.editingTabId=null,this.cdr.markForCheck()}openBackgroundSelector(){this.dialog.open(Xd,{data:this.currentBackgroundIndex,panelClass:"background-selector-dialog"}).afterClosed().subscribe(e=>{e!=null&&(this.currentBackgroundIndex=e,this.cdr.markForCheck())})}nextBackground(){this.currentBackgroundIndex=(this.currentBackgroundIndex+1)%this.backgrounds.length,this.cdr.markForCheck()}previousBackground(){this.currentBackgroundIndex=(this.currentBackgroundIndex-1+this.backgrounds.length)%this.backgrounds.length,this.cdr.markForCheck()}trackByWidgetId(t,e){return e.id}trackByTabId(t,e){return e.id}cyclePrevious(t){t.preventDefault(),this.previousBackground()}cycleNext(t){t.preventDefault(),this.nextBackground()}static \u0275fac=function(e){return new(e||r)(we(_s),we(Yu),we(Xu),we($e))};static \u0275cmp=oe({type:r,selectors:[["app-workspace"]],hostBindings:function(e,i){e&1&&U("keydown.alt.arrowleft",function(s){return i.cyclePrevious(s)},!1,Vs)("keydown.alt.arrowright",function(s){return i.cycleNext(s)},!1,Vs)},decls:14,vars:7,consts:[[1,"workspace",3,"ngStyle"],[1,"tabs-bar","vertical"],[1,"tabs-container"],["class","tab",3,"active","editing","click","dblclick",4,"ngFor","ngForOf","ngForTrackBy"],["matTooltip","Add new tab",1,"add-tab-btn",3,"click"],["matTooltip","Change background",1,"bg-selector-btn",3,"click"],["matTooltip","Add new widget",1,"add-widget-btn",3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"tab",3,"click","dblclick"],["class","tab-name",4,"ngIf"],["class","tab-name-input",3,"id","ngModel","ngModelChange","blur","keydown.enter","keydown.escape","click",4,"ngIf"],["class","tab-close-btn","matTooltip","Close tab",3,"click",4,"ngIf"],[1,"tab-name"],[1,"tab-name-input",3,"ngModelChange","blur","keydown.enter","keydown.escape","click","id","ngModel"],["matTooltip","Close tab",1,"tab-close-btn",3,"click"],[3,"closeEvent","update","widgetData"]],template:function(e,i){e&1&&(w(0,"div",0)(1,"div",1)(2,"div",2),X(3,b3,4,7,"div",3),w(4,"button",4),U("click",function(){return i.addTab()}),w(5,"mat-icon"),F(6,"add"),E()(),w(7,"button",5),U("click",function(){return i.openBackgroundSelector()}),w(8,"mat-icon"),F(9,"palette"),E()(),w(10,"button",6),U("click",function(){return i.openWidgetSelector()}),w(11,"mat-icon"),F(12,"extension"),E()()()(),X(13,v3,2,1,"ng-container",7),E()),e&2&&(R("ngStyle",os(5,m3,"url("+i.currentBackground+")")),A(3),R("ngForOf",i.tabs)("ngForTrackBy",i.trackByTabId),A(10),R("ngForOf",i.widgets)("ngForTrackBy",i.trackByWidgetId))},dependencies:[lt,Lt,Vt,ud,jt,Xt,si,Kt,wt,St,Ht,yn,Zd,Kd,qu],styles:[".workspace[_ngcontent-%COMP%]{position:relative;width:100vw;height:100vh;background-size:cover;background-position:center;overflow:hidden;color:var(--text-primary)}.add-widget-btn[_ngcontent-%COMP%]{width:40px;height:40px;color:var(--text-secondary);background:#ffffff0d;border:1px dashed rgba(255,255,255,.2);border-radius:10px;margin-left:6px;padding:0;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);flex-shrink:0;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.add-widget-btn[_ngcontent-%COMP%]:hover{background:#40c4ff33;border-color:var(--accent-color);border-style:solid;color:var(--text-primary);transform:scale(1.05);box-shadow:0 4px 12px #40c4ff40}.add-widget-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.add-widget-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px;line-height:22px}.bg-selector-btn[_ngcontent-%COMP%]{width:40px;height:40px;color:var(--text-secondary);background:#ffffff0d;border:1px dashed rgba(255,255,255,.2);border-radius:10px;margin-left:6px;padding:0;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);flex-shrink:0;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.bg-selector-btn[_ngcontent-%COMP%]:hover{background:#a855f733;border-color:#a855f7;border-style:solid;color:var(--text-primary);transform:scale(1.05);box-shadow:0 4px 12px #a855f740}.bg-selector-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.bg-selector-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px;line-height:22px}.tabs-bar.vertical[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:52px;background:var(--glass-bg);-webkit-backdrop-filter:var(--glass-backdrop);backdrop-filter:var(--glass-backdrop);display:flex;flex-direction:row;align-items:center;padding:0 8px;z-index:100;border-bottom:1px solid rgba(255,255,255,.08);box-shadow:0 4px 20px #0003}.tabs-bar.vertical[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex:1;overflow-x:auto;overflow-y:hidden;scrollbar-width:none;gap:4px;align-items:center;padding:6px 0}.tabs-bar.vertical[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;align-items:center;min-width:100px;max-width:180px;height:36px;background:#ffffff08;border:1px solid rgba(255,255,255,.06);border-radius:8px;cursor:pointer;transition:all .2s ease;position:relative;padding:0 12px 0 14px;-webkit-user-select:none;user-select:none;color:var(--text-secondary)}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover{background:#ffffff14;border-color:#ffffff26;color:var(--text-primary)}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .tab-close-btn[_ngcontent-%COMP%]{opacity:1}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{background:#40c4ff26;border:1px solid var(--accent-color);box-shadow:0 2px 8px #40c4ff33;color:var(--text-primary)}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab.editing[_ngcontent-%COMP%]{background:var(--input-bg);border-color:var(--accent-color);box-shadow:0 4px 12px #0003}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-name[_ngcontent-%COMP%]{font-size:13px;font-weight:500;letter-spacing:.01em;color:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-name-input[_ngcontent-%COMP%]{width:100%;height:100%;font-size:13px;font-weight:500;background:transparent;border:none;outline:none;color:var(--text-primary);padding:0;margin:0}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close-btn[_ngcontent-%COMP%]{position:absolute;right:4px;width:18px;height:18px;background:#ff525233;border:1px solid rgba(255,82,82,.4);border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;padding:0;opacity:0;transition:all .2s;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close-btn[_ngcontent-%COMP%]:hover{background:var(--danger-color);border-color:var(--danger-color);transform:scale(1.1)}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-close-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px;line-height:12px;color:var(--text-primary)}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]   .tab-close-btn[_ngcontent-%COMP%]{opacity:0}.tabs-bar.vertical[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]:hover   .tab-close-btn[_ngcontent-%COMP%]{opacity:1}.tabs-bar.vertical[_ngcontent-%COMP%]   .add-tab-btn[_ngcontent-%COMP%]{width:40px;height:40px;color:var(--text-secondary);background:#ffffff0d;border:1px dashed rgba(255,255,255,.2);border-radius:10px;margin-left:6px;padding:0;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .25s cubic-bezier(.4,0,.2,1);flex-shrink:0;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.tabs-bar.vertical[_ngcontent-%COMP%]   .add-tab-btn[_ngcontent-%COMP%]:hover{background:#69f0ae33;border-color:var(--success-color);border-style:solid;color:var(--text-primary);transform:scale(1.05);box-shadow:0 4px 12px #69f0ae33}.tabs-bar.vertical[_ngcontent-%COMP%]   .add-tab-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.tabs-bar.vertical[_ngcontent-%COMP%]   .add-tab-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:22px;width:22px;height:22px;line-height:22px}"],changeDetection:0})};var Zu=class r{title="dm-tool";static \u0275fac=function(e){return new(e||r)};static \u0275cmp=oe({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(e,i){e&1&&re(0,"app-workspace")},dependencies:[lt,Ku,wt,St,yn],encapsulation:2})};var y3="@",x3=(()=>{class r{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=C(ft);loadingSchedulerFn=C(w3,{optional:!0});_engine;constructor(e,i,n,s,o){this.doc=e,this.delegate=i,this.zone=n,this.animationType=s,this.moduleImpl=o}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-Z4GW72UZ.js").then(n=>n),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(e):i=e(),i.catch(n=>{throw new mi(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:s})=>{this._engine=n(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(e,i){let n=this.delegate.createRenderer(e,i);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let s=new sb(n);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let l=o.createRenderer(e,i);s.use(l),this.scheduler??=this.injector.get(X0,null,{optional:!0}),this.scheduler?.notify(11)}).catch(o=>{s.use(n)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(i){ly()};static \u0275prov=se({token:r,factory:r.\u0275fac})}return r})(),sb=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,n){this.delegate.insertBefore(t,e,i,n)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,n){this.delegate.setAttribute(t,e,i,n)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,n){this.delegate.setStyle(t,e,i,n)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(n=>n.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i,n){return this.shouldReplay(e)&&this.replay.push(s=>s.listen(t,e,i,n)),this.delegate.listen(t,e,i,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(y3)}},w3=new te("");function e1(r="animations"){return wm("NgAsyncAnimations"),Ia([{provide:On,useFactory:(t,e,i)=>new x3(t,e,i,r),deps:[Ve,xd,ke]},{provide:Ft,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var t1={providers:[yy({eventCoalescing:!0}),e1(),Wy()]};Jy(Zu,t1).catch(r=>console.error(r));
